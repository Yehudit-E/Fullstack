import{$ as _t,$a as vi,$b as Au,A as wu,Aa as Wn,Ab as _,B as Ls,Ba as ge,Bb as Gn,Bc as Yn,C as Cu,Ca as pe,Cb as ve,Cc as Zn,D as Bs,Da as hn,Db as I,Dc as zu,E as n0,Ea as u0,Eb as w,Ec as ju,F as r0,Fa as Vs,Fb as zt,Fc as Vu,G as kt,Ga as m0,Gb as jt,H as Su,Ha as Vi,Hb as Vt,I as un,Ia as qr,Ib as bn,J as qn,Ja as _a,Jb as ot,K as Us,Ka as Hr,Kb as at,L as Mu,La as $r,Lb as Xn,M as Bt,Ma as p0,Mb as f,N as o0,Na as h0,Nb as N,O as fa,Oa as f0,Ob as X,P as mn,Pa as g0,Pb as M0,Q as pn,Qa as b0,Qb as It,R as Eu,Ra as _0,Rb as Pt,S as a0,Sa as v0,Sb as Ot,T as s0,Ta as Ut,Tb as Ue,U as l0,Ua as ci,Ub as se,V as zs,Va as y0,Vb as E0,W as li,Wa as x0,Wb as Ou,X as bt,Xa as va,Xb as ya,Y as ut,Ya as h,Yb as Du,Z as Fe,Za as M,Zb as Gs,_ as Ce,_a as qs,_b as Xs,a as O,aa as U,ab as w0,ac as Xr,b as _e,ba as ee,bb as Hs,bc as Ru,ca as c0,cb as $s,cc as yt,d as S,da as ne,db as fn,dc as k0,e as ES,ea as ku,eb as Tu,ec as Qe,f as g,fa as k,fb as he,fc as Fu,g as gt,ga as H,gb as gn,gc as T0,h as Yt,ha as ga,hb as Iu,hc as Yr,i as Ns,ia as js,ib as Ne,ic as I0,j as Et,ja as ba,jb as vt,jc as P0,k as Zt,ka as te,kb as C0,kc as le,l as t0,la as ae,lb as S0,lc as Nu,m as zr,ma as ie,mb as Ws,mc as Zr,n as vu,na as K,nb as L,nc as Ys,o as yu,oa as Hn,ob as Ke,oc as _n,p as ye,pa as d0,pb as R,pc as Zs,q as De,qa as jr,qb as Wr,qc as xe,r as dn,ra as ji,rb as $,rc as O0,s as dt,sa as $e,sb as qi,sc as D0,t as G,ta as z,tb as Pu,tc as Ks,u as Vn,ua as j,ub as V,uc as Qs,v as xu,va as E,vb as Gr,w as i0,wa as F,wb as We,x as J,xa as Tt,xb as Ge,xc as Lu,y as ha,ya as Vr,yb as c,yc as Bu,z as Kt,za as $n,zb as d,zc as Uu}from"./chunk-AK6TVGDB.js";var wv=S((KV,xv)=>{"use strict";var ko=1e3,To=ko*60,Io=To*60,pr=Io*24,bP=pr*7,_P=pr*365.25;xv.exports=function(i,t){t=t||{};var e=typeof i;if(e==="string"&&i.length>0)return vP(i);if(e==="number"&&isFinite(i))return t.long?xP(i):yP(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))};function vP(i){if(i=String(i),!(i.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(i);if(t){var e=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return e*_P;case"weeks":case"week":case"w":return e*bP;case"days":case"day":case"d":return e*pr;case"hours":case"hour":case"hrs":case"hr":case"h":return e*Io;case"minutes":case"minute":case"mins":case"min":case"m":return e*To;case"seconds":case"second":case"secs":case"sec":case"s":return e*ko;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return e;default:return}}}}function yP(i){var t=Math.abs(i);return t>=pr?Math.round(i/pr)+"d":t>=Io?Math.round(i/Io)+"h":t>=To?Math.round(i/To)+"m":t>=ko?Math.round(i/ko)+"s":i+"ms"}function xP(i){var t=Math.abs(i);return t>=pr?oc(i,t,pr,"day"):t>=Io?oc(i,t,Io,"hour"):t>=To?oc(i,t,To,"minute"):t>=ko?oc(i,t,ko,"second"):i+" ms"}function oc(i,t,e,n){var r=t>=e*1.5;return Math.round(i/e)+" "+n+(r?"s":"")}});var Sv=S((QV,Cv)=>{"use strict";function wP(i){e.debug=e,e.default=e,e.coerce=l,e.disable=a,e.enable=r,e.enabled=s,e.humanize=wv(),e.destroy=u,Object.keys(i).forEach(m=>{e[m]=i[m]}),e.names=[],e.skips=[],e.formatters={};function t(m){let p=0;for(let y=0;y<m.length;y++)p=(p<<5)-p+m.charCodeAt(y),p|=0;return e.colors[Math.abs(p)%e.colors.length]}e.selectColor=t;function e(m){let p,y=null,v,P;function b(...x){if(!b.enabled)return;let D=b,W=Number(new Date),Y=W-(p||W);D.diff=Y,D.prev=p,D.curr=W,p=W,x[0]=e.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let Z=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(He,Mt)=>{if(He==="%%")return"%";Z++;let Ui=e.formatters[Mt];if(typeof Ui=="function"){let ct=x[Z];He=Ui.call(D,ct),x.splice(Z,1),Z--}return He}),e.formatArgs.call(D,x),(D.log||e.log).apply(D,x)}return b.namespace=m,b.useColors=e.useColors(),b.color=e.selectColor(m),b.extend=n,b.destroy=e.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>y!==null?y:(v!==e.namespaces&&(v=e.namespaces,P=e.enabled(m)),P),set:x=>{y=x}}),typeof e.init=="function"&&e.init(b),b}function n(m,p){let y=e(this.namespace+(typeof p>"u"?":":p)+m);return y.log=this.log,y}function r(m){e.save(m),e.namespaces=m,e.names=[],e.skips=[];let p=(typeof m=="string"?m:"").trim().replace(" ",",").split(",").filter(Boolean);for(let y of p)y[0]==="-"?e.skips.push(y.slice(1)):e.names.push(y)}function o(m,p){let y=0,v=0,P=-1,b=0;for(;y<m.length;)if(v<p.length&&(p[v]===m[y]||p[v]==="*"))p[v]==="*"?(P=v,b=y,v++):(y++,v++);else if(P!==-1)v=P+1,b++,y=b;else return!1;for(;v<p.length&&p[v]==="*";)v++;return v===p.length}function a(){let m=[...e.names,...e.skips.map(p=>"-"+p)].join(",");return e.enable(""),m}function s(m){for(let p of e.skips)if(o(m,p))return!1;for(let p of e.names)if(o(m,p))return!0;return!1}function l(m){return m instanceof Error?m.stack||m.message:m}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return e.enable(e.load()),e}Cv.exports=wP});var Me=S((Wt,ac)=>{"use strict";Wt.formatArgs=SP;Wt.save=MP;Wt.load=EP;Wt.useColors=CP;Wt.storage=kP();Wt.destroy=(()=>{let i=!1;return()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Wt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function CP(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let i;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(i=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(i[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function SP(i){if(i[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+i[0]+(this.useColors?"%c ":" ")+"+"+ac.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;i.splice(1,0,t,"color: inherit");let e=0,n=0;i[0].replace(/%[a-zA-Z%]/g,r=>{r!=="%%"&&(e++,r==="%c"&&(n=e))}),i.splice(n,0,t)}Wt.log=console.debug||console.log||(()=>{});function MP(i){try{i?Wt.storage.setItem("debug",i):Wt.storage.removeItem("debug")}catch{}}function EP(){let i;try{i=Wt.storage.getItem("debug")}catch{}return!i&&typeof process<"u"&&"env"in process&&(i=process.env.DEBUG),i}function kP(){try{return localStorage}catch{}}ac.exports=Sv()(Wt);var{formatters:TP}=ac.exports;TP.j=function(i){try{return JSON.stringify(i)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var sc=S(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.EndOfStreamError=hr.defaultMessages=void 0;hr.defaultMessages="End-Of-Stream";var Fp=class extends Error{constructor(){super(hr.defaultMessages)}};hr.EndOfStreamError=Fp});var Mv=S(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.Deferred=void 0;var Np=class{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((t,e)=>{this.reject=e,this.resolve=t})}};lc.Deferred=Np});var kv=S(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.StreamReader=Po.EndOfStreamError=void 0;var Ev=sc(),IP=Mv(),PP=sc();Object.defineProperty(Po,"EndOfStreamError",{enumerable:!0,get:function(){return PP.EndOfStreamError}});var OP=1*1024*1024,Lp=class{constructor(t){if(this.s=t,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!t.read||!t.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new Ev.EndOfStreamError)),this.s.once("error",e=>this.reject(e)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}peek(t,e,n){return g(this,null,function*(){let r=yield this.read(t,e,n);return this.peekQueue.push(t.subarray(e,e+r)),r})}read(t,e,n){return g(this,null,function*(){if(n===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new Ev.EndOfStreamError;let r=n,o=0;for(;this.peekQueue.length>0&&r>0;){let a=this.peekQueue.pop();if(!a)throw new Error("peekData should be defined");let s=Math.min(a.length,r);t.set(a.subarray(0,s),e+o),o+=s,r-=s,s<a.length&&this.peekQueue.push(a.subarray(s))}for(;r>0&&!this.endOfStream;){let a=Math.min(r,OP),s=yield this.readFromStream(t,e+o,a);if(o+=s,s<a)break;r-=s}return o})}readFromStream(t,e,n){return g(this,null,function*(){let r=this.s.read(n);if(r)return t.set(r,e),r.length;{let o={buffer:t,offset:e,length:n,deferred:new IP.Deferred};return this.deferred=o.deferred,this.s.once("readable",()=>{this.readDeferred(o)}),o.deferred.promise}})}readDeferred(t){let e=this.s.read(t.length);e?(t.buffer.set(e,t.offset),t.deferred.resolve(e.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(t)})}reject(t){this.endOfStream=!0,this.deferred&&(this.deferred.reject(t),this.deferred=null)}};Po.StreamReader=Lp});var ns=S(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.StreamReader=Oo.EndOfStreamError=void 0;var DP=sc();Object.defineProperty(Oo,"EndOfStreamError",{enumerable:!0,get:function(){return DP.EndOfStreamError}});var AP=kv();Object.defineProperty(Oo,"StreamReader",{enumerable:!0,get:function(){return AP.StreamReader}})});var Up=S(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.AbstractTokenizer=void 0;var cc=ns(),Bp=class{constructor(t){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=t||{}}readToken(n){return g(this,arguments,function*(t,e=this.position){let r=Buffer.alloc(t.len);if((yield this.readBuffer(r,{position:e}))<t.len)throw new cc.EndOfStreamError;return t.get(r,0)})}peekToken(n){return g(this,arguments,function*(t,e=this.position){let r=Buffer.alloc(t.len);if((yield this.peekBuffer(r,{position:e}))<t.len)throw new cc.EndOfStreamError;return t.get(r,0)})}readNumber(t){return g(this,null,function*(){if((yield this.readBuffer(this.numBuffer,{length:t.len}))<t.len)throw new cc.EndOfStreamError;return t.get(this.numBuffer,0)})}peekNumber(t){return g(this,null,function*(){if((yield this.peekBuffer(this.numBuffer,{length:t.len}))<t.len)throw new cc.EndOfStreamError;return t.get(this.numBuffer,0)})}ignore(t){return g(this,null,function*(){if(this.fileInfo.size!==void 0){let e=this.fileInfo.size-this.position;if(t>e)return this.position+=e,e}return this.position+=t,t})}close(){return g(this,null,function*(){})}normalizeOptions(t,e){if(e&&e.position!==void 0&&e.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return e?{mayBeLess:e.mayBeLess===!0,offset:e.offset?e.offset:0,length:e.length?e.length:t.length-(e.offset?e.offset:0),position:e.position?e.position:this.position}:{mayBeLess:!1,offset:0,length:t.length,position:this.position}}};dc.AbstractTokenizer=Bp});var Tv=S(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.ReadStreamTokenizer=void 0;var RP=Up(),uc=ns(),FP=256e3,zp=class extends RP.AbstractTokenizer{constructor(t,e){super(e),this.streamReader=new uc.StreamReader(t)}getFileInfo(){return g(this,null,function*(){return this.fileInfo})}readBuffer(t,e){return g(this,null,function*(){let n=this.normalizeOptions(t,e),r=n.position-this.position;if(r>0)return yield this.ignore(r),this.readBuffer(t,e);if(r<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(n.length===0)return 0;let o=yield this.streamReader.read(t,n.offset,n.length);if(this.position+=o,(!e||!e.mayBeLess)&&o<n.length)throw new uc.EndOfStreamError;return o})}peekBuffer(t,e){return g(this,null,function*(){let n=this.normalizeOptions(t,e),r=0;if(n.position){let o=n.position-this.position;if(o>0){let a=new Uint8Array(n.length+o);return r=yield this.peekBuffer(a,{mayBeLess:n.mayBeLess}),t.set(a.subarray(o),n.offset),r-o}else if(o<0)throw new Error("Cannot peek from a negative offset in a stream")}if(n.length>0){try{r=yield this.streamReader.peek(t,n.offset,n.length)}catch(o){if(e&&e.mayBeLess&&o instanceof uc.EndOfStreamError)return 0;throw o}if(!n.mayBeLess&&r<n.length)throw new uc.EndOfStreamError}return r})}ignore(t){return g(this,null,function*(){let e=Math.min(FP,t),n=new Uint8Array(e),r=0;for(;r<t;){let o=t-r,a=yield this.readBuffer(n,{length:Math.min(e,o)});if(a<0)return a;r+=a}return r})}};mc.ReadStreamTokenizer=zp});var Iv=S(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.BufferTokenizer=void 0;var NP=ns(),LP=Up(),jp=class extends LP.AbstractTokenizer{constructor(t,e){super(e),this.uint8Array=t,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:t.length}readBuffer(t,e){return g(this,null,function*(){if(e&&e.position){if(e.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=e.position}let n=yield this.peekBuffer(t,e);return this.position+=n,n})}peekBuffer(t,e){return g(this,null,function*(){let n=this.normalizeOptions(t,e),r=Math.min(this.uint8Array.length-n.position,n.length);if(!n.mayBeLess&&r<n.length)throw new NP.EndOfStreamError;return t.set(this.uint8Array.subarray(n.position,n.position+r),n.offset),r})}close(){return g(this,null,function*(){})}};pc.BufferTokenizer=jp});var Mi=S(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});Mn.fromBuffer=Mn.fromStream=Mn.EndOfStreamError=void 0;var BP=Tv(),UP=Iv(),zP=ns();Object.defineProperty(Mn,"EndOfStreamError",{enumerable:!0,get:function(){return zP.EndOfStreamError}});function jP(i,t){return t=t||{},new BP.ReadStreamTokenizer(i,t)}Mn.fromStream=jP;function VP(i,t){return new UP.BufferTokenizer(i,t)}Mn.fromBuffer=VP});var qp=S(Vp=>{"use strict";Vp.read=function(i,t,e,n,r){var o,a,s=r*8-n-1,l=(1<<s)-1,u=l>>1,m=-7,p=e?r-1:0,y=e?-1:1,v=i[t+p];for(p+=y,o=v&(1<<-m)-1,v>>=-m,m+=s;m>0;o=o*256+i[t+p],p+=y,m-=8);for(a=o&(1<<-m)-1,o>>=-m,m+=n;m>0;a=a*256+i[t+p],p+=y,m-=8);if(o===0)o=1-u;else{if(o===l)return a?NaN:(v?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-u}return(v?-1:1)*a*Math.pow(2,o-n)};Vp.write=function(i,t,e,n,r,o){var a,s,l,u=o*8-r-1,m=(1<<u)-1,p=m>>1,y=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:o-1,P=n?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=m):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+p>=1?t+=y/l:t+=y*Math.pow(2,1-p),t*l>=2&&(a++,l/=2),a+p>=m?(s=0,a=m):a+p>=1?(s=(t*l-1)*Math.pow(2,r),a=a+p):(s=t*Math.pow(2,p-1)*Math.pow(2,r),a=0));r>=8;i[e+v]=s&255,v+=P,s/=256,r-=8);for(a=a<<r|s,u+=r;u>0;i[e+v]=a&255,v+=P,a/=256,u-=8);i[e+v-P]|=b*128}});var ce=S(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.AnsiStringType=q.StringType=q.BufferType=q.Uint8ArrayType=q.IgnoreType=q.Float80_LE=q.Float80_BE=q.Float64_LE=q.Float64_BE=q.Float32_LE=q.Float32_BE=q.Float16_LE=q.Float16_BE=q.INT64_BE=q.UINT64_BE=q.INT64_LE=q.UINT64_LE=q.INT32_LE=q.INT32_BE=q.INT24_BE=q.INT24_LE=q.INT16_LE=q.INT16_BE=q.INT8=q.UINT32_BE=q.UINT32_LE=q.UINT24_BE=q.UINT24_LE=q.UINT16_BE=q.UINT16_LE=q.UINT8=void 0;var En=qp();function re(i){return new DataView(i.buffer,i.byteOffset)}q.UINT8={len:1,get(i,t){return re(i).getUint8(t)},put(i,t,e){return re(i).setUint8(t,e),t+1}};q.UINT16_LE={len:2,get(i,t){return re(i).getUint16(t,!0)},put(i,t,e){return re(i).setUint16(t,e,!0),t+2}};q.UINT16_BE={len:2,get(i,t){return re(i).getUint16(t)},put(i,t,e){return re(i).setUint16(t,e),t+2}};q.UINT24_LE={len:3,get(i,t){let e=re(i);return e.getUint8(t)+(e.getUint16(t+1,!0)<<8)},put(i,t,e){let n=re(i);return n.setUint8(t,e&255),n.setUint16(t+1,e>>8,!0),t+3}};q.UINT24_BE={len:3,get(i,t){let e=re(i);return(e.getUint16(t)<<8)+e.getUint8(t+2)},put(i,t,e){let n=re(i);return n.setUint16(t,e>>8),n.setUint8(t+2,e&255),t+3}};q.UINT32_LE={len:4,get(i,t){return re(i).getUint32(t,!0)},put(i,t,e){return re(i).setUint32(t,e,!0),t+4}};q.UINT32_BE={len:4,get(i,t){return re(i).getUint32(t)},put(i,t,e){return re(i).setUint32(t,e),t+4}};q.INT8={len:1,get(i,t){return re(i).getInt8(t)},put(i,t,e){return re(i).setInt8(t,e),t+1}};q.INT16_BE={len:2,get(i,t){return re(i).getInt16(t)},put(i,t,e){return re(i).setInt16(t,e),t+2}};q.INT16_LE={len:2,get(i,t){return re(i).getInt16(t,!0)},put(i,t,e){return re(i).setInt16(t,e,!0),t+2}};q.INT24_LE={len:3,get(i,t){let e=q.UINT24_LE.get(i,t);return e>8388607?e-16777216:e},put(i,t,e){let n=re(i);return n.setUint8(t,e&255),n.setUint16(t+1,e>>8,!0),t+3}};q.INT24_BE={len:3,get(i,t){let e=q.UINT24_BE.get(i,t);return e>8388607?e-16777216:e},put(i,t,e){let n=re(i);return n.setUint16(t,e>>8),n.setUint8(t+2,e&255),t+3}};q.INT32_BE={len:4,get(i,t){return re(i).getInt32(t)},put(i,t,e){return re(i).setInt32(t,e),t+4}};q.INT32_LE={len:4,get(i,t){return re(i).getInt32(t,!0)},put(i,t,e){return re(i).setInt32(t,e,!0),t+4}};q.UINT64_LE={len:8,get(i,t){return re(i).getBigUint64(t,!0)},put(i,t,e){return re(i).setBigUint64(t,e,!0),t+8}};q.INT64_LE={len:8,get(i,t){return re(i).getBigInt64(t,!0)},put(i,t,e){return re(i).setBigInt64(t,e,!0),t+8}};q.UINT64_BE={len:8,get(i,t){return re(i).getBigUint64(t)},put(i,t,e){return re(i).setBigUint64(t,e),t+8}};q.INT64_BE={len:8,get(i,t){return re(i).getBigInt64(t)},put(i,t,e){return re(i).setBigInt64(t,e),t+8}};q.Float16_BE={len:2,get(i,t){return En.read(i,t,!1,10,this.len)},put(i,t,e){return En.write(i,e,t,!1,10,this.len),t+this.len}};q.Float16_LE={len:2,get(i,t){return En.read(i,t,!0,10,this.len)},put(i,t,e){return En.write(i,e,t,!0,10,this.len),t+this.len}};q.Float32_BE={len:4,get(i,t){return re(i).getFloat32(t)},put(i,t,e){return re(i).setFloat32(t,e),t+4}};q.Float32_LE={len:4,get(i,t){return re(i).getFloat32(t,!0)},put(i,t,e){return re(i).setFloat32(t,e,!0),t+4}};q.Float64_BE={len:8,get(i,t){return re(i).getFloat64(t)},put(i,t,e){return re(i).setFloat64(t,e),t+8}};q.Float64_LE={len:8,get(i,t){return re(i).getFloat64(t,!0)},put(i,t,e){return re(i).setFloat64(t,e,!0),t+8}};q.Float80_BE={len:10,get(i,t){return En.read(i,t,!1,63,this.len)},put(i,t,e){return En.write(i,e,t,!1,63,this.len),t+this.len}};q.Float80_LE={len:10,get(i,t){return En.read(i,t,!0,63,this.len)},put(i,t,e){return En.write(i,e,t,!0,63,this.len),t+this.len}};var Hp=class{constructor(t){this.len=t}get(t,e){}};q.IgnoreType=Hp;var $p=class{constructor(t){this.len=t}get(t,e){return t.subarray(e,e+this.len)}};q.Uint8ArrayType=$p;var Wp=class{constructor(t){this.len=t}get(t,e){return Buffer.from(t.subarray(e,e+this.len))}};q.BufferType=Wp;var Gp=class{constructor(t,e){this.len=t,this.encoding=e}get(t,e){return Buffer.from(t).toString(this.encoding,e,e+this.len)}};q.StringType=Gp;var hc=class i{constructor(t){this.len=t}static decode(t,e,n){let r="";for(let o=e;o<n;++o)r+=i.codePointToString(i.singleByteDecoder(t[o]));return r}static inRange(t,e,n){return e<=t&&t<=n}static codePointToString(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}static singleByteDecoder(t){if(i.inRange(t,0,127))return t;let e=i.windows1252[t-128];if(e===null)throw Error("invaliding encoding");return e}get(t,e=0){return i.decode(t,e,e+this.len)}};q.AnsiStringType=hc;hc.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]});var Pv=S(fc=>{"use strict";fc.stringToBytes=i=>[...i].map(t=>t.charCodeAt(0));fc.tarHeaderChecksumMatches=(i,t=0)=>{let e=parseInt(i.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(e))return!1;let n=8*32;for(let r=t;r<t+148;r++)n+=i[r];for(let r=t+156;r<t+512;r++)n+=i[r];return e===n};fc.uint32SyncSafeToken={get:(i,t)=>i[t+3]&127|i[t+2]<<7|i[t+1]<<14|i[t]<<21,len:4}});var Dv=S((h7,Ov)=>{"use strict";Ov.exports={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}});var Xp=S((exports,module)=>{"use strict";var Token=ce(),strtok3=Mi(),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=Pv(),supported=Dv(),minimumBytes=4100;function fromStream(i){return g(this,null,function*(){let t=yield strtok3.fromStream(i);try{return yield fromTokenizer(t)}finally{yield t.close()}})}function fromBuffer(i){return g(this,null,function*(){if(!(i instanceof Uint8Array||i instanceof ArrayBuffer||Buffer.isBuffer(i)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof i}\``);let t=i instanceof Buffer?i:Buffer.from(i);if(!(t&&t.length>1))return;let e=strtok3.fromBuffer(t);return fromTokenizer(e)})}function _check(i,t,e){e=O({offset:0},e);for(let[n,r]of t.entries())if(e.mask){if(r!==(e.mask[n]&i[n+e.offset]))return!1}else if(r!==i[n+e.offset])return!1;return!0}function fromTokenizer(i){return g(this,null,function*(){try{return _fromTokenizer(i)}catch(t){if(!(t instanceof strtok3.EndOfStreamError))throw t}})}function _fromTokenizer(i){return g(this,null,function*(){let t=Buffer.alloc(minimumBytes),e=12,n=(o,a)=>_check(t,o,a),r=(o,a)=>n(stringToBytes(o),a);if(i.fileInfo.size||(i.fileInfo.size=Number.MAX_SAFE_INTEGER),yield i.peekBuffer(t,{length:e,mayBeLess:!0}),n([66,77]))return{ext:"bmp",mime:"image/bmp"};if(n([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(n([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(n([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(n([37,33]))return yield i.peekBuffer(t,{length:24,mayBeLess:!0}),r("PS-Adobe-",{offset:2})&&r(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(n([31,160])||n([31,157]))return{ext:"Z",mime:"application/x-compress"};if(n([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(n([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(n([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(n([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(r("ID3")){yield i.ignore(6);let o=yield i.readToken(uint32SyncSafeToken);return i.position+o>i.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(yield i.ignore(o),fromTokenizer(i))}if(r("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((t[0]===67||t[0]===70)&&n([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(n([71,73,70]))return{ext:"gif",mime:"image/gif"};if(r("FLIF"))return{ext:"flif",mime:"image/flif"};if(r("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(r("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(r("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(r("FORM"))return{ext:"aif",mime:"audio/aiff"};if(r("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(n([80,75,3,4])){try{for(;i.position+30<i.fileInfo.size;){yield i.readBuffer(t,{length:30});let o={compressedSize:t.readUInt32LE(18),uncompressedSize:t.readUInt32LE(22),filenameLength:t.readUInt16LE(26),extraFieldLength:t.readUInt16LE(28)};if(o.filename=yield i.readToken(new Token.StringType(o.filenameLength,"utf-8")),yield i.ignore(o.extraFieldLength),o.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(o.filename.endsWith(".rels")||o.filename.endsWith(".xml"))switch(o.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(o.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(o.filename.startsWith("3D/")&&o.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(o.filename==="mimetype"&&o.compressedSize===o.uncompressedSize)switch(yield i.readToken(new Token.StringType(o.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(o.compressedSize===0){let a=-1;for(;a<0&&i.position<i.fileInfo.size;)yield i.peekBuffer(t,{mayBeLess:!0}),a=t.indexOf("504B0304",0,"hex"),yield i.ignore(a>=0?a:t.length)}else yield i.ignore(o.compressedSize)}}catch(o){if(!(o instanceof strtok3.EndOfStreamError))throw o}return{ext:"zip",mime:"application/zip"}}if(r("OggS")){yield i.ignore(28);let o=Buffer.alloc(8);return yield i.readBuffer(o),_check(o,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(o,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(o,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(o,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(o,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(o,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(n([80,75])&&(t[2]===3||t[2]===5||t[2]===7)&&(t[3]===4||t[3]===6||t[3]===8))return{ext:"zip",mime:"application/zip"};if(r("ftyp",{offset:4})&&t[8]&96){let o=t.toString("binary",8,12).replace("\0"," ").trim();switch(o){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return o.startsWith("3g")?o.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(r("MThd"))return{ext:"mid",mime:"audio/midi"};if(r("wOFF")&&(n([0,1,0,0],{offset:4})||r("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(r("wOF2")&&(n([0,1,0,0],{offset:4})||r("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(n([212,195,178,161])||n([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(r("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(r("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(r("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(n([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(r("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(r("%PDF")){yield i.ignore(1350);let o=10*1024*1024,a=Buffer.alloc(Math.min(o,i.fileInfo.size));return yield i.readBuffer(a,{mayBeLess:!0}),a.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(n([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(n([73,73,42,0]))return r("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:n([28,0,254,0],{offset:8})||n([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:n([8,0,0,0],{offset:4})&&(n([45,0,254,0],{offset:8})||n([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(t=Buffer.alloc(24),yield i.peekBuffer(t),(n([16,251,134,1],{offset:4})||n([8,0,0,0],{offset:4}))&&n([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(n([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(r("MAC "))return{ext:"ape",mime:"audio/ape"};if(n([26,69,223,163])){function o(){return g(this,null,function*(){let m=yield i.peekNumber(Token.UINT8),p=128,y=0;for(;!(m&p)&&p!==0;)++y,p>>=1;let v=Buffer.alloc(y+1);return yield i.readBuffer(v),v})}function a(){return g(this,null,function*(){let m=yield o(),p=yield o();p[0]^=128>>p.length-1;let y=Math.min(6,p.length);return{id:m.readUIntBE(0,m.length),len:p.readUIntBE(p.length-y,y)}})}function s(m,p){return g(this,null,function*(){for(;p>0;){let y=yield a();if(y.id===17026)return i.readToken(new Token.StringType(y.len,"utf-8"));yield i.ignore(y.len),--p}})}let l=yield a();switch(yield s(1,l.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(n([82,73,70,70])){if(n([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(n([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(n([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(r("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(n([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(r("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(r("MSCF")||r("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(n([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(n([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(n([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(n([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(r("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(r("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(n([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(r("IMPM"))return{ext:"it",mime:"audio/x-it"};if(r("-lh0-",{offset:2})||r("-lh1-",{offset:2})||r("-lh2-",{offset:2})||r("-lh3-",{offset:2})||r("-lh4-",{offset:2})||r("-lh5-",{offset:2})||r("-lh6-",{offset:2})||r("-lh7-",{offset:2})||r("-lzs-",{offset:2})||r("-lz4-",{offset:2})||r("-lz5-",{offset:2})||r("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(n([0,0,1,186])){if(n([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(n([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(r("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(n([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(r("<?xml "))return{ext:"xml",mime:"application/xml"};if(n([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(n([82,97,114,33,26,7])&&(t[6]===0||t[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(r("solid "))return{ext:"stl",mime:"model/stl"};if(r("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(r("!<arch>"))return yield i.ignore(8),(yield i.readToken(new Token.StringType(13,"ascii")))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(n([137,80,78,71,13,10,26,10])){yield i.ignore(8);function o(){return g(this,null,function*(){return{length:yield i.readToken(Token.INT32_BE),type:yield i.readToken(new Token.StringType(4,"binary"))}})}do{let a=yield o();if(a.length<0)return;switch(a.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:yield i.ignore(a.length+4)}}while(i.position+8<i.fileInfo.size);return{ext:"png",mime:"image/png"}}if(n([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(n([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(n([102,114,101,101],{offset:4})||n([109,100,97,116],{offset:4})||n([109,111,111,118],{offset:4})||n([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(n([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(r("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(n([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(n([48,38,178,117,142,102,207,17,166,217])){function o(){return g(this,null,function*(){let a=Buffer.alloc(16);return yield i.readBuffer(a),{id:a,size:Number(yield i.readToken(Token.UINT64_LE))}})}for(yield i.ignore(30);i.position+24<i.fileInfo.size;){let a=yield o(),s=a.size-24;if(_check(a.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let l=Buffer.alloc(16);if(s-=yield i.readBuffer(l),_check(l,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(l,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}yield i.ignore(s)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(n([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((n([126,16,4])||n([126,24,4]))&&n([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(n([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(n([0,0,0,12,106,80,32,32,13,10,135,10]))switch(yield i.ignore(20),yield i.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(n([255,10])||n([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(n([0,0,1,186])||n([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(n([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(n([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(n([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(n([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(yield i.peekBuffer(t,{length:Math.min(256,i.fileInfo.size),mayBeLess:!0}),r("BEGIN:")){if(r("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(r("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(r("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(r("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(r("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(n([4,0,0,0])&&t.length>=16){let o=t.readUInt32LE(12);if(o>12&&t.length>=o+16)try{let a=t.slice(16,o+16).toString();if(JSON.parse(a).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(n([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(r("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(n([71],{offset:4})&&(n([71],{offset:192})||n([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(n([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(n([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(n([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(n([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(n([76,80],{offset:34})&&(n([0,0,1],{offset:8})||n([1,0,2],{offset:8})||n([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(n([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(yield i.peekBuffer(t,{length:Math.min(512,i.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(t))return{ext:"tar",mime:"application/x-tar"};if(n([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(r("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(t.length>=2&&n([255,224],{offset:0,mask:[255,224]})){if(n([16],{offset:1,mask:[22]}))return n([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(n([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(n([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(n([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}})}var stream=readableStream=>new Promise((resolve,reject)=>{let stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",()=>g(exports,null,function*(){let i=new stream.PassThrough,t;stream.pipeline?t=stream.pipeline(readableStream,i,()=>{}):t=readableStream.pipe(i);let e=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{let n=yield fromBuffer(e);i.fileType=n}catch(n){reject(n)}resolve(t)}))}),fileType={fromStream,fromTokenizer,fromBuffer,stream};Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}});Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}});module.exports=fileType});var Nv=S(Yp=>{"use strict";var Av=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,qP=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,Rv=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,HP=/\\([\u000b\u0020-\u00ff])/g,$P=/([\\"])/g,Fv=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;Yp.format=WP;Yp.parse=GP;function WP(i){if(!i||typeof i!="object")throw new TypeError("argument obj is required");var t=i.parameters,e=i.type;if(!e||!Fv.test(e))throw new TypeError("invalid type");var n=e;if(t&&typeof t=="object")for(var r,o=Object.keys(t).sort(),a=0;a<o.length;a++){if(r=o[a],!Rv.test(r))throw new TypeError("invalid parameter name");n+="; "+r+"="+YP(t[r])}return n}function GP(i){if(!i)throw new TypeError("argument string is required");var t=typeof i=="object"?XP(i):i;if(typeof t!="string")throw new TypeError("argument string is required to be a string");var e=t.indexOf(";"),n=e!==-1?t.slice(0,e).trim():t.trim();if(!Fv.test(n))throw new TypeError("invalid media type");var r=new ZP(n.toLowerCase());if(e!==-1){var o,a,s;for(Av.lastIndex=e;a=Av.exec(t);){if(a.index!==e)throw new TypeError("invalid parameter format");e+=a[0].length,o=a[1].toLowerCase(),s=a[2],s.charCodeAt(0)===34&&(s=s.slice(1,-1),s.indexOf("\\")!==-1&&(s=s.replace(HP,"$1"))),r.parameters[o]=s}if(e!==t.length)throw new TypeError("invalid parameter format")}return r}function XP(i){var t;if(typeof i.getHeader=="function"?t=i.getHeader("content-type"):typeof i.headers=="object"&&(t=i.headers&&i.headers["content-type"]),typeof t!="string")throw new TypeError("content-type header is missing from object");return t}function YP(i){var t=String(i);if(Rv.test(t))return t;if(t.length>0&&!qP.test(t))throw new TypeError("invalid parameter value");return'"'+t.replace($P,"\\$1")+'"'}function ZP(i){this.parameters=Object.create(null),this.type=i}});var Uv=S(gc=>{"use strict";var KP=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,Lv=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,Bv=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;gc.format=QP;gc.parse=eO;gc.test=JP;function QP(i){if(!i||typeof i!="object")throw new TypeError("argument obj is required");var t=i.subtype,e=i.suffix,n=i.type;if(!n||!Lv.test(n))throw new TypeError("invalid type");if(!t||!KP.test(t))throw new TypeError("invalid subtype");var r=n+"/"+t;if(e){if(!Lv.test(e))throw new TypeError("invalid suffix");r+="+"+e}return r}function JP(i){if(!i)throw new TypeError("argument string is required");if(typeof i!="string")throw new TypeError("argument string is required to be a string");return Bv.test(i.toLowerCase())}function eO(i){if(!i)throw new TypeError("argument string is required");if(typeof i!="string")throw new TypeError("argument string is required to be a string");var t=Bv.exec(i.toLowerCase());if(!t)throw new TypeError("invalid media type");var e=t[1],n=t[2],r,o=n.lastIndexOf("+");return o!==-1&&(r=n.substr(o+1),n=n.substr(0,o)),new tO(e,n,r)}function tO(i,t,e){this.type=i,this.subtype=t,this.suffix=e}});var bc=S(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});mi.TrackType=mi.TargetType=mi.DataType=void 0;var iO;(function(i){i[i.string=0]="string",i[i.uint=1]="uint",i[i.uid=2]="uid",i[i.bool=3]="bool",i[i.binary=4]="binary",i[i.float=5]="float"})(iO=mi.DataType||(mi.DataType={}));var nO;(function(i){i[i.shot=10]="shot",i[i.scene=20]="scene",i[i.track=30]="track",i[i.part=40]="part",i[i.album=50]="album",i[i.edition=60]="edition",i[i.collection=70]="collection"})(nO=mi.TargetType||(mi.TargetType={}));var rO;(function(i){i[i.video=1]="video",i[i.audio=2]="audio",i[i.complex=3]="complex",i[i.logo=4]="logo",i[i.subtitle=17]="subtitle",i[i.button=18]="button",i[i.control=32]="control"})(rO=mi.TrackType||(mi.TrackType={}))});var vc=S(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.TrackType=void 0;var oO=bc();Object.defineProperty(_c,"TrackType",{enumerable:!0,get:function(){return oO.TrackType}})});var zv=S(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.isUnique=ii.isSingleton=ii.commonTags=void 0;ii.commonTags={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function aO(i){return ii.commonTags.hasOwnProperty(i)&&!ii.commonTags[i].multiple}ii.isSingleton=aO;function sO(i){return!ii.commonTags[i].multiple||ii.commonTags[i].unique}ii.isUnique=sO});var Xi=S(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.CommonTagMapper=void 0;var lO=(()=>{class i{static toIntOrNull(e){let n=parseInt(e,10);return isNaN(n)?null:n}static normalizeTrack(e){let n=e.toString().split("/");return{no:parseInt(n[0],10)||null,of:parseInt(n[1],10)||null}}constructor(e,n){this.tagTypes=e,this.tagMap=n}mapGenericTag(e,n){e={id:e.id,value:e.value},this.postMap(e,n);let r=this.getCommonName(e.id);return r?{id:r,value:e.value}:null}getCommonName(e){return this.tagMap[e]}postMap(e,n){}}return i.maxRatingScore=1,i})();yc.CommonTagMapper=lO});var jv=S(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.ID3v1TagMapper=void 0;var cO=Xi(),dO={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"},Zp=class extends cO.CommonTagMapper{constructor(){super(["ID3v1"],dO)}};xc.ID3v1TagMapper=Zp});var Do=S(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.CaseInsensitiveTagMap=void 0;var uO=Xi(),Kp=class extends uO.CommonTagMapper{constructor(t,e){let n={};for(let r of Object.keys(e))n[r.toUpperCase()]=e[r];super(t,n)}getCommonName(t){return this.tagMap[t.toUpperCase()]}};wc.CaseInsensitiveTagMap=Kp});var Be=S(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.toRatio=Ae.dbToRatio=Ae.ratioToDb=Ae.a2hex=Ae.isBitSet=Ae.getBitAllignedNumber=Ae.stripNulls=Ae.decodeString=Ae.trimRightNull=Ae.findZero=Ae.getBit=void 0;function mO(i,t,e){return(i[t]&1<<e)!==0}Ae.getBit=mO;function pO(i,t,e,n){let r=t;if(n==="utf16le"){for(;i[r]!==0||i[r+1]!==0;){if(r>=e)return e;r+=2}return r}else{for(;i[r]!==0;){if(r>=e)return e;r++}return r}}Ae.findZero=pO;function hO(i){let t=i.indexOf("\0");return t===-1?i:i.substr(0,t)}Ae.trimRightNull=hO;function fO(i){let t=i.length;if(t&1)throw new Error("Buffer length must be even");for(let e=0;e<t;e+=2){let n=i[e];i[e]=i[e+1],i[e+1]=n}return i}function Qp(i,t){if(i[0]===255&&i[1]===254)return Qp(i.subarray(2),t);if(t==="utf16le"&&i[0]===254&&i[1]===255){if(i.length&1)throw new Error("Expected even number of octets for 16-bit unicode string");return Qp(fO(i),t)}return Buffer.from(i).toString(t)}Ae.decodeString=Qp;function gO(i){return i=i.replace(/^\x00+/g,""),i=i.replace(/\x00+$/g,""),i}Ae.stripNulls=gO;function Jp(i,t,e,n){let r=t+~~(e/8),o=e%8,a=i[r];a&=255>>o;let s=8-o,l=n-s;return l<0?a>>=8-o-n:l>0&&(a<<=l,a|=Jp(i,t,e+s,l)),a}Ae.getBitAllignedNumber=Jp;function bO(i,t,e){return Jp(i,t,e,1)===1}Ae.isBitSet=bO;function _O(i){let t=[];for(let e=0,n=i.length;e<n;e++){let r=Number(i.charCodeAt(e)).toString(16);t.push(r.length===1?"0"+r:r)}return t.join(" ")}Ae.a2hex=_O;function Vv(i){return 10*Math.log10(i)}Ae.ratioToDb=Vv;function qv(i){return Math.pow(10,i/10)}Ae.dbToRatio=qv;function vO(i){let t=i.split(" ").map(e=>e.trim().toLowerCase());if(t.length>=1){let e=parseFloat(t[0]);return t.length===2&&t[1]==="db"?{dB:e,ratio:qv(e)}:{dB:Vv(e),ratio:e}}}Ae.toRatio=vO});var Hv=S(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.ID3v24TagMapper=void 0;var yO=Xi(),xO=Do(),wO=Be(),CO={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer","USLT:description":"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"date",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl"},eh=class i extends xO.CaseInsensitiveTagMap{static toRating(t){return{source:t.email,rating:t.rating>0?(t.rating-1)/254*yO.CommonTagMapper.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],CO)}postMap(t,e){switch(t.id){case"UFID":t.value.owner_identifier==="http://musicbrainz.org"&&(t.id+=":"+t.value.owner_identifier,t.value=wO.decodeString(t.value.identifier,"latin1"));break;case"PRIV":switch(t.value.owner_identifier){case"AverageLevel":case"PeakValue":t.id+=":"+t.value.owner_identifier,t.value=t.value.data.length===4?t.value.data.readUInt32LE(0):null,t.value===null&&e.addWarning("Failed to parse PRIV:PeakValue");break;default:e.addWarning(`Unknown PRIV owner-identifier: ${t.value.owner_identifier}`)}break;case"COMM":t.value=t.value?t.value.text:null;break;case"POPM":t.value=i.toRating(t.value);break;default:break}}};Cc.ID3v24TagMapper=eh});var $v=S(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.AsfTagMapper=void 0;var SO=Xi(),MO={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"},th=class i extends SO.CommonTagMapper{static toRating(t){return{rating:parseFloat(t+1)/5}}constructor(){super(["asf"],MO)}postMap(t){switch(t.id){case"WM/SharedUserRating":let e=t.id.split(":");t.value=i.toRating(t.value),t.id=e[0];break}}};Sc.AsfTagMapper=th});var Wv=S(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.ID3v22TagMapper=fr.id3v22TagMap=void 0;var EO=Do();fr.id3v22TagMap={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website","COM:iTunPGAP":"gapless",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};var ih=class extends EO.CaseInsensitiveTagMap{constructor(){super(["ID3v2.2"],fr.id3v22TagMap)}};fr.ID3v22TagMapper=ih});var Gv=S(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.APEv2TagMapper=void 0;var kO=Do(),TO={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"},nh=class extends kO.CaseInsensitiveTagMap{constructor(){super(["APEv2"],TO)}};Mc.APEv2TagMapper=nh});var Xv=S(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.MP4TagMapper=gr.tagType=void 0;var IO=Do(),PO={"\xA9nam":"title","\xA9ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","\xA9alb":"album","\xA9day":"date","\xA9cmt":"comment","\xA9com":"comment",trkn:"track",disk:"disk","\xA9gen":"genre",covr:"picture","\xA9wrt":"composer","\xA9lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","\xA9grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","\xA9cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","\xA9too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear",desc:"description",ldes:"longDescription","\xA9mvn":"movement","\xA9mvi":"movementIndex","\xA9mvc":"movementTotal","\xA9wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"};gr.tagType="iTunes";var rh=class extends IO.CaseInsensitiveTagMap{constructor(){super([gr.tagType],PO)}postMap(t,e){switch(t.id){case"rate":t.value={source:void 0,rating:parseFloat(t.value)/100};break}}};gr.MP4TagMapper=rh});var Zv=S(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.VorbisTagMapper=void 0;var Yv=Xi(),OO={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"},oh=class i extends Yv.CommonTagMapper{static toRating(t,e,n){return{source:t&&t.toLowerCase(),rating:parseFloat(e)/n*Yv.CommonTagMapper.maxRatingScore}}constructor(){super(["vorbis"],OO)}postMap(t){if(t.id==="RATING")t.value=i.toRating(void 0,t.value,100);else if(t.id.indexOf("RATING:")===0){let e=t.id.split(":");t.value=i.toRating(e[1],t.value,1),t.id=e[0]}}};Ec.VorbisTagMapper=oh});var Kv=S(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.RiffInfoTagMapper=br.riffInfoTagMap=void 0;var DO=Xi();br.riffInfoTagMap={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};var ah=class extends DO.CommonTagMapper{constructor(){super(["exif"],br.riffInfoTagMap)}};br.RiffInfoTagMapper=ah});var Qv=S(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.MatroskaTagMapper=void 0;var AO=Do(),RO={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"},sh=class extends AO.CaseInsensitiveTagMap{constructor(){super(["matroska"],RO)}};kc.MatroskaTagMapper=sh});var Jv=S(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.AiffTagMapper=void 0;var FO=Xi(),NO={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"},lh=class extends FO.CommonTagMapper{constructor(){super(["AIFF"],NO)}};Tc.AiffTagMapper=lh});var ty=S(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.CombinedTagMapper=void 0;var LO=jv(),BO=Hv(),UO=$v(),zO=Wv(),jO=Gv(),ey=Xv(),VO=Zv(),qO=Kv(),HO=Qv(),$O=Jv(),ch=class{constructor(){this.tagMappers={},[new LO.ID3v1TagMapper,new zO.ID3v22TagMapper,new BO.ID3v24TagMapper,new ey.MP4TagMapper,new ey.MP4TagMapper,new VO.VorbisTagMapper,new jO.APEv2TagMapper,new UO.AsfTagMapper,new qO.RiffInfoTagMapper,new HO.MatroskaTagMapper,new $O.AiffTagMapper].forEach(t=>{this.registerTagMapper(t)})}mapTag(t,e,n){if(this.tagMappers[t])return this.tagMappers[t].mapGenericTag(e,n);throw new Error("No generic tag mapper defined for tag-format: "+t)}registerTagMapper(t){for(let e of t.tagTypes)this.tagMappers[e]=t}};Ic.CombinedTagMapper=ch});var ry=S(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.joinArtists=Ao.MetadataCollector=void 0;var WO=vc(),GO=Me(),iy=zv(),XO=ty(),Pc=Xi(),YO=Be(),ZO=Xp(),_r=(0,GO.default)("music-metadata:collector"),KO=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"],dh=class{constructor(t){this.opts=t,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new XO.CombinedTagMapper;let e=1;for(let n of KO)this.originPriority[n]=e++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(t){_r(`streamInfo: type=${WO.TrackType[t.type]}, codec=${t.codecName}`),this.format.trackInfo.push(t)}setFormat(t,e){_r(`format: ${t} = ${e}`),this.format[t]=e,this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:t,value:e}})}addTag(t,e,n){_r(`tag ${t}.${e} = ${n}`),this.native[t]||(this.format.tagTypes.push(t),this.native[t]=[]),this.native[t].push({id:e,value:n}),this.toCommon(t,e,n)}addWarning(t){this.quality.warnings.push({message:t})}postMap(t,e){switch(e.id){case"artist":if(this.commonOrigin.artist===this.originPriority[t])return this.postMap("artificial",{id:"artists",value:e.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:e.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(e.value)===-1)){let a=(this.common.artists||[]).concat([e.value]),l={id:"artist",value:ny(a)};this.setGenericTag("artificial",l)}break;case"picture":this.postFixPicture(e.value).then(a=>{a!==null&&(e.value=a,this.setGenericTag(t,e))});return;case"totaltracks":this.common.track.of=Pc.CommonTagMapper.toIntOrNull(e.value);return;case"totaldiscs":this.common.disk.of=Pc.CommonTagMapper.toIntOrNull(e.value);return;case"movementTotal":this.common.movementIndex.of=Pc.CommonTagMapper.toIntOrNull(e.value);return;case"track":case"disk":case"movementIndex":let n=this.common[e.id].of;this.common[e.id]=Pc.CommonTagMapper.normalizeTrack(e.value),this.common[e.id].of=n??this.common[e.id].of;return;case"bpm":case"year":case"originalyear":e.value=parseInt(e.value,10);break;case"date":let r=parseInt(e.value.substr(0,4),10);isNaN(r)||(this.common.year=r);break;case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":e.value=typeof e.value=="string"?parseInt(e.value,10):e.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":e.value=(0,YO.toRatio)(e.value);break;case"replaygain_track_minmax":e.value=e.value.split(",").map(a=>parseInt(a,10));break;case"replaygain_undo":let o=e.value.split(",").map(a=>parseInt(a,10));e.value={leftChannel:o[0],rightChannel:o[1]};break;case"gapless":case"compilation":case"podcast":case"showMovement":e.value=e.value==="1"||e.value===1;break;case"isrc":if(this.common[e.id]&&this.common[e.id].indexOf(e.value)!==-1)return;break;default:}e.value!==null&&this.setGenericTag(t,e)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}postFixPicture(t){return g(this,null,function*(){if(t.data&&t.data.length>0){if(!t.format){let e=yield ZO.fromBuffer(t.data);if(e)t.format=e.mime;else return null}switch(t.format=t.format.toLocaleLowerCase(),t.format){case"image/jpg":t.format="image/jpeg"}return t}return this.addWarning("Empty picture tag found"),null})}toCommon(t,e,n){let r={id:e,value:n},o=this.tagMapper.mapTag(t,r,this);o&&this.postMap(t,o)}setGenericTag(t,e){_r(`common.${e.id} = ${e.value}`);let n=this.commonOrigin[e.id]||1e3,r=this.originPriority[t];if((0,iy.isSingleton)(e.id))if(r<=n)this.common[e.id]=e.value,this.commonOrigin[e.id]=r;else return _r(`Ignore native tag (singleton): ${t}.${e.id} = ${e.value}`);else if(r===n)!(0,iy.isUnique)(e.id)||this.common[e.id].indexOf(e.value)===-1?this.common[e.id].push(e.value):_r(`Ignore duplicate value: ${t}.${e.id} = ${e.value}`);else if(r<n)this.common[e.id]=[e.value],this.commonOrigin[e.id]=r;else return _r(`Ignore native tag (list): ${t}.${e.id} = ${e.value}`);this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:e.id,value:e.value}})}};Ao.MetadataCollector=dh;function ny(i){return i.length>2?i.slice(0,i.length-1).join(", ")+" & "+i[i.length-1]:i.join(" & ")}Ao.joinArtists=ny});var Fo=S(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.TextEncodingToken=Ft.ExtendedHeader=Ft.ID3v2Header=Ft.UINT32SYNCSAFE=Ft.AttachedPictureType=void 0;var Ro=ce(),rs=Be(),QO;(function(i){i[i.Other=0]="Other",i[i["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",i[i["Other file icon"]=2]="Other file icon",i[i["Cover (front)"]=3]="Cover (front)",i[i["Cover (back)"]=4]="Cover (back)",i[i["Leaflet page"]=5]="Leaflet page",i[i["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",i[i["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",i[i["Artist/performer"]=8]="Artist/performer",i[i.Conductor=9]="Conductor",i[i["Band/Orchestra"]=10]="Band/Orchestra",i[i.Composer=11]="Composer",i[i["Lyricist/text writer"]=12]="Lyricist/text writer",i[i["Recording Location"]=13]="Recording Location",i[i["During recording"]=14]="During recording",i[i["During performance"]=15]="During performance",i[i["Movie/video screen capture"]=16]="Movie/video screen capture",i[i["A bright coloured fish"]=17]="A bright coloured fish",i[i.Illustration=18]="Illustration",i[i["Band/artist logotype"]=19]="Band/artist logotype",i[i["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(QO=Ft.AttachedPictureType||(Ft.AttachedPictureType={}));Ft.UINT32SYNCSAFE={get:(i,t)=>i[t+3]&127|i[t+2]<<7|i[t+1]<<14|i[t]<<21,len:4};Ft.ID3v2Header={len:10,get:(i,t)=>({fileIdentifier:new Ro.StringType(3,"ascii").get(i,t),version:{major:Ro.INT8.get(i,t+3),revision:Ro.INT8.get(i,t+4)},flags:{unsynchronisation:rs.getBit(i,t+5,7),isExtendedHeader:rs.getBit(i,t+5,6),expIndicator:rs.getBit(i,t+5,5),footer:rs.getBit(i,t+5,4)},size:Ft.UINT32SYNCSAFE.get(i,t+6)})};Ft.ExtendedHeader={len:10,get:(i,t)=>({size:Ro.UINT32_BE.get(i,t),extendedFlags:Ro.UINT16_BE.get(i,t+4),sizeOfPadding:Ro.UINT32_BE.get(i,t+6),crcDataPresent:rs.getBit(i,t+4,31)})};Ft.TextEncodingToken={len:1,get:(i,t)=>{switch(i[t]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf16le",bom:!0};case 2:return{encoding:"utf16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}}});var Nt=S(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.BasicParser=void 0;var uh=class{init(t,e,n){return this.metadata=t,this.tokenizer=e,this.options=n,this}};Oc.BasicParser=uh});var xt=S(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.FourCcToken=void 0;var JO=Be(),eD=/^[\x21-\x7e][\x20-\x7e\x00()]{3}/;os.FourCcToken={len:4,get:(i,t)=>{let e=i.toString("binary",t,t+os.FourCcToken.len);if(!e.match(eD))throw new Error(`FourCC contains invalid characters: ${JO.a2hex(e)} "${e}"`);return e},put:(i,t,e)=>{let n=Buffer.from(e,"binary");if(n.length!==4)throw new Error("Invalid length");return n.copy(i,t)}}});var oy=S(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.isBitSet=Xe.parseTagFlags=Xe.TagField=Xe.TagItemHeader=Xe.TagFooter=Xe.Header=Xe.DescriptorParser=Xe.DataType=void 0;var Pe=ce(),tD=xt(),iD;(function(i){i[i.text_utf8=0]="text_utf8",i[i.binary=1]="binary",i[i.external_info=2]="external_info",i[i.reserved=3]="reserved"})(iD=Xe.DataType||(Xe.DataType={}));Xe.DescriptorParser={len:52,get:(i,t)=>({ID:tD.FourCcToken.get(i,t),version:Pe.UINT32_LE.get(i,t+4)/1e3,descriptorBytes:Pe.UINT32_LE.get(i,t+8),headerBytes:Pe.UINT32_LE.get(i,t+12),seekTableBytes:Pe.UINT32_LE.get(i,t+16),headerDataBytes:Pe.UINT32_LE.get(i,t+20),apeFrameDataBytes:Pe.UINT32_LE.get(i,t+24),apeFrameDataBytesHigh:Pe.UINT32_LE.get(i,t+28),terminatingDataBytes:Pe.UINT32_LE.get(i,t+32),fileMD5:new Pe.Uint8ArrayType(16).get(i,t+36)})};Xe.Header={len:24,get:(i,t)=>({compressionLevel:Pe.UINT16_LE.get(i,t),formatFlags:Pe.UINT16_LE.get(i,t+2),blocksPerFrame:Pe.UINT32_LE.get(i,t+4),finalFrameBlocks:Pe.UINT32_LE.get(i,t+8),totalFrames:Pe.UINT32_LE.get(i,t+12),bitsPerSample:Pe.UINT16_LE.get(i,t+16),channel:Pe.UINT16_LE.get(i,t+18),sampleRate:Pe.UINT32_LE.get(i,t+20)})};Xe.TagFooter={len:32,get:(i,t)=>({ID:new Pe.StringType(8,"ascii").get(i,t),version:Pe.UINT32_LE.get(i,t+8),size:Pe.UINT32_LE.get(i,t+12),fields:Pe.UINT32_LE.get(i,t+16),flags:mh(Pe.UINT32_LE.get(i,t+20))})};Xe.TagItemHeader={len:8,get:(i,t)=>({size:Pe.UINT32_LE.get(i,t),flags:mh(Pe.UINT32_LE.get(i,t+4))})};var nD=i=>new Pe.Uint8ArrayType(i.size-Xe.TagFooter.len);Xe.TagField=nD;function mh(i){return{containsHeader:as(i,31),containsFooter:as(i,30),isHeader:as(i,31),readOnly:as(i,0),dataType:(i&6)>>1}}Xe.parseTagFlags=mh;function as(i,t){return(i&1<<t)!==0}Xe.isBitSet=as});var vr=S(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.APEv2Parser=void 0;var rD=Me(),ay=Mi(),sy=ce(),ly=Be(),oD=Nt(),Ye=oy(),No=(0,rD.default)("music-metadata:parser:APEv2"),cy="APEv2",dy="APETAGEX",ph=class i extends oD.BasicParser{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(t,e,n){let r=new i;return r.init(t,e,n),r.tryParseApeHeader()}static calculateDuration(t){let e=t.totalFrames>1?t.blocksPerFrame*(t.totalFrames-1):0;return e+=t.finalFrameBlocks,e/t.sampleRate}static findApeFooterOffset(t,e){return g(this,null,function*(){let n=Buffer.alloc(Ye.TagFooter.len);yield t.randomRead(n,0,Ye.TagFooter.len,e-Ye.TagFooter.len);let r=Ye.TagFooter.get(n,0);if(r.ID==="APETAGEX")return No(`APE footer header at offset=${e}`),{footer:r,offset:e-r.size}})}static parseTagFooter(t,e,n){let r=Ye.TagFooter.get(e,e.length-Ye.TagFooter.len);if(r.ID!==dy)throw new Error("Unexpected APEv2 Footer ID preamble value.");ay.fromBuffer(e);let o=new i;return o.init(t,ay.fromBuffer(e),n),o.parseTags(r)}tryParseApeHeader(){return g(this,null,function*(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<Ye.TagFooter.len){No("No APEv2 header found, end-of-file reached");return}let t=yield this.tokenizer.peekToken(Ye.TagFooter);if(t.ID===dy)return yield this.tokenizer.ignore(Ye.TagFooter.len),this.parseTags(t);if(No(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){let e=this.tokenizer.fileInfo.size-this.tokenizer.position,n=Buffer.alloc(e);return yield this.tokenizer.readBuffer(n),i.parseTagFooter(this.metadata,n,this.options)}})}parse(){return g(this,null,function*(){let t=yield this.tokenizer.readToken(Ye.DescriptorParser);if(t.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=t;let e=t.descriptorBytes-Ye.DescriptorParser.len,n=yield e>0?this.parseDescriptorExpansion(e):this.parseHeader();return yield this.tokenizer.ignore(n.forwardBytes),this.tryParseApeHeader()})}parseTags(t){return g(this,null,function*(){let e=Buffer.alloc(256),n=t.size-Ye.TagFooter.len;No(`Parse APE tags at offset=${this.tokenizer.position}, size=${n}`);for(let r=0;r<t.fields;r++){if(n<Ye.TagItemHeader.len){this.metadata.addWarning(`APEv2 Tag-header: ${t.fields-r} items remaining, but no more tag data to read.`);break}let o=yield this.tokenizer.readToken(Ye.TagItemHeader);n-=Ye.TagItemHeader.len+o.size,yield this.tokenizer.peekBuffer(e,{length:Math.min(e.length,n)});let a=ly.findZero(e,0,e.length),s=yield this.tokenizer.readToken(new sy.StringType(a,"ascii"));switch(yield this.tokenizer.ignore(1),n-=s.length+1,o.flags.dataType){case Ye.DataType.text_utf8:{let u=(yield this.tokenizer.readToken(new sy.StringType(o.size,"utf8"))).split(/\x00/g);for(let m of u)this.metadata.addTag(cy,s,m);break}case Ye.DataType.binary:if(this.options.skipCovers)yield this.tokenizer.ignore(o.size);else{let l=Buffer.alloc(o.size);yield this.tokenizer.readBuffer(l),a=ly.findZero(l,0,l.length);let u=l.toString("utf8",0,a),m=Buffer.from(l.slice(a+1));this.metadata.addTag(cy,s,{description:u,data:m})}break;case Ye.DataType.external_info:No(`Ignore external info ${s}`),yield this.tokenizer.ignore(o.size);break;case Ye.DataType.reserved:No(`Ignore external info ${s}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${s}"`),yield this.tokenizer.ignore(o.size);break}}})}parseDescriptorExpansion(t){return g(this,null,function*(){return yield this.tokenizer.ignore(t),this.parseHeader()})}parseHeader(){return g(this,null,function*(){let t=yield this.tokenizer.readToken(Ye.Header);return this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",t.bitsPerSample),this.metadata.setFormat("sampleRate",t.sampleRate),this.metadata.setFormat("numberOfChannels",t.channel),this.metadata.setFormat("duration",i.calculateDuration(t)),{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}})}};Dc.APEv2Parser=ph});var ss=S(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.hasID3v1Header=Ei.ID3v1Parser=Ei.Genres=void 0;var aD=Me(),Fc=ce(),sD=Be(),lD=Nt(),cD=vr(),Ac=(0,aD.default)("music-metadata:parser:ID3v1");Ei.Genres=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"];var Rc={len:128,get:(i,t)=>{let e=new kn(3).get(i,t);return e==="TAG"?{header:e,title:new kn(30).get(i,t+3),artist:new kn(30).get(i,t+33),album:new kn(30).get(i,t+63),year:new kn(4).get(i,t+93),comment:new kn(28).get(i,t+97),zeroByte:Fc.UINT8.get(i,t+127),track:Fc.UINT8.get(i,t+126),genre:Fc.UINT8.get(i,t+127)}:null}},kn=class extends Fc.StringType{constructor(t){super(t,"binary")}get(t,e){let n=super.get(t,e);return n=sD.trimRightNull(n),n=n.trim(),n.length>0?n:void 0}},hh=class i extends lD.BasicParser{static getGenre(t){if(t<Ei.Genres.length)return Ei.Genres[t]}parse(){return g(this,null,function*(){if(!this.tokenizer.fileInfo.size){Ac("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);let n=new cD.APEv2Parser;n.init(this.metadata,this.tokenizer,this.options),yield n.parseTags(this.options.apeHeader.footer)}let t=this.tokenizer.fileInfo.size-Rc.len;if(this.tokenizer.position>t){Ac("Already consumed the last 128 bytes");return}let e=yield this.tokenizer.readToken(Rc,t);if(e){Ac("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-Rc.len);for(let r of["title","artist","album","comment","track","year"])e[r]&&e[r]!==""&&this.addTag(r,e[r]);let n=i.getGenre(e.genre);n&&this.addTag("genre",n)}else Ac("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-Rc.len)})}addTag(t,e){this.metadata.addTag("ID3v1",t,e)}};Ei.ID3v1Parser=hh;function dD(i){return g(this,null,function*(){if(i.fileSize>=128){let t=Buffer.alloc(3);return yield i.randomRead(t,0,t.length,i.fileSize-128),t.toString("binary")==="TAG"}return!1})}Ei.hasID3v1Header=dD});var fy=S(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.FrameParser=Lo.parseGenre=void 0;var uD=Me(),fh=ce(),Se=Be(),uy=Fo(),py=ss(),my=(0,uD.default)("music-metadata:id3v2:frame-parser"),ni="latin1";function hy(i){let t=[],e,n="";for(let r of i)if(typeof e=="string")if(r==="("&&e==="")n+="(",e=void 0;else if(r===")"){n!==""&&(t.push(n),n="");let o=mD(e);o&&t.push(o),e=void 0}else e+=r;else r==="("?e="":n+=r;return n&&(t.length===0&&n.match(/^\d*$/)&&(n=py.Genres[n]),t.push(n)),t}Lo.parseGenre=hy;function mD(i){if(i==="RX")return"Remix";if(i==="CR")return"Cover";if(i.match(/^\d*$/))return py.Genres[i]}var gh=class i{constructor(t,e){this.major=t,this.warningCollector=e}readData(t,e,n){if(t.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${e}`);return}let{encoding:r,bom:o}=uy.TextEncodingToken.get(t,0),a=t.length,s=0,l=[],u=i.getNullTerminatorLength(r),m,p={};switch(my(`Parsing tag type=${e}, encoding=${r}, bom=${o}`),e!=="TXXX"&&e[0]==="T"?"T*":e){case"T*":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":let y;try{y=Se.decodeString(t.slice(1),r).replace(/\x00+$/,"")}catch(b){this.warningCollector.addWarning(`id3v2.${this.major} type=${e} header has invalid string value: ${b.message}`)}switch(e){case"TMCL":case"TIPL":case"IPLS":l=this.splitValue(e,y),l=i.functionList(l);break;case"TRK":case"TRCK":case"TPOS":l=y;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":l=this.splitValue(e,y);break;case"TCO":case"TCON":l=this.splitValue(e,y).map(b=>hy(b)).reduce((b,x)=>b.concat(x),[]);break;case"PCS":case"PCST":l=this.major>=4?this.splitValue(e,y):[y],l=Array.isArray(l)&&l[0]===""?1:0;break;default:l=this.major>=4?this.splitValue(e,y):[y]}break;case"TXXX":l=i.readIdentifierAndData(t,s+1,a,r),l={description:l.id,text:this.splitValue(e,Se.decodeString(l.data,r).replace(/\x00+$/,""))};break;case"PIC":case"APIC":if(n){let b={};switch(s+=1,this.major){case 2:b.format=Se.decodeString(t.slice(s,s+3),"latin1"),s+=3;break;case 3:case 4:m=Se.findZero(t,s,a,ni),b.format=Se.decodeString(t.slice(s,m),ni),s=m+1;break;default:throw new Error("Warning: unexpected major versionIndex: "+this.major)}b.format=i.fixPictureMimeType(b.format),b.type=uy.AttachedPictureType[t[s]],s+=1,m=Se.findZero(t,s,a,r),b.description=Se.decodeString(t.slice(s,m),r),s=m+u,b.data=Buffer.from(t.slice(s,a)),l=b}break;case"CNT":case"PCNT":l=fh.UINT32_BE.get(t,0);break;case"SYLT":for(s+=7,l=[];s<a;){let b=t.slice(s,s=Se.findZero(t,s,a,r));s+=5,l.push(Se.decodeString(b,r))}break;case"ULT":case"USLT":case"COM":case"COMM":s+=1,p.language=Se.decodeString(t.slice(s,s+3),ni),s+=3,m=Se.findZero(t,s,a,r),p.description=Se.decodeString(t.slice(s,m),r),s=m+u,p.text=Se.decodeString(t.slice(s,a),r).replace(/\x00+$/,""),l=[p];break;case"UFID":l=i.readIdentifierAndData(t,s,a,ni),l={owner_identifier:l.id,identifier:l.data};break;case"PRIV":l=i.readIdentifierAndData(t,s,a,ni),l={owner_identifier:l.id,data:l.data};break;case"POPM":m=Se.findZero(t,s,a,ni);let v=Se.decodeString(t.slice(s,m),ni);s=m+1;let P=a-s;l={email:v,rating:fh.UINT8.get(t,s),counter:P>=5?fh.UINT32_BE.get(t,s+1):void 0};break;case"GEOB":{m=Se.findZero(t,s+1,a,r);let b=Se.decodeString(t.slice(s+1,m),ni);s=m+1,m=Se.findZero(t,s,a-s,r);let x=Se.decodeString(t.slice(s,m),ni);s=m+1,m=Se.findZero(t,s,a-s,r);let D=Se.decodeString(t.slice(s,m),ni);l={type:b,filename:x,description:D,data:t.slice(s+1,a)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":l=Se.decodeString(t.slice(s,m),ni);break;case"WXXX":{m=Se.findZero(t,s+1,a,r);let b=Se.decodeString(t.slice(s+1,m),r);s=m+(r==="utf16le"?2:1),l={description:b,url:Se.decodeString(t.slice(s,a),ni)};break}case"WFD":case"WFED":l=Se.decodeString(t.slice(s+1,Se.findZero(t,s+1,a,r)),r);break;case"MCDI":{l=t.slice(0,a);break}default:my("Warning: unsupported id3v2-tag-type: "+e);break}return l}static fixPictureMimeType(t){switch(t=t.toLocaleLowerCase(),t){case"jpg":return"image/jpeg";case"png":return"image/png"}return t}static functionList(t){let e={};for(let n=0;n+1<t.length;n+=2){let r=t[n+1].split(",");e[t[n]]=e.hasOwnProperty(t[n])?e[t[n]].concat(r):r}return e}splitValue(t,e){let n;return this.major<4?(n=e.split(/\x00/g),n.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${t} uses non standard null-separator.`):n=e.split(/\//g)):n=e.split(/\x00/g),i.trimArray(n)}static trimArray(t){return t.map(e=>e.replace(/\x00+$/,"").trim())}static readIdentifierAndData(t,e,n,r){let o=Se.findZero(t,e,n,r),a=Se.decodeString(t.slice(e,o),r);return e=o+i.getNullTerminatorLength(r),{id:a,data:t.slice(e,n)}}static getNullTerminatorLength(t){return t==="utf16le"?2:1}};Lo.FrameParser=gh});var Bo=S(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.ID3v2Parser=void 0;var bh=ce(),Tn=Be(),pD=fy(),Nc=Fo(),_h=class i{static removeUnsyncBytes(t){let e=0,n=0;for(;e<t.length-1;)e!==n&&(t[n]=t[e]),e+=t[e]===255&&t[e+1]===0?2:1,n++;return e<t.length&&(t[n++]=t[e]),t.slice(0,n)}static getFrameHeaderLength(t){switch(t){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(t){return{status:{tag_alter_preservation:Tn.getBit(t,0,6),file_alter_preservation:Tn.getBit(t,0,5),read_only:Tn.getBit(t,0,4)},format:{grouping_identity:Tn.getBit(t,1,7),compression:Tn.getBit(t,1,3),encryption:Tn.getBit(t,1,2),unsynchronisation:Tn.getBit(t,1,1),data_length_indicator:Tn.getBit(t,1,0)}}}static readFrameData(t,e,n,r,o){let a=new pD.FrameParser(n,o);switch(n){case 2:return a.readData(t,e.id,r);case 3:case 4:return e.flags.format.unsynchronisation&&(t=i.removeUnsyncBytes(t)),e.flags.format.data_length_indicator&&(t=t.slice(4,t.length)),a.readData(t,e.id,r);default:throw new Error("Unexpected majorVer: "+n)}}static makeDescriptionTagName(t,e){return t+(e?":"+e:"")}parse(t,e,n){return g(this,null,function*(){this.tokenizer=e,this.metadata=t,this.options=n;let r=yield this.tokenizer.readToken(Nc.ID3v2Header);if(r.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=r,this.headerType="ID3v2."+r.version.major,r.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(r.size)})}parseExtendedHeader(){return g(this,null,function*(){let t=yield this.tokenizer.readToken(Nc.ExtendedHeader),e=t.size-Nc.ExtendedHeader.len;return e>0?this.parseExtendedHeaderData(e,t.size):this.parseId3Data(this.id3Header.size-t.size)})}parseExtendedHeaderData(t,e){return g(this,null,function*(){return yield this.tokenizer.ignore(t),this.parseId3Data(this.id3Header.size-e)})}parseId3Data(t){return g(this,null,function*(){let e=yield this.tokenizer.readToken(new bh.Uint8ArrayType(t));for(let n of this.parseMetadata(e))if(n.id==="TXXX"){if(n.value)for(let r of n.value.text)this.addTag(i.makeDescriptionTagName(n.id,n.value.description),r)}else if(n.id==="COM")for(let r of n.value)this.addTag(i.makeDescriptionTagName(n.id,r.description),r.text);else if(n.id==="COMM")for(let r of n.value)this.addTag(i.makeDescriptionTagName(n.id,r.description),r);else if(Array.isArray(n.value))for(let r of n.value)this.addTag(n.id,r);else this.addTag(n.id,n.value)})}addTag(t,e){this.metadata.addTag(this.headerType,t,e)}parseMetadata(t){let e=0,n=[];for(;e!==t.length;){let r=i.getFrameHeaderLength(this.id3Header.version.major);if(e+r>t.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}let o=t.slice(e,e+=r),a=this.readFrameHeader(o,this.id3Header.version.major),s=t.slice(e,e+=a.length),l=i.readFrameData(s,a,this.id3Header.version.major,!this.options.skipCovers,this.metadata);l&&n.push({id:a.id,value:l})}return n}readFrameHeader(t,e){let n;switch(e){case 2:n={id:Buffer.from(t.slice(0,3)).toString("ascii"),length:bh.UINT24_BE.get(t,3)},n.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${n.id}`);break;case 3:case 4:n={id:Buffer.from(t.slice(0,4)).toString("ascii"),length:(e===4?Nc.UINT32SYNCSAFE:bh.UINT32_BE).get(t,4),flags:i.readFrameFlags(t.slice(8,10))},n.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${n.id}`);break;default:throw new Error("Unexpected majorVer: "+e)}return n}};Lc.ID3v2Parser=_h});var gy=S(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.Common=void 0;var hD=ce(),fD=xt(),vh=class{constructor(t,e){this.isAifc=e;let n=e?22:18;if(t.chunkSize<n)throw new Error(`COMMON CHUNK size should always be at least ${n}`);this.len=t.chunkSize}get(t,e){let n=t.readUInt16BE(e+8)-16398,r=t.readUInt16BE(e+8+2),o={numChannels:t.readUInt16BE(e),numSampleFrames:t.readUInt32BE(e+2),sampleSize:t.readUInt16BE(e+6),sampleRate:n<0?r>>Math.abs(n):r<<n};if(this.isAifc){if(o.compressionType=fD.FourCcToken.get(t,e+18),this.len>22){let a=t.readInt8(e+22);if(a>0){let s=(a+1)%2;if(23+a+s===this.len)o.compressionName=new hD.StringType(a,"binary").get(t,e+23);else throw new Error("Illegal pstring length")}else o.compressionName=void 0}}else o.compressionName="PCM";return o}};Bc.Common=vh});var by=S(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.Header=void 0;var gD=ce(),bD=xt();Uc.Header={len:8,get:(i,t)=>({chunkID:bD.FourCcToken.get(i,t),chunkSize:Number(BigInt(gD.UINT32_BE.get(i,t+4)))})}});var yy=S(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.AIFFParser=void 0;var _y=ce(),_D=Me(),vy=Mi(),vD=Bo(),yD=xt(),xD=Nt(),wD=gy(),yh=by(),xh=(0,_D.default)("music-metadata:parser:aiff"),CD={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"\xB5Law 2:1	8-bit ITU-T G.711 \xB5-law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 \xB5-law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "},wh=class extends xD.BasicParser{parse(){return g(this,null,function*(){if((yield this.tokenizer.readToken(yh.Header)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");let e=yield this.tokenizer.readToken(yD.FourCcToken);switch(e){case"AIFF":this.metadata.setFormat("container",e),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw Error("Unsupported AIFF type: "+e)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=yh.Header.len;){xh("Reading AIFF chunk at offset="+this.tokenizer.position);let n=yield this.tokenizer.readToken(yh.Header),r=2*Math.round(n.chunkSize/2),o=yield this.readData(n);yield this.tokenizer.ignore(r-o)}}catch(n){if(n instanceof vy.EndOfStreamError)xh("End-of-stream");else throw n}})}readData(t){return g(this,null,function*(){var e;switch(t.chunkID){case"COMM":let n=yield this.tokenizer.readToken(new wD.Common(t,this.isCompressed));return this.metadata.setFormat("bitsPerSample",n.sampleSize),this.metadata.setFormat("sampleRate",n.sampleRate),this.metadata.setFormat("numberOfChannels",n.numChannels),this.metadata.setFormat("numberOfSamples",n.numSampleFrames),this.metadata.setFormat("duration",n.numSampleFrames/n.sampleRate),this.metadata.setFormat("codec",(e=n.compressionName)!==null&&e!==void 0?e:CD[n.compressionType]),t.chunkSize;case"ID3 ":let r=yield this.tokenizer.readToken(new _y.Uint8ArrayType(t.chunkSize)),o=vy.fromBuffer(r);return yield new vD.ID3v2Parser().parse(this.metadata,o,this.options),t.chunkSize;case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*t.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(t);default:return xh(`Ignore chunk id=${t.chunkID}, size=${t.chunkSize}`),0}})}readTextChunk(t){return g(this,null,function*(){return(yield this.tokenizer.readToken(new _y.StringType(t.chunkSize,"ascii"))).split("\0").map(n=>n.trim()).filter(n=>n&&n.length>0).forEach(n=>{this.metadata.addTag("AIFF",t.chunkID,n.trim())}),t.chunkSize})}};zc.AIFFParser=wh});var Sh=S(Ch=>{"use strict";Object.defineProperty(Ch,"__esModule",{value:!0});var A=class i{static fromBin(t,e=0){return new i(this.decode(t,e))}static decode(t,e=0){return(t.readUInt32LE(e).toString(16)+"-"+t.readUInt16LE(e+4).toString(16)+"-"+t.readUInt16LE(e+6).toString(16)+"-"+t.readUInt16BE(e+8).toString(16)+"-"+t.slice(e+10,e+16).toString("hex")).toUpperCase()}static decodeMediaType(t){switch(t.str){case i.AudioMedia.str:return"audio";case i.VideoMedia.str:return"video";case i.CommandMedia.str:return"command";case i.Degradable_JPEG_Media.str:return"degradable-jpeg";case i.FileTransferMedia.str:return"file-transfer";case i.BinaryMedia.str:return"binary"}}static encode(t){let e=Buffer.alloc(16);return e.writeUInt32LE(parseInt(t.slice(0,8),16),0),e.writeUInt16LE(parseInt(t.slice(9,13),16),4),e.writeUInt16LE(parseInt(t.slice(14,18),16),6),Buffer.from(t.slice(19,23),"hex").copy(e,8),Buffer.from(t.slice(24),"hex").copy(e,10),e}constructor(t){this.str=t}equals(t){return this.str===t.str}toBin(){return i.encode(this.str)}};A.HeaderObject=new A("75B22630-668E-11CF-A6D9-00AA0062CE6C");A.DataObject=new A("75B22636-668E-11CF-A6D9-00AA0062CE6C");A.SimpleIndexObject=new A("33000890-E5B1-11CF-89F4-00A0C90349CB");A.IndexObject=new A("D6E229D3-35DA-11D1-9034-00A0C90349BE");A.MediaObjectIndexObject=new A("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C");A.TimecodeIndexObject=new A("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C");A.FilePropertiesObject=new A("8CABDCA1-A947-11CF-8EE4-00C00C205365");A.StreamPropertiesObject=new A("B7DC0791-A9B7-11CF-8EE6-00C00C205365");A.HeaderExtensionObject=new A("5FBF03B5-A92E-11CF-8EE3-00C00C205365");A.CodecListObject=new A("86D15240-311D-11D0-A3A4-00A0C90348F6");A.ScriptCommandObject=new A("1EFB1A30-0B62-11D0-A39B-00A0C90348F6");A.MarkerObject=new A("F487CD01-A951-11CF-8EE6-00C00C205365");A.BitrateMutualExclusionObject=new A("D6E229DC-35DA-11D1-9034-00A0C90349BE");A.ErrorCorrectionObject=new A("75B22635-668E-11CF-A6D9-00AA0062CE6C");A.ContentDescriptionObject=new A("75B22633-668E-11CF-A6D9-00AA0062CE6C");A.ExtendedContentDescriptionObject=new A("D2D0A440-E307-11D2-97F0-00A0C95EA850");A.ContentBrandingObject=new A("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E");A.StreamBitratePropertiesObject=new A("7BF875CE-468D-11D1-8D82-006097C9A2B2");A.ContentEncryptionObject=new A("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E");A.ExtendedContentEncryptionObject=new A("298AE614-2622-4C17-B935-DAE07EE9289C");A.DigitalSignatureObject=new A("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E");A.PaddingObject=new A("1806D474-CADF-4509-A4BA-9AABCB96AAE8");A.ExtendedStreamPropertiesObject=new A("14E6A5CB-C672-4332-8399-A96952065B5A");A.AdvancedMutualExclusionObject=new A("A08649CF-4775-4670-8A16-6E35357566CD");A.GroupMutualExclusionObject=new A("D1465A40-5A79-4338-B71B-E36B8FD6C249");A.StreamPrioritizationObject=new A("D4FED15B-88D3-454F-81F0-ED5C45999E24");A.BandwidthSharingObject=new A("A69609E6-517B-11D2-B6AF-00C04FD908E9");A.LanguageListObject=new A("7C4346A9-EFE0-4BFC-B229-393EDE415C85");A.MetadataObject=new A("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA");A.MetadataLibraryObject=new A("44231C94-9498-49D1-A141-1D134E457054");A.IndexParametersObject=new A("D6E229DF-35DA-11D1-9034-00A0C90349BE");A.MediaObjectIndexParametersObject=new A("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7");A.TimecodeIndexParametersObject=new A("F55E496D-9797-4B5D-8C8B-604DFE9BFB24");A.CompatibilityObject=new A("26F18B5D-4584-47EC-9F5F-0E651F0452C9");A.AdvancedContentEncryptionObject=new A("43058533-6981-49E6-9B74-AD12CB86D58C");A.AudioMedia=new A("F8699E40-5B4D-11CF-A8FD-00805F5C442B");A.VideoMedia=new A("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B");A.CommandMedia=new A("59DACFC0-59E6-11D0-A3AC-00A0C90348F6");A.JFIF_Media=new A("B61BE100-5B4E-11CF-A8FD-00805F5C442B");A.Degradable_JPEG_Media=new A("35907DE0-E415-11CF-A917-00805F5C442B");A.FileTransferMedia=new A("91BD222C-F21C-497A-8B6D-5AA86BFC0185");A.BinaryMedia=new A("3AFB65E2-47EF-40F2-AC2C-70A90D71D343");A.ASF_Index_Placeholder_Object=new A("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2");Ch.default=A});var wy=S(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.AsfUtil=void 0;var SD=ce(),xy=Be(),pi=class i{static getParserForAttr(t){return i.attributeParsers[t]}static parseUnicodeAttr(t){return xy.stripNulls(xy.decodeString(t,"utf16le"))}static parseByteArrayAttr(t){return Buffer.from(t)}static parseBoolAttr(t,e=0){return i.parseWordAttr(t,e)===1}static parseDWordAttr(t,e=0){return t.readUInt32LE(e)}static parseQWordAttr(t,e=0){return SD.UINT64_LE.get(t,e)}static parseWordAttr(t,e=0){return t.readUInt16LE(e)}};pi.attributeParsers=[pi.parseUnicodeAttr,pi.parseByteArrayAttr,pi.parseBoolAttr,pi.parseDWordAttr,pi.parseQWordAttr,pi.parseWordAttr,pi.parseByteArrayAttr];jc.AsfUtil=pi});var Sy=S(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.WmPictureToken=be.MetadataLibraryObjectState=be.MetadataObjectState=be.ExtendedStreamPropertiesObjectState=be.ExtendedContentDescriptionObjectState=be.ContentDescriptionObjectState=be.readCodecEntries=be.HeaderExtensionObject=be.StreamPropertiesObject=be.FilePropertiesObject=be.IgnoreObjectState=be.State=be.HeaderObjectToken=be.TopLevelHeaderObjectToken=be.DataType=void 0;var ls=Be(),Ze=ce(),wt=Sh(),Yc=wy(),MD=Fo(),ED;(function(i){i[i.UnicodeString=0]="UnicodeString",i[i.ByteArray=1]="ByteArray",i[i.Bool=2]="Bool",i[i.DWord=3]="DWord",i[i.QWord=4]="QWord",i[i.Word=5]="Word"})(ED=be.DataType||(be.DataType={}));be.TopLevelHeaderObjectToken={len:30,get:(i,t)=>({objectId:wt.default.fromBin(new Ze.BufferType(16).get(i,t)),objectSize:Number(Ze.UINT64_LE.get(i,t+16)),numberOfHeaderObjects:Ze.UINT32_LE.get(i,t+24)})};be.HeaderObjectToken={len:24,get:(i,t)=>({objectId:wt.default.fromBin(new Ze.BufferType(16).get(i,t)),objectSize:Number(Ze.UINT64_LE.get(i,t+16))})};var ki=class{constructor(t){this.len=Number(t.objectSize)-be.HeaderObjectToken.len}postProcessTag(t,e,n,r){if(e==="WM/Picture")t.push({id:e,value:Xc.fromBuffer(r)});else{let o=Yc.AsfUtil.getParserForAttr(n);if(!o)throw new Error("unexpected value headerType: "+n);t.push({id:e,value:o(r)})}}};be.State=ki;var Mh=class extends ki{constructor(t){super(t)}get(t,e){return null}};be.IgnoreObjectState=Mh;var Vc=class extends ki{constructor(t){super(t)}get(t,e){return{fileId:wt.default.fromBin(t,e),fileSize:Ze.UINT64_LE.get(t,e+16),creationDate:Ze.UINT64_LE.get(t,e+24),dataPacketsCount:Ze.UINT64_LE.get(t,e+32),playDuration:Ze.UINT64_LE.get(t,e+40),sendDuration:Ze.UINT64_LE.get(t,e+48),preroll:Ze.UINT64_LE.get(t,e+56),flags:{broadcast:ls.getBit(t,e+64,24),seekable:ls.getBit(t,e+64,25)},minimumDataPacketSize:Ze.UINT32_LE.get(t,e+68),maximumDataPacketSize:Ze.UINT32_LE.get(t,e+72),maximumBitrate:Ze.UINT32_LE.get(t,e+76)}}};Vc.guid=wt.default.FilePropertiesObject;be.FilePropertiesObject=Vc;var qc=class extends ki{constructor(t){super(t)}get(t,e){return{streamType:wt.default.decodeMediaType(wt.default.fromBin(t,e)),errorCorrectionType:wt.default.fromBin(t,e+8)}}};qc.guid=wt.default.StreamPropertiesObject;be.StreamPropertiesObject=qc;var Hc=class{constructor(){this.len=22}get(t,e){return{reserved1:wt.default.fromBin(t,e),reserved2:t.readUInt16LE(e+16),extensionDataSize:t.readUInt32LE(e+18)}}};Hc.guid=wt.default.HeaderExtensionObject;be.HeaderExtensionObject=Hc;var kD={len:20,get:(i,t)=>({entryCount:i.readUInt16LE(t+16)})};function Cy(i){return g(this,null,function*(){let t=yield i.readNumber(Ze.UINT16_LE);return(yield i.readToken(new Ze.StringType(t*2,"utf16le"))).replace("\0","")})}function TD(i){return g(this,null,function*(){let t=yield i.readToken(kD),e=[];for(let n=0;n<t.entryCount;++n)e.push(yield PD(i));return e})}be.readCodecEntries=TD;function ID(i){return g(this,null,function*(){let t=yield i.readNumber(Ze.UINT16_LE),e=Buffer.alloc(t);return yield i.readBuffer(e),e})}function PD(i){return g(this,null,function*(){let t=yield i.readNumber(Ze.UINT16_LE);return{type:{videoCodec:(t&1)===1,audioCodec:(t&2)===2},codecName:yield Cy(i),description:yield Cy(i),information:yield ID(i)}})}var cs=class i extends ki{constructor(t){super(t)}get(t,e){let n=[],r=e+10;for(let o=0;o<i.contentDescTags.length;++o){let a=t.readUInt16LE(e+o*2);if(a>0){let s=i.contentDescTags[o],l=r+a;n.push({id:s,value:Yc.AsfUtil.parseUnicodeAttr(t.slice(r,l))}),r=l}}return n}};cs.guid=wt.default.ContentDescriptionObject;cs.contentDescTags=["Title","Author","Copyright","Description","Rating"];be.ContentDescriptionObjectState=cs;var $c=class extends ki{constructor(t){super(t)}get(t,e){let n=[],r=t.readUInt16LE(e),o=e+2;for(let a=0;a<r;a+=1){let s=t.readUInt16LE(o);o+=2;let l=Yc.AsfUtil.parseUnicodeAttr(t.slice(o,o+s));o+=s;let u=t.readUInt16LE(o);o+=2;let m=t.readUInt16LE(o);o+=2;let p=t.slice(o,o+m);o+=m,this.postProcessTag(n,l,u,p)}return n}};$c.guid=wt.default.ExtendedContentDescriptionObject;be.ExtendedContentDescriptionObjectState=$c;var Wc=class extends ki{constructor(t){super(t)}get(t,e){return{startTime:Ze.UINT64_LE.get(t,e),endTime:Ze.UINT64_LE.get(t,e+8),dataBitrate:t.readInt32LE(e+12),bufferSize:t.readInt32LE(e+16),initialBufferFullness:t.readInt32LE(e+20),alternateDataBitrate:t.readInt32LE(e+24),alternateBufferSize:t.readInt32LE(e+28),alternateInitialBufferFullness:t.readInt32LE(e+32),maximumObjectSize:t.readInt32LE(e+36),flags:{reliableFlag:ls.getBit(t,e+40,0),seekableFlag:ls.getBit(t,e+40,1),resendLiveCleanpointsFlag:ls.getBit(t,e+40,2)},streamNumber:t.readInt16LE(e+42),streamLanguageId:t.readInt16LE(e+44),averageTimePerFrame:t.readInt32LE(e+52),streamNameCount:t.readInt32LE(e+54),payloadExtensionSystems:t.readInt32LE(e+56),streamNames:[],streamPropertiesObject:null}}};Wc.guid=wt.default.ExtendedStreamPropertiesObject;be.ExtendedStreamPropertiesObjectState=Wc;var ds=class extends ki{constructor(t){super(t)}get(t,e){let n=[],r=Buffer.from(t),o=r.readUInt16LE(e),a=e+2;for(let s=0;s<o;s+=1){a+=4;let l=r.readUInt16LE(a);a+=2;let u=r.readUInt16LE(a);a+=2;let m=r.readUInt32LE(a);a+=4;let p=Yc.AsfUtil.parseUnicodeAttr(r.slice(a,a+l));a+=l;let y=r.slice(a,a+m);a+=m,this.postProcessTag(n,p,u,y)}return n}};ds.guid=wt.default.MetadataObject;be.MetadataObjectState=ds;var Gc=class extends ds{constructor(t){super(t)}};Gc.guid=wt.default.MetadataLibraryObject;be.MetadataLibraryObjectState=Gc;var Xc=class i{static fromBase64(t){return this.fromBuffer(Buffer.from(t,"base64"))}static fromBuffer(t){return new i(t.length).get(t,0)}constructor(t){this.len=t}get(t,e){let n=t.readUInt8(e++),r=t.readInt32LE(e),o=5;for(;t.readUInt16BE(o)!==0;)o+=2;let a=t.slice(5,o).toString("utf16le");for(;t.readUInt16BE(o)!==0;)o+=2;let s=t.slice(5,o).toString("utf16le");return{type:MD.AttachedPictureType[n],format:a,description:s,size:r,data:t.slice(o+4)}}};be.WmPictureToken=Xc});var Ey=S(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.AsfParser=void 0;var OD=Me(),My=vc(),yr=Sh(),ke=Sy(),DD=Nt(),Zc=(0,OD.default)("music-metadata:parser:ASF"),AD="asf",Eh=class extends DD.BasicParser{parse(){return g(this,null,function*(){let t=yield this.tokenizer.readToken(ke.TopLevelHeaderObjectToken);if(!t.objectId.equals(yr.default.HeaderObject))throw new Error("expected asf header; but was not found; got: "+t.objectId.str);try{yield this.parseObjectHeader(t.numberOfHeaderObjects)}catch(e){Zc("Error while parsing ASF: %s",e)}})}parseObjectHeader(t){return g(this,null,function*(){let e;do{let n=yield this.tokenizer.readToken(ke.HeaderObjectToken);switch(Zc("header GUID=%s",n.objectId.str),n.objectId.str){case ke.FilePropertiesObject.guid.str:let r=yield this.tokenizer.readToken(new ke.FilePropertiesObject(n));this.metadata.setFormat("duration",Number(r.playDuration/BigInt(1e3))/1e4-Number(r.preroll)/1e3),this.metadata.setFormat("bitrate",r.maximumBitrate);break;case ke.StreamPropertiesObject.guid.str:let o=yield this.tokenizer.readToken(new ke.StreamPropertiesObject(n));this.metadata.setFormat("container","ASF/"+o.streamType);break;case ke.HeaderExtensionObject.guid.str:let a=yield this.tokenizer.readToken(new ke.HeaderExtensionObject);yield this.parseExtensionObject(a.extensionDataSize);break;case ke.ContentDescriptionObjectState.guid.str:e=yield this.tokenizer.readToken(new ke.ContentDescriptionObjectState(n)),this.addTags(e);break;case ke.ExtendedContentDescriptionObjectState.guid.str:e=yield this.tokenizer.readToken(new ke.ExtendedContentDescriptionObjectState(n)),this.addTags(e);break;case yr.default.CodecListObject.str:let s=yield ke.readCodecEntries(this.tokenizer);s.forEach(u=>{this.metadata.addStreamInfo({type:u.type.videoCodec?My.TrackType.video:My.TrackType.audio,codecName:u.codecName})});let l=s.filter(u=>u.type.audioCodec).map(u=>u.codecName).join("/");this.metadata.setFormat("codec",l);break;case yr.default.StreamBitratePropertiesObject.str:yield this.tokenizer.ignore(n.objectSize-ke.HeaderObjectToken.len);break;case yr.default.PaddingObject.str:Zc("Padding: %s bytes",n.objectSize-ke.HeaderObjectToken.len),yield this.tokenizer.ignore(n.objectSize-ke.HeaderObjectToken.len);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+n.objectId.str),Zc("Ignore ASF-Object-GUID: %s",n.objectId.str),yield this.tokenizer.readToken(new ke.IgnoreObjectState(n))}}while(--t)})}addTags(t){t.forEach(e=>{this.metadata.addTag(AD,e.id,e.value)})}parseExtensionObject(t){return g(this,null,function*(){do{let e=yield this.tokenizer.readToken(ke.HeaderObjectToken),n=e.objectSize-ke.HeaderObjectToken.len;switch(e.objectId.str){case ke.ExtendedStreamPropertiesObjectState.guid.str:yield this.tokenizer.readToken(new ke.ExtendedStreamPropertiesObjectState(e));break;case ke.MetadataObjectState.guid.str:let r=yield this.tokenizer.readToken(new ke.MetadataObjectState(e));this.addTags(r);break;case ke.MetadataLibraryObjectState.guid.str:let o=yield this.tokenizer.readToken(new ke.MetadataLibraryObjectState(e));this.addTags(o);break;case yr.default.PaddingObject.str:yield this.tokenizer.ignore(n);break;case yr.default.CompatibilityObject.str:this.tokenizer.ignore(n);break;case yr.default.ASF_Index_Placeholder_Object.str:yield this.tokenizer.ignore(n);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+e.objectId.str),yield this.tokenizer.readToken(new ke.IgnoreObjectState(e));break}t-=e.objectSize}while(t>0)})}};Kc.AsfParser=Eh});var Th=S(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.IdentificationHeader=In.CommonHeader=In.VorbisPictureToken=void 0;var Yi=ce(),RD=Fo(),kh=class i{static fromBase64(t){return this.fromBuffer(Buffer.from(t,"base64"))}static fromBuffer(t){return new i(t.length).get(t,0)}constructor(t){this.len=t}get(t,e){let n=RD.AttachedPictureType[Yi.UINT32_BE.get(t,e)],r=Yi.UINT32_BE.get(t,e+=4),o=t.toString("utf-8",e+=4,e+r),a=Yi.UINT32_BE.get(t,e+=r),s=t.toString("utf-8",e+=4,e+a),l=Yi.UINT32_BE.get(t,e+=a),u=Yi.UINT32_BE.get(t,e+=4),m=Yi.UINT32_BE.get(t,e+=4),p=Yi.UINT32_BE.get(t,e+=4),y=Yi.UINT32_BE.get(t,e+=4),v=Buffer.from(t.slice(e+=4,e+y));return{type:n,format:o,description:s,width:l,height:u,colour_depth:m,indexed_color:p,data:v}}};In.VorbisPictureToken=kh;In.CommonHeader={len:7,get:(i,t)=>({packetType:i.readUInt8(t),vorbis:new Yi.StringType(6,"ascii").get(i,t+1)})};In.IdentificationHeader={len:23,get:(i,t)=>{let e=new DataView(i.buffer,i.byteOffset);return{version:e.getUint32(t+0,!0),channelMode:e.getUint8(t+4),sampleRate:e.getUint32(t+5,!0),bitrateMax:e.getUint32(t+9,!0),bitrateNominal:e.getUint32(t+13,!0),bitrateMin:e.getUint32(t+17,!0)}}}});var us=S(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.AbstractID3Parser=void 0;var FD=Mi(),ND=Me(),ky=Fo(),LD=Bo(),BD=ss(),UD=Nt(),Ih=(0,ND.default)("music-metadata:parser:ID3"),Ph=class extends UD.BasicParser{constructor(){super(...arguments),this.id3parser=new LD.ID3v2Parser}static startsWithID3v2Header(t){return g(this,null,function*(){return(yield t.peekToken(ky.ID3v2Header)).fileIdentifier==="ID3"})}parse(){return g(this,null,function*(){try{yield this.parseID3v2()}catch(t){if(t instanceof FD.EndOfStreamError)Ih("End-of-stream");else throw t}})}finalize(){}parseID3v2(){return g(this,null,function*(){yield this.tryReadId3v2Headers(),Ih("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),yield this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(yield new BD.ID3v1Parser().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())})}tryReadId3v2Headers(){return g(this,null,function*(){if((yield this.tokenizer.peekToken(ky.ID3v2Header)).fileIdentifier==="ID3")return Ih("Found ID3v2 header, pos=%s",this.tokenizer.position),yield this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()})}};Qc.AbstractID3Parser=Ph});var Dh=S(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.VorbisDecoder=void 0;var zD=ce(),Oh=class{constructor(t,e){this.data=t,this.offset=e}readInt32(){let t=zD.UINT32_LE.get(this.data,this.offset);return this.offset+=4,t}readStringUtf8(){let t=this.readInt32(),e=Buffer.from(this.data).toString("utf-8",this.offset,this.offset+t);return this.offset+=t,e}parseUserComment(){let t=this.offset,e=this.readStringUtf8(),n=e.indexOf("=");return{key:e.slice(0,n).toUpperCase(),value:e.slice(n+1),len:this.offset-t}}};Jc.VorbisDecoder=Oh});var ms=S(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.VorbisParser=void 0;var Ty=ce(),jD=Me(),VD=Dh(),Uo=Th(),zo=(0,jD.default)("music-metadata:parser:ogg:vorbis1"),Ah=class{constructor(t,e){this.metadata=t,this.options=e,this.pageSegments=[]}parsePage(t,e){if(t.headerType.firstPage)this.parseFirstPage(t,e);else{if(t.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(e)}if(t.headerType.lastPage||!t.headerType.continued){if(this.pageSegments.length>0){let n=Buffer.concat(this.pageSegments);this.parseFullPage(n)}this.pageSegments=t.headerType.lastPage?[]:[e]}}t.headerType.lastPage&&this.calculateDuration(t)}flush(){this.parseFullPage(Buffer.concat(this.pageSegments))}parseUserComment(t,e){let r=new VD.VorbisDecoder(t,e).parseUserComment();return this.addTag(r.key,r.value),r.len}addTag(t,e){if(t==="METADATA_BLOCK_PICTURE"&&typeof e=="string"){if(this.options.skipCovers){zo("Ignore picture");return}e=Uo.VorbisPictureToken.fromBase64(e),zo(`Push picture: id=${t}, format=${e.format}`)}else zo(`Push tag: id=${t}, value=${e}`);this.metadata.addTag("vorbis",t,e)}calculateDuration(t){this.metadata.format.sampleRate&&t.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",t.absoluteGranulePosition),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate))}parseFirstPage(t,e){this.metadata.setFormat("codec","Vorbis I"),zo("Parse first page");let n=Uo.CommonHeader.get(e,0);if(n.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(n.packetType===1){let r=Uo.IdentificationHeader.get(e,Uo.CommonHeader.len);this.metadata.setFormat("sampleRate",r.sampleRate),this.metadata.setFormat("bitrate",r.bitrateNominal),this.metadata.setFormat("numberOfChannels",r.channelMode),zo("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",r.sampleRate,r.bitrateNominal,r.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}parseFullPage(t){let e=Uo.CommonHeader.get(t,0);switch(zo("Parse full page: type=%s, byteLength=%s",e.packetType,t.byteLength),e.packetType){case 3:return this.parseUserCommentList(t,Uo.CommonHeader.len);case 1:case 5:break}}parseUserCommentList(t,e){let n=Ty.UINT32_LE.get(t,e);e+=4,e+=n;let r=Ty.UINT32_LE.get(t,e);for(e+=4;r-- >0;)e+=this.parseUserComment(t,e)}};ed.VorbisParser=Ah});var Iy=S(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.FlacParser=void 0;var Pn=ce(),qD=Me(),ps=Be(),HD=Th(),$D=us(),WD=xt(),GD=ms(),XD=Dh(),YD=(0,qD.default)("music-metadata:parser:FLAC"),On=function(i){return i[i.STREAMINFO=0]="STREAMINFO",i[i.PADDING=1]="PADDING",i[i.APPLICATION=2]="APPLICATION",i[i.SEEKTABLE=3]="SEEKTABLE",i[i.VORBIS_COMMENT=4]="VORBIS_COMMENT",i[i.CUESHEET=5]="CUESHEET",i[i.PICTURE=6]="PICTURE",i}(On||{}),Fh=class extends $D.AbstractID3Parser{constructor(){super(...arguments),this.padding=0}init(t,e,n){return super.init(t,e,n),this.vorbisParser=new GD.VorbisParser(t,n),this}postId3v2Parse(){return g(this,null,function*(){if((yield this.tokenizer.readToken(WD.FourCcToken)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let e;do e=yield this.tokenizer.readToken(Rh.BlockHeader),yield this.parseDataBlock(e);while(!e.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){let n=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*n/this.metadata.format.duration)}})}parseDataBlock(t){switch(YD(`blockHeader type=${t.type}, length=${t.length}`),t.type){case On.STREAMINFO:return this.parseBlockStreamInfo(t.length);case On.PADDING:this.padding+=t.length;break;case On.APPLICATION:break;case On.SEEKTABLE:break;case On.VORBIS_COMMENT:return this.parseComment(t.length);case On.CUESHEET:break;case On.PICTURE:return this.parsePicture(t.length).then();default:this.metadata.addWarning("Unknown block type: "+t.type)}return this.tokenizer.ignore(t.length).then()}parseBlockStreamInfo(t){return g(this,null,function*(){if(t!==Rh.BlockStreamInfo.len)throw new Error("Unexpected block-stream-info length");let e=yield this.tokenizer.readToken(Rh.BlockStreamInfo);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",e.channels),this.metadata.setFormat("bitsPerSample",e.bitsPerSample),this.metadata.setFormat("sampleRate",e.sampleRate),e.totalSamples>0&&this.metadata.setFormat("duration",e.totalSamples/e.sampleRate)})}parseComment(t){return g(this,null,function*(){let e=yield this.tokenizer.readToken(new Pn.Uint8ArrayType(t)),n=new XD.VorbisDecoder(e,0);n.readStringUtf8();let r=n.readInt32();for(let o=0;o<r;o++){let a=n.parseUserComment();this.vorbisParser.addTag(a.key,a.value)}})}parsePicture(t){return g(this,null,function*(){if(this.options.skipCovers)return this.tokenizer.ignore(t);{let e=yield this.tokenizer.readToken(new HD.VorbisPictureToken(t));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",e)}})}};td.FlacParser=Fh;var Rh=(()=>{class i{}return i.BlockHeader={len:4,get:(t,e)=>({lastBlock:ps.getBit(t,e,7),type:ps.getBitAllignedNumber(t,e,1,7),length:Pn.UINT24_BE.get(t,e+1)})},i.BlockStreamInfo={len:34,get:(t,e)=>({minimumBlockSize:Pn.UINT16_BE.get(t,e),maximumBlockSize:Pn.UINT16_BE.get(t,e+2)/1e3,minimumFrameSize:Pn.UINT24_BE.get(t,e+4),maximumFrameSize:Pn.UINT24_BE.get(t,e+7),sampleRate:Pn.UINT24_BE.get(t,e+10)>>4,channels:ps.getBitAllignedNumber(t,e+12,4,3)+1,bitsPerSample:ps.getBitAllignedNumber(t,e+12,7,5)+1,totalSamples:ps.getBitAllignedNumber(t,e+13,4,36),fileMD5:new Pn.Uint8ArrayType(16).get(t,e+18)})},i})()});var Xh=S(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.ChapterText=Q.StcoAtom=Q.StszAtom=Q.StscAtom=Q.SampleToChunkToken=Q.SttsAtom=Q.TimeToSampleToken=Q.SoundSampleDescriptionV0=Q.SoundSampleDescriptionVersion=Q.StsdAtom=Q.TrackHeaderAtom=Q.NameAtom=Q.DataAtom=Q.MvhdAtom=Q.MdhdAtom=Q.FixedLengthAtom=Q.mhdr=Q.tkhd=Q.ftyp=Q.ExtendedSize=Q.Header=void 0;var B=ce(),ZD=Me(),Oy=xt(),Dy=(0,ZD.default)("music-metadata:parser:MP4:atom");Q.Header={len:8,get:(i,t)=>{let e=B.UINT32_BE.get(i,t);if(e<0)throw new Error("Invalid atom header length");return{length:BigInt(e),name:new B.StringType(4,"binary").get(i,t+4)}},put:(i,t,e)=>(B.UINT32_BE.put(i,t,Number(e.length)),Oy.FourCcToken.put(i,t+4,e.name))};Q.ExtendedSize=B.UINT64_BE;Q.ftyp={len:4,get:(i,t)=>({type:new B.StringType(4,"ascii").get(i,t)})};Q.tkhd={len:4,get:(i,t)=>({type:new B.StringType(4,"ascii").get(i,t)})};Q.mhdr={len:8,get:(i,t)=>({version:B.UINT8.get(i,t),flags:B.UINT24_BE.get(i,t+1),nextItemID:B.UINT32_BE.get(i,t+4)})};var hs=class{constructor(t,e,n){if(this.len=t,t<e)throw new Error(`Atom ${n} expected to be ${e}, but specifies ${t} bytes long.`);t>e&&Dy(`Warning: atom ${n} expected to be ${e}, but was actually ${t} bytes long.`)}};Q.FixedLengthAtom=hs;var jo={len:4,get:(i,t)=>{let e=B.UINT32_BE.get(i,t)-2082844800;return new Date(e*1e3)}},Nh=class extends hs{constructor(t){super(t,24,"mdhd"),this.len=t}get(t,e){return{version:B.UINT8.get(t,e+0),flags:B.UINT24_BE.get(t,e+1),creationTime:jo.get(t,e+4),modificationTime:jo.get(t,e+8),timeScale:B.UINT32_BE.get(t,e+12),duration:B.UINT32_BE.get(t,e+16),language:B.UINT16_BE.get(t,e+20),quality:B.UINT16_BE.get(t,e+22)}}};Q.MdhdAtom=Nh;var Lh=class extends hs{constructor(t){super(t,100,"mvhd"),this.len=t}get(t,e){return{version:B.UINT8.get(t,e),flags:B.UINT24_BE.get(t,e+1),creationTime:jo.get(t,e+4),modificationTime:jo.get(t,e+8),timeScale:B.UINT32_BE.get(t,e+12),duration:B.UINT32_BE.get(t,e+16),preferredRate:B.UINT32_BE.get(t,e+20),preferredVolume:B.UINT16_BE.get(t,e+24),previewTime:B.UINT32_BE.get(t,e+72),previewDuration:B.UINT32_BE.get(t,e+76),posterTime:B.UINT32_BE.get(t,e+80),selectionTime:B.UINT32_BE.get(t,e+84),selectionDuration:B.UINT32_BE.get(t,e+88),currentTime:B.UINT32_BE.get(t,e+92),nextTrackID:B.UINT32_BE.get(t,e+96)}}};Q.MvhdAtom=Lh;var Bh=class{constructor(t){this.len=t}get(t,e){return{type:{set:B.UINT8.get(t,e+0),type:B.UINT24_BE.get(t,e+1)},locale:B.UINT24_BE.get(t,e+4),value:Buffer.from(new B.Uint8ArrayType(this.len-8).get(t,e+8))}}};Q.DataAtom=Bh;var Uh=class{constructor(t){this.len=t}get(t,e){return{version:B.UINT8.get(t,e),flags:B.UINT24_BE.get(t,e+1),name:new B.StringType(this.len-4,"utf-8").get(t,e+4)}}};Q.NameAtom=Uh;var zh=class{constructor(t){this.len=t}get(t,e){return{version:B.UINT8.get(t,e),flags:B.UINT24_BE.get(t,e+1),creationTime:jo.get(t,e+4),modificationTime:jo.get(t,e+8),trackId:B.UINT32_BE.get(t,e+12),duration:B.UINT32_BE.get(t,e+20),layer:B.UINT16_BE.get(t,e+24),alternateGroup:B.UINT16_BE.get(t,e+26),volume:B.UINT16_BE.get(t,e+28)}}};Q.TrackHeaderAtom=zh;var Py={len:8,get:(i,t)=>({version:B.UINT8.get(i,t),flags:B.UINT24_BE.get(i,t+1),numberOfEntries:B.UINT32_BE.get(i,t+4)})},jh=class{constructor(t){this.len=t}get(t,e){return{dataFormat:Oy.FourCcToken.get(t,e),dataReferenceIndex:B.UINT16_BE.get(t,e+10),description:new B.Uint8ArrayType(this.len-12).get(t,e+12)}}},Vh=class{constructor(t){this.len=t}get(t,e){let n=Py.get(t,e);e+=Py.len;let r=[];for(let o=0;o<n.numberOfEntries;++o){let a=B.UINT32_BE.get(t,e);e+=B.UINT32_BE.len,r.push(new jh(a).get(t,e)),e+=a}return{header:n,table:r}}};Q.StsdAtom=Vh;Q.SoundSampleDescriptionVersion={len:8,get(i,t){return{version:B.INT16_BE.get(i,t),revision:B.INT16_BE.get(i,t+2),vendor:B.INT32_BE.get(i,t+4)}}};Q.SoundSampleDescriptionV0={len:12,get(i,t){return{numAudioChannels:B.INT16_BE.get(i,t+0),sampleSize:B.INT16_BE.get(i,t+2),compressionId:B.INT16_BE.get(i,t+4),packetSize:B.INT16_BE.get(i,t+6),sampleRate:B.UINT16_BE.get(i,t+8)+B.UINT16_BE.get(i,t+10)/1e4}}};var fs=class{constructor(t,e){this.len=t,this.token=e}get(t,e){let n=B.INT32_BE.get(t,e+4);return{version:B.INT8.get(t,e+0),flags:B.INT24_BE.get(t,e+1),numberOfEntries:n,entries:Ay(t,this.token,e+8,this.len-8,n)}}};Q.TimeToSampleToken={len:8,get(i,t){return{count:B.INT32_BE.get(i,t+0),duration:B.INT32_BE.get(i,t+4)}}};var qh=class extends fs{constructor(t){super(t,Q.TimeToSampleToken),this.len=t}};Q.SttsAtom=qh;Q.SampleToChunkToken={len:12,get(i,t){return{firstChunk:B.INT32_BE.get(i,t),samplesPerChunk:B.INT32_BE.get(i,t+4),sampleDescriptionId:B.INT32_BE.get(i,t+8)}}};var Hh=class extends fs{constructor(t){super(t,Q.SampleToChunkToken),this.len=t}};Q.StscAtom=Hh;var $h=class{constructor(t){this.len=t}get(t,e){let n=B.INT32_BE.get(t,e+8);return{version:B.INT8.get(t,e),flags:B.INT24_BE.get(t,e+1),sampleSize:B.INT32_BE.get(t,e+4),numberOfEntries:n,entries:Ay(t,B.INT32_BE,e+12,this.len-12,n)}}};Q.StszAtom=$h;var Wh=class extends fs{constructor(t){super(t,B.INT32_BE),this.len=t}};Q.StcoAtom=Wh;var Gh=class{constructor(t){this.len=t}get(t,e){let n=B.INT16_BE.get(t,e+0);return new B.StringType(n,"utf-8").get(t,e+2)}};Q.ChapterText=Gh;function Ay(i,t,e,n,r){if(Dy(`remainingLen=${n}, numberOfEntries=${r} * token-len=${t.len}`),n===0)return[];if(n!==r*t.len)throw new Error("mismatch number-of-entries with remaining atom-length");let o=[];for(let a=0;a<r;++a)o.push(t.get(i,e)),e+=t.len;return o}});var Ry=S(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.Atom=void 0;var KD=Me(),Yh=Xh(),QD=(0,KD.default)("music-metadata:parser:MP4:Atom"),Zh=class i{static readAtom(t,e,n,r){return g(this,null,function*(){let o=t.position,a=yield t.readToken(Yh.Header);a.length===BigInt(1)&&(a.length=yield t.readToken(Yh.ExtendedSize));let l=new i(a,a.length===BigInt(1),n),u=l.getPayloadLength(r);return QD(`parse atom name=${l.atomPath}, extended=${l.extended}, offset=${o}, len=${l.header.length}`),yield l.readData(t,e,u),l})}constructor(t,e,n){this.header=t,this.extended=e,this.parent=n,this.children=[],this.atomPath=(this.parent?this.parent.atomPath+".":"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(t){return(this.header.length===BigInt(0)?t:Number(this.header.length))-this.getHeaderLength()}readAtoms(t,e,n){return g(this,null,function*(){for(;n>0;){let r=yield i.readAtom(t,e,this,n);this.children.push(r),n-=r.header.length===BigInt(0)?n:Number(r.header.length)}})}readData(t,e,n){return g(this,null,function*(){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(t,e,this.getPayloadLength(n));case"meta":let o=(yield t.peekToken(Yh.Header)).name==="hdlr"?0:4;return yield t.ignore(o),this.readAtoms(t,e,this.getPayloadLength(n)-o);case"mdhd":case"mvhd":case"tkhd":case"stsz":case"mdat":default:return e(this,n)}})}};id.Atom=Zh});var Ly=S(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.MP4Parser=void 0;var JD=Me(),Zi=ce(),eA=Nt(),tA=ss(),iA=vc(),nA=Ry(),it=Xh(),Ti=(0,JD.default)("music-metadata:parser:MP4"),rA="iTunes",Fy={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function Ny(i,t,e){return e.indexOf(i)===t}var Kh=class i extends eA.BasicParser{constructor(){super(...arguments),this.atomParsers={mvhd:t=>g(this,null,function*(){let e=yield this.tokenizer.readToken(new it.MvhdAtom(t));this.metadata.setFormat("creationTime",e.creationTime),this.metadata.setFormat("modificationTime",e.modificationTime)}),mdhd:t=>g(this,null,function*(){let e=yield this.tokenizer.readToken(new it.MdhdAtom(t)),n=this.getTrackDescription();n.creationTime=e.creationTime,n.modificationTime=e.modificationTime,n.timeScale=e.timeScale,n.duration=e.duration}),chap:t=>g(this,null,function*(){let e=this.getTrackDescription(),n=[];for(;t>=Zi.UINT32_BE.len;)n.push(yield this.tokenizer.readNumber(Zi.UINT32_BE)),t-=Zi.UINT32_BE.len;e.chapterList=n}),tkhd:t=>g(this,null,function*(){let e=yield this.tokenizer.readToken(new it.TrackHeaderAtom(t));this.tracks.push(e)}),mdat:t=>g(this,null,function*(){if(this.audioLengthInBytes=t,this.calculateBitRate(),this.options.includeChapters){let e=this.tracks.filter(n=>n.chapterList);if(e.length===1){let n=e[0].chapterList,r=this.tracks.filter(o=>n.indexOf(o.trackId)!==-1);if(r.length===1)return this.parseChapterTrack(r[0],e[0],t)}}yield this.tokenizer.ignore(t)}),ftyp:t=>g(this,null,function*(){let e=[];for(;t>0;){let r=yield this.tokenizer.readToken(it.ftyp);t-=it.ftyp.len;let o=r.type.replace(/\W/g,"");o.length>0&&e.push(o)}Ti(`ftyp: ${e.join("/")}`);let n=e.filter(Ny).join("/");this.metadata.setFormat("container",n)}),stsd:t=>g(this,null,function*(){let e=yield this.tokenizer.readToken(new it.StsdAtom(t)),n=this.getTrackDescription();n.soundSampleDescription=e.table.map(r=>this.parseSoundSampleDescription(r))}),stsc:t=>g(this,null,function*(){let e=yield this.tokenizer.readToken(new it.StscAtom(t));this.getTrackDescription().sampleToChunkTable=e.entries}),stts:t=>g(this,null,function*(){let e=yield this.tokenizer.readToken(new it.SttsAtom(t));this.getTrackDescription().timeToSampleTable=e.entries}),stsz:t=>g(this,null,function*(){let e=yield this.tokenizer.readToken(new it.StszAtom(t)),n=this.getTrackDescription();n.sampleSize=e.sampleSize,n.sampleSizeTable=e.entries}),stco:t=>g(this,null,function*(){let e=yield this.tokenizer.readToken(new it.StcoAtom(t));this.getTrackDescription().chunkOffsetTable=e.entries}),date:t=>g(this,null,function*(){let e=yield this.tokenizer.readToken(new Zi.StringType(t,"utf-8"));this.addTag("date",e)})}}static read_BE_Integer(t,e){let n=(e?"INT":"UINT")+t.length*8+(t.length>1?"_BE":""),r=Zi[n];if(!r)throw new Error('Token for integer type not found: "'+n+'"');return Number(r.get(t,0))}parse(){return g(this,null,function*(){this.tracks=[];let t=this.tokenizer.fileInfo.size;for(;!this.tokenizer.fileInfo.size||t>0;){try{if((yield this.tokenizer.peekToken(it.Header)).name==="\0\0\0\0"){let a=`Error at offset=${this.tokenizer.position}: box.id=0`;Ti(a),this.addWarning(a);break}}catch(o){let a=`Error at offset=${this.tokenizer.position}: ${o.message}`;Ti(a),this.addWarning(a);break}let r=yield nA.Atom.readAtom(this.tokenizer,(o,a)=>this.handleAtom(o,a),null,t);t-=r.header.length===BigInt(0)?t:Number(r.header.length)}let e=[];this.tracks.forEach(r=>{let o=[];r.soundSampleDescription.forEach(a=>{let s={},l=Fy[a.dataFormat];if(l?(o.push(l.format),s.codecName=l.format):s.codecName=`<${a.dataFormat}>`,a.description){let{description:u}=a;u.sampleRate>0&&(s.type=iA.TrackType.audio,s.audio={samplingFrequency:u.sampleRate,bitDepth:u.sampleSize,channels:u.numAudioChannels})}this.metadata.addStreamInfo(s)}),o.length>=1&&e.push(o.join("/"))}),e.length>0&&this.metadata.setFormat("codec",e.filter(Ny).join("+"));let n=this.tracks.filter(r=>r.soundSampleDescription.length>=1&&r.soundSampleDescription[0].description&&r.soundSampleDescription[0].description.numAudioChannels>0);if(n.length>=1){let r=n[0];if(r.timeScale>0){let s=r.duration/r.timeScale;this.metadata.setFormat("duration",s)}let o=r.soundSampleDescription[0];if(o.description&&(this.metadata.setFormat("sampleRate",o.description.sampleRate),this.metadata.setFormat("bitsPerSample",o.description.sampleSize),this.metadata.setFormat("numberOfChannels",o.description.numAudioChannels),r.timeScale===0&&r.timeToSampleTable.length>0)){let l=r.timeToSampleTable.map(u=>u.count*u.duration).reduce((u,m)=>u+m)/o.description.sampleRate;this.metadata.setFormat("duration",l)}let a=Fy[o.dataFormat];a&&this.metadata.setFormat("lossless",!a.lossy),this.calculateBitRate()}})}handleAtom(t,e){return g(this,null,function*(){if(t.parent)switch(t.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(t)}if(this.atomParsers[t.header.name])return this.atomParsers[t.header.name](e);Ti(`No parser for atom path=${t.atomPath}, payload-len=${e}, ignoring atom`),yield this.tokenizer.ignore(e)})}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}addTag(t,e){this.metadata.addTag(rA,t,e)}addWarning(t){Ti("Warning: "+t),this.metadata.addWarning(t)}parseMetadataItemData(t){let e=t.header.name;return t.readAtoms(this.tokenizer,(n,r)=>g(this,null,function*(){let o=n.getPayloadLength(r);switch(n.header.name){case"data":return this.parseValueAtom(e,n);case"name":case"mean":case"rate":let a=yield this.tokenizer.readToken(new it.NameAtom(o));e+=":"+a.name;break;default:let s=yield this.tokenizer.readToken(new Zi.BufferType(o));this.addWarning("Unsupported meta-item: "+e+"["+n.header.name+"] => value="+s.toString("hex")+" ascii="+s.toString("ascii"))}}),t.getPayloadLength(0))}parseValueAtom(t,e){return g(this,null,function*(){let n=yield this.tokenizer.readToken(new it.DataAtom(Number(e.header.length)-it.Header.len));if(n.type.set!==0)throw new Error("Unsupported type-set != 0: "+n.type.set);switch(n.type.type){case 0:switch(t){case"trkn":case"disk":let r=Zi.UINT8.get(n.value,3),o=Zi.UINT8.get(n.value,5);this.addTag(t,r+"/"+o);break;case"gnre":let a=Zi.UINT8.get(n.value,1),s=tA.Genres[a-1];this.addTag(t,s);break;case"rate":let l=n.value.toString("ascii");this.addTag(t,l);break;default:Ti("unknown proprietary value type for: "+e.atomPath)}break;case 1:case 18:this.addTag(t,n.value.toString("utf-8"));break;case 13:if(this.options.skipCovers)break;this.addTag(t,{format:"image/jpeg",data:Buffer.from(n.value)});break;case 14:if(this.options.skipCovers)break;this.addTag(t,{format:"image/png",data:Buffer.from(n.value)});break;case 21:this.addTag(t,i.read_BE_Integer(n.value,!0));break;case 22:this.addTag(t,i.read_BE_Integer(n.value,!1));break;case 65:this.addTag(t,n.value.readInt8(0));break;case 66:this.addTag(t,n.value.readInt16BE(0));break;case 67:this.addTag(t,n.value.readInt32BE(0));break;default:this.addWarning(`atom key=${t}, has unknown well-known-type (data-type): ${n.type.type}`)}})}parseSoundSampleDescription(t){let e={dataFormat:t.dataFormat,dataReferenceIndex:t.dataReferenceIndex},n=0,r=it.SoundSampleDescriptionVersion.get(t.description,n);return n+=it.SoundSampleDescriptionVersion.len,r.version===0||r.version===1?e.description=it.SoundSampleDescriptionV0.get(t.description,n):Ti(`Warning: sound-sample-description ${r} not implemented`),e}parseChapterTrack(t,e,n){return g(this,null,function*(){if(!t.sampleSize&&t.chunkOffsetTable.length!==t.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");let r=[];for(let o=0;o<t.chunkOffsetTable.length&&n>0;++o){let s=t.chunkOffsetTable[o]-this.tokenizer.position,l=t.sampleSize>0?t.sampleSize:t.sampleSizeTable[o];if(n-=s+l,n<0)throw new Error("Chapter chunk exceeding token length");yield this.tokenizer.ignore(s);let u=yield this.tokenizer.readToken(new it.ChapterText(l));Ti(`Chapter ${o+1}: ${u}`);let m={title:u,sampleOffset:this.findSampleOffset(e,this.tokenizer.position)};Ti(`Chapter title=${m.title}, offset=${m.sampleOffset}/${this.tracks[0].duration}`),r.push(m)}this.metadata.setFormat("chapters",r),yield this.tokenizer.ignore(n)})}findSampleOffset(t,e){let n=0;t.timeToSampleTable.forEach(o=>{n+=o.count*o.duration}),Ti(`Total duration=${n}`);let r=0;for(;r<t.chunkOffsetTable.length&&t.chunkOffsetTable[r]<e;)++r;return this.getChunkDuration(r+1,t)}getChunkDuration(t,e){let n=0,r=e.timeToSampleTable[n].count,o=e.timeToSampleTable[n].duration,a=1,s=this.getSamplesPerChunk(a,e.sampleToChunkTable),l=0;for(;a<t;){let u=Math.min(r,s);l+=u*o,r-=u,s-=u,s===0?(++a,s=this.getSamplesPerChunk(a,e.sampleToChunkTable)):(++n,r=e.timeToSampleTable[n].count,o=e.timeToSampleTable[n].duration)}return l}getSamplesPerChunk(t,e){for(let n=0;n<e.length-1;++n)if(t>=e[n].firstChunk&&t<e[n+1].firstChunk)return e[n].samplesPerChunk;return e[e.length-1].samplesPerChunk}};nd.MP4Parser=Kh});var By=S(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.ReplayGain=void 0;var gs=Be();rd.ReplayGain={len:2,get:(i,t)=>{let e=gs.getBitAllignedNumber(i,t,0,3),n=gs.getBitAllignedNumber(i,t,6,1),r=gs.getBitAllignedNumber(i,t,7,9)/10;if(e>0)return{type:gs.getBitAllignedNumber(i,t,0,3),origin:gs.getBitAllignedNumber(i,t,3,3),adjustment:n?-r:r}}}});var jy=S(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.ExtendedLameHeader=void 0;var bs=ce(),Uy=Be(),zy=By();od.ExtendedLameHeader={len:27,get:(i,t)=>{let e=bs.UINT32_BE.get(i,t+2);return{revision:Uy.getBitAllignedNumber(i,t,0,4),vbr_method:Uy.getBitAllignedNumber(i,t,4,4),lowpass_filter:100*bs.UINT8.get(i,t+1),track_peak:e===0?void 0:e/Math.pow(2,23),track_gain:zy.ReplayGain.get(i,6),album_gain:zy.ReplayGain.get(i,8),music_length:bs.UINT32_BE.get(i,t+20),music_crc:bs.UINT8.get(i,t+24),header_crc:bs.UINT16_BE.get(i,t+24)}}}});var Vy=S(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});hi.readXingHeader=hi.XingHeaderFlags=hi.LameEncoderVersion=hi.InfoTagHeaderTag=void 0;var xr=ce(),ad=Be(),oA=jy();hi.InfoTagHeaderTag=new xr.StringType(4,"ascii");hi.LameEncoderVersion=new xr.StringType(6,"ascii");hi.XingHeaderFlags={len:4,get:(i,t)=>({frames:ad.isBitSet(i,t,31),bytes:ad.isBitSet(i,t,30),toc:ad.isBitSet(i,t,29),vbrScale:ad.isBitSet(i,t,28)})};function aA(i){return g(this,null,function*(){let t=yield i.readToken(hi.XingHeaderFlags),e={};if(t.frames&&(e.numFrames=yield i.readToken(xr.UINT32_BE)),t.bytes&&(e.streamSize=yield i.readToken(xr.UINT32_BE)),t.toc&&(e.toc=Buffer.alloc(100),yield i.readBuffer(e.toc)),t.vbrScale&&(e.vbrScale=yield i.readToken(xr.UINT32_BE)),(yield i.peekToken(new xr.StringType(4,"ascii")))==="LAME"&&(yield i.ignore(4),e.lame={version:yield i.readToken(new xr.StringType(5,"ascii"))},e.lame.version.match(/\d+.\d+/g))){let a=e.lame.version.match(/\d+.\d+/g)[0].split(".").map(s=>parseInt(s,10));a[0]>=3&&a[1]>=90&&(e.lame.extended=yield i.readToken(oA.ExtendedLameHeader))}return e})}hi.readXingHeader=aA});var Gy=S(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});sd.MpegParser=void 0;var qy=ce(),Qh=Mi(),sA=Me(),nt=Be(),lA=us(),Vo=Vy(),Gt=(0,sA.default)("music-metadata:parser:mpeg"),Hy=1024,$y={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,void 0,void 0,-1]},cA=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]],Jh=(()=>{class i{constructor(e,n){this.versionIndex=nt.getBitAllignedNumber(e,n+1,3,2),this.layer=i.LayerDescription[nt.getBitAllignedNumber(e,n+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(e,n):this.parseMpegHeader(e,n),this.isProtectedByCRC=!nt.isBitSet(e,n+1,7)}calcDuration(e){return e*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return i.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(e,n){this.container="MPEG",this.bitrateIndex=nt.getBitAllignedNumber(e,n+2,0,4),this.sampRateFreqIndex=nt.getBitAllignedNumber(e,n+2,4,2),this.padding=nt.isBitSet(e,n+2,6),this.privateBit=nt.isBitSet(e,n+2,7),this.channelModeIndex=nt.getBitAllignedNumber(e,n+3,0,2),this.modeExtension=nt.getBitAllignedNumber(e,n+3,2,2),this.isCopyrighted=nt.isBitSet(e,n+3,4),this.isOriginalMedia=nt.isBitSet(e,n+3,5),this.emphasis=nt.getBitAllignedNumber(e,n+3,7,2),this.version=i.VersionID[this.versionIndex],this.channelMode=i.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;let r=this.calcBitrate();if(!r)throw new Error("Cannot determine bit-rate");if(this.bitrate=r*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(e,n){Gt("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container="ADTS/MPEG-"+this.version;let r=nt.getBitAllignedNumber(e,n+2,0,2);this.codec="AAC",this.codecProfile=$y.AudioObjectTypes[r],Gt(`MPEG-4 audio-codec=${this.codec}`);let o=nt.getBitAllignedNumber(e,n+2,2,4);this.samplingRate=$y.SamplingFrequencies[o],Gt(`sampling-rate=${this.samplingRate}`);let a=nt.getBitAllignedNumber(e,n+2,7,3);this.mp4ChannelConfig=cA[a],Gt(`channel-config=${this.mp4ChannelConfig.join("+")}`),this.frameLength=nt.getBitAllignedNumber(e,n+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return;let e=`${Math.floor(this.version)}${this.layer}`;return i.bitrate_index[this.bitrateIndex][e]}calcSamplingRate(){return this.sampRateFreqIndex===3?null:i.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}return i.SyncByte1=255,i.SyncByte2=224,i.VersionID=[2.5,null,2,1],i.LayerDescription=[0,3,2,1],i.ChannelMode=["stereo","joint_stereo","dual_channel","mono"],i.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}},i.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}},i.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]],i})(),Wy={len:4,get:(i,t)=>new Jh(i,t)};function dA(i){return"V"+Math.floor((100-i)/10)}var ef=class extends lA.AbstractID3Parser{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.calculateEofDuration=!1,this.buf_frame_header=Buffer.alloc(4),this.syncPeek={buf:Buffer.alloc(Hy),len:0}}postId3v2Parse(){return g(this,null,function*(){this.metadata.setFormat("lossless",!1);try{let t=!1;for(;!t;)yield this.sync(),t=yield this.parseCommonMpegHeader()}catch(t){if(t instanceof Qh.EndOfStreamError){if(Gt("End-of-stream"),this.calculateEofDuration){let e=this.frameCount*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",e);let n=e/this.metadata.format.sampleRate;Gt(`Calculate duration at EOF: ${n} sec.`,n),this.metadata.setFormat("duration",n)}}else throw t}})}finalize(){let t=this.metadata.format,e=this.metadata.native.hasOwnProperty("ID3v1");if(t.duration&&this.tokenizer.fileInfo.size){let n=this.tokenizer.fileInfo.size-this.mpegOffset-(e?128:0);t.codecProfile&&t.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",n*8/t.duration)}else if(this.tokenizer.fileInfo.size&&t.codecProfile==="CBR"){let n=this.tokenizer.fileInfo.size-this.mpegOffset-(e?128:0),r=Math.round(n/this.frame_size)*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",r);let o=r/t.sampleRate;Gt("Calculate CBR duration based on file size: %s",o),this.metadata.setFormat("duration",o)}}sync(){return g(this,null,function*(){let t=!1;for(;;){let e=0;if(this.syncPeek.len=yield this.tokenizer.peekBuffer(this.syncPeek.buf,{length:Hy,mayBeLess:!0}),this.syncPeek.len<=163)throw new Qh.EndOfStreamError;for(;;)if(t&&(this.syncPeek.buf[e]&224)===224){this.buf_frame_header[0]=Jh.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[e],yield this.tokenizer.ignore(e),Gt(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(Gt(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}else if(t=!1,e=this.syncPeek.buf.indexOf(Jh.SyncByte1,e),e===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new Qh.EndOfStreamError;yield this.tokenizer.ignore(this.syncPeek.len);break}else++e,t=!0}})}parseCommonMpegHeader(){return g(this,null,function*(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),yield this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let t;try{t=Wy.get(this.buf_frame_header,0)}catch(e){return yield this.tokenizer.ignore(1),this.metadata.addWarning("Parse error: "+e.message),!1}return yield this.tokenizer.ignore(3),this.metadata.setFormat("container",t.container),this.metadata.setFormat("codec",t.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",t.samplingRate),this.frameCount++,t.version>=2&&t.layer===0?this.parseAdts(t):this.parseAudioFrameHeader(t)})}parseAudioFrameHeader(t){return g(this,null,function*(){this.metadata.setFormat("numberOfChannels",t.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",t.bitrate),this.frameCount<20*1e4&&Gt("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,t.layer,t.bitrate,t.samplingRate);let e=t.calcSlotSize();if(e===null)throw new Error("invalid slot_size");let n=t.calcSamplesPerFrame();Gt(`samples_per_frame=${n}`);let o=n/8*t.bitrate/t.samplingRate+(t.padding?e:0);if(this.frame_size=Math.floor(o),this.audioFrameHeader=t,this.bitrates.push(t.bitrate),this.frameCount===1)return this.offset=Wy.len,yield this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=n,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=n,this.calculateEofDuration=!0),this.offset=4,t.isProtectedByCRC?(yield this.parseCrc(),!1):(yield this.skipSideInformation(),!1)})}parseAdts(t){return g(this,null,function*(){let e=Buffer.alloc(3);yield this.tokenizer.readBuffer(e),t.frameLength+=nt.getBitAllignedNumber(e,0,0,11),this.totalDataLength+=t.frameLength,this.samplesPerFrame=1024;let n=t.samplingRate/this.samplesPerFrame,o=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*n+.5;if(this.metadata.setFormat("bitrate",o),Gt(`frame-count=${this.frameCount}, size=${t.frameLength} bytes, bit-rate=${o}`),yield this.tokenizer.ignore(t.frameLength>7?t.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",t.codecProfile),t.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",t.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1})}parseCrc(){return g(this,null,function*(){return this.crc=yield this.tokenizer.readNumber(qy.INT16_BE),this.offset+=2,this.skipSideInformation()})}skipSideInformation(){return g(this,null,function*(){let t=this.audioFrameHeader.calculateSideInfoLength();yield this.tokenizer.readToken(new qy.Uint8ArrayType(t)),this.offset+=t,yield this.readXtraInfoHeader()})}readXtraInfoHeader(){return g(this,null,function*(){let t=yield this.tokenizer.readToken(Vo.InfoTagHeaderTag);switch(this.offset+=Vo.InfoTagHeaderTag.len,t){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":let n=yield this.readXingInfoHeader(),r=dA(n.vbrScale);return this.metadata.setFormat("codecProfile",r),null;case"Xtra":break;case"LAME":let o=yield this.tokenizer.readToken(Vo.LameEncoderVersion);if(this.frame_size>=this.offset+Vo.LameEncoderVersion.len)return this.offset+=Vo.LameEncoderVersion.len,this.metadata.setFormat("tool","LAME "+o),yield this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}let e=this.frame_size-this.offset;return e<0?this.metadata.addWarning("Frame "+this.frameCount+"corrupt: negative frameDataLeft"):yield this.skipFrameData(e),null})}readXingInfoHeader(){return g(this,null,function*(){let t=this.tokenizer.position,e=yield(0,Vo.readXingHeader)(this.tokenizer);if(this.offset+=this.tokenizer.position-t,e.lame&&(this.metadata.setFormat("tool","LAME "+nt.stripNulls(e.lame.version)),e.lame.extended&&(this.metadata.setFormat("trackPeakLevel",e.lame.extended.track_peak),e.lame.extended.track_gain&&this.metadata.setFormat("trackGain",e.lame.extended.track_gain.adjustment),e.lame.extended.album_gain&&this.metadata.setFormat("albumGain",e.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",e.lame.extended.music_length/1e3))),e.streamSize){let r=this.audioFrameHeader.calcDuration(e.numFrames);return this.metadata.setFormat("duration",r),Gt("Get duration from Xing header: %s",this.metadata.format.duration),e}let n=this.frame_size-this.offset;return yield this.skipFrameData(n),e})}skipFrameData(t){return g(this,null,function*(){if(t<0)throw new Error("frame-data-left cannot be negative");yield this.tokenizer.ignore(t),this.countSkipFrameData+=t})}areAllSame(t){let e=t[0];return t.every(n=>n===e)}};sd.MpegParser=ef});var Ky=S(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});cd.StreamReader=void 0;var ld=ce(),uA=Me(),_s=Be(),Xy=(0,uA.default)("music-metadata:parser:musepack:sv8"),mA=new ld.StringType(2,"binary"),Yy={len:5,get:(i,t)=>({crc:ld.UINT32_LE.get(i,t),streamVersion:ld.UINT8.get(i,t+4)})},Zy={len:2,get:(i,t)=>({sampleFrequency:[44100,48e3,37800,32e3][_s.getBitAllignedNumber(i,t,0,3)],maxUsedBands:_s.getBitAllignedNumber(i,t,3,5),channelCount:_s.getBitAllignedNumber(i,t+1,0,4)+1,msUsed:_s.isBitSet(i,t+1,4),audioBlockFrames:_s.getBitAllignedNumber(i,t+1,5,3)})},tf=class{constructor(t){this.tokenizer=t}readPacketHeader(){return g(this,null,function*(){let t=yield this.tokenizer.readToken(mA),e=yield this.readVariableSizeField();return{key:t,payloadLength:e.value-2-e.len}})}readStreamHeader(t){return g(this,null,function*(){let e={};Xy(`Reading SH at offset=${this.tokenizer.position}`);let n=yield this.tokenizer.readToken(Yy);t-=Yy.len,Object.assign(e,n),Xy(`SH.streamVersion = ${n.streamVersion}`);let r=yield this.readVariableSizeField();t-=r.len,e.sampleCount=r.value;let o=yield this.readVariableSizeField();t-=o.len,e.beginningOfSilence=o.value;let a=yield this.tokenizer.readToken(Zy);return t-=Zy.len,Object.assign(e,a),yield this.tokenizer.ignore(t),e})}readVariableSizeField(t=1,e=0){return g(this,null,function*(){let n=yield this.tokenizer.readNumber(ld.UINT8);return n&128?(n&=127,n+=e,this.readVariableSizeField(t+1,n<<7)):{len:t,value:e+n}})}};cd.StreamReader=tf});var Qy=S(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});dd.MpcSv8Parser=void 0;var pA=Me(),hA=Nt(),fA=vr(),gA=xt(),bA=Ky(),_A=(0,pA.default)("music-metadata:parser:musepack"),nf=class extends hA.BasicParser{constructor(){super(...arguments),this.audioLength=0}parse(){return g(this,null,function*(){if((yield this.tokenizer.readToken(gA.FourCcToken))!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()})}parsePacket(){return g(this,null,function*(){let t=new bA.StreamReader(this.tokenizer);do{let e=yield t.readPacketHeader();switch(_A(`packet-header key=${e.key}, payloadLength=${e.payloadLength}`),e.key){case"SH":let n=yield t.readStreamHeader(e.payloadLength);this.metadata.setFormat("numberOfSamples",n.sampleCount),this.metadata.setFormat("sampleRate",n.sampleFrequency),this.metadata.setFormat("duration",n.sampleCount/n.sampleFrequency),this.metadata.setFormat("numberOfChannels",n.channelCount);break;case"AP":this.audioLength+=e.payloadLength,yield this.tokenizer.ignore(e.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":yield this.tokenizer.ignore(e.payloadLength);break;case"SE":return this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),fA.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${e.key}`)}}while(!0)})}};dd.MpcSv8Parser=nf});var ex=S(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});ud.BitReader=void 0;var Jy=ce(),rf=class{constructor(t){this.tokenizer=t,this.pos=0,this.dword=void 0}read(t){return g(this,null,function*(){for(;this.dword===void 0;)this.dword=yield this.tokenizer.readToken(Jy.UINT32_LE);let e=this.dword;return this.pos+=t,this.pos<32?(e>>>=32-this.pos,e&(1<<t)-1):(this.pos-=32,this.pos===0?(this.dword=void 0,e&(1<<t)-1):(this.dword=yield this.tokenizer.readToken(Jy.UINT32_LE),this.pos&&(e<<=this.pos,e|=this.dword>>>32-this.pos),e&(1<<t)-1))})}ignore(t){return g(this,null,function*(){if(this.pos>0){let r=32-this.pos;this.dword=void 0,t-=r,this.pos=0}let e=t%32,n=(t-e)/32;return yield this.tokenizer.ignore(n*4),this.read(e)})}};ud.BitReader=rf});var tx=S(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});md.Header=void 0;var Dn=ce(),Ki=Be();md.Header={len:6*4,get:(i,t)=>{let e={signature:Buffer.from(i).toString("latin1",t,t+3),streamMinorVersion:Ki.getBitAllignedNumber(i,t+3,0,4),streamMajorVersion:Ki.getBitAllignedNumber(i,t+3,4,4),frameCount:Dn.UINT32_LE.get(i,t+4),maxLevel:Dn.UINT16_LE.get(i,t+8),sampleFrequency:[44100,48e3,37800,32e3][Ki.getBitAllignedNumber(i,t+10,0,2)],link:Ki.getBitAllignedNumber(i,t+10,2,2),profile:Ki.getBitAllignedNumber(i,t+10,4,4),maxBand:Ki.getBitAllignedNumber(i,t+11,0,6),intensityStereo:Ki.isBitSet(i,t+11,6),midSideStereo:Ki.isBitSet(i,t+11,7),titlePeak:Dn.UINT16_LE.get(i,t+12),titleGain:Dn.UINT16_LE.get(i,t+14),albumPeak:Dn.UINT16_LE.get(i,t+16),albumGain:Dn.UINT16_LE.get(i,t+18),lastFrameLength:Dn.UINT32_LE.get(i,t+20)>>>20&2047,trueGapless:Ki.isBitSet(i,t+23,0)};return e.lastFrameLength=e.trueGapless?Dn.UINT32_LE.get(i,20)>>>20&2047:0,e}}});var nx=S(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.MpcSv7Parser=void 0;var vA=Me(),yA=Nt(),xA=vr(),wA=ex(),CA=tx(),ix=(0,vA.default)("music-metadata:parser:musepack"),of=class extends yA.BasicParser{constructor(){super(...arguments),this.audioLength=0}parse(){return g(this,null,function*(){let t=yield this.tokenizer.readToken(CA.Header);if(t.signature!=="MP+")throw new Error("Unexpected magic number");ix(`stream-version=${t.streamMajorVersion}.${t.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",t.sampleFrequency);let e=1152*(t.frameCount-1)+t.lastFrameLength;this.metadata.setFormat("numberOfSamples",e),this.duration=e/t.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new wA.BitReader(this.tokenizer),this.metadata.setFormat("numberOfChannels",t.midSideStereo||t.intensityStereo?2:1);let n=yield this.bitreader.read(8);return this.metadata.setFormat("codec",(n/100).toFixed(2)),yield this.skipAudioData(t.frameCount),ix(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),xA.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)})}skipAudioData(t){return g(this,null,function*(){for(;t-- >0;){let n=yield this.bitreader.read(20);this.audioLength+=20+n,yield this.bitreader.ignore(n)}let e=yield this.bitreader.read(11);this.audioLength+=e,this.metadata.setFormat("bitrate",this.audioLength/this.duration)})}};pd.MpcSv7Parser=of});var ox=S(sf=>{"use strict";Object.defineProperty(sf,"__esModule",{value:!0});var SA=Me(),MA=ce(),EA=us(),kA=Qy(),TA=nx(),rx=(0,SA.default)("music-metadata:parser:musepack"),af=class extends EA.AbstractID3Parser{postId3v2Parse(){return g(this,null,function*(){let t=yield this.tokenizer.peekToken(new MA.StringType(3,"binary")),e;switch(t){case"MP+":{rx("Musepack stream-version 7"),e=new TA.MpcSv7Parser;break}case"MPC":{rx("Musepack stream-version 8"),e=new kA.MpcSv8Parser;break}default:throw new Error("Invalid Musepack signature prefix")}return e.init(this.metadata,this.tokenizer,this.options),e.parse()})}};sf.default=af});var ax=S(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.IdHeader=void 0;var IA=ce(),lf=class{constructor(t){if(this.len=t,t<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(t,e){return{magicSignature:new IA.StringType(8,"ascii").get(t,e+0),version:t.readUInt8(e+8),channelCount:t.readUInt8(e+9),preSkip:t.readInt16LE(e+10),inputSampleRate:t.readInt32LE(e+12),outputGain:t.readInt16LE(e+16),channelMapping:t.readUInt8(e+18)}}};hd.IdHeader=lf});var sx=S(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});fd.OpusParser=void 0;var PA=ce(),OA=ms(),DA=ax(),cf=class extends OA.VorbisParser{constructor(t,e,n){super(t,e),this.tokenizer=n,this.lastPos=-1}parseFirstPage(t,e){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new DA.IdHeader(e.length).get(e,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}parseFullPage(t){switch(new PA.StringType(8,"ascii").get(t,0)){case"OpusTags":this.parseUserCommentList(t,8),this.lastPos=this.tokenizer.position-t.length;break;default:break}}calculateDuration(t){if(this.metadata.format.sampleRate&&t.absoluteGranulePosition>=0){let e=t.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",e),this.metadata.setFormat("duration",e/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){let n=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*n/this.metadata.format.duration)}}}};fd.OpusParser=cf});var cx=S(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.Header=void 0;var lx=ce(),AA=Be();gd.Header={len:80,get:(i,t)=>({speex:new lx.StringType(8,"ascii").get(i,t+0),version:AA.trimRightNull(new lx.StringType(20,"ascii").get(i,t+8)),version_id:i.readInt32LE(t+28),header_size:i.readInt32LE(t+32),rate:i.readInt32LE(t+36),mode:i.readInt32LE(t+40),mode_bitstream_version:i.readInt32LE(t+44),nb_channels:i.readInt32LE(t+48),bitrate:i.readInt32LE(t+52),frame_size:i.readInt32LE(t+56),vbr:i.readInt32LE(t+60),frames_per_packet:i.readInt32LE(t+64),extra_headers:i.readInt32LE(t+68),reserved1:i.readInt32LE(t+72),reserved2:i.readInt32LE(t+76)})}});var dx=S(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});bd.SpeexParser=void 0;var RA=Me(),FA=ms(),NA=cx(),LA=(0,RA.default)("music-metadata:parser:ogg:speex"),df=class extends FA.VorbisParser{constructor(t,e,n){super(t,e),this.tokenizer=n}parseFirstPage(t,e){LA("First Ogg/Speex page");let n=NA.Header.get(e,0);this.metadata.setFormat("codec",`Speex ${n.version}`),this.metadata.setFormat("numberOfChannels",n.nb_channels),this.metadata.setFormat("sampleRate",n.rate),n.bitrate!==-1&&this.metadata.setFormat("bitrate",n.bitrate)}};bd.SpeexParser=df});var mx=S(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});_d.IdentificationHeader=void 0;var ux=ce();_d.IdentificationHeader={len:42,get:(i,t)=>({id:new ux.StringType(7,"ascii").get(i,t),vmaj:i.readUInt8(t+7),vmin:i.readUInt8(t+8),vrev:i.readUInt8(t+9),vmbw:i.readUInt16BE(t+10),vmbh:i.readUInt16BE(t+17),nombr:ux.UINT24_BE.get(i,t+37),nqual:i.readUInt8(t+40)})}});var px=S(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});vd.TheoraParser=void 0;var BA=Me(),UA=mx(),uf=(0,BA.default)("music-metadata:parser:ogg:theora"),mf=class{constructor(t,e,n){this.metadata=t,this.tokenizer=n}parsePage(t,e){t.headerType.firstPage&&this.parseFirstPage(t,e)}flush(){uf("flush")}calculateDuration(t){uf("duration calculation not implemented")}parseFirstPage(t,e){uf("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");let n=UA.IdentificationHeader.get(e,0);this.metadata.setFormat("bitrate",n.nombr)}};vd.TheoraParser=mf});var hx=S(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.OggParser=qo.SegmentTable=void 0;var An=ce(),zA=Mi(),jA=Me(),pf=Be(),VA=xt(),qA=Nt(),HA=ms(),$A=sx(),WA=dx(),GA=px(),Qi=(0,jA.default)("music-metadata:parser:ogg"),yd=class i{static sum(t,e,n){let r=0;for(let o=e;o<e+n;++o)r+=t[o];return r}constructor(t){this.len=t.page_segments}get(t,e){return{totalPageSize:i.sum(t,e,this.len)}}};qo.SegmentTable=yd;var XA=(()=>{class i extends qA.BasicParser{parse(){return g(this,null,function*(){Qi("pos=%s, parsePage()",this.tokenizer.position);try{let e;do{if(e=yield this.tokenizer.readToken(i.Header),e.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=e,this.pageNumber=e.pageSequenceNo,Qi("page#=%s, Ogg.id=%s",e.pageSequenceNo,e.capturePattern);let n=yield this.tokenizer.readToken(new yd(e));Qi("totalPageSize=%s",n.totalPageSize);let r=yield this.tokenizer.readToken(new An.Uint8ArrayType(n.totalPageSize));if(Qi("firstPage=%s, lastPage=%s, continued=%s",e.headerType.firstPage,e.headerType.lastPage,e.headerType.continued),e.headerType.firstPage){let o=new An.StringType(7,"ascii").get(Buffer.from(r),0);switch(o){case"vorbis":Qi("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new HA.VorbisParser(this.metadata,this.options);break;case"OpusHea":Qi("Set page consumer to Ogg/Opus"),this.pageConsumer=new $A.OpusParser(this.metadata,this.options,this.tokenizer);break;case"Speex  ":Qi("Set page consumer to Ogg/Speex"),this.pageConsumer=new WA.SpeexParser(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":Qi("Set page consumer to Ogg/Theora"),this.pageConsumer=new GA.TheoraParser(this.metadata,this.options,this.tokenizer);break;default:throw new Error("gg audio-codec not recognized (id="+o+")")}}this.pageConsumer.parsePage(e,r)}while(!e.headerType.lastPage)}catch(e){if(e instanceof zA.EndOfStreamError)this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),Qi("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header);else if(e.message.startsWith("FourCC"))this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),this.pageConsumer.flush());else throw e}})}}return i.Header={len:27,get:(t,e)=>({capturePattern:VA.FourCcToken.get(t,e),version:An.UINT8.get(t,e+4),headerType:{continued:pf.getBit(t,e+5,0),firstPage:pf.getBit(t,e+5,1),lastPage:pf.getBit(t,e+5,2)},absoluteGranulePosition:Number(An.UINT64_LE.get(t,e+6)),streamSerialNumber:An.UINT32_LE.get(t,e+14),pageSequenceNo:An.UINT32_LE.get(t,e+18),pageChecksum:An.UINT32_LE.get(t,e+22),page_segments:An.UINT8.get(t,e+26)})},i})();qo.OggParser=XA});var gx=S(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.ListInfoTagValue=Ho.Header=void 0;var fx=ce();Ho.Header={len:8,get:(i,t)=>({chunkID:i.toString("binary",t,t+4),chunkSize:fx.UINT32_LE.get(i,4)})};var hf=class{constructor(t){this.tagHeader=t,this.len=t.chunkSize,this.len+=this.len&1}get(t,e){return new fx.StringType(this.tagHeader.chunkSize,"ascii").get(t,e)}};Ho.ListInfoTagValue=hf});var bx=S(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.FactChunk=Ji.Format=Ji.WaveFormat=void 0;var YA;(function(i){i[i.PCM=1]="PCM",i[i.ADPCM=2]="ADPCM",i[i.IEEE_FLOAT=3]="IEEE_FLOAT",i[i.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",i[i.MPEG_LOAS=5634]="MPEG_LOAS",i[i.RAW_AAC1=255]="RAW_AAC1",i[i.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",i[i.DVM=8192]="DVM",i[i.RAW_SPORT=576]="RAW_SPORT",i[i.ESST_AC3=577]="ESST_AC3",i[i.DRM=9]="DRM",i[i.DTS2=8193]="DTS2",i[i.MPEG=80]="MPEG"})(YA=Ji.WaveFormat||(Ji.WaveFormat={}));var ff=class{constructor(t){if(t.chunkSize<16)throw new Error("Invalid chunk size");this.len=t.chunkSize}get(t,e){return{wFormatTag:t.readUInt16LE(e),nChannels:t.readUInt16LE(e+2),nSamplesPerSec:t.readUInt32LE(e+4),nAvgBytesPerSec:t.readUInt32LE(e+8),nBlockAlign:t.readUInt16LE(e+12),wBitsPerSample:t.readUInt16LE(e+14)}}};Ji.Format=ff;var gf=class{constructor(t){if(t.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=t.chunkSize}get(t,e){return{dwSampleLength:t.readUInt32LE(e)}}};Ji.FactChunk=gf});var _x=S(xd=>{"use strict";Object.defineProperty(xd,"__esModule",{value:!0});xd.BroadcastAudioExtensionChunk=void 0;var Xt=ce(),vs=Be();xd.BroadcastAudioExtensionChunk={len:420,get:(i,t)=>({description:(0,vs.stripNulls)(new Xt.StringType(256,"ascii").get(i,t)).trim(),originator:(0,vs.stripNulls)(new Xt.StringType(32,"ascii").get(i,t+256)).trim(),originatorReference:(0,vs.stripNulls)(new Xt.StringType(32,"ascii").get(i,t+288)).trim(),originationDate:(0,vs.stripNulls)(new Xt.StringType(10,"ascii").get(i,t+320)).trim(),originationTime:(0,vs.stripNulls)(new Xt.StringType(8,"ascii").get(i,t+330)).trim(),timeReferenceLow:Xt.UINT32_LE.get(i,t+338),timeReferenceHigh:Xt.UINT32_LE.get(i,t+342),version:Xt.UINT16_LE.get(i,t+346),umid:new Xt.Uint8ArrayType(64).get(i,t+348),loudnessValue:Xt.UINT16_LE.get(i,t+412),maxTruePeakLevel:Xt.UINT16_LE.get(i,t+414),maxMomentaryLoudness:Xt.UINT16_LE.get(i,t+416),maxShortTermLoudness:Xt.UINT16_LE.get(i,t+418)})}});var Cx=S(wd=>{"use strict";Object.defineProperty(wd,"__esModule",{value:!0});wd.WaveParser=void 0;var vx=Mi(),yx=ce(),ZA=Me(),$o=gx(),bf=bx(),KA=Bo(),QA=Be(),xx=xt(),JA=Nt(),wx=_x(),Rn=(0,ZA.default)("music-metadata:parser:RIFF"),_f=class extends JA.BasicParser{parse(){return g(this,null,function*(){let t=yield this.tokenizer.readToken($o.Header);if(Rn(`pos=${this.tokenizer.position}, parse: chunkID=${t.chunkID}`),t.chunkID==="RIFF")return this.parseRiffChunk(t.chunkSize).catch(e=>{if(!(e instanceof vx.EndOfStreamError))throw e})})}parseRiffChunk(t){return g(this,null,function*(){let e=yield this.tokenizer.readToken(xx.FourCcToken);switch(this.metadata.setFormat("container",e),e){case"WAVE":return this.readWaveChunk(t-xx.FourCcToken.len);default:throw new Error(`Unsupported RIFF format: RIFF/${e}`)}})}readWaveChunk(t){return g(this,null,function*(){for(;t>=$o.Header.len;){let e=yield this.tokenizer.readToken($o.Header);switch(t-=$o.Header.len+e.chunkSize,e.chunkSize>t&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=e,Rn(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${e.chunkID}`),e.chunkID){case"LIST":yield this.parseListTag(e);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=yield this.tokenizer.readToken(new bf.FactChunk(e));break;case"fmt ":let n=yield this.tokenizer.readToken(new bf.Format(e)),r=bf.WaveFormat[n.wFormatTag];r||(Rn("WAVE/non-PCM format="+n.wFormatTag),r="non-PCM ("+n.wFormatTag+")"),this.metadata.setFormat("codec",r),this.metadata.setFormat("bitsPerSample",n.wBitsPerSample),this.metadata.setFormat("sampleRate",n.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",n.nChannels),this.metadata.setFormat("bitrate",n.nBlockAlign*n.nSamplesPerSec*8),this.blockAlign=n.nBlockAlign;break;case"id3 ":case"ID3 ":let o=yield this.tokenizer.readToken(new yx.Uint8ArrayType(e.chunkSize)),a=vx.fromBuffer(o);yield new KA.ID3v2Parser().parse(this.metadata,a,this.options);break;case"data":this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let s=e.chunkSize;if(this.tokenizer.fileInfo.size){let p=this.tokenizer.fileInfo.size-this.tokenizer.position;p<s&&(this.metadata.addWarning("data chunk length exceeding file length"),s=p)}let l=this.fact?this.fact.dwSampleLength:s===4294967295?void 0:s/this.blockAlign;l&&(this.metadata.setFormat("numberOfSamples",l),this.metadata.setFormat("duration",l/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),yield this.tokenizer.ignore(e.chunkSize);break;case"bext":let u=yield this.tokenizer.readToken(wx.BroadcastAudioExtensionChunk);Object.keys(u).forEach(p=>{this.metadata.addTag("exif","bext."+p,u[p])});let m=e.chunkSize-wx.BroadcastAudioExtensionChunk.len;yield this.tokenizer.ignore(m);break;case"\0\0\0\0":Rn(`Ignore padding chunk: RIFF/${e.chunkID} of ${e.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+e.chunkID),yield this.tokenizer.ignore(e.chunkSize);break;default:Rn(`Ignore chunk: RIFF/${e.chunkID} of ${e.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+e.chunkID),yield this.tokenizer.ignore(e.chunkSize)}this.header.chunkSize%2===1&&(Rn("Read odd padding byte"),yield this.tokenizer.ignore(1))}})}parseListTag(t){return g(this,null,function*(){let e=yield this.tokenizer.readToken(new yx.StringType(4,"binary"));switch(Rn("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,e),e){case"INFO":return this.parseRiffInfoTags(t.chunkSize-4);case"adtl":default:return this.metadata.addWarning("Ignore chunk: RIFF/WAVE/LIST/"+e),Rn("Ignoring chunkID=RIFF/WAVE/LIST/"+e),this.tokenizer.ignore(t.chunkSize-4).then()}})}parseRiffInfoTags(t){return g(this,null,function*(){for(;t>=8;){let e=yield this.tokenizer.readToken($o.Header),n=new $o.ListInfoTagValue(e),r=yield this.tokenizer.readToken(n);this.addTag(e.chunkID,QA.stripNulls(r)),t-=8+n.len}if(t!==0)throw Error("Illegal remaining size: "+t)})}addTag(t,e){this.metadata.addTag("exif",t,e)}};wd.WaveParser=_f});var Sx=S(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.WavPack=void 0;var wr=ce(),eR=xt(),tR=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1],iR=(()=>{class i{static isBitSet(e,n){return i.getBitAllignedNumber(e,n,1)===1}static getBitAllignedNumber(e,n,r){return e>>>n&4294967295>>>32-r}}return i.BlockHeaderToken={len:32,get:(t,e)=>{let n=wr.UINT32_LE.get(t,e+24),r={BlockID:eR.FourCcToken.get(t,e),blockSize:wr.UINT32_LE.get(t,e+4),version:wr.UINT16_LE.get(t,e+8),totalSamples:wr.UINT32_LE.get(t,e+12),blockIndex:wr.UINT32_LE.get(t,e+16),blockSamples:wr.UINT32_LE.get(t,e+20),flags:{bitsPerSample:(1+i.getBitAllignedNumber(n,0,2))*8,isMono:i.isBitSet(n,2),isHybrid:i.isBitSet(n,3),isJointStereo:i.isBitSet(n,4),crossChannel:i.isBitSet(n,5),hybridNoiseShaping:i.isBitSet(n,6),floatingPoint:i.isBitSet(n,7),samplingRate:tR[i.getBitAllignedNumber(n,23,4)],isDSD:i.isBitSet(n,31)},crc:new wr.Uint8ArrayType(4).get(t,e+28)};return r.flags.isDSD&&(r.totalSamples*=8),r}},i.MetadataIdToken={len:1,get:(t,e)=>({functionId:i.getBitAllignedNumber(t[e],0,6),isOptional:i.isBitSet(t[e],5),isOddSize:i.isBitSet(t[e],6),largeBlock:i.isBitSet(t[e],7)})},i})();Cd.WavPack=iR});var Mx=S(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});Md.WavPackParser=void 0;var Sd=ce(),nR=vr(),rR=xt(),oR=Nt(),Cr=Sx(),aR=Me(),Sr=(0,aR.default)("music-metadata:parser:WavPack"),vf=class extends oR.BasicParser{parse(){return g(this,null,function*(){return this.audioDataSize=0,yield this.parseWavPackBlocks(),nR.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)})}parseWavPackBlocks(){return g(this,null,function*(){do{if((yield this.tokenizer.peekToken(rR.FourCcToken))!=="wvpk")break;let e=yield this.tokenizer.readToken(Cr.WavPack.BlockHeaderToken);if(e.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");Sr(`WavPack header blockIndex=${e.blockIndex}, len=${Cr.WavPack.BlockHeaderToken.len}`),e.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!e.flags.isHybrid),this.metadata.setFormat("bitsPerSample",e.flags.bitsPerSample),e.flags.isDSD||(this.metadata.setFormat("sampleRate",e.flags.samplingRate),this.metadata.setFormat("duration",e.totalSamples/e.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",e.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",e.totalSamples),this.metadata.setFormat("codec",e.flags.isDSD?"DSD":"PCM"));let n=e.blockSize-(Cr.WavPack.BlockHeaderToken.len-8);yield e.blockIndex===0?this.parseMetadataSubBlock(e,n):this.tokenizer.ignore(n),e.blockSamples>0&&(this.audioDataSize+=e.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=Cr.WavPack.BlockHeaderToken.len);this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)})}parseMetadataSubBlock(t,e){return g(this,null,function*(){for(;e>Cr.WavPack.MetadataIdToken.len;){let n=yield this.tokenizer.readToken(Cr.WavPack.MetadataIdToken),r=yield this.tokenizer.readNumber(n.largeBlock?Sd.UINT24_LE:Sd.UINT8),o=Buffer.alloc(r*2-(n.isOddSize?1:0));switch(yield this.tokenizer.readBuffer(o),Sr(`Metadata Sub-Blocks functionId=0x${n.functionId.toString(16)}, id.largeBlock=${n.largeBlock},data-size=${o.length}`),n.functionId){case 0:break;case 14:Sr("ID_DSD_BLOCK");let a=1<<o.readUInt8(0),s=t.flags.samplingRate*a*8;if(!t.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",s),this.metadata.setFormat("duration",t.totalSamples/s);break;case 36:Sr("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",o);break;case 47:Sr(`ID_BLOCK_CHECKSUM: checksum=${o.toString("hex")}`);break;default:Sr(`Ignore unsupported meta-sub-block-id functionId=0x${n.functionId.toString(16)}`);break}e-=Cr.WavPack.MetadataIdToken.len+(n.largeBlock?Sd.UINT24_LE.len:Sd.UINT8.len)+r*2,Sr(`remainingLength=${e}`),n.isOddSize&&this.tokenizer.ignore(1)}if(e!==0)throw new Error("metadata-sub-block should fit it remaining length")})}};Md.WavPackParser=vf});var Ex=S(gi=>{"use strict";Object.defineProperty(gi,"__esModule",{value:!0});gi.FormatChunk=gi.ChannelType=gi.DsdChunk=gi.ChunkHeader=void 0;var fi=ce(),sR=xt();gi.ChunkHeader={len:12,get:(i,t)=>({id:sR.FourCcToken.get(i,t),size:fi.UINT64_LE.get(i,t+4)})};gi.DsdChunk={len:16,get:(i,t)=>({fileSize:fi.INT64_LE.get(i,t),metadataPointer:fi.INT64_LE.get(i,t+8)})};var lR;(function(i){i[i.mono=1]="mono",i[i.stereo=2]="stereo",i[i.channels=3]="channels",i[i.quad=4]="quad",i[i["4 channels"]=5]="4 channels",i[i["5 channels"]=6]="5 channels",i[i["5.1 channels"]=7]="5.1 channels"})(lR=gi.ChannelType||(gi.ChannelType={}));gi.FormatChunk={len:40,get:(i,t)=>({formatVersion:fi.INT32_LE.get(i,t),formatID:fi.INT32_LE.get(i,t+4),channelType:fi.INT32_LE.get(i,t+8),channelNum:fi.INT32_LE.get(i,t+12),samplingFrequency:fi.INT32_LE.get(i,t+16),bitsPerSample:fi.INT32_LE.get(i,t+20),sampleCount:fi.INT64_LE.get(i,t+24),blockSizePerChannel:fi.INT32_LE.get(i,t+32)})}});var kx=S(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});Ed.DsfParser=void 0;var cR=Me(),dR=us(),Wo=Ex(),uR=Bo(),yf=(0,cR.default)("music-metadata:parser:DSF"),xf=class extends dR.AbstractID3Parser{postId3v2Parse(){return g(this,null,function*(){let t=this.tokenizer.position,e=yield this.tokenizer.readToken(Wo.ChunkHeader);if(e.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);let n=yield this.tokenizer.readToken(Wo.DsdChunk);if(n.metadataPointer===BigInt(0))yf("No ID3v2 tag present");else return yf(`expect ID3v2 at offset=${n.metadataPointer}`),yield this.parseChunks(n.fileSize-e.size),yield this.tokenizer.ignore(Number(n.metadataPointer)-this.tokenizer.position-t),new uR.ID3v2Parser().parse(this.metadata,this.tokenizer,this.options)})}parseChunks(t){return g(this,null,function*(){for(;t>=Wo.ChunkHeader.len;){let e=yield this.tokenizer.readToken(Wo.ChunkHeader);switch(yf(`Parsing chunk name=${e.id} size=${e.size}`),e.id){case"fmt ":let n=yield this.tokenizer.readToken(Wo.FormatChunk);this.metadata.setFormat("numberOfChannels",n.channelNum),this.metadata.setFormat("sampleRate",n.samplingFrequency),this.metadata.setFormat("bitsPerSample",n.bitsPerSample),this.metadata.setFormat("numberOfSamples",n.sampleCount),this.metadata.setFormat("duration",Number(n.sampleCount)/n.samplingFrequency);let r=n.bitsPerSample*n.samplingFrequency*n.channelNum;this.metadata.setFormat("bitrate",r);return;default:this.tokenizer.ignore(Number(e.size)-Wo.ChunkHeader.len);break}t-=e.size}})}};Ed.DsfParser=xf});var Tx=S(kd=>{"use strict";Object.defineProperty(kd,"__esModule",{value:!0});kd.ChunkHeader64=void 0;var mR=ce(),pR=xt();kd.ChunkHeader64={len:12,get:(i,t)=>({chunkID:pR.FourCcToken.get(i,t),chunkSize:mR.INT64_BE.get(i,t+4)})}});var Ix=S(Td=>{"use strict";Object.defineProperty(Td,"__esModule",{value:!0});Td.DsdiffParser=void 0;var ri=ce(),hR=Me(),fR=Mi(),Fn=xt(),gR=Nt(),bR=Bo(),Go=Tx(),Ct=(0,hR.default)("music-metadata:parser:aiff"),wf=class extends gR.BasicParser{parse(){return g(this,null,function*(){let t=yield this.tokenizer.readToken(Go.ChunkHeader64);if(t.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");let e=(yield this.tokenizer.readToken(Fn.FourCcToken)).trim();switch(e){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${e}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(t.chunkSize-BigInt(Fn.FourCcToken.len));default:throw Error(`Unsupported DSDIFF type: ${e}`)}})}readFmt8Chunks(t){return g(this,null,function*(){for(;t>=Go.ChunkHeader64.len;){let e=yield this.tokenizer.readToken(Go.ChunkHeader64);Ct(`Chunk id=${e.chunkID}`),yield this.readData(e),t-=BigInt(Go.ChunkHeader64.len)+e.chunkSize}})}readData(t){return g(this,null,function*(){Ct(`Reading data of chunk[ID=${t.chunkID}, size=${t.chunkSize}]`);let e=this.tokenizer.position;switch(t.chunkID.trim()){case"FVER":let r=yield this.tokenizer.readToken(ri.UINT32_LE);Ct(`DSDIFF version=${r}`);break;case"PROP":if((yield this.tokenizer.readToken(Fn.FourCcToken))!=="SND ")throw new Error("Unexpected PROP-chunk ID");yield this.handleSoundPropertyChunks(t.chunkSize-BigInt(Fn.FourCcToken.len));break;case"ID3":let a=yield this.tokenizer.readToken(new ri.Uint8ArrayType(Number(t.chunkSize))),s=fR.fromBuffer(a);yield new bR.ID3v2Parser().parse(this.metadata,s,this.options);break;default:Ct(`Ignore chunk[ID=${t.chunkID}, size=${t.chunkSize}]`);break;case"DSD":this.metadata.setFormat("numberOfSamples",Number(t.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break}let n=t.chunkSize-BigInt(this.tokenizer.position-e);n>0&&(Ct(`After Parsing chunk, remaining ${n} bytes`),yield this.tokenizer.ignore(Number(n)))})}handleSoundPropertyChunks(t){return g(this,null,function*(){for(Ct(`Parsing sound-property-chunks, remainingSize=${t}`);t>0;){let e=yield this.tokenizer.readToken(Go.ChunkHeader64);Ct(`Sound-property-chunk[ID=${e.chunkID}, size=${e.chunkSize}]`);let n=this.tokenizer.position;switch(e.chunkID.trim()){case"FS":let o=yield this.tokenizer.readToken(ri.UINT32_BE);this.metadata.setFormat("sampleRate",o);break;case"CHNL":let a=yield this.tokenizer.readToken(ri.UINT16_BE);this.metadata.setFormat("numberOfChannels",a),yield this.handleChannelChunks(e.chunkSize-BigInt(ri.UINT16_BE.len));break;case"CMPR":let s=(yield this.tokenizer.readToken(Fn.FourCcToken)).trim(),l=yield this.tokenizer.readToken(ri.UINT8),u=yield this.tokenizer.readToken(new ri.StringType(l,"ascii"));s==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${s} (${u})`);break;case"ABSS":let m=yield this.tokenizer.readToken(ri.UINT16_BE),p=yield this.tokenizer.readToken(ri.UINT8),y=yield this.tokenizer.readToken(ri.UINT8),v=yield this.tokenizer.readToken(ri.UINT32_BE);Ct(`ABSS ${m}:${p}:${y}.${v}`);break;case"LSCO":let P=yield this.tokenizer.readToken(ri.UINT16_BE);Ct(`LSCO lsConfig=${P}`);break;case"COMT":default:Ct(`Unknown sound-property-chunk[ID=${e.chunkID}, size=${e.chunkSize}]`),yield this.tokenizer.ignore(Number(e.chunkSize))}let r=e.chunkSize-BigInt(this.tokenizer.position-n);r>0&&(Ct(`After Parsing sound-property-chunk ${e.chunkSize}, remaining ${r} bytes`),yield this.tokenizer.ignore(Number(r))),t-=BigInt(Go.ChunkHeader64.len)+e.chunkSize,Ct(`Parsing sound-property-chunks, remainingSize=${t}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){let e=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",e)}})}handleChannelChunks(t){return g(this,null,function*(){Ct(`Parsing channel-chunks, remainingSize=${t}`);let e=[];for(;t>=Fn.FourCcToken.len;){let n=yield this.tokenizer.readToken(Fn.FourCcToken);Ct(`Channel[ID=${n}]`),e.push(n),t-=BigInt(Fn.FourCcToken.len)}return Ct(`Channels: ${e.join(", ")}`),e})}};Td.DsdiffParser=wf});var Px=S(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});Id.elements=void 0;var T=bc();Id.elements={440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:T.DataType.uint},17143:{name:"ebmlReadVersion",value:T.DataType.uint},17138:{name:"ebmlMaxIDWidth",value:T.DataType.uint},17139:{name:"ebmlMaxSizeWidth",value:T.DataType.uint},17026:{name:"docType",value:T.DataType.string},17031:{name:"docTypeVersion",value:T.DataType.uint},17029:{name:"docTypeReadVersion",value:T.DataType.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",container:{21419:{name:"seekId",value:T.DataType.binary},21420:{name:"seekPosition",value:T.DataType.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:T.DataType.uid},29572:{name:"filename",value:T.DataType.string},3979555:{name:"prevUID",value:T.DataType.uid},3965867:{name:"prevFilename",value:T.DataType.string},4110627:{name:"nextUID",value:T.DataType.uid},4096955:{name:"nextFilename",value:T.DataType.string},2807729:{name:"timecodeScale",value:T.DataType.uint},17545:{name:"duration",value:T.DataType.float},17505:{name:"dateUTC",value:T.DataType.uint},31657:{name:"title",value:T.DataType.string},19840:{name:"muxingApp",value:T.DataType.string},22337:{name:"writingApp",value:T.DataType.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:T.DataType.uid},163:{name:"unknown",value:T.DataType.binary},167:{name:"position",value:T.DataType.uid},171:{name:"prevSize",value:T.DataType.uid}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:T.DataType.uint},29637:{name:"uid",value:T.DataType.uid},131:{name:"trackType",value:T.DataType.uint},185:{name:"flagEnabled",value:T.DataType.bool},136:{name:"flagDefault",value:T.DataType.bool},21930:{name:"flagForced",value:T.DataType.bool},156:{name:"flagLacing",value:T.DataType.bool},28135:{name:"minCache",value:T.DataType.uint},28136:{name:"maxCache",value:T.DataType.uint},2352003:{name:"defaultDuration",value:T.DataType.uint},2306383:{name:"timecodeScale",value:T.DataType.float},21358:{name:"name",value:T.DataType.string},2274716:{name:"language",value:T.DataType.string},134:{name:"codecID",value:T.DataType.string},25506:{name:"codecPrivate",value:T.DataType.binary},2459272:{name:"codecName",value:T.DataType.string},3839639:{name:"codecSettings",value:T.DataType.string},3883072:{name:"codecInfoUrl",value:T.DataType.string},2536e3:{name:"codecDownloadUrl",value:T.DataType.string},170:{name:"codecDecodeAll",value:T.DataType.bool},28587:{name:"trackOverlay",value:T.DataType.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:T.DataType.bool},21432:{name:"stereoMode",value:T.DataType.uint},176:{name:"pixelWidth",value:T.DataType.uint},186:{name:"pixelHeight",value:T.DataType.uint},21680:{name:"displayWidth",value:T.DataType.uint},21690:{name:"displayHeight",value:T.DataType.uint},21683:{name:"aspectRatioType",value:T.DataType.uint},3061028:{name:"colourSpace",value:T.DataType.uint},3126563:{name:"gammaValue",value:T.DataType.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:T.DataType.float},30901:{name:"outputSamplingFrequency",value:T.DataType.float},159:{name:"channels",value:T.DataType.uint},148:{name:"channels",value:T.DataType.uint},32123:{name:"channelPositions",value:T.DataType.binary},25188:{name:"bitDepth",value:T.DataType.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:T.DataType.uint},20530:{name:"scope",value:T.DataType.bool},20531:{name:"type",value:T.DataType.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:T.DataType.uint},16981:{name:"contentCompSettings",value:T.DataType.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:T.DataType.uint},18402:{name:"contentEncKeyID",value:T.DataType.binary},18403:{name:"contentSignature ",value:T.DataType.binary},18404:{name:"ContentSigKeyID  ",value:T.DataType.binary},18405:{name:"contentSigAlgo ",value:T.DataType.uint},18406:{name:"contentSigHashAlgo ",value:T.DataType.uint}}},25188:{name:"bitDepth",value:T.DataType.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:T.DataType.uid},183:{name:"positions",container:{247:{name:"track",value:T.DataType.uint},241:{name:"clusterPosition",value:T.DataType.uint},21368:{name:"blockNumber",value:T.DataType.uint},234:{name:"codecState",value:T.DataType.uint},219:{name:"reference",container:{150:{name:"time",value:T.DataType.uint},151:{name:"cluster",value:T.DataType.uint},21343:{name:"number",value:T.DataType.uint},235:{name:"codecState",value:T.DataType.uint}}},240:{name:"relativePosition",value:T.DataType.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:T.DataType.string},18030:{name:"name",value:T.DataType.string},18016:{name:"mimeType",value:T.DataType.string},18012:{name:"data",value:T.DataType.binary},18094:{name:"uid",value:T.DataType.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:T.DataType.uid},145:{name:"timeStart",value:T.DataType.uint},146:{name:"timeEnd",value:T.DataType.uid},152:{name:"hidden",value:T.DataType.bool},17816:{name:"enabled",value:T.DataType.uid},143:{name:"track",container:{137:{name:"trackNumber",value:T.DataType.uid},128:{name:"display",container:{133:{name:"string",value:T.DataType.string},17276:{name:"language ",value:T.DataType.string},17278:{name:"country ",value:T.DataType.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:T.DataType.uid},25540:{name:"tagChapterUID",value:T.DataType.uint},25542:{name:"tagAttachmentUID",value:T.DataType.uid},25546:{name:"targetType",value:T.DataType.string},26826:{name:"targetTypeValue",value:T.DataType.uint},25545:{name:"tagEditionUID",value:T.DataType.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:T.DataType.string},17543:{name:"string",value:T.DataType.string},17541:{name:"binary",value:T.DataType.binary},17530:{name:"language",value:T.DataType.string},17531:{name:"languageIETF",value:T.DataType.string},17540:{name:"default",value:T.DataType.bool}}}}}}}}}}});var Dx=S(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});Pd.MatroskaParser=void 0;var ys=ce(),_R=Me(),vR=Nt(),Nn=bc(),yR=Px(),Ox=(0,_R.default)("music-metadata:parser:matroska"),Cf=class extends vR.BasicParser{constructor(){super(),this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(Nn.DataType.uint,t=>this.readUint(t)),this.parserMap.set(Nn.DataType.string,t=>this.readString(t)),this.parserMap.set(Nn.DataType.binary,t=>this.readBuffer(t)),this.parserMap.set(Nn.DataType.uid,t=>g(this,null,function*(){return(yield this.readUint(t))===1})),this.parserMap.set(Nn.DataType.bool,t=>this.readFlag(t)),this.parserMap.set(Nn.DataType.float,t=>this.readFloat(t))}init(t,e,n){return super.init(t,e,n),this}parse(){return g(this,null,function*(){let t=yield this.parseContainer(yR.elements,this.tokenizer.fileInfo.size,[]);if(this.metadata.setFormat("container",`EBML/${t.ebml.docType}`),t.segment){let e=t.segment.info;if(e){let r=e.timecodeScale?e.timecodeScale:1e6;if(typeof e.duration=="number"){let o=e.duration*r/1e9;this.addTag("segment:title",e.title),this.metadata.setFormat("duration",o)}}let n=t.segment.tracks;if(n&&n.entries){n.entries.forEach(o=>{let a={codecName:o.codecID.replace("A_","").replace("V_",""),codecSettings:o.codecSettings,flagDefault:o.flagDefault,flagLacing:o.flagLacing,flagEnabled:o.flagEnabled,language:o.language,name:o.name,type:o.trackType,audio:o.audio,video:o.video};this.metadata.addStreamInfo(a)});let r=n.entries.filter(o=>o.trackType===Nn.TrackType.audio.valueOf()).reduce((o,a)=>!o||!o.flagDefault&&a.flagDefault||a.trackNumber&&a.trackNumber<o.trackNumber?a:o,null);r&&(this.metadata.setFormat("codec",r.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",r.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",r.audio.channels)),t.segment.tags&&t.segment.tags.tag.forEach(o=>{let a=o.target,s=a?.targetTypeValue?Nn.TargetType[a.targetTypeValue]:a?.targetType?a.targetType:"track";o.simpleTags.forEach(l=>{let u=l.string?l.string:l.binary;this.addTag(`${s}:${l.name}`,u)})}),t.segment.attachments&&t.segment.attachments.attachedFiles.filter(o=>o.mimeType.startsWith("image/")).map(o=>({data:o.data,format:o.mimeType,description:o.description,name:o.name})).forEach(o=>{this.addTag("picture",o)})}}})}parseContainer(t,e,n){return g(this,null,function*(){let r={};for(;this.tokenizer.position<e;){let o;try{o=yield this.readElement()}catch(s){if(s.message==="End-Of-Stream")break;throw s}let a=t[o.id];if(a)if(Ox(`Element: name=${a.name}, container=${!!a.container}`),a.container){let s=yield this.parseContainer(a.container,o.len>=0?this.tokenizer.position+o.len:-1,n.concat([a.name]));a.multiple?(r[a.name]||(r[a.name]=[]),r[a.name].push(s)):r[a.name]=s}else r[a.name]=yield this.parserMap.get(a.value)(o);else switch(o.id){case 236:this.padding+=o.len,yield this.tokenizer.ignore(o.len);break;default:Ox(`parseEbml: path=${n.join("/")}, unknown element: id=${o.id.toString(16)}`),this.padding+=o.len,yield this.tokenizer.ignore(o.len)}}return r})}readVintData(t){return g(this,null,function*(){let e=yield this.tokenizer.peekNumber(ys.UINT8),n=128,r=1;for(;!(e&n);){if(r>t)throw new Error("VINT value exceeding maximum size");++r,n>>=1}let o=Buffer.alloc(r);return yield this.tokenizer.readBuffer(o),o})}readElement(){return g(this,null,function*(){let t=yield this.readVintData(this.ebmlMaxIDLength),e=yield this.readVintData(this.ebmlMaxSizeLength);e[0]^=128>>e.length-1;let n=Math.min(6,e.length);return{id:t.readUIntBE(0,t.length),len:e.readUIntBE(e.length-n,n)}})}isMaxValue(t){if(t.length===this.ebmlMaxSizeLength){for(let e=1;e<this.ebmlMaxSizeLength;++e)if(t[e]!==255)return!1;return!0}return!1}readFloat(t){return g(this,null,function*(){switch(t.len){case 0:return 0;case 4:return this.tokenizer.readNumber(ys.Float32_BE);case 8:return this.tokenizer.readNumber(ys.Float64_BE);case 10:return this.tokenizer.readNumber(ys.Float64_BE);default:throw new Error(`Invalid IEEE-754 float length: ${t.len}`)}})}readFlag(t){return g(this,null,function*(){return(yield this.readUint(t))===1})}readUint(t){return g(this,null,function*(){let e=yield this.readBuffer(t),n=Math.min(6,t.len);return e.readUIntBE(t.len-n,n)})}readString(t){return g(this,null,function*(){return(yield this.tokenizer.readToken(new ys.StringType(t.len,"utf-8"))).replace(/\00.*$/g,"")})}readBuffer(t){return g(this,null,function*(){let e=Buffer.alloc(t.len);return yield this.tokenizer.readBuffer(e),e})}addTag(t,e){this.metadata.addTag("matroska",t,e)}};Pd.MatroskaParser=Cf});var Rx=S(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.ParserFactory=Xo.parseHttpContentType=void 0;var xR=Xp(),wR=Nv(),CR=Uv(),SR=Me(),MR=ry(),ER=yy(),kR=vr(),TR=Ey(),IR=Iy(),PR=Ly(),OR=Gy(),DR=ox(),AR=hx(),RR=Cx(),FR=Mx(),NR=kx(),LR=Ix(),BR=Dx(),Od=(0,SR.default)("music-metadata:parser:factory");function Ax(i){let t=wR.parse(i),e=CR.parse(t.type);return{type:e.type,subtype:e.subtype,suffix:e.suffix,parameters:t.parameters}}Xo.parseHttpContentType=Ax;function UR(n,r){return g(this,arguments,function*(i,t,e={}){let o=yield Dd.loadParser(t),a=new MR.MetadataCollector(e);return yield o.init(a,i,e).parse(),a.toCommonMetadata()})}var Dd=class i{static parseOnContentType(t,e){return g(this,null,function*(){let{mimeType:n,path:r,url:o}=yield t.fileInfo,a=i.getParserIdForMimeType(n)||i.getParserIdForExtension(r)||i.getParserIdForExtension(o);return a||Od("No parser found for MIME-type / extension: "+n),this.parse(t,a,e)})}static parse(t,e,n){return g(this,null,function*(){if(!e){Od("Guess parser on content...");let r=Buffer.alloc(4100);if(yield t.peekBuffer(r,{mayBeLess:!0}),t.fileInfo.path&&(e=this.getParserIdForExtension(t.fileInfo.path)),!e){let o=yield xR.fromBuffer(r);if(!o)throw new Error("Failed to determine audio format");if(Od(`Guessed file type is mime=${o.mime}, extension=${o.ext}`),e=i.getParserIdForMimeType(o.mime),!e)throw new Error("Guessed MIME-type not supported: "+o.mime)}}return UR(t,e,n)})}static getParserIdForExtension(t){if(!t)return;switch(this.getExtension(t).toLocaleLowerCase()||t){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}static loadParser(t){return g(this,null,function*(){switch(t){case"aiff":return new ER.AIFFParser;case"adts":case"mpeg":return new OR.MpegParser;case"apev2":return new kR.APEv2Parser;case"asf":return new TR.AsfParser;case"dsf":return new NR.DsfParser;case"dsdiff":return new LR.DsdiffParser;case"flac":return new IR.FlacParser;case"mp4":return new PR.MP4Parser;case"musepack":return new DR.default;case"ogg":return new AR.OggParser;case"riff":return new RR.WaveParser;case"wavpack":return new FR.WavPackParser;case"matroska":return new BR.MatroskaParser;default:throw new Error(`Unknown parser type: ${t}`)}})}static getExtension(t){let e=t.lastIndexOf(".");return e===-1?"":t.slice(e)}static getParserIdForMimeType(t){let e;try{e=Ax(t)}catch{Od(`Invalid HTTP Content-Type header value: ${t}`);return}let n=e.subtype.indexOf("x-")===0?e.subtype.substring(2):e.subtype;switch(e.type){case"audio":switch(n){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(n){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(n){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}};Xo.ParserFactory=Dd});var Fx=S(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});Ad.RandomUint8ArrayReader=void 0;var Sf=class{constructor(t){this.uint8Array=t,this.fileSize=t.length}randomRead(t,e,n,r){return g(this,null,function*(){return t.set(this.uint8Array.subarray(r,r+n),e),n})}};Ad.RandomUint8ArrayReader=Sf});var Nx=S(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.getLyricsHeaderLength=Mr.endTag2=void 0;Mr.endTag2="LYRICS200";function zR(i){return g(this,null,function*(){if(i.fileSize>=143){let t=Buffer.alloc(15);yield i.randomRead(t,0,t.length,i.fileSize-143);let e=t.toString("binary");if(e.substr(6)===Mr.endTag2)return parseInt(e.substr(0,6),10)+15}return 0})}Mr.getLyricsHeaderLength=zR});var Ef=S(pt=>{"use strict";Object.defineProperty(pt,"__esModule",{value:!0});pt.scanAppendingHeaders=pt.selectCover=pt.ratingToStars=pt.orderTags=pt.parseFromTokenizer=pt.parseBuffer=pt.parseStream=void 0;var Lx=Mi(),jR=Rx(),VR=Fx(),qR=vr(),HR=ss(),$R=Nx();function WR(i,t,e={}){return Mf(Lx.fromStream(i,typeof t=="string"?{mimeType:t}:t),e)}pt.parseStream=WR;function GR(n,r){return g(this,arguments,function*(i,t,e={}){let o=new VR.RandomUint8ArrayReader(i);yield Bx(o,e);let a=Lx.fromBuffer(i,typeof t=="string"?{mimeType:t}:t);return Mf(a,e)})}pt.parseBuffer=GR;function Mf(i,t){return jR.ParserFactory.parseOnContentType(i,t)}pt.parseFromTokenizer=Mf;function XR(i){let t={};for(let e of i)(t[e.id]=t[e.id]||[]).push(e.value);return t}pt.orderTags=XR;function YR(i){return i===void 0?0:1+Math.round(i*4)}pt.ratingToStars=YR;function ZR(i){return i?i.reduce((t,e)=>e.name&&e.name.toLowerCase()in["front","cover","cover (front)"]?e:t):null}pt.selectCover=ZR;function Bx(e){return g(this,arguments,function*(i,t={}){let n=i.fileSize;if(yield(0,HR.hasID3v1Header)(i)){n-=128;let r=yield(0,$R.getLyricsHeaderLength)(i);n-=r}t.apeHeader=yield qR.APEv2Parser.findApeFooterOffset(i,n)})}pt.scanAppendingHeaders=Bx});var jx=S(Rd=>{"use strict";Rd.byteLength=QR;Rd.toByteArray=eF;Rd.fromByteArray=nF;var Ii=[],oi=[],KR=typeof Uint8Array<"u"?Uint8Array:Array,kf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Er=0,Ux=kf.length;Er<Ux;++Er)Ii[Er]=kf[Er],oi[kf.charCodeAt(Er)]=Er;var Er,Ux;oi[45]=62;oi[95]=63;function zx(i){var t=i.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=i.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function QR(i){var t=zx(i),e=t[0],n=t[1];return(e+n)*3/4-n}function JR(i,t,e){return(t+e)*3/4-e}function eF(i){var t,e=zx(i),n=e[0],r=e[1],o=new KR(JR(i,n,r)),a=0,s=r>0?n-4:n,l;for(l=0;l<s;l+=4)t=oi[i.charCodeAt(l)]<<18|oi[i.charCodeAt(l+1)]<<12|oi[i.charCodeAt(l+2)]<<6|oi[i.charCodeAt(l+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=t&255;return r===2&&(t=oi[i.charCodeAt(l)]<<2|oi[i.charCodeAt(l+1)]>>4,o[a++]=t&255),r===1&&(t=oi[i.charCodeAt(l)]<<10|oi[i.charCodeAt(l+1)]<<4|oi[i.charCodeAt(l+2)]>>2,o[a++]=t>>8&255,o[a++]=t&255),o}function tF(i){return Ii[i>>18&63]+Ii[i>>12&63]+Ii[i>>6&63]+Ii[i&63]}function iF(i,t,e){for(var n,r=[],o=t;o<e;o+=3)n=(i[o]<<16&16711680)+(i[o+1]<<8&65280)+(i[o+2]&255),r.push(tF(n));return r.join("")}function nF(i){for(var t,e=i.length,n=e%3,r=[],o=16383,a=0,s=e-n;a<s;a+=o)r.push(iF(i,a,a+o>s?s:a+o));return n===1?(t=i[e-1],r.push(Ii[t>>2]+Ii[t<<4&63]+"==")):n===2&&(t=(i[e-2]<<8)+i[e-1],r.push(Ii[t>>10]+Ii[t>>4&63]+Ii[t<<2&63]+"=")),r.join("")}});var tn=S(Qo=>{"use strict";var Tf=jx(),Zo=qp(),Vx=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Qo.Buffer=C;Qo.SlowBuffer=cF;Qo.INSPECT_MAX_BYTES=50;var Fd=2147483647;Qo.kMaxLength=Fd;C.TYPED_ARRAY_SUPPORT=rF();!C.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function rF(){try{let i=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(i,t),i.foo()===42}catch{return!1}}Object.defineProperty(C.prototype,"parent",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.buffer}});Object.defineProperty(C.prototype,"offset",{enumerable:!0,get:function(){if(C.isBuffer(this))return this.byteOffset}});function en(i){if(i>Fd)throw new RangeError('The value "'+i+'" is invalid for option "size"');let t=new Uint8Array(i);return Object.setPrototypeOf(t,C.prototype),t}function C(i,t,e){if(typeof i=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Df(i)}return Wx(i,t,e)}C.poolSize=8192;function Wx(i,t,e){if(typeof i=="string")return aF(i,t);if(ArrayBuffer.isView(i))return sF(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(Pi(i,ArrayBuffer)||i&&Pi(i.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Pi(i,SharedArrayBuffer)||i&&Pi(i.buffer,SharedArrayBuffer)))return Pf(i,t,e);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=i.valueOf&&i.valueOf();if(n!=null&&n!==i)return C.from(n,t,e);let r=lF(i);if(r)return r;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return C.from(i[Symbol.toPrimitive]("string"),t,e);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}C.from=function(i,t,e){return Wx(i,t,e)};Object.setPrototypeOf(C.prototype,Uint8Array.prototype);Object.setPrototypeOf(C,Uint8Array);function Gx(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function oF(i,t,e){return Gx(i),i<=0?en(i):t!==void 0?typeof e=="string"?en(i).fill(t,e):en(i).fill(t):en(i)}C.alloc=function(i,t,e){return oF(i,t,e)};function Df(i){return Gx(i),en(i<0?0:Af(i)|0)}C.allocUnsafe=function(i){return Df(i)};C.allocUnsafeSlow=function(i){return Df(i)};function aF(i,t){if((typeof t!="string"||t==="")&&(t="utf8"),!C.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let e=Xx(i,t)|0,n=en(e),r=n.write(i,t);return r!==e&&(n=n.slice(0,r)),n}function If(i){let t=i.length<0?0:Af(i.length)|0,e=en(t);for(let n=0;n<t;n+=1)e[n]=i[n]&255;return e}function sF(i){if(Pi(i,Uint8Array)){let t=new Uint8Array(i);return Pf(t.buffer,t.byteOffset,t.byteLength)}return If(i)}function Pf(i,t,e){if(t<0||i.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<t+(e||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&e===void 0?n=new Uint8Array(i):e===void 0?n=new Uint8Array(i,t):n=new Uint8Array(i,t,e),Object.setPrototypeOf(n,C.prototype),n}function lF(i){if(C.isBuffer(i)){let t=Af(i.length)|0,e=en(t);return e.length===0||i.copy(e,0,0,t),e}if(i.length!==void 0)return typeof i.length!="number"||Ff(i.length)?en(0):If(i);if(i.type==="Buffer"&&Array.isArray(i.data))return If(i.data)}function Af(i){if(i>=Fd)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Fd.toString(16)+" bytes");return i|0}function cF(i){return+i!=i&&(i=0),C.alloc(+i)}C.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==C.prototype};C.compare=function(t,e){if(Pi(t,Uint8Array)&&(t=C.from(t,t.offset,t.byteLength)),Pi(e,Uint8Array)&&(e=C.from(e,e.offset,e.byteLength)),!C.isBuffer(t)||!C.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let o=0,a=Math.min(n,r);o<a;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0};C.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};C.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return C.alloc(0);let n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;let r=C.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){let a=t[n];if(Pi(a,Uint8Array))o+a.length>r.length?(C.isBuffer(a)||(a=C.from(a)),a.copy(r,o)):Uint8Array.prototype.set.call(r,a,o);else if(C.isBuffer(a))a.copy(r,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=a.length}return r};function Xx(i,t){if(C.isBuffer(i))return i.length;if(ArrayBuffer.isView(i)||Pi(i,ArrayBuffer))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);let e=i.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&e===0)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":return Of(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return n1(i).length;default:if(r)return n?-1:Of(i).length;t=(""+t).toLowerCase(),r=!0}}C.byteLength=Xx;function dF(i,t,e){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,t>>>=0,e<=t))return"";for(i||(i="utf8");;)switch(i){case"hex":return yF(this,t,e);case"utf8":case"utf-8":return Zx(this,t,e);case"ascii":return _F(this,t,e);case"latin1":case"binary":return vF(this,t,e);case"base64":return gF(this,t,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xF(this,t,e);default:if(n)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),n=!0}}C.prototype._isBuffer=!0;function kr(i,t,e){let n=i[t];i[t]=i[e],i[e]=n}C.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)kr(this,e,e+1);return this};C.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)kr(this,e,e+3),kr(this,e+1,e+2);return this};C.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)kr(this,e,e+7),kr(this,e+1,e+6),kr(this,e+2,e+5),kr(this,e+3,e+4);return this};C.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?Zx(this,0,t):dF.apply(this,arguments)};C.prototype.toLocaleString=C.prototype.toString;C.prototype.equals=function(t){if(!C.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:C.compare(this,t)===0};C.prototype.inspect=function(){let t="",e=Qo.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"};Vx&&(C.prototype[Vx]=C.prototype.inspect);C.prototype.compare=function(t,e,n,r,o){if(Pi(t,Uint8Array)&&(t=C.from(t,t.offset,t.byteLength)),!C.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),r===void 0&&(r=0),o===void 0&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;let a=o-r,s=n-e,l=Math.min(a,s),u=this.slice(r,o),m=t.slice(e,n);for(let p=0;p<l;++p)if(u[p]!==m[p]){a=u[p],s=m[p];break}return a<s?-1:s<a?1:0};function Yx(i,t,e,n,r){if(i.length===0)return-1;if(typeof e=="string"?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,Ff(e)&&(e=r?0:i.length-1),e<0&&(e=i.length+e),e>=i.length){if(r)return-1;e=i.length-1}else if(e<0)if(r)e=0;else return-1;if(typeof t=="string"&&(t=C.from(t,n)),C.isBuffer(t))return t.length===0?-1:qx(i,t,e,n,r);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?r?Uint8Array.prototype.indexOf.call(i,t,e):Uint8Array.prototype.lastIndexOf.call(i,t,e):qx(i,[t],e,n,r);throw new TypeError("val must be string, number or Buffer")}function qx(i,t,e,n,r){let o=1,a=i.length,s=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(i.length<2||t.length<2)return-1;o=2,a/=2,s/=2,e/=2}function l(m,p){return o===1?m[p]:m.readUInt16BE(p*o)}let u;if(r){let m=-1;for(u=e;u<a;u++)if(l(i,u)===l(t,m===-1?0:u-m)){if(m===-1&&(m=u),u-m+1===s)return m*o}else m!==-1&&(u-=u-m),m=-1}else for(e+s>a&&(e=a-s),u=e;u>=0;u--){let m=!0;for(let p=0;p<s;p++)if(l(i,u+p)!==l(t,p)){m=!1;break}if(m)return u}return-1}C.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1};C.prototype.indexOf=function(t,e,n){return Yx(this,t,e,n,!0)};C.prototype.lastIndexOf=function(t,e,n){return Yx(this,t,e,n,!1)};function uF(i,t,e,n){e=Number(e)||0;let r=i.length-e;n?(n=Number(n),n>r&&(n=r)):n=r;let o=t.length;n>o/2&&(n=o/2);let a;for(a=0;a<n;++a){let s=parseInt(t.substr(a*2,2),16);if(Ff(s))return a;i[e+a]=s}return a}function mF(i,t,e,n){return Nd(Of(t,i.length-e),i,e,n)}function pF(i,t,e,n){return Nd(MF(t),i,e,n)}function hF(i,t,e,n){return Nd(n1(t),i,e,n)}function fF(i,t,e,n){return Nd(EF(t,i.length-e),i,e,n)}C.prototype.write=function(t,e,n,r){if(e===void 0)r="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")r=e,n=this.length,e=0;else if(isFinite(e))e=e>>>0,isFinite(n)?(n=n>>>0,r===void 0&&(r="utf8")):(r=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-e;if((n===void 0||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let a=!1;for(;;)switch(r){case"hex":return uF(this,t,e,n);case"utf8":case"utf-8":return mF(this,t,e,n);case"ascii":case"latin1":case"binary":return pF(this,t,e,n);case"base64":return hF(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fF(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}};C.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function gF(i,t,e){return t===0&&e===i.length?Tf.fromByteArray(i):Tf.fromByteArray(i.slice(t,e))}function Zx(i,t,e){e=Math.min(i.length,e);let n=[],r=t;for(;r<e;){let o=i[r],a=null,s=o>239?4:o>223?3:o>191?2:1;if(r+s<=e){let l,u,m,p;switch(s){case 1:o<128&&(a=o);break;case 2:l=i[r+1],(l&192)===128&&(p=(o&31)<<6|l&63,p>127&&(a=p));break;case 3:l=i[r+1],u=i[r+2],(l&192)===128&&(u&192)===128&&(p=(o&15)<<12|(l&63)<<6|u&63,p>2047&&(p<55296||p>57343)&&(a=p));break;case 4:l=i[r+1],u=i[r+2],m=i[r+3],(l&192)===128&&(u&192)===128&&(m&192)===128&&(p=(o&15)<<18|(l&63)<<12|(u&63)<<6|m&63,p>65535&&p<1114112&&(a=p))}}a===null?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|a&1023),n.push(a),r+=s}return bF(n)}var Hx=4096;function bF(i){let t=i.length;if(t<=Hx)return String.fromCharCode.apply(String,i);let e="",n=0;for(;n<t;)e+=String.fromCharCode.apply(String,i.slice(n,n+=Hx));return e}function _F(i,t,e){let n="";e=Math.min(i.length,e);for(let r=t;r<e;++r)n+=String.fromCharCode(i[r]&127);return n}function vF(i,t,e){let n="";e=Math.min(i.length,e);for(let r=t;r<e;++r)n+=String.fromCharCode(i[r]);return n}function yF(i,t,e){let n=i.length;(!t||t<0)&&(t=0),(!e||e<0||e>n)&&(e=n);let r="";for(let o=t;o<e;++o)r+=kF[i[o]];return r}function xF(i,t,e){let n=i.slice(t,e),r="";for(let o=0;o<n.length-1;o+=2)r+=String.fromCharCode(n[o]+n[o+1]*256);return r}C.prototype.slice=function(t,e){let n=this.length;t=~~t,e=e===void 0?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);let r=this.subarray(t,e);return Object.setPrototypeOf(r,C.prototype),r};function rt(i,t,e){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+t>e)throw new RangeError("Trying to access beyond buffer length")}C.prototype.readUintLE=C.prototype.readUIntLE=function(t,e,n){t=t>>>0,e=e>>>0,n||rt(t,e,this.length);let r=this[t],o=1,a=0;for(;++a<e&&(o*=256);)r+=this[t+a]*o;return r};C.prototype.readUintBE=C.prototype.readUIntBE=function(t,e,n){t=t>>>0,e=e>>>0,n||rt(t,e,this.length);let r=this[t+--e],o=1;for(;e>0&&(o*=256);)r+=this[t+--e]*o;return r};C.prototype.readUint8=C.prototype.readUInt8=function(t,e){return t=t>>>0,e||rt(t,1,this.length),this[t]};C.prototype.readUint16LE=C.prototype.readUInt16LE=function(t,e){return t=t>>>0,e||rt(t,2,this.length),this[t]|this[t+1]<<8};C.prototype.readUint16BE=C.prototype.readUInt16BE=function(t,e){return t=t>>>0,e||rt(t,2,this.length),this[t]<<8|this[t+1]};C.prototype.readUint32LE=C.prototype.readUInt32LE=function(t,e){return t=t>>>0,e||rt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};C.prototype.readUint32BE=C.prototype.readUInt32BE=function(t,e){return t=t>>>0,e||rt(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};C.prototype.readBigUInt64LE=Ln(function(t){t=t>>>0,Ko(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&xs(t,this.length-8);let r=e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,o=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))});C.prototype.readBigUInt64BE=Ln(function(t){t=t>>>0,Ko(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&xs(t,this.length-8);let r=e*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],o=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(r)<<BigInt(32))+BigInt(o)});C.prototype.readIntLE=function(t,e,n){t=t>>>0,e=e>>>0,n||rt(t,e,this.length);let r=this[t],o=1,a=0;for(;++a<e&&(o*=256);)r+=this[t+a]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*e)),r};C.prototype.readIntBE=function(t,e,n){t=t>>>0,e=e>>>0,n||rt(t,e,this.length);let r=e,o=1,a=this[t+--r];for(;r>0&&(o*=256);)a+=this[t+--r]*o;return o*=128,a>=o&&(a-=Math.pow(2,8*e)),a};C.prototype.readInt8=function(t,e){return t=t>>>0,e||rt(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};C.prototype.readInt16LE=function(t,e){t=t>>>0,e||rt(t,2,this.length);let n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n};C.prototype.readInt16BE=function(t,e){t=t>>>0,e||rt(t,2,this.length);let n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n};C.prototype.readInt32LE=function(t,e){return t=t>>>0,e||rt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};C.prototype.readInt32BE=function(t,e){return t=t>>>0,e||rt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};C.prototype.readBigInt64LE=Ln(function(t){t=t>>>0,Ko(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&xs(t,this.length-8);let r=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});C.prototype.readBigInt64BE=Ln(function(t){t=t>>>0,Ko(t,"offset");let e=this[t],n=this[t+7];(e===void 0||n===void 0)&&xs(t,this.length-8);let r=(e<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)});C.prototype.readFloatLE=function(t,e){return t=t>>>0,e||rt(t,4,this.length),Zo.read(this,t,!0,23,4)};C.prototype.readFloatBE=function(t,e){return t=t>>>0,e||rt(t,4,this.length),Zo.read(this,t,!1,23,4)};C.prototype.readDoubleLE=function(t,e){return t=t>>>0,e||rt(t,8,this.length),Zo.read(this,t,!0,52,8)};C.prototype.readDoubleBE=function(t,e){return t=t>>>0,e||rt(t,8,this.length),Zo.read(this,t,!1,52,8)};function Lt(i,t,e,n,r,o){if(!C.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(e+n>i.length)throw new RangeError("Index out of range")}C.prototype.writeUintLE=C.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e=e>>>0,n=n>>>0,!r){let s=Math.pow(2,8*n)-1;Lt(this,t,e,n,s,0)}let o=1,a=0;for(this[e]=t&255;++a<n&&(o*=256);)this[e+a]=t/o&255;return e+n};C.prototype.writeUintBE=C.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e=e>>>0,n=n>>>0,!r){let s=Math.pow(2,8*n)-1;Lt(this,t,e,n,s,0)}let o=n-1,a=1;for(this[e+o]=t&255;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+n};C.prototype.writeUint8=C.prototype.writeUInt8=function(t,e,n){return t=+t,e=e>>>0,n||Lt(this,t,e,1,255,0),this[e]=t&255,e+1};C.prototype.writeUint16LE=C.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=e>>>0,n||Lt(this,t,e,2,65535,0),this[e]=t&255,this[e+1]=t>>>8,e+2};C.prototype.writeUint16BE=C.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=e>>>0,n||Lt(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=t&255,e+2};C.prototype.writeUint32LE=C.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=e>>>0,n||Lt(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t&255,e+4};C.prototype.writeUint32BE=C.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=e>>>0,n||Lt(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};function Kx(i,t,e,n,r){i1(t,n,r,i,e,7);let o=Number(t&BigInt(4294967295));i[e++]=o,o=o>>8,i[e++]=o,o=o>>8,i[e++]=o,o=o>>8,i[e++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return i[e++]=a,a=a>>8,i[e++]=a,a=a>>8,i[e++]=a,a=a>>8,i[e++]=a,e}function Qx(i,t,e,n,r){i1(t,n,r,i,e,7);let o=Number(t&BigInt(4294967295));i[e+7]=o,o=o>>8,i[e+6]=o,o=o>>8,i[e+5]=o,o=o>>8,i[e+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return i[e+3]=a,a=a>>8,i[e+2]=a,a=a>>8,i[e+1]=a,a=a>>8,i[e]=a,e+8}C.prototype.writeBigUInt64LE=Ln(function(t,e=0){return Kx(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))});C.prototype.writeBigUInt64BE=Ln(function(t,e=0){return Qx(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))});C.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e=e>>>0,!r){let l=Math.pow(2,8*n-1);Lt(this,t,e,n,l-1,-l)}let o=0,a=1,s=0;for(this[e]=t&255;++o<n&&(a*=256);)t<0&&s===0&&this[e+o-1]!==0&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n};C.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e=e>>>0,!r){let l=Math.pow(2,8*n-1);Lt(this,t,e,n,l-1,-l)}let o=n-1,a=1,s=0;for(this[e+o]=t&255;--o>=0&&(a*=256);)t<0&&s===0&&this[e+o+1]!==0&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n};C.prototype.writeInt8=function(t,e,n){return t=+t,e=e>>>0,n||Lt(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=t&255,e+1};C.prototype.writeInt16LE=function(t,e,n){return t=+t,e=e>>>0,n||Lt(this,t,e,2,32767,-32768),this[e]=t&255,this[e+1]=t>>>8,e+2};C.prototype.writeInt16BE=function(t,e,n){return t=+t,e=e>>>0,n||Lt(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=t&255,e+2};C.prototype.writeInt32LE=function(t,e,n){return t=+t,e=e>>>0,n||Lt(this,t,e,4,2147483647,-2147483648),this[e]=t&255,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4};C.prototype.writeInt32BE=function(t,e,n){return t=+t,e=e>>>0,n||Lt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t&255,e+4};C.prototype.writeBigInt64LE=Ln(function(t,e=0){return Kx(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});C.prototype.writeBigInt64BE=Ln(function(t,e=0){return Qx(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Jx(i,t,e,n,r,o){if(e+n>i.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function e1(i,t,e,n,r){return t=+t,e=e>>>0,r||Jx(i,t,e,4,34028234663852886e22,-34028234663852886e22),Zo.write(i,t,e,n,23,4),e+4}C.prototype.writeFloatLE=function(t,e,n){return e1(this,t,e,!0,n)};C.prototype.writeFloatBE=function(t,e,n){return e1(this,t,e,!1,n)};function t1(i,t,e,n,r){return t=+t,e=e>>>0,r||Jx(i,t,e,8,17976931348623157e292,-17976931348623157e292),Zo.write(i,t,e,n,52,8),e+8}C.prototype.writeDoubleLE=function(t,e,n){return t1(this,t,e,!0,n)};C.prototype.writeDoubleBE=function(t,e,n){return t1(this,t,e,!1,n)};C.prototype.copy=function(t,e,n,r){if(!C.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!r&&r!==0&&(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);let o=r-n;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),o};C.prototype.fill=function(t,e,n,r){if(typeof t=="string"){if(typeof e=="string"?(r=e,e=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!C.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(t.length===1){let a=t.charCodeAt(0);(r==="utf8"&&a<128||r==="latin1")&&(t=a)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e=e>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let o;if(typeof t=="number")for(o=e;o<n;++o)this[o]=t;else{let a=C.isBuffer(t)?t:C.from(t,r),s=a.length;if(s===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var Yo={};function Rf(i,t,e){Yo[i]=class extends e{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(r){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:r,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}Rf("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Rf("ERR_INVALID_ARG_TYPE",function(i,t){return`The "${i}" argument must be of type number. Received type ${typeof t}`},TypeError);Rf("ERR_OUT_OF_RANGE",function(i,t,e){let n=`The value of "${i}" is out of range.`,r=e;return Number.isInteger(e)&&Math.abs(e)>2**32?r=$x(String(e)):typeof e=="bigint"&&(r=String(e),(e>BigInt(2)**BigInt(32)||e<-(BigInt(2)**BigInt(32)))&&(r=$x(r)),r+="n"),n+=` It must be ${t}. Received ${r}`,n},RangeError);function $x(i){let t="",e=i.length,n=i[0]==="-"?1:0;for(;e>=n+4;e-=3)t=`_${i.slice(e-3,e)}${t}`;return`${i.slice(0,e)}${t}`}function wF(i,t,e){Ko(t,"offset"),(i[t]===void 0||i[t+e]===void 0)&&xs(t,i.length-(e+1))}function i1(i,t,e,n,r,o){if(i>e||i<t){let a=typeof t=="bigint"?"n":"",s;throw o>3?t===0||t===BigInt(0)?s=`>= 0${a} and < 2${a} ** ${(o+1)*8}${a}`:s=`>= -(2${a} ** ${(o+1)*8-1}${a}) and < 2 ** ${(o+1)*8-1}${a}`:s=`>= ${t}${a} and <= ${e}${a}`,new Yo.ERR_OUT_OF_RANGE("value",s,i)}wF(n,r,o)}function Ko(i,t){if(typeof i!="number")throw new Yo.ERR_INVALID_ARG_TYPE(t,"number",i)}function xs(i,t,e){throw Math.floor(i)!==i?(Ko(i,e),new Yo.ERR_OUT_OF_RANGE(e||"offset","an integer",i)):t<0?new Yo.ERR_BUFFER_OUT_OF_BOUNDS:new Yo.ERR_OUT_OF_RANGE(e||"offset",`>= ${e?1:0} and <= ${t}`,i)}var CF=/[^+/0-9A-Za-z-_]/g;function SF(i){if(i=i.split("=")[0],i=i.trim().replace(CF,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function Of(i,t){t=t||1/0;let e,n=i.length,r=null,o=[];for(let a=0;a<n;++a){if(e=i.charCodeAt(a),e>55295&&e<57344){if(!r){if(e>56319){(t-=3)>-1&&o.push(239,191,189);continue}else if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}r=e;continue}if(e<56320){(t-=3)>-1&&o.push(239,191,189),r=e;continue}e=(r-55296<<10|e-56320)+65536}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,e<128){if((t-=1)<0)break;o.push(e)}else if(e<2048){if((t-=2)<0)break;o.push(e>>6|192,e&63|128)}else if(e<65536){if((t-=3)<0)break;o.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((t-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return o}function MF(i){let t=[];for(let e=0;e<i.length;++e)t.push(i.charCodeAt(e)&255);return t}function EF(i,t){let e,n,r,o=[];for(let a=0;a<i.length&&!((t-=2)<0);++a)e=i.charCodeAt(a),n=e>>8,r=e%256,o.push(r),o.push(n);return o}function n1(i){return Tf.toByteArray(SF(i))}function Nd(i,t,e,n){let r;for(r=0;r<n&&!(r+e>=t.length||r>=i.length);++r)t[r+e]=i[r];return r}function Pi(i,t){return i instanceof t||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===t.name}function Ff(i){return i!==i}var kF=function(){let i="0123456789abcdef",t=new Array(256);for(let e=0;e<16;++e){let n=e*16;for(let r=0;r<16;++r)t[n+r]=i[e]+i[r]}return t}();function Ln(i){return typeof BigInt>"u"?TF:i}function TF(){throw new Error("BigInt not supported")}});var Re=S((fH,r1)=>{"use strict";var Nf=class extends Error{constructor(t){if(!Array.isArray(t))throw new TypeError(`Expected input to be an Array, got ${typeof t}`);let e="";for(let n=0;n<t.length;n++)e+=`    ${t[n].stack}
`;super(e),this.name="AggregateError",this.errors=t}};r1.exports={AggregateError:Nf,ArrayIsArray(i){return Array.isArray(i)},ArrayPrototypeIncludes(i,t){return i.includes(t)},ArrayPrototypeIndexOf(i,t){return i.indexOf(t)},ArrayPrototypeJoin(i,t){return i.join(t)},ArrayPrototypeMap(i,t){return i.map(t)},ArrayPrototypePop(i,t){return i.pop(t)},ArrayPrototypePush(i,t){return i.push(t)},ArrayPrototypeSlice(i,t,e){return i.slice(t,e)},Error,FunctionPrototypeCall(i,t,...e){return i.call(t,...e)},FunctionPrototypeSymbolHasInstance(i,t){return Function.prototype[Symbol.hasInstance].call(i,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(i,t){return Object.defineProperties(i,t)},ObjectDefineProperty(i,t,e){return Object.defineProperty(i,t,e)},ObjectGetOwnPropertyDescriptor(i,t){return Object.getOwnPropertyDescriptor(i,t)},ObjectKeys(i){return Object.keys(i)},ObjectSetPrototypeOf(i,t){return Object.setPrototypeOf(i,t)},Promise,PromisePrototypeCatch(i,t){return i.catch(t)},PromisePrototypeThen(i,t,e){return i.then(t,e)},PromiseReject(i){return Promise.reject(i)},PromiseResolve(i){return Promise.resolve(i)},ReflectApply:Reflect.apply,RegExpPrototypeTest(i,t){return i.test(t)},SafeSet:Set,String,StringPrototypeSlice(i,t,e){return i.slice(t,e)},StringPrototypeToLowerCase(i){return i.toLowerCase()},StringPrototypeToUpperCase(i){return i.toUpperCase()},StringPrototypeTrim(i){return i.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(i,t,e){return i.set(t,e)},Boolean,Uint8Array}});var Lf=S((gH,o1)=>{"use strict";o1.exports={format(i,...t){return i.replace(/%([sdifj])/g,function(...[e,n]){let r=t.shift();return n==="f"?r.toFixed(6):n==="j"?JSON.stringify(r):n==="s"&&typeof r=="object"?`${r.constructor!==Object?r.constructor.name:""} {}`.trim():r.toString()})},inspect(i){switch(typeof i){case"string":if(i.includes("'"))if(i.includes('"')){if(!i.includes("`")&&!i.includes("${"))return`\`${i}\``}else return`"${i}"`;return`'${i}'`;case"number":return isNaN(i)?"NaN":Object.is(i,-0)?String(i):i;case"bigint":return`${String(i)}n`;case"boolean":case"undefined":return String(i);case"object":return"{}"}}}});var ht=S((bH,l1)=>{"use strict";var{format:IF,inspect:Ld}=Lf(),{AggregateError:PF}=Re(),OF=globalThis.AggregateError||PF,DF=Symbol("kIsNodeError"),AF=["string","function","number","object","Function","Object","boolean","bigint","symbol"],RF=/^([A-Z][a-z0-9]*)+$/,FF="__node_internal_",Bd={};function Tr(i,t){if(!i)throw new Bd.ERR_INTERNAL_ASSERTION(t)}function a1(i){let t="",e=i.length,n=i[0]==="-"?1:0;for(;e>=n+4;e-=3)t=`_${i.slice(e-3,e)}${t}`;return`${i.slice(0,e)}${t}`}function NF(i,t,e){if(typeof t=="function")return Tr(t.length<=e.length,`Code: ${i}; The provided arguments length (${e.length}) does not match the required ones (${t.length}).`),t(...e);let n=(t.match(/%[dfijoOs]/g)||[]).length;return Tr(n===e.length,`Code: ${i}; The provided arguments length (${e.length}) does not match the required ones (${n}).`),e.length===0?t:IF(t,...e)}function lt(i,t,e){e||(e=Error);class n extends e{constructor(...o){super(NF(i,t,o))}toString(){return`${this.name} [${i}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:e.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${i}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=i,n.prototype[DF]=!0,Bd[i]=n}function s1(i){let t=FF+i.name;return Object.defineProperty(i,"name",{value:t}),i}function LF(i,t){if(i&&t&&i!==t){if(Array.isArray(t.errors))return t.errors.push(i),t;let e=new OF([t,i],t.message);return e.code=t.code,e}return i||t}var Bf=class extends Error{constructor(t="The operation was aborted",e=void 0){if(e!==void 0&&typeof e!="object")throw new Bd.ERR_INVALID_ARG_TYPE("options","Object",e);super(t,e),this.code="ABORT_ERR",this.name="AbortError"}};lt("ERR_ASSERTION","%s",Error);lt("ERR_INVALID_ARG_TYPE",(i,t,e)=>{Tr(typeof i=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";i.endsWith(" argument")?n+=`${i} `:n+=`"${i}" ${i.includes(".")?"property":"argument"} `,n+="must be ";let r=[],o=[],a=[];for(let l of t)Tr(typeof l=="string","All expected entries have to be of type string"),AF.includes(l)?r.push(l.toLowerCase()):RF.test(l)?o.push(l):(Tr(l!=="object",'The value "object" should be written as "Object"'),a.push(l));if(o.length>0){let l=r.indexOf("object");l!==-1&&(r.splice(r,l,1),o.push("Object"))}if(r.length>0){switch(r.length){case 1:n+=`of type ${r[0]}`;break;case 2:n+=`one of type ${r[0]} or ${r[1]}`;break;default:{let l=r.pop();n+=`one of type ${r.join(", ")}, or ${l}`}}(o.length>0||a.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();n+=`an instance of ${o.join(", ")}, or ${l}`}}a.length>0&&(n+=" or ")}switch(a.length){case 0:break;case 1:a[0].toLowerCase()!==a[0]&&(n+="an "),n+=`${a[0]}`;break;case 2:n+=`one of ${a[0]} or ${a[1]}`;break;default:{let l=a.pop();n+=`one of ${a.join(", ")}, or ${l}`}}if(e==null)n+=`. Received ${e}`;else if(typeof e=="function"&&e.name)n+=`. Received function ${e.name}`;else if(typeof e=="object"){var s;if((s=e.constructor)!==null&&s!==void 0&&s.name)n+=`. Received an instance of ${e.constructor.name}`;else{let l=Ld(e,{depth:-1});n+=`. Received ${l}`}}else{let l=Ld(e,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),n+=`. Received type ${typeof e} (${l})`}return n},TypeError);lt("ERR_INVALID_ARG_VALUE",(i,t,e="is invalid")=>{let n=Ld(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${i.includes(".")?"property":"argument"} '${i}' ${e}. Received ${n}`},TypeError);lt("ERR_INVALID_RETURN_VALUE",(i,t,e)=>{var n;let r=e!=null&&(n=e.constructor)!==null&&n!==void 0&&n.name?`instance of ${e.constructor.name}`:`type ${typeof e}`;return`Expected ${i} to be returned from the "${t}" function but got ${r}.`},TypeError);lt("ERR_MISSING_ARGS",(...i)=>{Tr(i.length>0,"At least one arg needs to be specified");let t,e=i.length;switch(i=(Array.isArray(i)?i:[i]).map(n=>`"${n}"`).join(" or "),e){case 1:t+=`The ${i[0]} argument`;break;case 2:t+=`The ${i[0]} and ${i[1]} arguments`;break;default:{let n=i.pop();t+=`The ${i.join(", ")}, and ${n} arguments`}break}return`${t} must be specified`},TypeError);lt("ERR_OUT_OF_RANGE",(i,t,e)=>{Tr(t,'Missing "range" argument');let n;if(Number.isInteger(e)&&Math.abs(e)>2**32)n=a1(String(e));else if(typeof e=="bigint"){n=String(e);let r=BigInt(2)**BigInt(32);(e>r||e<-r)&&(n=a1(n)),n+="n"}else n=Ld(e);return`The value of "${i}" is out of range. It must be ${t}. Received ${n}`},RangeError);lt("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);lt("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);lt("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);lt("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);lt("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);lt("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);lt("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);lt("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);lt("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);lt("ERR_STREAM_WRITE_AFTER_END","write after end",Error);lt("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);l1.exports={AbortError:Bf,aggregateTwoErrors:s1(LF),hideStackFrames:s1,codes:Bd}});var Jo=S((_H,Ud)=>{"use strict";var{AbortController:c1,AbortSignal:BF}=typeof self<"u"?self:typeof window<"u"?window:void 0;Ud.exports=c1;Ud.exports.AbortSignal=BF;Ud.exports.default=c1});var ws=S((vH,Uf)=>{"use strict";var ea=typeof Reflect=="object"?Reflect:null,d1=ea&&typeof ea.apply=="function"?ea.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)},zd;ea&&typeof ea.ownKeys=="function"?zd=ea.ownKeys:Object.getOwnPropertySymbols?zd=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:zd=function(t){return Object.getOwnPropertyNames(t)};function UF(i){console&&console.warn&&console.warn(i)}var m1=Number.isNaN||function(t){return t!==t};function Ee(){Ee.init.call(this)}Uf.exports=Ee;Uf.exports.once=qF;Ee.EventEmitter=Ee;Ee.prototype._events=void 0;Ee.prototype._eventsCount=0;Ee.prototype._maxListeners=void 0;var u1=10;function jd(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(Ee,"defaultMaxListeners",{enumerable:!0,get:function(){return u1},set:function(i){if(typeof i!="number"||i<0||m1(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");u1=i}});Ee.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ee.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||m1(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function p1(i){return i._maxListeners===void 0?Ee.defaultMaxListeners:i._maxListeners}Ee.prototype.getMaxListeners=function(){return p1(this)};Ee.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r=t==="error",o=this._events;if(o!==void 0)r=r&&o.error===void 0;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=o[t];if(l===void 0)return!1;if(typeof l=="function")d1(l,this,e);else for(var u=l.length,m=_1(l,u),n=0;n<u;++n)d1(m[n],this,e);return!0};function h1(i,t,e,n){var r,o,a;if(jd(e),o=i._events,o===void 0?(o=i._events=Object.create(null),i._eventsCount=0):(o.newListener!==void 0&&(i.emit("newListener",t,e.listener?e.listener:e),o=i._events),a=o[t]),a===void 0)a=o[t]=e,++i._eventsCount;else if(typeof a=="function"?a=o[t]=n?[e,a]:[a,e]:n?a.unshift(e):a.push(e),r=p1(i),r>0&&a.length>r&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=i,s.type=t,s.count=a.length,UF(s)}return i}Ee.prototype.addListener=function(t,e){return h1(this,t,e,!1)};Ee.prototype.on=Ee.prototype.addListener;Ee.prototype.prependListener=function(t,e){return h1(this,t,e,!0)};function zF(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f1(i,t,e){var n={fired:!1,wrapFn:void 0,target:i,type:t,listener:e},r=zF.bind(n);return r.listener=e,n.wrapFn=r,r}Ee.prototype.once=function(t,e){return jd(e),this.on(t,f1(this,t,e)),this};Ee.prototype.prependOnceListener=function(t,e){return jd(e),this.prependListener(t,f1(this,t,e)),this};Ee.prototype.removeListener=function(t,e){var n,r,o,a,s;if(jd(e),r=this._events,r===void 0)return this;if(n=r[t],n===void 0)return this;if(n===e||n.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){s=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():jF(n,o),n.length===1&&(r[t]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",t,s||e)}return this};Ee.prototype.off=Ee.prototype.removeListener;Ee.prototype.removeAllListeners=function(t){var e,n,r;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var o=Object.keys(n),a;for(r=0;r<o.length;++r)a=o[r],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=n[t],typeof e=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this};function g1(i,t,e){var n=i._events;if(n===void 0)return[];var r=n[t];return r===void 0?[]:typeof r=="function"?e?[r.listener||r]:[r]:e?VF(r):_1(r,r.length)}Ee.prototype.listeners=function(t){return g1(this,t,!0)};Ee.prototype.rawListeners=function(t){return g1(this,t,!1)};Ee.listenerCount=function(i,t){return typeof i.listenerCount=="function"?i.listenerCount(t):b1.call(i,t)};Ee.prototype.listenerCount=b1;function b1(i){var t=this._events;if(t!==void 0){var e=t[i];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}Ee.prototype.eventNames=function(){return this._eventsCount>0?zd(this._events):[]};function _1(i,t){for(var e=new Array(t),n=0;n<t;++n)e[n]=i[n];return e}function jF(i,t){for(;t+1<i.length;t++)i[t]=i[t+1];i.pop()}function VF(i){for(var t=new Array(i.length),e=0;e<t.length;++e)t[e]=i[e].listener||i[e];return t}function qF(i,t){return new Promise(function(e,n){function r(a){i.removeListener(t,o),n(a)}function o(){typeof i.removeListener=="function"&&i.removeListener("error",r),e([].slice.call(arguments))}v1(i,t,o,{once:!0}),t!=="error"&&HF(i,r,{once:!0})})}function HF(i,t,e){typeof i.on=="function"&&v1(i,"error",t,e)}function v1(i,t,e,n){if(typeof i.on=="function")n.once?i.once(t,e):i.on(t,e);else if(typeof i.addEventListener=="function")i.addEventListener(t,function r(o){n.once&&i.removeEventListener(t,r),e(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}});var St=S((yH,jf)=>{"use strict";var $F=tn(),{format:WF,inspect:GF}=Lf(),{codes:{ERR_INVALID_ARG_TYPE:zf}}=ht(),{kResistStopPropagation:XF,AggregateError:YF,SymbolDispose:ZF}=Re(),KF=globalThis.AbortSignal||Jo().AbortSignal,QF=globalThis.AbortController||Jo().AbortController,JF=Object.getPrototypeOf(function(){return g(this,null,function*(){})}).constructor,y1=globalThis.Blob||$F.Blob,e3=typeof y1<"u"?function(t){return t instanceof y1}:function(t){return!1},x1=(i,t)=>{if(i!==void 0&&(i===null||typeof i!="object"||!("aborted"in i)))throw new zf(t,"AbortSignal",i)},t3=(i,t)=>{if(typeof i!="function")throw new zf(t,"Function",i)};jf.exports={AggregateError:YF,kEmptyObject:Object.freeze({}),once(i){let t=!1;return function(...e){t||(t=!0,i.apply(this,e))}},createDeferredPromise:function(){let i,t;return{promise:new Promise((n,r)=>{i=n,t=r}),resolve:i,reject:t}},promisify(i){return new Promise((t,e)=>{i((n,...r)=>n?e(n):t(...r))})},debuglog(){return function(){}},format:WF,inspect:GF,types:{isAsyncFunction(i){return i instanceof JF},isArrayBufferView(i){return ArrayBuffer.isView(i)}},isBlob:e3,deprecate(i,t){return i},addAbortListener:ws().addAbortListener||function(t,e){if(t===void 0)throw new zf("signal","AbortSignal",t);x1(t,"signal"),t3(e,"listener");let n;return t.aborted?queueMicrotask(()=>e()):(t.addEventListener("abort",e,{__proto__:null,once:!0,[XF]:!0}),n=()=>{t.removeEventListener("abort",e)}),{__proto__:null,[ZF](){var r;(r=n)===null||r===void 0||r()}}},AbortSignalAny:KF.any||function(t){if(t.length===1)return t[0];let e=new QF,n=()=>e.abort();return t.forEach(r=>{x1(r,"signals"),r.addEventListener("abort",n,{once:!0})}),e.signal.addEventListener("abort",()=>{t.forEach(r=>r.removeEventListener("abort",n))},{once:!0}),e.signal}};jf.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var ia=S((wH,O1)=>{"use strict";var{ArrayIsArray:qf,ArrayPrototypeIncludes:M1,ArrayPrototypeJoin:E1,ArrayPrototypeMap:i3,NumberIsInteger:Hf,NumberIsNaN:n3,NumberMAX_SAFE_INTEGER:r3,NumberMIN_SAFE_INTEGER:o3,NumberParseInt:a3,ObjectPrototypeHasOwnProperty:s3,RegExpPrototypeExec:k1,String:l3,StringPrototypeToUpperCase:c3,StringPrototypeTrim:d3}=Re(),{hideStackFrames:ai,codes:{ERR_SOCKET_BAD_PORT:u3,ERR_INVALID_ARG_TYPE:ft,ERR_INVALID_ARG_VALUE:ta,ERR_OUT_OF_RANGE:Ir,ERR_UNKNOWN_SIGNAL:w1}}=ht(),{normalizeEncoding:m3}=St(),{isAsyncFunction:p3,isArrayBufferView:h3}=St().types,C1={};function f3(i){return i===(i|0)}function g3(i){return i===i>>>0}var b3=/^[0-7]+$/,_3="must be a 32-bit unsigned integer or an octal string";function v3(i,t,e){if(typeof i>"u"&&(i=e),typeof i=="string"){if(k1(b3,i)===null)throw new ta(t,i,_3);i=a3(i,8)}return T1(i,t),i}var y3=ai((i,t,e=o3,n=r3)=>{if(typeof i!="number")throw new ft(t,"number",i);if(!Hf(i))throw new Ir(t,"an integer",i);if(i<e||i>n)throw new Ir(t,`>= ${e} && <= ${n}`,i)}),x3=ai((i,t,e=-2147483648,n=2147483647)=>{if(typeof i!="number")throw new ft(t,"number",i);if(!Hf(i))throw new Ir(t,"an integer",i);if(i<e||i>n)throw new Ir(t,`>= ${e} && <= ${n}`,i)}),T1=ai((i,t,e=!1)=>{if(typeof i!="number")throw new ft(t,"number",i);if(!Hf(i))throw new Ir(t,"an integer",i);let n=e?1:0,r=4294967295;if(i<n||i>r)throw new Ir(t,`>= ${n} && <= ${r}`,i)});function $f(i,t){if(typeof i!="string")throw new ft(t,"string",i)}function w3(i,t,e=void 0,n){if(typeof i!="number")throw new ft(t,"number",i);if(e!=null&&i<e||n!=null&&i>n||(e!=null||n!=null)&&n3(i))throw new Ir(t,`${e!=null?`>= ${e}`:""}${e!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,i)}var C3=ai((i,t,e)=>{if(!M1(e,i)){let r="must be one of: "+E1(i3(e,o=>typeof o=="string"?`'${o}'`:l3(o)),", ");throw new ta(t,i,r)}});function I1(i,t){if(typeof i!="boolean")throw new ft(t,"boolean",i)}function Vf(i,t,e){return i==null||!s3(i,t)?e:i[t]}var S3=ai((i,t,e=null)=>{let n=Vf(e,"allowArray",!1),r=Vf(e,"allowFunction",!1);if(!Vf(e,"nullable",!1)&&i===null||!n&&qf(i)||typeof i!="object"&&(!r||typeof i!="function"))throw new ft(t,"Object",i)}),M3=ai((i,t)=>{if(i!=null&&typeof i!="object"&&typeof i!="function")throw new ft(t,"a dictionary",i)}),Vd=ai((i,t,e=0)=>{if(!qf(i))throw new ft(t,"Array",i);if(i.length<e){let n=`must be longer than ${e}`;throw new ta(t,i,n)}});function E3(i,t){Vd(i,t);for(let e=0;e<i.length;e++)$f(i[e],`${t}[${e}]`)}function k3(i,t){Vd(i,t);for(let e=0;e<i.length;e++)I1(i[e],`${t}[${e}]`)}function T3(i,t){Vd(i,t);for(let e=0;e<i.length;e++){let n=i[e],r=`${t}[${e}]`;if(n==null)throw new ft(r,"AbortSignal",n);P1(n,r)}}function I3(i,t="signal"){if($f(i,t),C1[i]===void 0)throw C1[c3(i)]!==void 0?new w1(i+" (signals must use all capital letters)"):new w1(i)}var P3=ai((i,t="buffer")=>{if(!h3(i))throw new ft(t,["Buffer","TypedArray","DataView"],i)});function O3(i,t){let e=m3(t),n=i.length;if(e==="hex"&&n%2!==0)throw new ta("encoding",t,`is invalid for data of length ${n}`)}function D3(i,t="Port",e=!0){if(typeof i!="number"&&typeof i!="string"||typeof i=="string"&&d3(i).length===0||+i!==+i>>>0||i>65535||i===0&&!e)throw new u3(t,i,e);return i|0}var P1=ai((i,t)=>{if(i!==void 0&&(i===null||typeof i!="object"||!("aborted"in i)))throw new ft(t,"AbortSignal",i)}),A3=ai((i,t)=>{if(typeof i!="function")throw new ft(t,"Function",i)}),R3=ai((i,t)=>{if(typeof i!="function"||p3(i))throw new ft(t,"Function",i)}),F3=ai((i,t)=>{if(i!==void 0)throw new ft(t,"undefined",i)});function N3(i,t,e){if(!M1(e,i))throw new ft(t,`('${E1(e,"|")}')`,i)}var L3=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function S1(i,t){if(typeof i>"u"||!k1(L3,i))throw new ta(t,i,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function B3(i){if(typeof i=="string")return S1(i,"hints"),i;if(qf(i)){let t=i.length,e="";if(t===0)return e;for(let n=0;n<t;n++){let r=i[n];S1(r,"hints"),e+=r,n!==t-1&&(e+=", ")}return e}throw new ta("hints",i,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}O1.exports={isInt32:f3,isUint32:g3,parseFileMode:v3,validateArray:Vd,validateStringArray:E3,validateBooleanArray:k3,validateAbortSignalArray:T3,validateBoolean:I1,validateBuffer:P3,validateDictionary:M3,validateEncoding:O3,validateFunction:A3,validateInt32:x3,validateInteger:y3,validateNumber:w3,validateObject:S3,validateOneOf:C3,validatePlainFunction:R3,validatePort:D3,validateSignalName:I3,validateString:$f,validateUint32:T1,validateUndefined:F3,validateUnion:N3,validateAbortSignal:P1,validateLinkHeaderValue:B3}});var Bn=S((CH,F1)=>{"use strict";var je=F1.exports={},Oi,Di;function Wf(){throw new Error("setTimeout has not been defined")}function Gf(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Oi=setTimeout:Oi=Wf}catch{Oi=Wf}try{typeof clearTimeout=="function"?Di=clearTimeout:Di=Gf}catch{Di=Gf}})();function D1(i){if(Oi===setTimeout)return setTimeout(i,0);if((Oi===Wf||!Oi)&&setTimeout)return Oi=setTimeout,setTimeout(i,0);try{return Oi(i,0)}catch{try{return Oi.call(null,i,0)}catch{return Oi.call(this,i,0)}}}function U3(i){if(Di===clearTimeout)return clearTimeout(i);if((Di===Gf||!Di)&&clearTimeout)return Di=clearTimeout,clearTimeout(i);try{return Di(i)}catch{try{return Di.call(null,i)}catch{return Di.call(this,i)}}}var nn=[],na=!1,Pr,qd=-1;function z3(){!na||!Pr||(na=!1,Pr.length?nn=Pr.concat(nn):qd=-1,nn.length&&A1())}function A1(){if(!na){var i=D1(z3);na=!0;for(var t=nn.length;t;){for(Pr=nn,nn=[];++qd<t;)Pr&&Pr[qd].run();qd=-1,t=nn.length}Pr=null,na=!1,U3(i)}}je.nextTick=function(i){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];nn.push(new R1(i,t)),nn.length===1&&!na&&D1(A1)};function R1(i,t){this.fun=i,this.array=t}R1.prototype.run=function(){this.fun.apply(null,this.array)};je.title="browser";je.browser=!0;je.env={};je.argv=[];je.version="";je.versions={};function rn(){}je.on=rn;je.addListener=rn;je.once=rn;je.off=rn;je.removeListener=rn;je.removeAllListeners=rn;je.emit=rn;je.prependListener=rn;je.prependOnceListener=rn;je.listeners=function(i){return[]};je.binding=function(i){throw new Error("process.binding is not supported")};je.cwd=function(){return"/"};je.chdir=function(i){throw new Error("process.chdir is not supported")};je.umask=function(){return 0}});var Ri=S((SH,Z1)=>{"use strict";var{SymbolAsyncIterator:N1,SymbolIterator:L1,SymbolFor:Or}=Re(),B1=Or("nodejs.stream.destroyed"),U1=Or("nodejs.stream.errored"),Xf=Or("nodejs.stream.readable"),Yf=Or("nodejs.stream.writable"),z1=Or("nodejs.stream.disturbed"),j3=Or("nodejs.webstream.isClosedPromise"),V3=Or("nodejs.webstream.controllerErrorFunction");function Hd(i,t=!1){var e;return!!(i&&typeof i.pipe=="function"&&typeof i.on=="function"&&(!t||typeof i.pause=="function"&&typeof i.resume=="function")&&(!i._writableState||((e=i._readableState)===null||e===void 0?void 0:e.readable)!==!1)&&(!i._writableState||i._readableState))}function $d(i){var t;return!!(i&&typeof i.write=="function"&&typeof i.on=="function"&&(!i._readableState||((t=i._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function q3(i){return!!(i&&typeof i.pipe=="function"&&i._readableState&&typeof i.on=="function"&&typeof i.write=="function")}function Ai(i){return i&&(i._readableState||i._writableState||typeof i.write=="function"&&typeof i.on=="function"||typeof i.pipe=="function"&&typeof i.on=="function")}function j1(i){return!!(i&&!Ai(i)&&typeof i.pipeThrough=="function"&&typeof i.getReader=="function"&&typeof i.cancel=="function")}function V1(i){return!!(i&&!Ai(i)&&typeof i.getWriter=="function"&&typeof i.abort=="function")}function q1(i){return!!(i&&!Ai(i)&&typeof i.readable=="object"&&typeof i.writable=="object")}function H3(i){return j1(i)||V1(i)||q1(i)}function $3(i,t){return i==null?!1:t===!0?typeof i[N1]=="function":t===!1?typeof i[L1]=="function":typeof i[N1]=="function"||typeof i[L1]=="function"}function Wd(i){if(!Ai(i))return null;let t=i._writableState,e=i._readableState,n=t||e;return!!(i.destroyed||i[B1]||n!=null&&n.destroyed)}function H1(i){if(!$d(i))return null;if(i.writableEnded===!0)return!0;let t=i._writableState;return t!=null&&t.errored?!1:typeof t?.ended!="boolean"?null:t.ended}function W3(i,t){if(!$d(i))return null;if(i.writableFinished===!0)return!0;let e=i._writableState;return e!=null&&e.errored?!1:typeof e?.finished!="boolean"?null:!!(e.finished||t===!1&&e.ended===!0&&e.length===0)}function G3(i){if(!Hd(i))return null;if(i.readableEnded===!0)return!0;let t=i._readableState;return!t||t.errored?!1:typeof t?.ended!="boolean"?null:t.ended}function $1(i,t){if(!Hd(i))return null;let e=i._readableState;return e!=null&&e.errored?!1:typeof e?.endEmitted!="boolean"?null:!!(e.endEmitted||t===!1&&e.ended===!0&&e.length===0)}function W1(i){return i&&i[Xf]!=null?i[Xf]:typeof i?.readable!="boolean"?null:Wd(i)?!1:Hd(i)&&i.readable&&!$1(i)}function G1(i){return i&&i[Yf]!=null?i[Yf]:typeof i?.writable!="boolean"?null:Wd(i)?!1:$d(i)&&i.writable&&!H1(i)}function X3(i,t){return Ai(i)?Wd(i)?!0:!(t?.readable!==!1&&W1(i)||t?.writable!==!1&&G1(i)):null}function Y3(i){var t,e;return Ai(i)?i.writableErrored?i.writableErrored:(t=(e=i._writableState)===null||e===void 0?void 0:e.errored)!==null&&t!==void 0?t:null:null}function Z3(i){var t,e;return Ai(i)?i.readableErrored?i.readableErrored:(t=(e=i._readableState)===null||e===void 0?void 0:e.errored)!==null&&t!==void 0?t:null:null}function K3(i){if(!Ai(i))return null;if(typeof i.closed=="boolean")return i.closed;let t=i._writableState,e=i._readableState;return typeof t?.closed=="boolean"||typeof e?.closed=="boolean"?t?.closed||e?.closed:typeof i._closed=="boolean"&&X1(i)?i._closed:null}function X1(i){return typeof i._closed=="boolean"&&typeof i._defaultKeepAlive=="boolean"&&typeof i._removedConnection=="boolean"&&typeof i._removedContLen=="boolean"}function Y1(i){return typeof i._sent100=="boolean"&&X1(i)}function Q3(i){var t;return typeof i._consuming=="boolean"&&typeof i._dumped=="boolean"&&((t=i.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function J3(i){if(!Ai(i))return null;let t=i._writableState,e=i._readableState,n=t||e;return!n&&Y1(i)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function e4(i){var t;return!!(i&&((t=i[z1])!==null&&t!==void 0?t:i.readableDidRead||i.readableAborted))}function t4(i){var t,e,n,r,o,a,s,l,u,m;return!!(i&&((t=(e=(n=(r=(o=(a=i[U1])!==null&&a!==void 0?a:i.readableErrored)!==null&&o!==void 0?o:i.writableErrored)!==null&&r!==void 0?r:(s=i._readableState)===null||s===void 0?void 0:s.errorEmitted)!==null&&n!==void 0?n:(l=i._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&e!==void 0?e:(u=i._readableState)===null||u===void 0?void 0:u.errored)!==null&&t!==void 0?t:!((m=i._writableState)===null||m===void 0)&&m.errored))}Z1.exports={isDestroyed:Wd,kIsDestroyed:B1,isDisturbed:e4,kIsDisturbed:z1,isErrored:t4,kIsErrored:U1,isReadable:W1,kIsReadable:Xf,kIsClosedPromise:j3,kControllerErrorFunction:V3,kIsWritable:Yf,isClosed:K3,isDuplexNodeStream:q3,isFinished:X3,isIterable:$3,isReadableNodeStream:Hd,isReadableStream:j1,isReadableEnded:G3,isReadableFinished:$1,isReadableErrored:Z3,isNodeStream:Ai,isWebStream:H3,isWritable:G1,isWritableNodeStream:$d,isWritableStream:V1,isWritableEnded:H1,isWritableFinished:W3,isWritableErrored:Y3,isServerRequest:Q3,isServerResponse:Y1,willEmitClose:J3,isTransformStream:q1}});var on=S((MH,eg)=>{"use strict";var Un=Bn(),{AbortError:ow,codes:i4}=ht(),{ERR_INVALID_ARG_TYPE:n4,ERR_STREAM_PREMATURE_CLOSE:K1}=i4,{kEmptyObject:Kf,once:Qf}=St(),{validateAbortSignal:r4,validateFunction:o4,validateObject:a4,validateBoolean:s4}=ia(),{Promise:l4,PromisePrototypeThen:c4,SymbolDispose:aw}=Re(),{isClosed:d4,isReadable:Q1,isReadableNodeStream:Zf,isReadableStream:u4,isReadableFinished:J1,isReadableErrored:ew,isWritable:tw,isWritableNodeStream:iw,isWritableStream:m4,isWritableFinished:nw,isWritableErrored:rw,isNodeStream:p4,willEmitClose:h4,kIsClosedPromise:f4}=Ri(),ra;function g4(i){return i.setHeader&&typeof i.abort=="function"}var Jf=()=>{};function sw(i,t,e){var n,r;if(arguments.length===2?(e=t,t=Kf):t==null?t=Kf:a4(t,"options"),o4(e,"callback"),r4(t.signal,"options.signal"),e=Qf(e),u4(i)||m4(i))return b4(i,t,e);if(!p4(i))throw new n4("stream",["ReadableStream","WritableStream","Stream"],i);let o=(n=t.readable)!==null&&n!==void 0?n:Zf(i),a=(r=t.writable)!==null&&r!==void 0?r:iw(i),s=i._writableState,l=i._readableState,u=()=>{i.writable||y()},m=h4(i)&&Zf(i)===o&&iw(i)===a,p=nw(i,!1),y=()=>{p=!0,i.destroyed&&(m=!1),!(m&&(!i.readable||o))&&(!o||v)&&e.call(i)},v=J1(i,!1),P=()=>{v=!0,i.destroyed&&(m=!1),!(m&&(!i.writable||a))&&(!a||p)&&e.call(i)},b=fe=>{e.call(i,fe)},x=d4(i),D=()=>{x=!0;let fe=rw(i)||ew(i);if(fe&&typeof fe!="boolean")return e.call(i,fe);if(o&&!v&&Zf(i,!0)&&!J1(i,!1))return e.call(i,new K1);if(a&&!p&&!nw(i,!1))return e.call(i,new K1);e.call(i)},W=()=>{x=!0;let fe=rw(i)||ew(i);if(fe&&typeof fe!="boolean")return e.call(i,fe);e.call(i)},Y=()=>{i.req.on("finish",y)};g4(i)?(i.on("complete",y),m||i.on("abort",D),i.req?Y():i.on("request",Y)):a&&!s&&(i.on("end",u),i.on("close",u)),!m&&typeof i.aborted=="boolean"&&i.on("aborted",D),i.on("end",P),i.on("finish",y),t.error!==!1&&i.on("error",b),i.on("close",D),x?Un.nextTick(D):s!=null&&s.errorEmitted||l!=null&&l.errorEmitted?m||Un.nextTick(W):(!o&&(!m||Q1(i))&&(p||tw(i)===!1)||!a&&(!m||tw(i))&&(v||Q1(i)===!1)||l&&i.req&&i.aborted)&&Un.nextTick(W);let Z=()=>{e=Jf,i.removeListener("aborted",D),i.removeListener("complete",y),i.removeListener("abort",D),i.removeListener("request",Y),i.req&&i.req.removeListener("finish",y),i.removeListener("end",u),i.removeListener("close",u),i.removeListener("finish",y),i.removeListener("end",P),i.removeListener("error",b),i.removeListener("close",D)};if(t.signal&&!x){let fe=()=>{let He=e;Z(),He.call(i,new ow(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)Un.nextTick(fe);else{ra=ra||St().addAbortListener;let He=ra(t.signal,fe),Mt=e;e=Qf((...Ui)=>{He[aw](),Mt.apply(i,Ui)})}}return Z}function b4(i,t,e){let n=!1,r=Jf;if(t.signal)if(r=()=>{n=!0,e.call(i,new ow(void 0,{cause:t.signal.reason}))},t.signal.aborted)Un.nextTick(r);else{ra=ra||St().addAbortListener;let a=ra(t.signal,r),s=e;e=Qf((...l)=>{a[aw](),s.apply(i,l)})}let o=(...a)=>{n||Un.nextTick(()=>e.apply(i,a))};return c4(i[f4].promise,o,o),Jf}function _4(i,t){var e;let n=!1;return t===null&&(t=Kf),(e=t)!==null&&e!==void 0&&e.cleanup&&(s4(t.cleanup,"cleanup"),n=t.cleanup),new l4((r,o)=>{let a=sw(i,t,s=>{n&&a(),s?o(s):r()})})}eg.exports=sw;eg.exports.finished=_4});var Dr=S((EH,fw)=>{"use strict";var Fi=Bn(),{aggregateTwoErrors:v4,codes:{ERR_MULTIPLE_CALLBACK:y4},AbortError:x4}=ht(),{Symbol:dw}=Re(),{kIsDestroyed:w4,isDestroyed:C4,isFinished:S4,isServerRequest:M4}=Ri(),uw=dw("kDestroy"),tg=dw("kConstruct");function mw(i,t,e){i&&(i.stack,t&&!t.errored&&(t.errored=i),e&&!e.errored&&(e.errored=i))}function E4(i,t){let e=this._readableState,n=this._writableState,r=n||e;return n!=null&&n.destroyed||e!=null&&e.destroyed?(typeof t=="function"&&t(),this):(mw(i,n,e),n&&(n.destroyed=!0),e&&(e.destroyed=!0),r.constructed?lw(this,i,t):this.once(uw,function(o){lw(this,v4(o,i),t)}),this)}function lw(i,t,e){let n=!1;function r(o){if(n)return;n=!0;let a=i._readableState,s=i._writableState;mw(o,s,a),s&&(s.closed=!0),a&&(a.closed=!0),typeof e=="function"&&e(o),o?Fi.nextTick(k4,i,o):Fi.nextTick(pw,i)}try{i._destroy(t||null,r)}catch(o){r(o)}}function k4(i,t){ig(i,t),pw(i)}function pw(i){let t=i._readableState,e=i._writableState;e&&(e.closeEmitted=!0),t&&(t.closeEmitted=!0),(e!=null&&e.emitClose||t!=null&&t.emitClose)&&i.emit("close")}function ig(i,t){let e=i._readableState,n=i._writableState;n!=null&&n.errorEmitted||e!=null&&e.errorEmitted||(n&&(n.errorEmitted=!0),e&&(e.errorEmitted=!0),i.emit("error",t))}function T4(){let i=this._readableState,t=this._writableState;i&&(i.constructed=!0,i.closed=!1,i.closeEmitted=!1,i.destroyed=!1,i.errored=null,i.errorEmitted=!1,i.reading=!1,i.ended=i.readable===!1,i.endEmitted=i.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function ng(i,t,e){let n=i._readableState,r=i._writableState;if(r!=null&&r.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||r!=null&&r.autoDestroy?i.destroy(t):t&&(t.stack,r&&!r.errored&&(r.errored=t),n&&!n.errored&&(n.errored=t),e?Fi.nextTick(ig,i,t):ig(i,t))}function I4(i,t){if(typeof i._construct!="function")return;let e=i._readableState,n=i._writableState;e&&(e.constructed=!1),n&&(n.constructed=!1),i.once(tg,t),!(i.listenerCount(tg)>1)&&Fi.nextTick(P4,i)}function P4(i){let t=!1;function e(n){if(t){ng(i,n??new y4);return}t=!0;let r=i._readableState,o=i._writableState,a=o||r;r&&(r.constructed=!0),o&&(o.constructed=!0),a.destroyed?i.emit(uw,n):n?ng(i,n,!0):Fi.nextTick(O4,i)}try{i._construct(n=>{Fi.nextTick(e,n)})}catch(n){Fi.nextTick(e,n)}}function O4(i){i.emit(tg)}function cw(i){return i?.setHeader&&typeof i.abort=="function"}function hw(i){i.emit("close")}function D4(i,t){i.emit("error",t),Fi.nextTick(hw,i)}function A4(i,t){!i||C4(i)||(!t&&!S4(i)&&(t=new x4),M4(i)?(i.socket=null,i.destroy(t)):cw(i)?i.abort():cw(i.req)?i.req.abort():typeof i.destroy=="function"?i.destroy(t):typeof i.close=="function"?i.close():t?Fi.nextTick(D4,i,t):Fi.nextTick(hw,i),i.destroyed||(i[w4]=!0))}fw.exports={construct:I4,destroyer:A4,destroy:E4,undestroy:T4,errorOrDestroy:ng}});var Yd=S((kH,bw)=>{"use strict";var{ArrayIsArray:R4,ObjectSetPrototypeOf:gw}=Re(),{EventEmitter:Gd}=ws();function Xd(i){Gd.call(this,i)}gw(Xd.prototype,Gd.prototype);gw(Xd,Gd);Xd.prototype.pipe=function(i,t){let e=this;function n(m){i.writable&&i.write(m)===!1&&e.pause&&e.pause()}e.on("data",n);function r(){e.readable&&e.resume&&e.resume()}i.on("drain",r),!i._isStdio&&(!t||t.end!==!1)&&(e.on("end",a),e.on("close",s));let o=!1;function a(){o||(o=!0,i.end())}function s(){o||(o=!0,typeof i.destroy=="function"&&i.destroy())}function l(m){u(),Gd.listenerCount(this,"error")===0&&this.emit("error",m)}rg(e,"error",l),rg(i,"error",l);function u(){e.removeListener("data",n),i.removeListener("drain",r),e.removeListener("end",a),e.removeListener("close",s),e.removeListener("error",l),i.removeListener("error",l),e.removeListener("end",u),e.removeListener("close",u),i.removeListener("close",u)}return e.on("end",u),e.on("close",u),i.on("close",u),i.emit("pipe",e),i};function rg(i,t,e){if(typeof i.prependListener=="function")return i.prependListener(t,e);!i._events||!i._events[t]?i.on(t,e):R4(i._events[t])?i._events[t].unshift(e):i._events[t]=[e,i._events[t]]}bw.exports={Stream:Xd,prependListener:rg}});var Cs=S((TH,Zd)=>{"use strict";var{SymbolDispose:F4}=Re(),{AbortError:_w,codes:N4}=ht(),{isNodeStream:vw,isWebStream:L4,kControllerErrorFunction:B4}=Ri(),U4=on(),{ERR_INVALID_ARG_TYPE:yw}=N4,og,z4=(i,t)=>{if(typeof i!="object"||!("aborted"in i))throw new yw(t,"AbortSignal",i)};Zd.exports.addAbortSignal=function(t,e){if(z4(t,"signal"),!vw(e)&&!L4(e))throw new yw("stream",["ReadableStream","WritableStream","Stream"],e);return Zd.exports.addAbortSignalNoValidate(t,e)};Zd.exports.addAbortSignalNoValidate=function(i,t){if(typeof i!="object"||!("aborted"in i))return t;let e=vw(t)?()=>{t.destroy(new _w(void 0,{cause:i.reason}))}:()=>{t[B4](new _w(void 0,{cause:i.reason}))};if(i.aborted)e();else{og=og||St().addAbortListener;let n=og(i,e);U4(t,n[F4])}return t}});var Cw=S((PH,ww)=>{"use strict";var{StringPrototypeSlice:xw,SymbolIterator:j4,TypedArrayPrototypeSet:Kd,Uint8Array:V4}=Re(),{Buffer:ag}=tn(),{inspect:q4}=St();ww.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){let e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}unshift(t){let e={data:t,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length}shift(){if(this.length===0)return;let t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let e=this.head,n=""+e.data;for(;(e=e.next)!==null;)n+=t+e.data;return n}concat(t){if(this.length===0)return ag.alloc(0);let e=ag.allocUnsafe(t>>>0),n=this.head,r=0;for(;n;)Kd(e,n.data,r),r+=n.data.length,n=n.next;return e}consume(t,e){let n=this.head.data;if(t<n.length){let r=n.slice(0,t);return this.head.data=n.slice(t),r}return t===n.length?this.shift():e?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[j4](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let e="",n=this.head,r=0;do{let o=n.data;if(t>o.length)e+=o,t-=o.length;else{t===o.length?(e+=o,++r,n.next?this.head=n.next:this.head=this.tail=null):(e+=xw(o,0,t),this.head=n,n.data=xw(o,t));break}++r}while((n=n.next)!==null);return this.length-=r,e}_getBuffer(t){let e=ag.allocUnsafe(t),n=t,r=this.head,o=0;do{let a=r.data;if(t>a.length)Kd(e,a,n-t),t-=a.length;else{t===a.length?(Kd(e,a,n-t),++o,r.next?this.head=r.next:this.head=this.tail=null):(Kd(e,new V4(a.buffer,a.byteOffset,t),n-t),this.head=r,r.data=a.slice(t));break}++o}while((r=r.next)!==null);return this.length-=o,e}[Symbol.for("nodejs.util.inspect.custom")](t,e){return q4(this,_e(O({},e),{depth:0,customInspect:!1}))}}});var Ss=S((DH,kw)=>{"use strict";var{MathFloor:H4,NumberIsInteger:$4}=Re(),{validateInteger:W4}=ia(),{ERR_INVALID_ARG_VALUE:G4}=ht().codes,Sw=16*1024,Mw=16;function X4(i,t,e){return i.highWaterMark!=null?i.highWaterMark:t?i[e]:null}function Ew(i){return i?Mw:Sw}function Y4(i,t){W4(t,"value",0),i?Mw=t:Sw=t}function Z4(i,t,e,n){let r=X4(t,n,e);if(r!=null){if(!$4(r)||r<0){let o=n?`options.${e}`:"options.highWaterMark";throw new G4(o,r)}return H4(r)}return Ew(i.objectMode)}kw.exports={getHighWaterMark:Z4,getDefaultHighWaterMark:Ew,setDefaultHighWaterMark:Y4}});var Pw=S((sg,Iw)=>{"use strict";var Qd=tn(),Ni=Qd.Buffer;function Tw(i,t){for(var e in i)t[e]=i[e]}Ni.from&&Ni.alloc&&Ni.allocUnsafe&&Ni.allocUnsafeSlow?Iw.exports=Qd:(Tw(Qd,sg),sg.Buffer=Ar);function Ar(i,t,e){return Ni(i,t,e)}Ar.prototype=Object.create(Ni.prototype);Tw(Ni,Ar);Ar.from=function(i,t,e){if(typeof i=="number")throw new TypeError("Argument must not be a number");return Ni(i,t,e)};Ar.alloc=function(i,t,e){if(typeof i!="number")throw new TypeError("Argument must be a number");var n=Ni(i);return t!==void 0?typeof e=="string"?n.fill(t,e):n.fill(t):n.fill(0),n};Ar.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return Ni(i)};Ar.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return Qd.SlowBuffer(i)}});var Aw=S(Dw=>{"use strict";var cg=Pw().Buffer,Ow=cg.isEncoding||function(i){switch(i=""+i,i&&i.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function K4(i){if(!i)return"utf8";for(var t;;)switch(i){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return i;default:if(t)return;i=(""+i).toLowerCase(),t=!0}}function Q4(i){var t=K4(i);if(typeof t!="string"&&(cg.isEncoding===Ow||!Ow(i)))throw new Error("Unknown encoding: "+i);return t||i}Dw.StringDecoder=Ms;function Ms(i){this.encoding=Q4(i);var t;switch(this.encoding){case"utf16le":this.text=r5,this.end=o5,t=4;break;case"utf8":this.fillLast=t5,t=4;break;case"base64":this.text=a5,this.end=s5,t=3;break;default:this.write=l5,this.end=c5;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=cg.allocUnsafe(t)}Ms.prototype.write=function(i){if(i.length===0)return"";var t,e;if(this.lastNeed){if(t=this.fillLast(i),t===void 0)return"";e=this.lastNeed,this.lastNeed=0}else e=0;return e<i.length?t?t+this.text(i,e):this.text(i,e):t||""};Ms.prototype.end=n5;Ms.prototype.text=i5;Ms.prototype.fillLast=function(i){if(this.lastNeed<=i.length)return i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,this.lastTotal-this.lastNeed,0,i.length),this.lastNeed-=i.length};function lg(i){return i<=127?0:i>>5===6?2:i>>4===14?3:i>>3===30?4:i>>6===2?-1:-2}function J4(i,t,e){var n=t.length-1;if(n<e)return 0;var r=lg(t[n]);return r>=0?(r>0&&(i.lastNeed=r-1),r):--n<e||r===-2?0:(r=lg(t[n]),r>=0?(r>0&&(i.lastNeed=r-2),r):--n<e||r===-2?0:(r=lg(t[n]),r>=0?(r>0&&(r===2?r=0:i.lastNeed=r-3),r):0))}function e5(i,t,e){if((t[0]&192)!==128)return i.lastNeed=0,"\uFFFD";if(i.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return i.lastNeed=1,"\uFFFD";if(i.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return i.lastNeed=2,"\uFFFD"}}function t5(i){var t=this.lastTotal-this.lastNeed,e=e5(this,i,t);if(e!==void 0)return e;if(this.lastNeed<=i.length)return i.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);i.copy(this.lastChar,t,0,i.length),this.lastNeed-=i.length}function i5(i,t){var e=J4(this,i,t);if(!this.lastNeed)return i.toString("utf8",t);this.lastTotal=e;var n=i.length-(e-this.lastNeed);return i.copy(this.lastChar,0,n),i.toString("utf8",t,n)}function n5(i){var t=i&&i.length?this.write(i):"";return this.lastNeed?t+"\uFFFD":t}function r5(i,t){if((i.length-t)%2===0){var e=i.toString("utf16le",t);if(e){var n=e.charCodeAt(e.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1],e.slice(0,-1)}return e}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=i[i.length-1],i.toString("utf16le",t,i.length-1)}function o5(i){var t=i&&i.length?this.write(i):"";if(this.lastNeed){var e=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,e)}return t}function a5(i,t){var e=(i.length-t)%3;return e===0?i.toString("base64",t):(this.lastNeed=3-e,this.lastTotal=3,e===1?this.lastChar[0]=i[i.length-1]:(this.lastChar[0]=i[i.length-2],this.lastChar[1]=i[i.length-1]),i.toString("base64",t,i.length-e))}function s5(i){var t=i&&i.length?this.write(i):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function l5(i){return i.toString(this.encoding)}function c5(i){return i&&i.length?this.write(i):""}});var dg=S((RH,Lw)=>{"use strict";var Rw=Bn(),{PromisePrototypeThen:d5,SymbolAsyncIterator:Fw,SymbolIterator:Nw}=Re(),{Buffer:u5}=tn(),{ERR_INVALID_ARG_TYPE:m5,ERR_STREAM_NULL_VALUES:p5}=ht().codes;function h5(i,t,e){let n;if(typeof t=="string"||t instanceof u5)return new i(_e(O({objectMode:!0},e),{read(){this.push(t),this.push(null)}}));let r;if(t&&t[Fw])r=!0,n=t[Fw]();else if(t&&t[Nw])r=!1,n=t[Nw]();else throw new m5("iterable",["Iterable"],t);let o=new i(O({objectMode:!0,highWaterMark:1},e)),a=!1;o._read=function(){a||(a=!0,l())},o._destroy=function(u,m){d5(s(u),()=>Rw.nextTick(m,u),p=>Rw.nextTick(m,p||u))};function s(u){return g(this,null,function*(){let m=u!=null,p=typeof n.throw=="function";if(m&&p){let{value:y,done:v}=yield n.throw(u);if(yield y,v)return}if(typeof n.return=="function"){let{value:y}=yield n.return();yield y}})}function l(){return g(this,null,function*(){for(;;){try{let{value:u,done:m}=r?yield n.next():n.next();if(m)o.push(null);else{let p=u&&typeof u.then=="function"?yield u:u;if(p===null)throw a=!1,new p5;if(o.push(p))continue;a=!1}}catch(u){o.destroy(u)}break}})}return o}Lw.exports=h5});var ks=S((NH,tC)=>{"use strict";var bi=Bn(),{ArrayPrototypeIndexOf:f5,NumberIsInteger:g5,NumberIsNaN:b5,NumberParseInt:_5,ObjectDefineProperties:_g,ObjectKeys:v5,ObjectSetPrototypeOf:zw,Promise:jw,SafeSet:y5,SymbolAsyncDispose:x5,SymbolAsyncIterator:w5,Symbol:C5}=Re();tC.exports=de;de.ReadableState=iu;var{EventEmitter:S5}=ws(),{Stream:zn,prependListener:M5}=Yd(),{Buffer:ug}=tn(),{addAbortSignal:E5}=Cs(),Vw=on(),me=St().debuglog("stream",i=>{me=i}),k5=Cw(),sa=Dr(),{getHighWaterMark:T5,getDefaultHighWaterMark:I5}=Ss(),{aggregateTwoErrors:Bw,codes:{ERR_INVALID_ARG_TYPE:P5,ERR_METHOD_NOT_IMPLEMENTED:O5,ERR_OUT_OF_RANGE:D5,ERR_STREAM_PUSH_AFTER_EOF:A5,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:R5},AbortError:F5}=ht(),{validateObject:N5}=ia(),Rr=C5("kPaused"),{StringDecoder:qw}=Aw(),L5=dg();zw(de.prototype,zn.prototype);zw(de,zn);var mg=()=>{},{errorOrDestroy:oa}=sa,aa=1,B5=2,Hw=4,Es=8,$w=16,Jd=32,eu=64,Ww=128,U5=256,z5=512,j5=1024,gg=2048,bg=4096,V5=8192,q5=16384,H5=32768,Gw=65536,$5=1<<17,W5=1<<18;function et(i){return{enumerable:!1,get(){return(this.state&i)!==0},set(t){t?this.state|=i:this.state&=~i}}}_g(iu.prototype,{objectMode:et(aa),ended:et(B5),endEmitted:et(Hw),reading:et(Es),constructed:et($w),sync:et(Jd),needReadable:et(eu),emittedReadable:et(Ww),readableListening:et(U5),resumeScheduled:et(z5),errorEmitted:et(j5),emitClose:et(gg),autoDestroy:et(bg),destroyed:et(V5),closed:et(q5),closeEmitted:et(H5),multiAwaitDrain:et(Gw),readingMore:et($5),dataEmitted:et(W5)});function iu(i,t,e){typeof e!="boolean"&&(e=t instanceof Li()),this.state=gg|bg|$w|Jd,i&&i.objectMode&&(this.state|=aa),e&&i&&i.readableObjectMode&&(this.state|=aa),this.highWaterMark=i?T5(this,i,"readableHighWaterMark",e):I5(!1),this.buffer=new k5,this.length=0,this.pipes=[],this.flowing=null,this[Rr]=null,i&&i.emitClose===!1&&(this.state&=~gg),i&&i.autoDestroy===!1&&(this.state&=~bg),this.errored=null,this.defaultEncoding=i&&i.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,i&&i.encoding&&(this.decoder=new qw(i.encoding),this.encoding=i.encoding)}function de(i){if(!(this instanceof de))return new de(i);let t=this instanceof Li();this._readableState=new iu(i,this,t),i&&(typeof i.read=="function"&&(this._read=i.read),typeof i.destroy=="function"&&(this._destroy=i.destroy),typeof i.construct=="function"&&(this._construct=i.construct),i.signal&&!t&&E5(i.signal,this)),zn.call(this,i),sa.construct(this,()=>{this._readableState.needReadable&&tu(this,this._readableState)})}de.prototype.destroy=sa.destroy;de.prototype._undestroy=sa.undestroy;de.prototype._destroy=function(i,t){t(i)};de.prototype[S5.captureRejectionSymbol]=function(i){this.destroy(i)};de.prototype[x5]=function(){let i;return this.destroyed||(i=this.readableEnded?null:new F5,this.destroy(i)),new jw((t,e)=>Vw(this,n=>n&&n!==i?e(n):t(null)))};de.prototype.push=function(i,t){return Xw(this,i,t,!1)};de.prototype.unshift=function(i,t){return Xw(this,i,t,!0)};function Xw(i,t,e,n){me("readableAddChunk",t);let r=i._readableState,o;if(r.state&aa||(typeof t=="string"?(e=e||r.defaultEncoding,r.encoding!==e&&(n&&r.encoding?t=ug.from(t,e).toString(r.encoding):(t=ug.from(t,e),e=""))):t instanceof ug?e="":zn._isUint8Array(t)?(t=zn._uint8ArrayToBuffer(t),e=""):t!=null&&(o=new P5("chunk",["string","Buffer","Uint8Array"],t))),o)oa(i,o);else if(t===null)r.state&=~Es,Y5(i,r);else if(r.state&aa||t&&t.length>0)if(n)if(r.state&Hw)oa(i,new R5);else{if(r.destroyed||r.errored)return!1;pg(i,r,t,!0)}else if(r.ended)oa(i,new A5);else{if(r.destroyed||r.errored)return!1;r.state&=~Es,r.decoder&&!e?(t=r.decoder.write(t),r.objectMode||t.length!==0?pg(i,r,t,!1):tu(i,r)):pg(i,r,t,!1)}else n||(r.state&=~Es,tu(i,r));return!r.ended&&(r.length<r.highWaterMark||r.length===0)}function pg(i,t,e,n){t.flowing&&t.length===0&&!t.sync&&i.listenerCount("data")>0?(t.state&Gw?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,i.emit("data",e)):(t.length+=t.objectMode?1:e.length,n?t.buffer.unshift(e):t.buffer.push(e),t.state&eu&&nu(i)),tu(i,t)}de.prototype.isPaused=function(){let i=this._readableState;return i[Rr]===!0||i.flowing===!1};de.prototype.setEncoding=function(i){let t=new qw(i);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;let e=this._readableState.buffer,n="";for(let r of e)n+=t.write(r);return e.clear(),n!==""&&e.push(n),this._readableState.length=n.length,this};var G5=1073741824;function X5(i){if(i>G5)throw new D5("size","<= 1GiB",i);return i--,i|=i>>>1,i|=i>>>2,i|=i>>>4,i|=i>>>8,i|=i>>>16,i++,i}function Uw(i,t){return i<=0||t.length===0&&t.ended?0:t.state&aa?1:b5(i)?t.flowing&&t.length?t.buffer.first().length:t.length:i<=t.length?i:t.ended?t.length:0}de.prototype.read=function(i){me("read",i),i===void 0?i=NaN:g5(i)||(i=_5(i,10));let t=this._readableState,e=i;if(i>t.highWaterMark&&(t.highWaterMark=X5(i)),i!==0&&(t.state&=~Ww),i===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended))return me("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?hg(this):nu(this),null;if(i=Uw(i,t),i===0&&t.ended)return t.length===0&&hg(this),null;let n=(t.state&eu)!==0;if(me("need readable",n),(t.length===0||t.length-i<t.highWaterMark)&&(n=!0,me("length less than watermark",n)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)n=!1,me("reading, ended or constructing",n);else if(n){me("do read"),t.state|=Es|Jd,t.length===0&&(t.state|=eu);try{this._read(t.highWaterMark)}catch(o){oa(this,o)}t.state&=~Jd,t.reading||(i=Uw(e,t))}let r;return i>0?r=Jw(i,t):r=null,r===null?(t.needReadable=t.length<=t.highWaterMark,i=0):(t.length-=i,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),t.length===0&&(t.ended||(t.needReadable=!0),e!==i&&t.ended&&hg(this)),r!==null&&!t.errorEmitted&&!t.closeEmitted&&(t.dataEmitted=!0,this.emit("data",r)),r};function Y5(i,t){if(me("onEofChunk"),!t.ended){if(t.decoder){let e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?nu(i):(t.needReadable=!1,t.emittedReadable=!0,Yw(i))}}function nu(i){let t=i._readableState;me("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(me("emitReadable",t.flowing),t.emittedReadable=!0,bi.nextTick(Yw,i))}function Yw(i){let t=i._readableState;me("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&!t.errored&&(t.length||t.ended)&&(i.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,Kw(i)}function tu(i,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,bi.nextTick(Z5,i,t))}function Z5(i,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0);){let e=t.length;if(me("maybeReadMore read 0"),i.read(0),e===t.length)break}t.readingMore=!1}de.prototype._read=function(i){throw new O5("_read()")};de.prototype.pipe=function(i,t){let e=this,n=this._readableState;n.pipes.length===1&&(n.multiAwaitDrain||(n.multiAwaitDrain=!0,n.awaitDrainWriters=new y5(n.awaitDrainWriters?[n.awaitDrainWriters]:[]))),n.pipes.push(i),me("pipe count=%d opts=%j",n.pipes.length,t);let o=(!t||t.end!==!1)&&i!==bi.stdout&&i!==bi.stderr?s:x;n.endEmitted?bi.nextTick(o):e.once("end",o),i.on("unpipe",a);function a(D,W){me("onunpipe"),D===e&&W&&W.hasUnpiped===!1&&(W.hasUnpiped=!0,m())}function s(){me("onend"),i.end()}let l,u=!1;function m(){me("cleanup"),i.removeListener("close",P),i.removeListener("finish",b),l&&i.removeListener("drain",l),i.removeListener("error",v),i.removeListener("unpipe",a),e.removeListener("end",s),e.removeListener("end",x),e.removeListener("data",y),u=!0,l&&n.awaitDrainWriters&&(!i._writableState||i._writableState.needDrain)&&l()}function p(){u||(n.pipes.length===1&&n.pipes[0]===i?(me("false write response, pause",0),n.awaitDrainWriters=i,n.multiAwaitDrain=!1):n.pipes.length>1&&n.pipes.includes(i)&&(me("false write response, pause",n.awaitDrainWriters.size),n.awaitDrainWriters.add(i)),e.pause()),l||(l=K5(e,i),i.on("drain",l))}e.on("data",y);function y(D){me("ondata");let W=i.write(D);me("dest.write",W),W===!1&&p()}function v(D){if(me("onerror",D),x(),i.removeListener("error",v),i.listenerCount("error")===0){let W=i._writableState||i._readableState;W&&!W.errorEmitted?oa(i,D):i.emit("error",D)}}M5(i,"error",v);function P(){i.removeListener("finish",b),x()}i.once("close",P);function b(){me("onfinish"),i.removeListener("close",P),x()}i.once("finish",b);function x(){me("unpipe"),e.unpipe(i)}return i.emit("pipe",e),i.writableNeedDrain===!0?p():n.flowing||(me("pipe resume"),e.resume()),i};function K5(i,t){return function(){let n=i._readableState;n.awaitDrainWriters===t?(me("pipeOnDrain",1),n.awaitDrainWriters=null):n.multiAwaitDrain&&(me("pipeOnDrain",n.awaitDrainWriters.size),n.awaitDrainWriters.delete(t)),(!n.awaitDrainWriters||n.awaitDrainWriters.size===0)&&i.listenerCount("data")&&i.resume()}}de.prototype.unpipe=function(i){let t=this._readableState,e={hasUnpiped:!1};if(t.pipes.length===0)return this;if(!i){let r=t.pipes;t.pipes=[],this.pause();for(let o=0;o<r.length;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}let n=f5(t.pipes,i);return n===-1?this:(t.pipes.splice(n,1),t.pipes.length===0&&this.pause(),i.emit("unpipe",this,e),this)};de.prototype.on=function(i,t){let e=zn.prototype.on.call(this,i,t),n=this._readableState;return i==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):i==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,me("on readable",n.length,n.reading),n.length?nu(this):n.reading||bi.nextTick(Q5,this)),e};de.prototype.addListener=de.prototype.on;de.prototype.removeListener=function(i,t){let e=zn.prototype.removeListener.call(this,i,t);return i==="readable"&&bi.nextTick(Zw,this),e};de.prototype.off=de.prototype.removeListener;de.prototype.removeAllListeners=function(i){let t=zn.prototype.removeAllListeners.apply(this,arguments);return(i==="readable"||i===void 0)&&bi.nextTick(Zw,this),t};function Zw(i){let t=i._readableState;t.readableListening=i.listenerCount("readable")>0,t.resumeScheduled&&t[Rr]===!1?t.flowing=!0:i.listenerCount("data")>0?i.resume():t.readableListening||(t.flowing=null)}function Q5(i){me("readable nexttick read 0"),i.read(0)}de.prototype.resume=function(){let i=this._readableState;return i.flowing||(me("resume"),i.flowing=!i.readableListening,J5(this,i)),i[Rr]=!1,this};function J5(i,t){t.resumeScheduled||(t.resumeScheduled=!0,bi.nextTick(eN,i,t))}function eN(i,t){me("resume",t.reading),t.reading||i.read(0),t.resumeScheduled=!1,i.emit("resume"),Kw(i),t.flowing&&!t.reading&&i.read(0)}de.prototype.pause=function(){return me("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(me("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Rr]=!0,this};function Kw(i){let t=i._readableState;for(me("flow",t.flowing);t.flowing&&i.read()!==null;);}de.prototype.wrap=function(i){let t=!1;i.on("data",n=>{!this.push(n)&&i.pause&&(t=!0,i.pause())}),i.on("end",()=>{this.push(null)}),i.on("error",n=>{oa(this,n)}),i.on("close",()=>{this.destroy()}),i.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&i.resume&&(t=!1,i.resume())};let e=v5(i);for(let n=1;n<e.length;n++){let r=e[n];this[r]===void 0&&typeof i[r]=="function"&&(this[r]=i[r].bind(i))}return this};de.prototype[w5]=function(){return Qw(this)};de.prototype.iterator=function(i){return i!==void 0&&N5(i,"options"),Qw(this,i)};function Qw(i,t){typeof i.read!="function"&&(i=de.wrap(i,{objectMode:!0}));let e=tN(i,t);return e.stream=i,e}function tN(i,t){return Yt(this,null,function*(){let e=mg;function n(a){this===i?(e(),e=mg):e=a}i.on("readable",n);let r,o=Vw(i,{writable:!1},a=>{r=a?Bw(r,a):null,e(),e=mg});try{for(;;){let a=i.destroyed?null:i.read();if(a!==null)yield a;else{if(r)throw r;if(r===null)return;yield new gt(new jw(n))}}}catch(a){throw r=Bw(r,a),r}finally{(r||t?.destroyOnReturn!==!1)&&(r===void 0||i._readableState.autoDestroy)?sa.destroyer(i,null):(i.off("readable",n),o())}})}_g(de.prototype,{readable:{__proto__:null,get(){let i=this._readableState;return!!i&&i.readable!==!1&&!i.destroyed&&!i.errorEmitted&&!i.endEmitted},set(i){this._readableState&&(this._readableState.readable=!!i)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(i){this._readableState&&(this._readableState.flowing=i)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(i){this._readableState&&(this._readableState.destroyed=i)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});_g(iu.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Rr]!==!1},set(i){this[Rr]=!!i}}});de._fromList=Jw;function Jw(i,t){if(t.length===0)return null;let e;return t.objectMode?e=t.buffer.shift():!i||i>=t.length?(t.decoder?e=t.buffer.join(""):t.buffer.length===1?e=t.buffer.first():e=t.buffer.concat(t.length),t.buffer.clear()):e=t.buffer.consume(i,t.decoder),e}function hg(i){let t=i._readableState;me("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,bi.nextTick(iN,t,i))}function iN(i,t){if(me("endReadableNT",i.endEmitted,i.length),!i.errored&&!i.closeEmitted&&!i.endEmitted&&i.length===0){if(i.endEmitted=!0,t.emit("end"),t.writable&&t.allowHalfOpen===!1)bi.nextTick(nN,t);else if(i.autoDestroy){let e=t._writableState;(!e||e.autoDestroy&&(e.finished||e.writable===!1))&&t.destroy()}}}function nN(i){i.writable&&!i.writableEnded&&!i.destroyed&&i.end()}de.from=function(i,t){return L5(de,i,t)};var fg;function eC(){return fg===void 0&&(fg={}),fg}de.fromWeb=function(i,t){return eC().newStreamReadableFromReadableStream(i,t)};de.toWeb=function(i,t){return eC().newReadableStreamFromStreamReadable(i,t)};de.wrap=function(i,t){var e,n;return new de(_e(O({objectMode:(e=(n=i.readableObjectMode)!==null&&n!==void 0?n:i.objectMode)!==null&&e!==void 0?e:!0},t),{destroy(r,o){sa.destroyer(i,r),o(r)}})).wrap(i)}});var lu=S((BH,pC)=>{"use strict";var Fr=Bn(),{ArrayPrototypeSlice:rC,Error:rN,FunctionPrototypeSymbolHasInstance:oC,ObjectDefineProperty:aC,ObjectDefineProperties:oN,ObjectSetPrototypeOf:sC,StringPrototypeToLowerCase:aN,Symbol:sN,SymbolHasInstance:lN}=Re();pC.exports=Le;Le.WritableState=Ps;var{EventEmitter:cN}=ws(),Ts=Yd().Stream,{Buffer:ru}=tn(),su=Dr(),{addAbortSignal:dN}=Cs(),{getHighWaterMark:uN,getDefaultHighWaterMark:mN}=Ss(),{ERR_INVALID_ARG_TYPE:pN,ERR_METHOD_NOT_IMPLEMENTED:hN,ERR_MULTIPLE_CALLBACK:lC,ERR_STREAM_CANNOT_PIPE:fN,ERR_STREAM_DESTROYED:Is,ERR_STREAM_ALREADY_FINISHED:gN,ERR_STREAM_NULL_VALUES:bN,ERR_STREAM_WRITE_AFTER_END:_N,ERR_UNKNOWN_ENCODING:cC}=ht().codes,{errorOrDestroy:la}=su;sC(Le.prototype,Ts.prototype);sC(Le,Ts);function xg(){}var ca=sN("kOnFinished");function Ps(i,t,e){typeof e!="boolean"&&(e=t instanceof Li()),this.objectMode=!!(i&&i.objectMode),e&&(this.objectMode=this.objectMode||!!(i&&i.writableObjectMode)),this.highWaterMark=i?uN(this,i,"writableHighWaterMark",e):mN(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let n=!!(i&&i.decodeStrings===!1);this.decodeStrings=!n,this.defaultEncoding=i&&i.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=yN.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,au(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!i||i.emitClose!==!1,this.autoDestroy=!i||i.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[ca]=[]}function au(i){i.buffered=[],i.bufferedIndex=0,i.allBuffers=!0,i.allNoop=!0}Ps.prototype.getBuffer=function(){return rC(this.buffered,this.bufferedIndex)};aC(Ps.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function Le(i){let t=this instanceof Li();if(!t&&!oC(Le,this))return new Le(i);this._writableState=new Ps(i,this,t),i&&(typeof i.write=="function"&&(this._write=i.write),typeof i.writev=="function"&&(this._writev=i.writev),typeof i.destroy=="function"&&(this._destroy=i.destroy),typeof i.final=="function"&&(this._final=i.final),typeof i.construct=="function"&&(this._construct=i.construct),i.signal&&dN(i.signal,this)),Ts.call(this,i),su.construct(this,()=>{let e=this._writableState;e.writing||Cg(this,e),Sg(this,e)})}aC(Le,lN,{__proto__:null,value:function(i){return oC(this,i)?!0:this!==Le?!1:i&&i._writableState instanceof Ps}});Le.prototype.pipe=function(){la(this,new fN)};function dC(i,t,e,n){let r=i._writableState;if(typeof e=="function")n=e,e=r.defaultEncoding;else{if(!e)e=r.defaultEncoding;else if(e!=="buffer"&&!ru.isEncoding(e))throw new cC(e);typeof n!="function"&&(n=xg)}if(t===null)throw new bN;if(!r.objectMode)if(typeof t=="string")r.decodeStrings!==!1&&(t=ru.from(t,e),e="buffer");else if(t instanceof ru)e="buffer";else if(Ts._isUint8Array(t))t=Ts._uint8ArrayToBuffer(t),e="buffer";else throw new pN("chunk",["string","Buffer","Uint8Array"],t);let o;return r.ending?o=new _N:r.destroyed&&(o=new Is("write")),o?(Fr.nextTick(n,o),la(i,o,!0),o):(r.pendingcb++,vN(i,r,t,e,n))}Le.prototype.write=function(i,t,e){return dC(this,i,t,e)===!0};Le.prototype.cork=function(){this._writableState.corked++};Le.prototype.uncork=function(){let i=this._writableState;i.corked&&(i.corked--,i.writing||Cg(this,i))};Le.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=aN(t)),!ru.isEncoding(t))throw new cC(t);return this._writableState.defaultEncoding=t,this};function vN(i,t,e,n,r){let o=t.objectMode?1:e.length;t.length+=o;let a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:e,encoding:n,callback:r}),t.allBuffers&&n!=="buffer"&&(t.allBuffers=!1),t.allNoop&&r!==xg&&(t.allNoop=!1)):(t.writelen=o,t.writecb=r,t.writing=!0,t.sync=!0,i._write(e,n,t.onwrite),t.sync=!1),a&&!t.errored&&!t.destroyed}function iC(i,t,e,n,r,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new Is("write")):e?i._writev(r,t.onwrite):i._write(r,o,t.onwrite),t.sync=!1}function nC(i,t,e,n){--t.pendingcb,n(e),wg(t),la(i,e)}function yN(i,t){let e=i._writableState,n=e.sync,r=e.writecb;if(typeof r!="function"){la(i,new lC);return}e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0,t?(t.stack,e.errored||(e.errored=t),i._readableState&&!i._readableState.errored&&(i._readableState.errored=t),n?Fr.nextTick(nC,i,e,t,r):nC(i,e,t,r)):(e.buffered.length>e.bufferedIndex&&Cg(i,e),n?e.afterWriteTickInfo!==null&&e.afterWriteTickInfo.cb===r?e.afterWriteTickInfo.count++:(e.afterWriteTickInfo={count:1,cb:r,stream:i,state:e},Fr.nextTick(xN,e.afterWriteTickInfo)):uC(i,e,1,r))}function xN({stream:i,state:t,count:e,cb:n}){return t.afterWriteTickInfo=null,uC(i,t,e,n)}function uC(i,t,e,n){for(!t.ending&&!i.destroyed&&t.length===0&&t.needDrain&&(t.needDrain=!1,i.emit("drain"));e-- >0;)t.pendingcb--,n();t.destroyed&&wg(t),Sg(i,t)}function wg(i){if(i.writing)return;for(let r=i.bufferedIndex;r<i.buffered.length;++r){var t;let{chunk:o,callback:a}=i.buffered[r],s=i.objectMode?1:o.length;i.length-=s,a((t=i.errored)!==null&&t!==void 0?t:new Is("write"))}let e=i[ca].splice(0);for(let r=0;r<e.length;r++){var n;e[r]((n=i.errored)!==null&&n!==void 0?n:new Is("end"))}au(i)}function Cg(i,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;let{buffered:e,bufferedIndex:n,objectMode:r}=t,o=e.length-n;if(!o)return;let a=n;if(t.bufferProcessing=!0,o>1&&i._writev){t.pendingcb-=o-1;let s=t.allNoop?xg:u=>{for(let m=a;m<e.length;++m)e[m].callback(u)},l=t.allNoop&&a===0?e:rC(e,a);l.allBuffers=t.allBuffers,iC(i,t,!0,t.length,l,"",s),au(t)}else{do{let{chunk:s,encoding:l,callback:u}=e[a];e[a++]=null;let m=r?1:s.length;iC(i,t,!1,m,s,l,u)}while(a<e.length&&!t.writing);a===e.length?au(t):a>256?(e.splice(0,a),t.bufferedIndex=0):t.bufferedIndex=a}t.bufferProcessing=!1}Le.prototype._write=function(i,t,e){if(this._writev)this._writev([{chunk:i,encoding:t}],e);else throw new hN("_write()")};Le.prototype._writev=null;Le.prototype.end=function(i,t,e){let n=this._writableState;typeof i=="function"?(e=i,i=null,t=null):typeof t=="function"&&(e=t,t=null);let r;if(i!=null){let o=dC(this,i,t);o instanceof rN&&(r=o)}return n.corked&&(n.corked=1,this.uncork()),r||(!n.errored&&!n.ending?(n.ending=!0,Sg(this,n,!0),n.ended=!0):n.finished?r=new gN("end"):n.destroyed&&(r=new Is("end"))),typeof e=="function"&&(r||n.finished?Fr.nextTick(e,r):n[ca].push(e)),this};function ou(i){return i.ending&&!i.destroyed&&i.constructed&&i.length===0&&!i.errored&&i.buffered.length===0&&!i.finished&&!i.writing&&!i.errorEmitted&&!i.closeEmitted}function wN(i,t){let e=!1;function n(r){if(e){la(i,r??lC());return}if(e=!0,t.pendingcb--,r){let o=t[ca].splice(0);for(let a=0;a<o.length;a++)o[a](r);la(i,r,t.sync)}else ou(t)&&(t.prefinished=!0,i.emit("prefinish"),t.pendingcb++,Fr.nextTick(yg,i,t))}t.sync=!0,t.pendingcb++;try{i._final(n)}catch(r){n(r)}t.sync=!1}function CN(i,t){!t.prefinished&&!t.finalCalled&&(typeof i._final=="function"&&!t.destroyed?(t.finalCalled=!0,wN(i,t)):(t.prefinished=!0,i.emit("prefinish")))}function Sg(i,t,e){ou(t)&&(CN(i,t),t.pendingcb===0&&(e?(t.pendingcb++,Fr.nextTick((n,r)=>{ou(r)?yg(n,r):r.pendingcb--},i,t)):ou(t)&&(t.pendingcb++,yg(i,t))))}function yg(i,t){t.pendingcb--,t.finished=!0;let e=t[ca].splice(0);for(let n=0;n<e.length;n++)e[n]();if(i.emit("finish"),t.autoDestroy){let n=i._readableState;(!n||n.autoDestroy&&(n.endEmitted||n.readable===!1))&&i.destroy()}}oN(Le.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(i){this._writableState&&(this._writableState.destroyed=i)}},writable:{__proto__:null,get(){let i=this._writableState;return!!i&&i.writable!==!1&&!i.destroyed&&!i.errored&&!i.ending&&!i.ended},set(i){this._writableState&&(this._writableState.writable=!!i)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let i=this._writableState;return i?!i.destroyed&&!i.ending&&i.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var SN=su.destroy;Le.prototype.destroy=function(i,t){let e=this._writableState;return!e.destroyed&&(e.bufferedIndex<e.buffered.length||e[ca].length)&&Fr.nextTick(wg,e),SN.call(this,i,t),this};Le.prototype._undestroy=su.undestroy;Le.prototype._destroy=function(i,t){t(i)};Le.prototype[cN.captureRejectionSymbol]=function(i){this.destroy(i)};var vg;function mC(){return vg===void 0&&(vg={}),vg}Le.fromWeb=function(i,t){return mC().newStreamWritableFromWritableStream(i,t)};Le.toWeb=function(i){return mC().newWritableStreamFromStreamWritable(i)}});var TC=S((UH,kC)=>{"use strict";var Mg=Bn(),MN=tn(),{isReadable:EN,isWritable:kN,isIterable:hC,isNodeStream:TN,isReadableNodeStream:fC,isWritableNodeStream:gC,isDuplexNodeStream:IN,isReadableStream:bC,isWritableStream:_C}=Ri(),vC=on(),{AbortError:MC,codes:{ERR_INVALID_ARG_TYPE:PN,ERR_INVALID_RETURN_VALUE:yC}}=ht(),{destroyer:ua}=Dr(),ON=Li(),EC=ks(),DN=lu(),{createDeferredPromise:xC}=St(),wC=dg(),CC=globalThis.Blob||MN.Blob,AN=typeof CC<"u"?function(t){return t instanceof CC}:function(t){return!1},RN=globalThis.AbortController||Jo().AbortController,{FunctionPrototypeCall:SC}=Re(),jn=class extends ON{constructor(t){super(t),t?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};kC.exports=function i(t,e){if(IN(t))return t;if(fC(t))return da({readable:t});if(gC(t))return da({writable:t});if(TN(t))return da({writable:!1,readable:!1});if(bC(t))return da({readable:EC.fromWeb(t)});if(_C(t))return da({writable:DN.fromWeb(t)});if(typeof t=="function"){let{value:r,write:o,final:a,destroy:s}=FN(t);if(hC(r))return wC(jn,r,{objectMode:!0,write:o,final:a,destroy:s});let l=r?.then;if(typeof l=="function"){let u,m=SC(l,r,p=>{if(p!=null)throw new yC("nully","body",p)},p=>{ua(u,p)});return u=new jn({objectMode:!0,readable:!1,write:o,final(p){a(()=>g(this,null,function*(){try{yield m,Mg.nextTick(p,null)}catch(y){Mg.nextTick(p,y)}}))},destroy:s})}throw new yC("Iterable, AsyncIterable or AsyncFunction",e,r)}if(AN(t))return i(t.arrayBuffer());if(hC(t))return wC(jn,t,{objectMode:!0,writable:!1});if(bC(t?.readable)&&_C(t?.writable))return jn.fromWeb(t);if(typeof t?.writable=="object"||typeof t?.readable=="object"){let r=t!=null&&t.readable?fC(t?.readable)?t?.readable:i(t.readable):void 0,o=t!=null&&t.writable?gC(t?.writable)?t?.writable:i(t.writable):void 0;return da({readable:r,writable:o})}let n=t?.then;if(typeof n=="function"){let r;return SC(n,t,o=>{o!=null&&r.push(o),r.push(null)},o=>{ua(r,o)}),r=new jn({objectMode:!0,writable:!1,read(){}})}throw new PN(e,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t)};function FN(i){let{promise:t,resolve:e}=xC(),n=new RN,r=n.signal;return{value:i(function(){return Yt(this,null,function*(){for(;;){let a=t;t=null;let{chunk:s,done:l,cb:u}=yield new gt(a);if(Mg.nextTick(u),l)return;if(r.aborted)throw new MC(void 0,{cause:r.reason});({promise:t,resolve:e}=xC()),yield s}})}(),{signal:r}),write(a,s,l){let u=e;e=null,u({chunk:a,done:!1,cb:l})},final(a){let s=e;e=null,s({done:!0,cb:a})},destroy(a,s){n.abort(),s(a)}}}function da(i){let t=i.readable&&typeof i.readable.read!="function"?EC.wrap(i.readable):i.readable,e=i.writable,n=!!EN(t),r=!!kN(e),o,a,s,l,u;function m(p){let y=l;l=null,y?y(p):p&&u.destroy(p)}return u=new jn({readableObjectMode:!!(t!=null&&t.readableObjectMode),writableObjectMode:!!(e!=null&&e.writableObjectMode),readable:n,writable:r}),r&&(vC(e,p=>{r=!1,p&&ua(t,p),m(p)}),u._write=function(p,y,v){e.write(p,y)?v():o=v},u._final=function(p){e.end(),a=p},e.on("drain",function(){if(o){let p=o;o=null,p()}}),e.on("finish",function(){if(a){let p=a;a=null,p()}})),n&&(vC(t,p=>{n=!1,p&&ua(t,p),m(p)}),t.on("readable",function(){if(s){let p=s;s=null,p()}}),t.on("end",function(){u.push(null)}),u._read=function(){for(;;){let p=t.read();if(p===null){s=u._read;return}if(!u.push(p))return}}),u._destroy=function(p,y){!p&&l!==null&&(p=new MC),s=null,o=null,a=null,l===null?y(p):(l=y,ua(e,p),ua(t,p))},u}});var Li=S((jH,OC)=>{"use strict";var{ObjectDefineProperties:NN,ObjectGetOwnPropertyDescriptor:an,ObjectKeys:LN,ObjectSetPrototypeOf:IC}=Re();OC.exports=_i;var Tg=ks(),si=lu();IC(_i.prototype,Tg.prototype);IC(_i,Tg);{let i=LN(si.prototype);for(let t=0;t<i.length;t++){let e=i[t];_i.prototype[e]||(_i.prototype[e]=si.prototype[e])}}function _i(i){if(!(this instanceof _i))return new _i(i);Tg.call(this,i),si.call(this,i),i?(this.allowHalfOpen=i.allowHalfOpen!==!1,i.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),i.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}NN(_i.prototype,{writable:O({__proto__:null},an(si.prototype,"writable")),writableHighWaterMark:O({__proto__:null},an(si.prototype,"writableHighWaterMark")),writableObjectMode:O({__proto__:null},an(si.prototype,"writableObjectMode")),writableBuffer:O({__proto__:null},an(si.prototype,"writableBuffer")),writableLength:O({__proto__:null},an(si.prototype,"writableLength")),writableFinished:O({__proto__:null},an(si.prototype,"writableFinished")),writableCorked:O({__proto__:null},an(si.prototype,"writableCorked")),writableEnded:O({__proto__:null},an(si.prototype,"writableEnded")),writableNeedDrain:O({__proto__:null},an(si.prototype,"writableNeedDrain")),destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(i){this._readableState&&this._writableState&&(this._readableState.destroyed=i,this._writableState.destroyed=i)}}});var Eg;function PC(){return Eg===void 0&&(Eg={}),Eg}_i.fromWeb=function(i,t){return PC().newStreamDuplexFromReadableWritablePair(i,t)};_i.toWeb=function(i){return PC().newReadableWritablePairFromDuplex(i)};var kg;_i.from=function(i){return kg||(kg=TC()),kg(i,"body")}});var Og=S((qH,AC)=>{"use strict";var{ObjectSetPrototypeOf:DC,Symbol:BN}=Re();AC.exports=sn;var{ERR_METHOD_NOT_IMPLEMENTED:UN}=ht().codes,Pg=Li(),{getHighWaterMark:zN}=Ss();DC(sn.prototype,Pg.prototype);DC(sn,Pg);var Os=BN("kCallback");function sn(i){if(!(this instanceof sn))return new sn(i);let t=i?zN(this,i,"readableHighWaterMark",!0):null;t===0&&(i=_e(O({},i),{highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:i.writableHighWaterMark||0})),Pg.call(this,i),this._readableState.sync=!1,this[Os]=null,i&&(typeof i.transform=="function"&&(this._transform=i.transform),typeof i.flush=="function"&&(this._flush=i.flush)),this.on("prefinish",jN)}function Ig(i){typeof this._flush=="function"&&!this.destroyed?this._flush((t,e)=>{if(t){i?i(t):this.destroy(t);return}e!=null&&this.push(e),this.push(null),i&&i()}):(this.push(null),i&&i())}function jN(){this._final!==Ig&&Ig.call(this)}sn.prototype._final=Ig;sn.prototype._transform=function(i,t,e){throw new UN("_transform()")};sn.prototype._write=function(i,t,e){let n=this._readableState,r=this._writableState,o=n.length;this._transform(i,t,(a,s)=>{if(a){e(a);return}s!=null&&this.push(s),r.ended||o===n.length||n.length<n.highWaterMark?e():this[Os]=e})};sn.prototype._read=function(){if(this[Os]){let i=this[Os];this[Os]=null,i()}}});var Ag=S(($H,FC)=>{"use strict";var{ObjectSetPrototypeOf:RC}=Re();FC.exports=ma;var Dg=Og();RC(ma.prototype,Dg.prototype);RC(ma,Dg);function ma(i){if(!(this instanceof ma))return new ma(i);Dg.call(this,i)}ma.prototype._transform=function(i,t,e){e(null,i)}});var mu=S((WH,zC)=>{"use strict";var Ds=Bn(),{ArrayIsArray:VN,Promise:qN,SymbolAsyncIterator:HN,SymbolDispose:$N}=Re(),uu=on(),{once:WN}=St(),GN=Dr(),NC=Li(),{aggregateTwoErrors:XN,codes:{ERR_INVALID_ARG_TYPE:Vg,ERR_INVALID_RETURN_VALUE:Rg,ERR_MISSING_ARGS:YN,ERR_STREAM_DESTROYED:ZN,ERR_STREAM_PREMATURE_CLOSE:KN},AbortError:QN}=ht(),{validateFunction:JN,validateAbortSignal:eL}=ia(),{isIterable:Nr,isReadable:Fg,isReadableNodeStream:du,isNodeStream:LC,isTransformStream:pa,isWebStream:tL,isReadableStream:Ng,isReadableFinished:iL}=Ri(),nL=globalThis.AbortController||Jo().AbortController,Lg,Bg,Ug;function BC(i,t,e){let n=!1;i.on("close",()=>{n=!0});let r=uu(i,{readable:t,writable:e},o=>{n=!o});return{destroy:o=>{n||(n=!0,GN.destroyer(i,o||new ZN("pipe")))},cleanup:r}}function rL(i){return JN(i[i.length-1],"streams[stream.length - 1]"),i.pop()}function zg(i){if(Nr(i))return i;if(du(i))return oL(i);throw new Vg("val",["Readable","Iterable","AsyncIterable"],i)}function oL(i){return Yt(this,null,function*(){Bg||(Bg=ks()),yield*Ns(Bg.prototype[HN].call(i))})}function cu(r,o,a,s){return g(this,arguments,function*(i,t,e,{end:n}){let l,u=null,m=D=>{if(D&&(l=D),u){let W=u;u=null,W()}},p=()=>new qN((D,W)=>{l?W(l):u=()=>{l?W(l):D()}});t.on("drain",m);let y=uu(t,{readable:!1},m);try{t.writableNeedDrain&&(yield p());try{for(var v=Et(i),P,b,x;P=!(b=yield v.next()).done;P=!1){let D=b.value;t.write(D)||(yield p())}}catch{x=[b]}finally{try{P&&(b=v.return)&&(yield b.call(v))}finally{if(x)throw x[0]}}n&&(t.end(),yield p()),e()}catch(D){e(l!==D?XN(l,D):D)}finally{y(),t.off("drain",m)}})}function jg(r,o,a,s){return g(this,arguments,function*(i,t,e,{end:n}){pa(t)&&(t=t.writable);let l=t.getWriter();try{try{for(var u=Et(i),m,p,y;m=!(p=yield u.next()).done;m=!1){let v=p.value;yield l.ready,l.write(v).catch(()=>{})}}catch{y=[p]}finally{try{m&&(p=u.return)&&(yield p.call(u))}finally{if(y)throw y[0]}}yield l.ready,n&&(yield l.close()),e()}catch(v){try{yield l.abort(v),e(v)}catch(P){e(P)}}})}function aL(...i){return UC(i,WN(rL(i)))}function UC(i,t,e){if(i.length===1&&VN(i[0])&&(i=i[0]),i.length<2)throw new YN("streams");let n=new nL,r=n.signal,o=e?.signal,a=[];eL(o,"options.signal");function s(){P(new QN)}Ug=Ug||St().addAbortListener;let l;o&&(l=Ug(o,s));let u,m,p=[],y=0;function v(Y){P(Y,--y===0)}function P(Y,Z){var fe;if(Y&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=Y),!(!u&&!Z)){for(;p.length;)p.shift()(u);(fe=l)===null||fe===void 0||fe[$N](),n.abort(),Z&&(u||a.forEach(He=>He()),Ds.nextTick(t,u,m))}}let b;for(let Y=0;Y<i.length;Y++){let Z=i[Y],fe=Y<i.length-1,He=Y>0,Mt=fe||e?.end!==!1,Ui=Y===i.length-1;if(LC(Z)){let ct=function(zi){zi&&zi.name!=="AbortError"&&zi.code!=="ERR_STREAM_PREMATURE_CLOSE"&&v(zi)};var W=ct;if(Mt){let{destroy:zi,cleanup:_u}=BC(Z,fe,He);p.push(zi),Fg(Z)&&Ui&&a.push(_u)}Z.on("error",ct),Fg(Z)&&Ui&&a.push(()=>{Z.removeListener("error",ct)})}if(Y===0)if(typeof Z=="function"){if(b=Z({signal:r}),!Nr(b))throw new Rg("Iterable, AsyncIterable or Stream","source",b)}else Nr(Z)||du(Z)||pa(Z)?b=Z:b=NC.from(Z);else if(typeof Z=="function"){if(pa(b)){var x;b=zg((x=b)===null||x===void 0?void 0:x.readable)}else b=zg(b);if(b=Z(b,{signal:r}),fe){if(!Nr(b,!0))throw new Rg("AsyncIterable",`transform[${Y-1}]`,b)}else{var D;Lg||(Lg=Ag());let ct=new Lg({objectMode:!0}),zi=(D=b)===null||D===void 0?void 0:D.then;if(typeof zi=="function")y++,zi.call(b,cn=>{m=cn,cn!=null&&ct.write(cn),Mt&&ct.end(),Ds.nextTick(v)},cn=>{ct.destroy(cn),Ds.nextTick(v,cn)});else if(Nr(b,!0))y++,cu(b,ct,v,{end:Mt});else if(Ng(b)||pa(b)){let cn=b.readable||b;y++,cu(cn,ct,v,{end:Mt})}else throw new Rg("AsyncIterable or Promise","destination",b);b=ct;let{destroy:_u,cleanup:MS}=BC(b,!1,!0);p.push(_u),Ui&&a.push(MS)}}else if(LC(Z)){if(du(b)){y+=2;let ct=sL(b,Z,v,{end:Mt});Fg(Z)&&Ui&&a.push(ct)}else if(pa(b)||Ng(b)){let ct=b.readable||b;y++,cu(ct,Z,v,{end:Mt})}else if(Nr(b))y++,cu(b,Z,v,{end:Mt});else throw new Vg("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);b=Z}else if(tL(Z)){if(du(b))y++,jg(zg(b),Z,v,{end:Mt});else if(Ng(b)||Nr(b))y++,jg(b,Z,v,{end:Mt});else if(pa(b))y++,jg(b.readable,Z,v,{end:Mt});else throw new Vg("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);b=Z}else b=NC.from(Z)}return(r!=null&&r.aborted||o!=null&&o.aborted)&&Ds.nextTick(s),b}function sL(i,t,e,{end:n}){let r=!1;if(t.on("close",()=>{r||e(new KN)}),i.pipe(t,{end:!1}),n){let a=function(){r=!0,t.end()};var o=a;iL(i)?Ds.nextTick(a):i.once("end",a)}else e();return uu(i,{readable:!0,writable:!1},a=>{let s=i._readableState;a&&a.code==="ERR_STREAM_PREMATURE_CLOSE"&&s&&s.ended&&!s.errored&&!s.errorEmitted?i.once("end",e).once("error",e):e(a)}),uu(t,{readable:!1,writable:!0},e)}zC.exports={pipelineImpl:UC,pipeline:aL}});var Hg=S((XH,WC)=>{"use strict";var{pipeline:lL}=mu(),pu=Li(),{destroyer:cL}=Dr(),{isNodeStream:hu,isReadable:jC,isWritable:VC,isWebStream:qg,isTransformStream:Lr,isWritableStream:qC,isReadableStream:HC}=Ri(),{AbortError:dL,codes:{ERR_INVALID_ARG_VALUE:$C,ERR_MISSING_ARGS:uL}}=ht(),mL=on();WC.exports=function(...t){if(t.length===0)throw new uL("streams");if(t.length===1)return pu.from(t[0]);let e=[...t];if(typeof t[0]=="function"&&(t[0]=pu.from(t[0])),typeof t[t.length-1]=="function"){let v=t.length-1;t[v]=pu.from(t[v])}for(let v=0;v<t.length;++v)if(!(!hu(t[v])&&!qg(t[v]))){if(v<t.length-1&&!(jC(t[v])||HC(t[v])||Lr(t[v])))throw new $C(`streams[${v}]`,e[v],"must be readable");if(v>0&&!(VC(t[v])||qC(t[v])||Lr(t[v])))throw new $C(`streams[${v}]`,e[v],"must be writable")}let n,r,o,a,s;function l(v){let P=a;a=null,P?P(v):v?s.destroy(v):!y&&!p&&s.destroy()}let u=t[0],m=lL(t,l),p=!!(VC(u)||qC(u)||Lr(u)),y=!!(jC(m)||HC(m)||Lr(m));if(s=new pu({writableObjectMode:!!(u!=null&&u.writableObjectMode),readableObjectMode:!!(m!=null&&m.readableObjectMode),writable:p,readable:y}),p){if(hu(u))s._write=function(P,b,x){u.write(P,b)?x():n=x},s._final=function(P){u.end(),r=P},u.on("drain",function(){if(n){let P=n;n=null,P()}});else if(qg(u)){let b=(Lr(u)?u.writable:u).getWriter();s._write=function(x,D,W){return g(this,null,function*(){try{yield b.ready,b.write(x).catch(()=>{}),W()}catch(Y){W(Y)}})},s._final=function(x){return g(this,null,function*(){try{yield b.ready,b.close().catch(()=>{}),r=x}catch(D){x(D)}})}}let v=Lr(m)?m.readable:m;mL(v,()=>{if(r){let P=r;r=null,P()}})}if(y){if(hu(m))m.on("readable",function(){if(o){let v=o;o=null,v()}}),m.on("end",function(){s.push(null)}),s._read=function(){for(;;){let v=m.read();if(v===null){o=s._read;return}if(!s.push(v))return}};else if(qg(m)){let P=(Lr(m)?m.readable:m).getReader();s._read=function(){return g(this,null,function*(){for(;;)try{let{value:b,done:x}=yield P.read();if(!s.push(b))return;if(x){s.push(null);return}}catch{return}})}}}return s._destroy=function(v,P){!v&&a!==null&&(v=new dL),o=null,n=null,r=null,a===null?P(v):(a=P,hu(m)&&cL(m,v))},s}});var iS=S((ZH,Gg)=>{"use strict";var pL=globalThis.AbortController||Jo().AbortController,{codes:{ERR_INVALID_ARG_VALUE:hL,ERR_INVALID_ARG_TYPE:As,ERR_MISSING_ARGS:fL,ERR_OUT_OF_RANGE:gL},AbortError:Bi}=ht(),{validateAbortSignal:Br,validateInteger:GC,validateObject:Ur}=ia(),bL=Re().Symbol("kWeak"),_L=Re().Symbol("kResistStopPropagation"),{finished:vL}=on(),yL=Hg(),{addAbortSignalNoValidate:xL}=Cs(),{isWritable:wL,isNodeStream:CL}=Ri(),{deprecate:SL}=St(),{ArrayPrototypePush:ML,Boolean:EL,MathFloor:XC,Number:kL,NumberIsNaN:TL,Promise:YC,PromiseReject:ZC,PromiseResolve:IL,PromisePrototypeThen:KC,Symbol:JC}=Re(),fu=JC("kEmpty"),QC=JC("kEof");function PL(i,t){if(t!=null&&Ur(t,"options"),t?.signal!=null&&Br(t.signal,"options.signal"),CL(i)&&!wL(i))throw new hL("stream",i,"must be writable");let e=yL(this,i);return t!=null&&t.signal&&xL(t.signal,e),e}function gu(i,t){if(typeof i!="function")throw new As("fn",["Function","AsyncFunction"],i);t!=null&&Ur(t,"options"),t?.signal!=null&&Br(t.signal,"options.signal");let e=1;t?.concurrency!=null&&(e=XC(t.concurrency));let n=e-1;return t?.highWaterMark!=null&&(n=XC(t.highWaterMark)),GC(e,"options.concurrency",1),GC(n,"options.highWaterMark",0),n+=e,function(){return Yt(this,null,function*(){let o=St().AbortSignalAny([t?.signal].filter(EL)),a=this,s=[],l={signal:o},u,m,p=!1,y=0;function v(){p=!0,P()}function P(){y-=1,b()}function b(){m&&!p&&y<e&&s.length<n&&(m(),m=null)}function x(){return g(this,null,function*(){try{try{for(var D=Et(a),W,Y,Z;W=!(Y=yield D.next()).done;W=!1){let fe=Y.value;if(p)return;if(o.aborted)throw new Bi;try{if(fe=i(fe,l),fe===fu)continue;fe=IL(fe)}catch(He){fe=ZC(He)}y+=1,KC(fe,P,v),s.push(fe),u&&(u(),u=null),!p&&(s.length>=n||y>=e)&&(yield new YC(He=>{m=He}))}}catch{Z=[Y]}finally{try{W&&(Y=D.return)&&(yield Y.call(D))}finally{if(Z)throw Z[0]}}s.push(QC)}catch(fe){let He=ZC(fe);KC(He,P,v),s.push(He)}finally{p=!0,u&&(u(),u=null)}})}x();try{for(;;){for(;s.length>0;){let D=yield new gt(s[0]);if(D===QC)return;if(o.aborted)throw new Bi;D!==fu&&(yield D),s.shift(),b()}yield new gt(new YC(D=>{u=D}))}}finally{p=!0,m&&(m(),m=null)}})}.call(this)}function OL(i=void 0){return i!=null&&Ur(i,"options"),i?.signal!=null&&Br(i.signal,"options.signal"),function(){return Yt(this,null,function*(){let e=0;try{for(var r=Et(this),o,a,s;o=!(a=yield new gt(r.next())).done;o=!1){let l=a.value;var n;if(i!=null&&(n=i.signal)!==null&&n!==void 0&&n.aborted)throw new Bi({cause:i.signal.reason});yield[e++,l]}}catch{s=[a]}finally{try{o&&(a=r.return)&&(yield new gt(a.call(r)))}finally{if(s)throw s[0]}}})}.call(this)}function eS(i,t=void 0){return g(this,null,function*(){try{for(var e=Et(Wg.call(this,i,t)),n,r,o;n=!(r=yield e.next()).done;n=!1){let a=r.value;return!0}}catch{o=[r]}finally{try{n&&(r=e.return)&&(yield r.call(e))}finally{if(o)throw o[0]}}return!1})}function DL(i,t=void 0){return g(this,null,function*(){if(typeof i!="function")throw new As("fn",["Function","AsyncFunction"],i);return!(yield eS.call(this,(...e)=>g(this,null,function*(){return!(yield i(...e))}),t))})}function AL(i,t){return g(this,null,function*(){try{for(var e=Et(Wg.call(this,i,t)),n,r,o;n=!(r=yield e.next()).done;n=!1){let a=r.value;return a}}catch{o=[r]}finally{try{n&&(r=e.return)&&(yield r.call(e))}finally{if(o)throw o[0]}}})}function RL(i,t){return g(this,null,function*(){if(typeof i!="function")throw new As("fn",["Function","AsyncFunction"],i);function e(s,l){return g(this,null,function*(){return yield i(s,l),fu})}try{for(var n=Et(gu.call(this,e,t)),r,o,a;r=!(o=yield n.next()).done;r=!1){let s=o.value;;}}catch{a=[o]}finally{try{r&&(o=n.return)&&(yield o.call(n))}finally{if(a)throw a[0]}}})}function Wg(i,t){if(typeof i!="function")throw new As("fn",["Function","AsyncFunction"],i);function e(n,r){return g(this,null,function*(){return(yield i(n,r))?n:fu})}return gu.call(this,e,t)}var $g=class extends fL{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};function FL(n,r,o){return g(this,arguments,function*(i,t,e){var a;if(typeof i!="function")throw new As("reducer",["Function","AsyncFunction"],i);e!=null&&Ur(e,"options"),e?.signal!=null&&Br(e.signal,"options.signal");let s=arguments.length>1;if(e!=null&&(a=e.signal)!==null&&a!==void 0&&a.aborted){let x=new Bi(void 0,{cause:e.signal.reason});throw this.once("error",()=>{}),yield vL(this.destroy(x)),x}let l=new pL,u=l.signal;if(e!=null&&e.signal){let x={once:!0,[bL]:this,[_L]:!0};e.signal.addEventListener("abort",()=>l.abort(),x)}let m=!1;try{try{for(var y=Et(this),v,P,b;v=!(P=yield y.next()).done;v=!1){let x=P.value;var p;if(m=!0,e!=null&&(p=e.signal)!==null&&p!==void 0&&p.aborted)throw new Bi;s?t=yield i(t,x,{signal:u}):(t=x,s=!0)}}catch{b=[P]}finally{try{v&&(P=y.return)&&(yield P.call(y))}finally{if(b)throw b[0]}}if(!m&&!s)throw new $g}finally{l.abort()}return t})}function NL(i){return g(this,null,function*(){i!=null&&Ur(i,"options"),i?.signal!=null&&Br(i.signal,"options.signal");let t=[];try{for(var n=Et(this),r,o,a;r=!(o=yield n.next()).done;r=!1){let s=o.value;var e;if(i!=null&&(e=i.signal)!==null&&e!==void 0&&e.aborted)throw new Bi(void 0,{cause:i.signal.reason});ML(t,s)}}catch{a=[o]}finally{try{r&&(o=n.return)&&(yield o.call(n))}finally{if(a)throw a[0]}}return t})}function LL(i,t){let e=gu.call(this,i,t);return function(){return Yt(this,null,function*(){try{for(var r=Et(e),o,a,s;o=!(a=yield new gt(r.next())).done;o=!1){let l=a.value;yield*Ns(l)}}catch{s=[a]}finally{try{o&&(a=r.return)&&(yield new gt(a.call(r)))}finally{if(s)throw s[0]}}})}.call(this)}function tS(i){if(i=kL(i),TL(i))return 0;if(i<0)throw new gL("number",">= 0",i);return i}function BL(i,t=void 0){return t!=null&&Ur(t,"options"),t?.signal!=null&&Br(t.signal,"options.signal"),i=tS(i),function(){return Yt(this,null,function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Bi;try{for(var o=Et(this),a,s,l;a=!(s=yield new gt(o.next())).done;a=!1){let u=s.value;var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Bi;i--<=0&&(yield u)}}catch{l=[s]}finally{try{a&&(s=o.return)&&(yield new gt(s.call(o)))}finally{if(l)throw l[0]}}})}.call(this)}function UL(i,t=void 0){return t!=null&&Ur(t,"options"),t?.signal!=null&&Br(t.signal,"options.signal"),i=tS(i),function(){return Yt(this,null,function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Bi;try{for(var o=Et(this),a,s,l;a=!(s=yield new gt(o.next())).done;a=!1){let u=s.value;var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Bi;if(i-- >0&&(yield u),i<=0)return}}catch{l=[s]}finally{try{a&&(s=o.return)&&(yield new gt(s.call(o)))}finally{if(l)throw l[0]}}})}.call(this)}Gg.exports.streamReturningOperators={asIndexedPairs:SL(OL,"readable.asIndexedPairs will be removed in a future version."),drop:BL,filter:Wg,flatMap:LL,map:gu,take:UL,compose:PL};Gg.exports.promiseReturningOperators={every:DL,forEach:RL,reduce:FL,toArray:NL,some:eS,find:AL}});var Xg=S((QH,nS)=>{"use strict";var{ArrayPrototypePop:zL,Promise:jL}=Re(),{isIterable:VL,isNodeStream:qL,isWebStream:HL}=Ri(),{pipelineImpl:$L}=mu(),{finished:WL}=on();Yg();function GL(...i){return new jL((t,e)=>{let n,r,o=i[i.length-1];if(o&&typeof o=="object"&&!qL(o)&&!VL(o)&&!HL(o)){let a=zL(i);n=a.signal,r=a.end}$L(i,(a,s)=>{a?e(a):t(s)},{signal:n,end:r})})}nS.exports={finished:WL,pipeline:GL}});var Yg=S((JH,mS)=>{"use strict";var{Buffer:XL}=tn(),{ObjectDefineProperty:ln,ObjectKeys:aS,ReflectApply:sS}=Re(),{promisify:{custom:lS}}=St(),{streamReturningOperators:rS,promiseReturningOperators:oS}=iS(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:cS}}=ht(),YL=Hg(),{setDefaultHighWaterMark:ZL,getDefaultHighWaterMark:KL}=Ss(),{pipeline:dS}=mu(),{destroyer:QL}=Dr(),uS=on(),Zg=Xg(),Rs=Ri(),Oe=mS.exports=Yd().Stream;Oe.isDestroyed=Rs.isDestroyed;Oe.isDisturbed=Rs.isDisturbed;Oe.isErrored=Rs.isErrored;Oe.isReadable=Rs.isReadable;Oe.isWritable=Rs.isWritable;Oe.Readable=ks();for(let i of aS(rS)){let e=function(...n){if(new.target)throw cS();return Oe.Readable.from(sS(t,this,n))},t=rS[i];ln(e,"name",{__proto__:null,value:t.name}),ln(e,"length",{__proto__:null,value:t.length}),ln(Oe.Readable.prototype,i,{__proto__:null,value:e,enumerable:!1,configurable:!0,writable:!0})}for(let i of aS(oS)){let e=function(...n){if(new.target)throw cS();return sS(t,this,n)},t=oS[i];ln(e,"name",{__proto__:null,value:t.name}),ln(e,"length",{__proto__:null,value:t.length}),ln(Oe.Readable.prototype,i,{__proto__:null,value:e,enumerable:!1,configurable:!0,writable:!0})}Oe.Writable=lu();Oe.Duplex=Li();Oe.Transform=Og();Oe.PassThrough=Ag();Oe.pipeline=dS;var{addAbortSignal:JL}=Cs();Oe.addAbortSignal=JL;Oe.finished=uS;Oe.destroy=QL;Oe.compose=YL;Oe.setDefaultHighWaterMark=ZL;Oe.getDefaultHighWaterMark=KL;ln(Oe,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return Zg}});ln(dS,lS,{__proto__:null,enumerable:!0,get(){return Zg.pipeline}});ln(uS,lS,{__proto__:null,enumerable:!0,get(){return Zg.finished}});Oe.Stream=Oe;Oe._isUint8Array=function(t){return t instanceof Uint8Array};Oe._uint8ArrayToBuffer=function(t){return XL.from(t.buffer,t.byteOffset,t.byteLength)}});var pS=S((e9,Ve)=>{"use strict";var tt=Yg(),eB=Xg(),tB=tt.Readable.destroy;Ve.exports=tt.Readable;Ve.exports._uint8ArrayToBuffer=tt._uint8ArrayToBuffer;Ve.exports._isUint8Array=tt._isUint8Array;Ve.exports.isDisturbed=tt.isDisturbed;Ve.exports.isErrored=tt.isErrored;Ve.exports.isReadable=tt.isReadable;Ve.exports.Readable=tt.Readable;Ve.exports.Writable=tt.Writable;Ve.exports.Duplex=tt.Duplex;Ve.exports.Transform=tt.Transform;Ve.exports.PassThrough=tt.PassThrough;Ve.exports.addAbortSignal=tt.addAbortSignal;Ve.exports.finished=tt.finished;Ve.exports.destroy=tt.destroy;Ve.exports.destroy=tB;Ve.exports.pipeline=tt.pipeline;Ve.exports.compose=tt.compose;Object.defineProperty(tt,"promises",{configurable:!0,enumerable:!0,get(){return eB}});Ve.exports.Stream=tt.Stream;Ve.exports.default=Ve.exports});var hS=S(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.ReadableWebToNodeStream=void 0;var iB=pS(),Kg=class extends iB.Readable{constructor(t){super(),this.bytesRead=0,this.released=!1,this.reader=t.getReader()}_read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read().then(t=>{delete this.pendingRead,t.done||this.released?this.push(null):(this.bytesRead+=t.value.length,this.push(t.value))}).catch(t=>{this.destroy(t)})}waitForReadToComplete(){return g(this,null,function*(){this.pendingRead&&(yield this.pendingRead)})}close(){return g(this,null,function*(){yield this.syncAndRelease()})}syncAndRelease(){return g(this,null,function*(){this.released=!0,yield this.waitForReadToComplete(),yield this.reader.releaseLock()})}};bu.ReadableWebToNodeStream=Kg});var bS=S(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.fetchFromUrl=qe.parseBlob=qe.parseReadableStream=qe.parseNodeStream=qe.selectCover=qe.ratingToStars=qe.orderTags=qe.parseFromTokenizer=qe.parseBuffer=void 0;var nB=Me(),rB=Ef(),oB=hS(),fS=nB("music-metadata-browser:main"),Fs=Ef();Object.defineProperty(qe,"parseBuffer",{enumerable:!0,get:function(){return Fs.parseBuffer}});Object.defineProperty(qe,"parseFromTokenizer",{enumerable:!0,get:function(){return Fs.parseFromTokenizer}});Object.defineProperty(qe,"orderTags",{enumerable:!0,get:function(){return Fs.orderTags}});Object.defineProperty(qe,"ratingToStars",{enumerable:!0,get:function(){return Fs.ratingToStars}});Object.defineProperty(qe,"selectCover",{enumerable:!0,get:function(){return Fs.selectCover}});qe.parseNodeStream=rB.parseStream;function Qg(i,t,e){return g(this,null,function*(){let n=new oB.ReadableWebToNodeStream(i),r=yield(0,qe.parseNodeStream)(n,typeof t=="string"?{mimeType:t}:t,e);return yield n.close(),r})}qe.parseReadableStream=Qg;function gS(i,t){return g(this,null,function*(){let e={mimeType:i.type,size:i.size};i instanceof File&&(e.path=i.name);let n=i.stream?i.stream():aB(i);return Qg(n,{mimeType:i.type,size:i.size},t)})}qe.parseBlob=gS;function aB(i){let t=new FileReader;return new ReadableStream({start(e){t.onloadend=n=>{let r=n.target.result;r instanceof ArrayBuffer&&(r=new Uint8Array(r)),e.enqueue(r),e.close()},t.onerror=n=>{e.close()},t.onabort=n=>{e.close()},t.readAsArrayBuffer(i)}})}function sB(i,t){return g(this,null,function*(){let e=yield fetch(i),n={size:parseInt(e.headers.get("Content-Length"),10),mimeType:e.headers.get("Content-Type")};if(e.ok)if(e.body){let r=yield Qg(e.body,n,t);return fS("Closing HTTP-readable-stream..."),e.body.locked||(yield e.body.cancel()),fS("HTTP-readable-stream closed."),r}else return gS(yield e.blob(),t);else throw new Error(`HTTP error status=${e.status}: ${e.statusText}`)})}qe.fetchFromUrl=sB});var wa=class{},el=class{},Kn=class i{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let n=e.indexOf(":");if(n>0){let r=e.slice(0,n),o=r.toLowerCase(),a=e.slice(n+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(a):this.headers.set(o,[a])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,n)=>{this.setHeaderEntries(n,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,n])=>{this.setHeaderEntries(e,n)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof i?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new i;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof i?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let a=this.headers.get(e);if(!a)return;a=a.filter(s=>o.indexOf(s)===-1),a.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,a)}break}}setHeaderEntries(t,e){let n=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,n),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Hu=class{encodeKey(t){return A0(t)}encodeValue(t){return A0(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function PS(i,t){let e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[a,s]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=e.get(a)||[];l.push(s),e.set(a,l)}),e}var OS=/%(\d[a-f0-9])/gi,DS={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function A0(i){return encodeURIComponent(i).replace(OS,(t,e)=>DS[e]??t)}function Js(i){return`${i}`}var yi=class i{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Hu,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=PS(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let n=t.fromObject[e],r=Array.isArray(n)?n.map(Js):[Js(n)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(n=>{let r=t[n];Array.isArray(r)?r.forEach(o=>{e.push({param:n,value:o,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new i({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Js(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let n=this.map.get(t.param)||[],r=n.indexOf(Js(t.value));r!==-1&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var $u=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function AS(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function R0(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function F0(i){return typeof Blob<"u"&&i instanceof Blob}function N0(i){return typeof FormData<"u"&&i instanceof FormData}function RS(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}var xa=class i{constructor(t,e,n,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(AS(this.method)||r?(this.body=n!==void 0?n:null,o=r):o=n,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Kn,this.context??=new $u,!this.params)this.params=new yi,this.urlWithParams=e;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=e;else{let s=e.indexOf("?"),l=s===-1?"?":s<e.length-1?"&":"";this.urlWithParams=e+l+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||R0(this.body)||F0(this.body)||N0(this.body)||RS(this.body)?this.body:this.body instanceof yi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||N0(this.body)?null:F0(this.body)?this.body.type||null:R0(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof yi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,o=t.transferCache??this.transferCache,a=t.body!==void 0?t.body:this.body,s=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,u=t.headers||this.headers,m=t.params||this.params,p=t.context??this.context;return t.setHeaders!==void 0&&(u=Object.keys(t.setHeaders).reduce((y,v)=>y.set(v,t.setHeaders[v]),u)),t.setParams&&(m=Object.keys(t.setParams).reduce((y,v)=>y.set(v,t.setParams[v]),m)),new i(e,n,a,{params:m,headers:u,context:p,reportProgress:l,responseType:r,withCredentials:s,transferCache:o})}},Kr=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(Kr||{}),Ca=class{constructor(t,e=nl.Ok,n="OK"){this.headers=t.headers||new Kn,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Wu=class i extends Ca{constructor(t={}){super(t),this.type=Kr.ResponseHeader}clone(t={}){return new i({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},tl=class i extends Ca{constructor(t={}){super(t),this.type=Kr.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new i({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},il=class extends Ca{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},nl=function(i){return i[i.Continue=100]="Continue",i[i.SwitchingProtocols=101]="SwitchingProtocols",i[i.Processing=102]="Processing",i[i.EarlyHints=103]="EarlyHints",i[i.Ok=200]="Ok",i[i.Created=201]="Created",i[i.Accepted=202]="Accepted",i[i.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",i[i.NoContent=204]="NoContent",i[i.ResetContent=205]="ResetContent",i[i.PartialContent=206]="PartialContent",i[i.MultiStatus=207]="MultiStatus",i[i.AlreadyReported=208]="AlreadyReported",i[i.ImUsed=226]="ImUsed",i[i.MultipleChoices=300]="MultipleChoices",i[i.MovedPermanently=301]="MovedPermanently",i[i.Found=302]="Found",i[i.SeeOther=303]="SeeOther",i[i.NotModified=304]="NotModified",i[i.UseProxy=305]="UseProxy",i[i.Unused=306]="Unused",i[i.TemporaryRedirect=307]="TemporaryRedirect",i[i.PermanentRedirect=308]="PermanentRedirect",i[i.BadRequest=400]="BadRequest",i[i.Unauthorized=401]="Unauthorized",i[i.PaymentRequired=402]="PaymentRequired",i[i.Forbidden=403]="Forbidden",i[i.NotFound=404]="NotFound",i[i.MethodNotAllowed=405]="MethodNotAllowed",i[i.NotAcceptable=406]="NotAcceptable",i[i.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",i[i.RequestTimeout=408]="RequestTimeout",i[i.Conflict=409]="Conflict",i[i.Gone=410]="Gone",i[i.LengthRequired=411]="LengthRequired",i[i.PreconditionFailed=412]="PreconditionFailed",i[i.PayloadTooLarge=413]="PayloadTooLarge",i[i.UriTooLong=414]="UriTooLong",i[i.UnsupportedMediaType=415]="UnsupportedMediaType",i[i.RangeNotSatisfiable=416]="RangeNotSatisfiable",i[i.ExpectationFailed=417]="ExpectationFailed",i[i.ImATeapot=418]="ImATeapot",i[i.MisdirectedRequest=421]="MisdirectedRequest",i[i.UnprocessableEntity=422]="UnprocessableEntity",i[i.Locked=423]="Locked",i[i.FailedDependency=424]="FailedDependency",i[i.TooEarly=425]="TooEarly",i[i.UpgradeRequired=426]="UpgradeRequired",i[i.PreconditionRequired=428]="PreconditionRequired",i[i.TooManyRequests=429]="TooManyRequests",i[i.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",i[i.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",i[i.InternalServerError=500]="InternalServerError",i[i.NotImplemented=501]="NotImplemented",i[i.BadGateway=502]="BadGateway",i[i.ServiceUnavailable=503]="ServiceUnavailable",i[i.GatewayTimeout=504]="GatewayTimeout",i[i.HttpVersionNotSupported=505]="HttpVersionNotSupported",i[i.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",i[i.InsufficientStorage=507]="InsufficientStorage",i[i.LoopDetected=508]="LoopDetected",i[i.NotExtended=510]="NotExtended",i[i.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",i}(nl||{});function qu(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,transferCache:i.transferCache}}var qt=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let o;if(e instanceof xa)o=e;else{let l;r.headers instanceof Kn?l=r.headers:l=new Kn(r.headers);let u;r.params&&(r.params instanceof yi?u=r.params:u=new yi({fromObject:r.params})),o=new xa(e,n,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let a=G(o).pipe(qn(l=>this.handler.handle(l)));if(e instanceof xa||r.observe==="events")return a;let s=a.pipe(kt(l=>l instanceof tl));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return s.pipe(J(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return s.pipe(J(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return s.pipe(J(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return s.pipe(J(l=>l.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:new yi().append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,qu(r,n))}post(e,n,r={}){return this.request("POST",e,qu(r,n))}put(e,n,r={}){return this.request("PUT",e,qu(r,n))}static{this.\u0275fac=function(n){return new(n||i)(k(wa))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac})}}return i})();function FS(i,t){return t(i)}function NS(i,t,e){return(n,r)=>ji(e,()=>t(n,o=>i(o,r)))}var Gu=new ne(""),LS=new ne(""),BS=new ne("");var L0=(()=>{class i extends wa{constructor(e,n){super(),this.backend=e,this.injector=n,this.chain=null,this.pendingTasks=H(Ws);let r=H(BS,{optional:!0});this.backend=r??e}handle(e){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Gu),...this.injector.get(LS,[])]));this.chain=r.reduceRight((o,a)=>NS(o,a,this.injector),FS)}let n=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(mn(()=>this.pendingTasks.remove(n)))}static{this.\u0275fac=function(n){return new(n||i)(k(el),k(jr))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac})}}return i})();var US=/^\)\]\}',?\n/;function zS(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}var B0=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new Ce(-2800,!1);let n=this.xhrFactory;return(n.\u0275loadImpl?dt(n.\u0275loadImpl()):G(null)).pipe(bt(()=>new zr(o=>{let a=n.build();if(a.open(e.method,e.urlWithParams),e.withCredentials&&(a.withCredentials=!0),e.headers.forEach((b,x)=>a.setRequestHeader(b,x.join(","))),e.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let b=e.detectContentTypeHeader();b!==null&&a.setRequestHeader("Content-Type",b)}if(e.responseType){let b=e.responseType.toLowerCase();a.responseType=b!=="json"?b:"text"}let s=e.serializeBody(),l=null,u=()=>{if(l!==null)return l;let b=a.statusText||"OK",x=new Kn(a.getAllResponseHeaders()),D=zS(a)||e.url;return l=new Wu({headers:x,status:a.status,statusText:b,url:D}),l},m=()=>{let{headers:b,status:x,statusText:D,url:W}=u(),Y=null;x!==nl.NoContent&&(Y=typeof a.response>"u"?a.responseText:a.response),x===0&&(x=Y?nl.Ok:0);let Z=x>=200&&x<300;if(e.responseType==="json"&&typeof Y=="string"){let fe=Y;Y=Y.replace(US,"");try{Y=Y!==""?JSON.parse(Y):null}catch(He){Y=fe,Z&&(Z=!1,Y={error:He,text:Y})}}Z?(o.next(new tl({body:Y,headers:b,status:x,statusText:D,url:W||void 0})),o.complete()):o.error(new il({error:Y,headers:b,status:x,statusText:D,url:W||void 0}))},p=b=>{let{url:x}=u(),D=new il({error:b,status:a.status||0,statusText:a.statusText||"Unknown Error",url:x||void 0});o.error(D)},y=!1,v=b=>{y||(o.next(u()),y=!0);let x={type:Kr.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(x.total=b.total),e.responseType==="text"&&a.responseText&&(x.partialText=a.responseText),o.next(x)},P=b=>{let x={type:Kr.UploadProgress,loaded:b.loaded};b.lengthComputable&&(x.total=b.total),o.next(x)};return a.addEventListener("load",m),a.addEventListener("error",p),a.addEventListener("timeout",p),a.addEventListener("abort",p),e.reportProgress&&(a.addEventListener("progress",v),s!==null&&a.upload&&a.upload.addEventListener("progress",P)),a.send(s),o.next({type:Kr.Sent}),()=>{a.removeEventListener("error",p),a.removeEventListener("abort",p),a.removeEventListener("load",m),a.removeEventListener("timeout",p),e.reportProgress&&(a.removeEventListener("progress",v),s!==null&&a.upload&&a.upload.removeEventListener("progress",P)),a.readyState!==a.DONE&&a.abort()}})))}static{this.\u0275fac=function(n){return new(n||i)(k(Qs))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac})}}return i})(),U0=new ne(""),jS="XSRF-TOKEN",VS=new ne("",{providedIn:"root",factory:()=>jS}),qS="X-XSRF-TOKEN",HS=new ne("",{providedIn:"root",factory:()=>qS}),rl=class{},$S=(()=>{class i{constructor(e,n,r){this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ys(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(n){return new(n||i)(k(le),k(Vi),k(VS))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac})}}return i})();function WS(i,t){let e=i.url.toLowerCase();if(!H(U0)||i.method==="GET"||i.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(i);let n=H(rl).getToken(),r=H(HS);return n!=null&&!i.headers.has(r)&&(i=i.clone({headers:i.headers.set(r,n)})),t(i)}var z0=function(i){return i[i.Interceptors=0]="Interceptors",i[i.LegacyInterceptors=1]="LegacyInterceptors",i[i.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",i[i.NoXsrfProtection=3]="NoXsrfProtection",i[i.JsonpSupport=4]="JsonpSupport",i[i.RequestsMadeViaParent=5]="RequestsMadeViaParent",i[i.Fetch=6]="Fetch",i}(z0||{});function GS(i,t){return{\u0275kind:i,\u0275providers:t}}function Xu(...i){let t=[qt,B0,L0,{provide:wa,useExisting:L0},{provide:el,useExisting:B0},{provide:Gu,useValue:WS,multi:!0},{provide:U0,useValue:!0},{provide:rl,useClass:$S}];for(let e of i)t.push(...e.\u0275providers);return Hn(t)}function j0(i){return GS(z0.Interceptors,i.map(t=>({provide:Gu,useValue:t,multi:!0})))}var Ku=class extends P0{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Qu=class i extends Ku{static makeCurrent(){I0(new i)}onAndCancel(t,e,n){return t.addEventListener(e,n),()=>{t.removeEventListener(e,n)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=YS();return e==null?null:ZS(e)}resetBaseElement(){Sa=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Ys(document.cookie,t)}},Sa=null;function YS(){return Sa=Sa||document.querySelector("base"),Sa?Sa.getAttribute("href"):null}function ZS(i){return new URL(i,document.baseURI).pathname}var KS=(()=>{class i{build(){return new XMLHttpRequest}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac})}}return i})(),Ju=new ne(""),H0=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(o=>o.supports(e)),!n)throw new Ce(5101,!1);return this._eventNameToPlugin.set(e,n),n}static{this.\u0275fac=function(n){return new(n||i)(k(Ju),k(he))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac})}}return i})(),ol=class{constructor(t){this._doc=t}},Yu="ng-app-id",$0=(()=>{class i{constructor(e,n,r,o={}){this.doc=e,this.appId=n,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ks(o),this.resetHostNodes()}addStyles(e){for(let n of e)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(e){for(let n of e)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(n=>n.remove()),e.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let n of this.getAllStyles())this.addStyleToHost(e,n)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let n of this.hostNodes)this.addStyleToHost(n,e)}onStyleRemoved(e){let n=this.styleRef;n.get(e)?.elements?.forEach(r=>r.remove()),n.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${Yu}="${this.appId}"]`);if(e?.length){let n=new Map;return e.forEach(r=>{r.textContent!=null&&n.set(r.textContent,r)}),n}return null}changeUsageCount(e,n){let r=this.styleRef;if(r.has(e)){let o=r.get(e);return o.usage+=n,o.usage}return r.set(e,{usage:n,elements:[]}),n}getStyleElement(e,n){let r=this.styleNodesInDOM,o=r?.get(n);if(o?.parentNode===e)return r.delete(n),o.removeAttribute(Yu),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=n,this.platformIsServer&&a.setAttribute(Yu,this.appId),e.appendChild(a),a}}addStyleToHost(e,n){let r=this.getStyleElement(e,n),o=this.styleRef,a=o.get(n)?.elements;a?a.push(r):o.set(n,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(n){return new(n||i)(k(le),k(Vs),k(_a,8),k(Vi))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac})}}return i})(),Zu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},im=/%COMP%/g,W0="%COMP%",QS=`_nghost-${W0}`,JS=`_ngcontent-${W0}`,eM=!0,tM=new ne("",{providedIn:"root",factory:()=>eM});function iM(i){return JS.replace(im,i)}function nM(i){return QS.replace(im,i)}function G0(i,t){return t.map(e=>e.replace(im,i))}var al=(()=>{class i{constructor(e,n,r,o,a,s,l,u=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=s,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Ks(s),this.defaultRenderer=new Ma(e,a,l,this.platformIsServer)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===ba.ShadowDom&&(n=_e(O({},n),{encapsulation:ba.Emulated}));let r=this.getOrCreateRenderer(e,n);return r instanceof sl?r.applyToHost(e):r instanceof Ea&&r.applyStyles(),r}getOrCreateRenderer(e,n){let r=this.rendererByCompId,o=r.get(n.id);if(!o){let a=this.doc,s=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,m=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(n.encapsulation){case ba.Emulated:o=new sl(l,u,n,this.appId,m,a,s,p);break;case ba.ShadowDom:return new em(l,u,e,n,a,s,this.nonce,p);default:o=new Ea(l,u,n,m,a,s,p);break}r.set(n.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(n){return new(n||i)(k(H0),k($0),k(Vs),k(tM),k(le),k(Vi),k(he),k(_a))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac})}}return i})(),Ma=class{constructor(t,e,n,r){this.eventManager=t,this.doc=e,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(Zu[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(V0(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(V0(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new Ce(-5104,!1);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;let o=Zu[r];o?t.setAttributeNS(o,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){let r=Zu[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(va.DashCase|va.Important)?t.style.setProperty(e,n,r&va.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&va.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t!=null&&(t[e]=n)}setValue(t,e){t.nodeValue=e}listen(t,e,n){if(typeof t=="string"&&(t=Yr().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(n))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function V0(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var em=class extends Ma{constructor(t,e,n,r,o,a,s,l){super(t,o,a,l),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=G0(r.id,r.styles);for(let m of u){let p=document.createElement("style");s&&p.setAttribute("nonce",s),p.textContent=m,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ea=class extends Ma{constructor(t,e,n,r,o,a,s,l){super(t,o,a,s),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?G0(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},sl=class extends Ea{constructor(t,e,n,r,o,a,s,l){let u=r+"-"+n.id;super(t,e,n,o,a,s,l,u),this.contentAttr=iM(u),this.hostAttr=nM(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}},rM=(()=>{class i extends ol{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}static{this.\u0275fac=function(n){return new(n||i)(k(le))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac})}}return i})(),q0=["alt","control","meta","shift"],oM={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},aM={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},sM=(()=>{class i extends ol{constructor(e){super(e)}supports(e){return i.parseEventName(e)!=null}addEventListener(e,n,r){let o=i.parseEventName(n),a=i.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Yr().onAndCancel(e,o.domEventName,a))}static parseEventName(e){let n=e.toLowerCase().split("."),r=n.shift();if(n.length===0||!(r==="keydown"||r==="keyup"))return null;let o=i._normalizeKey(n.pop()),a="",s=n.indexOf("code");if(s>-1&&(n.splice(s,1),a="code."),q0.forEach(u=>{let m=n.indexOf(u);m>-1&&(n.splice(m,1),a+=u+".")}),a+=o,n.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=a,l}static matchEventFullKeyCode(e,n){let r=oM[e.key]||e.key,o="";return n.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),q0.forEach(a=>{if(a!==r){let s=aM[a];s(e)&&(o+=a+".")}}),o+=r,o===n)}static eventCallback(e,n,r){return o=>{i.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>n(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(n){return new(n||i)(k(le))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac})}}return i})();function X0(i,t){return k0(O({rootComponent:i},lM(t)))}function lM(i){return{appProviders:[...pM,...i?.providers??[]],platformProviders:mM}}function cM(){Qu.makeCurrent()}function dM(){return new Wn}function uM(){return u0(document),document}var mM=[{provide:Vi,useValue:O0},{provide:m0,useValue:cM,multi:!0},{provide:le,useFactory:uM,deps:[]}];var pM=[{provide:d0,useValue:"root"},{provide:Wn,useFactory:dM,deps:[]},{provide:Ju,useClass:rM,multi:!0,deps:[le,he,Vi]},{provide:Ju,useClass:sM,multi:!0,deps:[le]},al,$0,H0,{provide:$s,useExisting:al},{provide:Qs,useClass:KS,deps:[]},[]];var Y0=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(n){return new(n||i)(k(le))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var nm=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:function(n){let r=null;return n?r=new(n||i):r=k(hM),r},providedIn:"root"})}}return i})(),hM=(()=>{class i extends nm{constructor(e){super(),this._doc=e}sanitize(e,n){if(n==null)return null;switch(e){case Ut.NONE:return n;case Ut.HTML:return $r(n,"HTML")?Hr(n):v0(this._doc,String(n)).toString();case Ut.STYLE:return $r(n,"Style")?Hr(n):n;case Ut.SCRIPT:if($r(n,"Script"))return Hr(n);throw new Ce(5200,!1);case Ut.URL:return $r(n,"URL")?Hr(n):_0(String(n));case Ut.RESOURCE_URL:if($r(n,"ResourceURL"))return Hr(n);throw new Ce(5201,!1);default:throw new Ce(5202,!1)}}bypassSecurityTrustHtml(e){return p0(e)}bypassSecurityTrustStyle(e){return h0(e)}bypassSecurityTrustScript(e){return f0(e)}bypassSecurityTrustUrl(e){return g0(e)}bypassSecurityTrustResourceUrl(e){return b0(e)}static{this.\u0275fac=function(n){return new(n||i)(k(le))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var oe="primary",ja=Symbol("RouteTitle"),lm=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function ro(i){return new lm(i)}function fM(i,t,e){let n=e.path.split("/");if(n.length>i.length||e.pathMatch==="full"&&(t.hasChildren()||n.length<i.length))return null;let r={};for(let o=0;o<n.length;o++){let a=n[o],s=i[o];if(a.startsWith(":"))r[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function gM(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!xi(i[e],t[e]))return!1;return!0}function xi(i,t){let e=i?cm(i):void 0,n=t?cm(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!ib(i[r],t[r]))return!1;return!0}function cm(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function ib(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;let e=[...i].sort(),n=[...t].sort();return e.every((r,o)=>n[o]===r)}else return i===t}function nb(i){return i.length>0?i[i.length-1]:null}function xn(i){return xu(i)?i:Xs(i)?dt(Promise.resolve(i)):G(i)}var bM={exact:ob,subset:ab},rb={exact:_M,subset:vM,ignored:()=>!0};function K0(i,t,e){return bM[e.paths](i.root,t.root,e.matrixParams)&&rb[e.queryParams](i.queryParams,t.queryParams)&&!(e.fragment==="exact"&&i.fragment!==t.fragment)}function _M(i,t){return xi(i,t)}function ob(i,t,e){if(!Jn(i.segments,t.segments)||!dl(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(let n in t.children)if(!i.children[n]||!ob(i.children[n],t.children[n],e))return!1;return!0}function vM(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>ib(i[e],t[e]))}function ab(i,t,e){return sb(i,t,t.segments,e)}function sb(i,t,e,n){if(i.segments.length>e.length){let r=i.segments.slice(0,e.length);return!(!Jn(r,e)||t.hasChildren()||!dl(r,e,n))}else if(i.segments.length===e.length){if(!Jn(i.segments,e)||!dl(i.segments,e,n))return!1;for(let r in t.children)if(!i.children[r]||!ab(i.children[r],t.children[r],n))return!1;return!0}else{let r=e.slice(0,i.segments.length),o=e.slice(i.segments.length);return!Jn(i.segments,r)||!dl(i.segments,r,n)||!i.children[oe]?!1:sb(i.children[oe],t,o,n)}}function dl(i,t,e){return t.every((n,r)=>rb[e](i[r].parameters,n.parameters))}var vn=class{constructor(t=new we([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=ro(this.queryParams),this._queryParamMap}toString(){return wM.serialize(this)}},we=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ul(this)}},Qn=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=ro(this.parameters),this._parameterMap}toString(){return cb(this)}};function yM(i,t){return Jn(i,t)&&i.every((e,n)=>xi(e.parameters,t[n].parameters))}function Jn(i,t){return i.length!==t.length?!1:i.every((e,n)=>e.path===t[n].path)}function xM(i,t){let e=[];return Object.entries(i.children).forEach(([n,r])=>{n===oe&&(e=e.concat(t(r,n)))}),Object.entries(i.children).forEach(([n,r])=>{n!==oe&&(e=e.concat(t(r,n)))}),e}var Fm=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:()=>new pl,providedIn:"root"})}}return i})(),pl=class{parse(t){let e=new um(t);return new vn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${ka(t.root,!0)}`,n=MM(t.queryParams),r=typeof t.fragment=="string"?`#${CM(t.fragment)}`:"";return`${e}${n}${r}`}},wM=new pl;function ul(i){return i.segments.map(t=>cb(t)).join("/")}function ka(i,t){if(!i.hasChildren())return ul(i);if(t){let e=i.children[oe]?ka(i.children[oe],!1):"",n=[];return Object.entries(i.children).forEach(([r,o])=>{r!==oe&&n.push(`${r}:${ka(o,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}else{let e=xM(i,(n,r)=>r===oe?[ka(i.children[oe],!1)]:[`${r}:${ka(n,!1)}`]);return Object.keys(i.children).length===1&&i.children[oe]!=null?`${ul(i)}/${e[0]}`:`${ul(i)}/(${e.join("//")})`}}function lb(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ll(i){return lb(i).replace(/%3B/gi,";")}function CM(i){return encodeURI(i)}function dm(i){return lb(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ml(i){return decodeURIComponent(i)}function Q0(i){return ml(i.replace(/\+/g,"%20"))}function cb(i){return`${dm(i.path)}${SM(i.parameters)}`}function SM(i){return Object.entries(i).map(([t,e])=>`;${dm(t)}=${dm(e)}`).join("")}function MM(i){let t=Object.entries(i).map(([e,n])=>Array.isArray(n)?n.map(r=>`${ll(e)}=${ll(r)}`).join("&"):`${ll(e)}=${ll(n)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var EM=/^[^\/()?;#]+/;function rm(i){let t=i.match(EM);return t?t[0]:""}var kM=/^[^\/()?;=#]+/;function TM(i){let t=i.match(kM);return t?t[0]:""}var IM=/^[^=?&#]+/;function PM(i){let t=i.match(IM);return t?t[0]:""}var OM=/^[^&#]+/;function DM(i){let t=i.match(OM);return t?t[0]:""}var um=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[oe]=new we(t,e)),n}parseSegment(){let t=rm(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Ce(4009,!1);return this.capture(t),new Qn(ml(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=TM(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let r=rm(this.remaining);r&&(n=r,this.capture(n))}t[ml(e)]=ml(n)}parseQueryParam(t){let e=PM(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let a=DM(this.remaining);a&&(n=a,this.capture(n))}let r=Q0(e),o=Q0(n);if(t.hasOwnProperty(r)){let a=t[r];Array.isArray(a)||(a=[a],t[r]=a),a.push(o)}else t[r]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=rm(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ce(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=oe);let a=this.parseChildren();e[o]=Object.keys(a).length===1?a[oe]:new we([],a),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Ce(4011,!1)}};function db(i){return i.segments.length>0?new we([],{[oe]:i}):i}function ub(i){let t={};for(let[n,r]of Object.entries(i.children)){let o=ub(r);if(n===oe&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))t[a]=s;else(o.segments.length>0||o.hasChildren())&&(t[n]=o)}let e=new we(i.segments,t);return AM(e)}function AM(i){if(i.numberOfChildren===1&&i.children[oe]){let t=i.children[oe];return new we(i.segments.concat(t.segments),t.children)}return i}function oo(i){return i instanceof vn}function RM(i,t,e=null,n=null){let r=mb(i);return pb(r,t,e,n)}function mb(i){let t;function e(o){let a={};for(let l of o.children){let u=e(l);a[l.outlet]=u}let s=new we(o.url,a);return o===i&&(t=s),s}let n=e(i.root),r=db(n);return t??r}function pb(i,t,e,n){let r=i;for(;r.parent;)r=r.parent;if(t.length===0)return om(r,r,r,e,n);let o=FM(t);if(o.toRoot())return om(r,r,new we([],{}),e,n);let a=NM(o,r,i),s=a.processChildren?Pa(a.segmentGroup,a.index,o.commands):fb(a.segmentGroup,a.index,o.commands);return om(r,a.segmentGroup,s,e,n)}function hl(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function Aa(i){return typeof i=="object"&&i!=null&&i.outlets}function om(i,t,e,n,r){let o={};n&&Object.entries(n).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(m=>`${m}`):`${u}`});let a;i===t?a=e:a=hb(i,t,e);let s=db(ub(a));return new vn(s,o,r)}function hb(i,t,e){let n={};return Object.entries(i.children).forEach(([r,o])=>{o===t?n[r]=e:n[r]=hb(o,t,e)}),new we(i.segments,n)}var fl=class{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&hl(n[0]))throw new Ce(4003,!1);let r=n.find(Aa);if(r&&r!==nb(n))throw new Ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function FM(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new fl(!0,0,i);let t=0,e=!1,n=i.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([l,u])=>{s[l]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:s}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((s,l)=>{l==0&&s==="."||(l==0&&s===""?e=!0:s===".."?t++:s!=""&&r.push(s))}),r):[...r,o]},[]);return new fl(e,t,n)}var io=class{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}};function NM(i,t,e){if(i.isAbsolute)return new io(t,!0,0);if(!e)return new io(t,!1,NaN);if(e.parent===null)return new io(e,!0,0);let n=hl(i.commands[0])?0:1,r=e.segments.length-1+n;return LM(e,r,i.numberOfDoubleDots)}function LM(i,t,e){let n=i,r=t,o=e;for(;o>r;){if(o-=r,n=n.parent,!n)throw new Ce(4005,!1);r=n.segments.length}return new io(n,!1,r-o)}function BM(i){return Aa(i[0])?i[0].outlets:{[oe]:i}}function fb(i,t,e){if(i??=new we([],{}),i.segments.length===0&&i.hasChildren())return Pa(i,t,e);let n=UM(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){let o=new we(i.segments.slice(0,n.pathIndex),{});return o.children[oe]=new we(i.segments.slice(n.pathIndex),i.children),Pa(o,0,r)}else return n.match&&r.length===0?new we(i.segments,{}):n.match&&!i.hasChildren()?mm(i,t,e):n.match?Pa(i,0,r):mm(i,t,e)}function Pa(i,t,e){if(e.length===0)return new we(i.segments,{});{let n=BM(e),r={};if(Object.keys(n).some(o=>o!==oe)&&i.children[oe]&&i.numberOfChildren===1&&i.children[oe].segments.length===0){let o=Pa(i.children[oe],t,e);return new we(i.segments,o.children)}return Object.entries(n).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=fb(i.children[o],t,a))}),Object.entries(i.children).forEach(([o,a])=>{n[o]===void 0&&(r[o]=a)}),new we(i.segments,r)}}function UM(i,t,e){let n=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return o;let a=i.segments[r],s=e[n];if(Aa(s))break;let l=`${s}`,u=n<e.length-1?e[n+1]:null;if(r>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!eb(l,u,a))return o;n+=2}else{if(!eb(l,{},a))return o;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function mm(i,t,e){let n=i.segments.slice(0,t),r=0;for(;r<e.length;){let o=e[r];if(Aa(o)){let l=zM(o.outlets);return new we(n,l)}if(r===0&&hl(e[0])){let l=i.segments[t];n.push(new Qn(l.path,J0(e[0]))),r++;continue}let a=Aa(o)?o.outlets[oe]:`${o}`,s=r<e.length-1?e[r+1]:null;a&&s&&hl(s)?(n.push(new Qn(a,J0(s))),r+=2):(n.push(new Qn(a,{})),r++)}return new we(n,{})}function zM(i){let t={};return Object.entries(i).forEach(([e,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(t[e]=mm(new we([],{}),0,n))}),t}function J0(i){let t={};return Object.entries(i).forEach(([e,n])=>t[e]=`${n}`),t}function eb(i,t,e){return i==e.path&&xi(t,e.parameters)}var Oa="imperative",st=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(st||{}),Qt=class{constructor(t,e){this.id=t,this.url=e}},Ra=class extends Qt{constructor(t,e,n="imperative",r=null){super(t,e),this.type=st.NavigationStart,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Hi=class extends Qt{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=st.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$t=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}($t||{}),pm=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(pm||{}),yn=class extends Qt{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=st.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},er=class extends Qt{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=st.NavigationSkipped}},Fa=class extends Qt{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=st.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},gl=class extends Qt{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=st.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hm=class extends Qt{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=st.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fm=class extends Qt{constructor(t,e,n,r,o){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=o,this.type=st.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},gm=class extends Qt{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=st.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bm=class extends Qt{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=st.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_m=class{constructor(t){this.route=t,this.type=st.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},vm=class{constructor(t){this.route=t,this.type=st.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ym=class{constructor(t){this.snapshot=t,this.type=st.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xm=class{constructor(t){this.snapshot=t,this.type=st.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wm=class{constructor(t){this.snapshot=t,this.type=st.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cm=class{constructor(t){this.snapshot=t,this.type=st.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Na=class{},La=class{constructor(t){this.url=t}};var Sm=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Cl,this.attachRef=null}},Cl=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){let r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){let n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new Sm,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),bl=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Mm(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){let e=Mm(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Em(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Em(t,this._root).map(e=>e.value)}};function Mm(i,t){if(i===t.value)return t;for(let e of t.children){let n=Mm(i,e);if(n)return n}return null}function Em(i,t){if(i===t.value)return[t];for(let e of t.children){let n=Em(i,e);if(n.length)return n.unshift(t),n}return[]}var Ht=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function to(i){let t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}var _l=class extends bl{constructor(t,e){super(t),this.snapshot=e,Lm(this,t)}toString(){return this.snapshot.toString()}};function gb(i){let t=jM(i),e=new De([new Qn("",{})]),n=new De({}),r=new De({}),o=new De({}),a=new De(""),s=new tr(e,n,o,a,r,oe,i,t.root);return s.snapshot=t.root,new _l(new Ht(s,[]),t)}function jM(i){let t={},e={},n={},r="",o=new Ba([],t,n,r,e,oe,i,null,{});return new vl("",new Ht(o,[]))}var tr=class{constructor(t,e,n,r,o,a,s,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(J(u=>u[ja]))??G(void 0),this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(t=>ro(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(t=>ro(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Nm(i,t,e="emptyOnly"){let n,{routeConfig:r}=i;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?n={params:O(O({},t.params),i.params),data:O(O({},t.data),i.data),resolve:O(O(O(O({},i.data),t.data),r?.data),i._resolvedData)}:n={params:O({},i.params),data:O({},i.data),resolve:O(O({},i.data),i._resolvedData??{})},r&&_b(r)&&(n.resolve[ja]=r.title),n}var Ba=class{get title(){return this.data?.[ja]}constructor(t,e,n,r,o,a,s,l,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=o,this.outlet=a,this.component=s,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ro(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ro(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(n=>n.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},vl=class extends bl{constructor(t,e){super(e),this.url=t,Lm(this,e)}toString(){return bb(this._root)}};function Lm(i,t){t.value._routerState=i,t.children.forEach(e=>Lm(i,e))}function bb(i){let t=i.children.length>0?` { ${i.children.map(bb).join(", ")} } `:"";return`${i.value}${t}`}function am(i){if(i.snapshot){let t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,xi(t.queryParams,e.queryParams)||i.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&i.fragmentSubject.next(e.fragment),xi(t.params,e.params)||i.paramsSubject.next(e.params),gM(t.url,e.url)||i.urlSubject.next(e.url),xi(t.data,e.data)||i.dataSubject.next(e.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function km(i,t){let e=xi(i.params,t.params)&&yM(i.url,t.url),n=!i.parent!=!t.parent;return e&&!n&&(!i.parent||km(i.parent,t.parent))}function _b(i){return typeof i.title=="string"||i.title===null}var Bm=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new pe,this.deactivateEvents=new pe,this.attachEvents=new pe,this.detachEvents=new pe,this.parentContexts=H(Cl),this.location=H(gn),this.changeDetector=H(yt),this.environmentInjector=H(jr),this.inputBinder=H(Um,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:n,previousValue:r}=e.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ce(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new Ce(4013,!1);this._activatedRoute=e;let r=this.location,a=e.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,l=new Tm(e,s,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:l,environmentInjector:n??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=K({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[$e]})}}return i})(),Tm=class i{__ngOutletInjector(t){return new i(this.route,this.childContexts,t)}constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===tr?this.route:t===Cl?this.childContexts:this.parent.get(t,e)}},Um=new ne("");function VM(i,t,e){let n=Ua(i,t._root,e?e._root:void 0);return new _l(n,t)}function Ua(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){let n=e.value;n._futureSnapshot=t.value;let r=qM(i,t,e);return new Ht(n,r)}else{if(i.shouldAttach(t.value)){let o=i.retrieve(t.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(s=>Ua(i,s)),a}}let n=HM(t.value),r=t.children.map(o=>Ua(i,o));return new Ht(n,r)}}function qM(i,t,e){return t.children.map(n=>{for(let r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Ua(i,n,r);return Ua(i,n)})}function HM(i){return new tr(new De(i.url),new De(i.params),new De(i.queryParams),new De(i.fragment),new De(i.data),i.outlet,i.component,i)}var vb="ngNavigationCancelingError";function yb(i,t){let{redirectTo:e,navigationBehaviorOptions:n}=oo(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=xb(!1,$t.Redirect);return r.url=e,r.navigationBehaviorOptions=n,r}function xb(i,t){let e=new Error(`NavigationCancelingError: ${i||""}`);return e[vb]=!0,e.cancellationCode=t,e}function $M(i){return wb(i)&&oo(i.url)}function wb(i){return!!i&&i[vb]}var WM=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=ae({type:i,selectors:[["ng-component"]],standalone:!0,features:[se],decls:1,vars:0,template:function(n,r){n&1&&_(0,"router-outlet")},dependencies:[Bm],encapsulation:2})}}return i})();function GM(i,t){return i.providers&&!i._injector&&(i._injector=S0(i.providers,t,`Route: ${i.path}`)),i._injector??t}function zm(i){let t=i.children&&i.children.map(zm),e=t?_e(O({},i),{children:t}):O({},i);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==oe&&(e.component=WM),e}function wi(i){return i.outlet||oe}function XM(i,t){let e=i.filter(n=>wi(n)===t);return e.push(...i.filter(n=>wi(n)!==t)),e}function Va(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var YM=(i,t,e,n)=>J(r=>(new Im(t,r.targetRouterState,r.currentRouterState,e,n).activate(i),r)),Im=class{constructor(t,e,n,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),am(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){let r=to(e);t.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],n),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(t,e,n){let r=t.value,o=e?e.value:null;if(r===o)if(r.component){let a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(t,e,a.children)}else this.deactivateChildRoutes(t,e,n);else o&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,o=to(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(n&&n.outlet){let a=n.outlet.detach(),s=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:s})}}deactivateRouteAndOutlet(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,o=to(t);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,e,n){let r=to(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],n),this.forwardEvent(new Cm(o.value.snapshot))}),t.children.length&&this.forwardEvent(new xm(t.value.snapshot))}activateRoutes(t,e,n){let r=t.value,o=e?e.value:null;if(am(r),r===o)if(r.component){let a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,a.children)}else this.activateChildRoutes(t,e,n);else if(r.component){let a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),am(s.route.value),this.activateChildRoutes(t,null,a.children)}else{let s=Va(r.snapshot);a.attachRef=null,a.route=r,a.injector=s,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,n)}},yl=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},no=class{constructor(t,e){this.component=t,this.route=e}};function ZM(i,t,e){let n=i._root,r=t?t._root:null;return Ta(n,r,e,[n.value])}function KM(i){let t=i.routeConfig?i.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:i,guards:t}}function so(i,t){let e=Symbol(),n=t.get(i,e);return n===e?typeof i=="function"&&!c0(i)?i:t.get(i):n}function Ta(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=to(t);return i.children.forEach(a=>{QM(a,o[a.value.outlet],e,n.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>Da(s,e.getContext(a),r)),r}function QM(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=i.value,a=t?t.value:null,s=e?e.getContext(i.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let l=JM(a,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new yl(n)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Ta(i,t,s?s.children:null,n,r):Ta(i,t,e,n,r),l&&s&&s.outlet&&s.outlet.isActivated&&r.canDeactivateChecks.push(new no(s.outlet.component,a))}else a&&Da(t,s,r),r.canActivateChecks.push(new yl(n)),o.component?Ta(i,null,s?s.children:null,n,r):Ta(i,null,e,n,r);return r}function JM(i,t,e){if(typeof e=="function")return e(i,t);switch(e){case"pathParamsChange":return!Jn(i.url,t.url);case"pathParamsOrQueryParamsChange":return!Jn(i.url,t.url)||!xi(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!km(i,t)||!xi(i.queryParams,t.queryParams);case"paramsChange":default:return!km(i,t)}}function Da(i,t,e){let n=to(i),r=i.value;Object.entries(n).forEach(([o,a])=>{r.component?t?Da(a,t.children.getContext(o),e):Da(a,null,e):Da(a,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new no(t.outlet.component,r)):e.canDeactivateChecks.push(new no(null,r)):e.canDeactivateChecks.push(new no(null,r))}function qa(i){return typeof i=="function"}function eE(i){return typeof i=="boolean"}function tE(i){return i&&qa(i.canLoad)}function iE(i){return i&&qa(i.canActivate)}function nE(i){return i&&qa(i.canActivateChild)}function rE(i){return i&&qa(i.canDeactivate)}function oE(i){return i&&qa(i.canMatch)}function Cb(i){return i instanceof i0||i?.name==="EmptyError"}var cl=Symbol("INITIAL_VALUE");function ao(){return bt(i=>ha(i.map(t=>t.pipe(Bt(1),li(cl)))).pipe(J(t=>{for(let e of t)if(e!==!0){if(e===cl)return cl;if(e===!1||e instanceof vn)return e}return!0}),kt(t=>t!==cl),Bt(1)))}function aE(i,t){return Kt(e=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=e;return a.length===0&&o.length===0?G(_e(O({},e),{guardsResult:!0})):sE(a,n,r,i).pipe(Kt(s=>s&&eE(s)?lE(n,o,i,t):G(s)),J(s=>_e(O({},e),{guardsResult:s})))})}function sE(i,t,e,n){return dt(i).pipe(Kt(r=>pE(r.component,r.route,e,t,n)),pn(r=>r!==!0,!0))}function lE(i,t,e,n){return dt(t).pipe(qn(r=>Ls(dE(r.route.parent,n),cE(r.route,n),mE(i,r.path,e),uE(i,r.route,e))),pn(r=>r!==!0,!0))}function cE(i,t){return i!==null&&t&&t(new wm(i)),G(!0)}function dE(i,t){return i!==null&&t&&t(new ym(i)),G(!0)}function uE(i,t,e){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return G(!0);let r=n.map(o=>Cu(()=>{let a=Va(t)??e,s=so(o,a),l=iE(s)?s.canActivate(t,i):ji(a,()=>s(t,i));return xn(l).pipe(pn())}));return G(r).pipe(ao())}function mE(i,t,e){let n=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(a=>KM(a)).filter(a=>a!==null).map(a=>Cu(()=>{let s=a.guards.map(l=>{let u=Va(a.node)??e,m=so(l,u),p=nE(m)?m.canActivateChild(n,i):ji(u,()=>m(n,i));return xn(p).pipe(pn())});return G(s).pipe(ao())}));return G(o).pipe(ao())}function pE(i,t,e,n,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return G(!0);let a=o.map(s=>{let l=Va(t)??r,u=so(s,l),m=rE(u)?u.canDeactivate(i,t,e,n):ji(l,()=>u(i,t,e,n));return xn(m).pipe(pn())});return G(a).pipe(ao())}function hE(i,t,e,n){let r=t.canLoad;if(r===void 0||r.length===0)return G(!0);let o=r.map(a=>{let s=so(a,i),l=tE(s)?s.canLoad(t,e):ji(i,()=>s(t,e));return xn(l)});return G(o).pipe(ao(),Sb(n))}function Sb(i){return t0(Fe(t=>{if(oo(t))throw yb(i,t)}),J(t=>t===!0))}function fE(i,t,e,n){let r=t.canMatch;if(!r||r.length===0)return G(!0);let o=r.map(a=>{let s=so(a,i),l=oE(s)?s.canMatch(t,e):ji(i,()=>s(t,e));return xn(l)});return G(o).pipe(ao(),Sb(n))}var za=class{constructor(t){this.segmentGroup=t||null}},xl=class extends Error{constructor(t){super(),this.urlTree=t}};function eo(i){return Vn(new za(i))}function gE(i){return Vn(new Ce(4e3,!1))}function bE(i){return Vn(xb(!1,$t.GuardRejected))}var Pm=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return G(n);if(r.numberOfChildren>1||!r.children[oe])return gE(t.redirectTo);r=r.children[oe]}}applyRedirectCommands(t,e,n){let r=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n);if(e.startsWith("/"))throw new xl(r);return r}applyRedirectCreateUrlTree(t,e,n,r){let o=this.createSegmentGroup(t,e.root,n,r);return new vn(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let n={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let s=o.substring(1);n[r]=e[s]}else n[r]=o}),n}createSegmentGroup(t,e,n,r){let o=this.createSegments(t,e.segments,n,r),a={};return Object.entries(e.children).forEach(([s,l])=>{a[s]=this.createSegmentGroup(t,l,n,r)}),new we(o,a)}createSegments(t,e,n,r){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,n))}findPosParam(t,e,n){let r=n[e.path.substring(1)];if(!r)throw new Ce(4001,!1);return r}findOrReturn(t,e){let n=0;for(let r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}},Om={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _E(i,t,e,n,r){let o=jm(i,t,e);return o.matched?(n=GM(t,n),fE(n,t,e,r).pipe(J(a=>a===!0?o:O({},Om)))):G(o)}function jm(i,t,e){if(t.path==="**")return vE(e);if(t.path==="")return t.pathMatch==="full"&&(i.hasChildren()||e.length>0)?O({},Om):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||fM)(e,i,t);if(!r)return O({},Om);let o={};Object.entries(r.posParams??{}).forEach(([s,l])=>{o[s]=l.path});let a=r.consumed.length>0?O(O({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function vE(i){return{matched:!0,parameters:i.length>0?nb(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function tb(i,t,e,n){return e.length>0&&wE(i,e,n)?{segmentGroup:new we(t,xE(n,new we(e,i.children))),slicedSegments:[]}:e.length===0&&CE(i,e,n)?{segmentGroup:new we(i.segments,yE(i,e,n,i.children)),slicedSegments:e}:{segmentGroup:new we(i.segments,i.children),slicedSegments:e}}function yE(i,t,e,n){let r={};for(let o of e)if(Sl(i,t,o)&&!n[wi(o)]){let a=new we([],{});r[wi(o)]=a}return O(O({},n),r)}function xE(i,t){let e={};e[oe]=t;for(let n of i)if(n.path===""&&wi(n)!==oe){let r=new we([],{});e[wi(n)]=r}return e}function wE(i,t,e){return e.some(n=>Sl(i,t,n)&&wi(n)!==oe)}function CE(i,t,e){return e.some(n=>Sl(i,t,n))}function Sl(i,t,e){return(i.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function SE(i,t,e,n){return wi(i)!==n&&(n===oe||!Sl(t,e,i))?!1:jm(t,i,e).matched}function ME(i,t,e){return t.length===0&&!i.children[e]}var Dm=class{};function EE(i,t,e,n,r,o,a="emptyOnly"){return new Am(i,t,e,n,r,a,o).recognize()}var kE=31,Am=class{constructor(t,e,n,r,o,a,s){this.injector=t,this.configLoader=e,this.rootComponentType=n,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new Pm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Ce(4002,`'${t.segmentGroup}'`)}recognize(){let t=tb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(J(e=>{let n=new Ba([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,{},oe,this.rootComponentType,null,{}),r=new Ht(n,e),o=new vl("",r),a=RM(n,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root,null),{state:o,tree:a}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,oe).pipe(un(n=>{if(n instanceof xl)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof za?this.noMatchError(n):n}))}inheritParamsAndData(t,e){let n=t.value,r=Nm(n,e,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o,n))}processSegmentGroup(t,e,n,r){return n.segments.length===0&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,r,!0).pipe(J(o=>o instanceof Ht?[o]:[]))}processChildren(t,e,n){let r=[];for(let o of Object.keys(n.children))o==="primary"?r.unshift(o):r.push(o);return dt(r).pipe(qn(o=>{let a=n.children[o],s=XM(e,o);return this.processSegmentGroup(t,s,a,o)}),s0((o,a)=>(o.push(...a),o)),Mu(null),a0(),Kt(o=>{if(o===null)return eo(n);let a=Mb(o);return TE(a),G(a)}))}processSegment(t,e,n,r,o,a){return dt(e).pipe(qn(s=>this.processSegmentAgainstRoute(s._injector??t,e,s,n,r,o,a).pipe(un(l=>{if(l instanceof za)return G(null);throw l}))),pn(s=>!!s),un(s=>{if(Cb(s))return ME(n,r,o)?G(new Dm):eo(n);throw s}))}processSegmentAgainstRoute(t,e,n,r,o,a,s){return SE(n,r,o,a)?n.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,n,o,a):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,n,o,a):eo(r):eo(r)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,o,a){let{matched:s,consumedSegments:l,positionalParamSegments:u,remainingSegments:m}=jm(e,r,o);if(!s)return eo(e);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kE&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return this.applyRedirects.lineralizeSegments(r,p).pipe(Kt(y=>this.processSegment(t,n,e,y.concat(m),a,!1)))}matchSegmentAgainstRoute(t,e,n,r,o){let a=_E(e,n,r,t,this.urlSerializer);return n.path==="**"&&(e.children={}),a.pipe(bt(s=>s.matched?(t=n._injector??t,this.getChildConfig(t,n,r).pipe(bt(({routes:l})=>{let u=n._loadedInjector??t,{consumedSegments:m,remainingSegments:p,parameters:y}=s,v=new Ba(m,y,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,PE(n),wi(n),n.component??n._loadedComponent??null,n,OE(n)),{segmentGroup:P,slicedSegments:b}=tb(e,m,p,l);if(b.length===0&&P.hasChildren())return this.processChildren(u,l,P).pipe(J(D=>D===null?null:new Ht(v,D)));if(l.length===0&&b.length===0)return G(new Ht(v,[]));let x=wi(n)===o;return this.processSegment(u,l,P,b,x?oe:o,!0).pipe(J(D=>new Ht(v,D instanceof Ht?[D]:[])))}))):eo(e)))}getChildConfig(t,e,n){return e.children?G({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?G({routes:e._loadedRoutes,injector:e._loadedInjector}):hE(t,e,n,this.urlSerializer).pipe(Kt(r=>r?this.configLoader.loadChildren(t,e).pipe(Fe(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):bE(e))):G({routes:[],injector:t})}};function TE(i){i.sort((t,e)=>t.value.outlet===oe?-1:e.value.outlet===oe?1:t.value.outlet.localeCompare(e.value.outlet))}function IE(i){let t=i.value.routeConfig;return t&&t.path===""}function Mb(i){let t=[],e=new Set;for(let n of i){if(!IE(n)){t.push(n);continue}let r=t.find(o=>n.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...n.children),e.add(r)):t.push(n)}for(let n of e){let r=Mb(n.children);t.push(new Ht(n.value,r))}return t.filter(n=>!e.has(n))}function PE(i){return i.data||{}}function OE(i){return i.resolve||{}}function DE(i,t,e,n,r,o){return Kt(a=>EE(i,t,e,n,a.extractedUrl,r,o).pipe(J(({state:s,tree:l})=>_e(O({},a),{targetSnapshot:s,urlAfterRedirects:l}))))}function AE(i,t){return Kt(e=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return G(e);let o=new Set(r.map(l=>l.route)),a=new Set;for(let l of o)if(!a.has(l))for(let u of Eb(l))a.add(u);let s=0;return dt(a).pipe(qn(l=>o.has(l)?RE(l,n,i,t):(l.data=Nm(l,l.parent,i).resolve,G(void 0))),Fe(()=>s++),Eu(1),Kt(l=>s===a.size?G(e):dn))})}function Eb(i){let t=i.children.map(e=>Eb(e)).flat();return[i,...t]}function RE(i,t,e,n){let r=i.routeConfig,o=i._resolve;return r?.title!==void 0&&!_b(r)&&(o[ja]=r.title),FE(o,i,t,n).pipe(J(a=>(i._resolvedData=a,i.data=Nm(i,i.parent,e).resolve,null)))}function FE(i,t,e,n){let r=cm(i);if(r.length===0)return G({});let o={};return dt(r).pipe(Kt(a=>NE(i[a],t,e,n).pipe(pn(),Fe(s=>{o[a]=s}))),Eu(1),o0(o),un(a=>Cb(a)?dn:Vn(a)))}function NE(i,t,e,n){let r=Va(t)??n,o=so(i,r),a=o.resolve?o.resolve(t,e):ji(r,()=>o(t,e));return xn(a)}function sm(i){return bt(t=>{let e=i(t);return e?dt(e).pipe(J(()=>t)):G(t)})}var kb=(()=>{class i{buildTitle(e){let n,r=e.root;for(;r!==void 0;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(o=>o.outlet===oe);return n}getResolvedTitleForRoute(e){return e.data[ja]}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:()=>H(LE),providedIn:"root"})}}return i})(),LE=(()=>{class i extends kb{constructor(e){super(),this.title=e}updateTitle(e){let n=this.buildTitle(e);n!==void 0&&this.title.setTitle(n)}static{this.\u0275fac=function(n){return new(n||i)(k(Y0))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Vm=new ne("",{providedIn:"root",factory:()=>({})}),qm=new ne(""),BE=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=H(Ru)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return G(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let n=xn(e.loadComponent()).pipe(J(Tb),Fe(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),mn(()=>{this.componentLoaders.delete(e)})),r=new yu(n,()=>new ye).pipe(vu());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return G({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let o=UE(n,this.compiler,e,this.onLoadEndListener).pipe(mn(()=>{this.childrenLoaders.delete(n)})),a=new yu(o,()=>new ye).pipe(vu());return this.childrenLoaders.set(n,a),a}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function UE(i,t,e,n){return xn(i.loadChildren()).pipe(J(Tb),Kt(r=>r instanceof C0||Array.isArray(r)?G(r):dt(t.compileModuleAsync(r))),J(r=>{n&&n(i);let o,a,s=!1;return Array.isArray(r)?(a=r,s=!0):(o=r.create(e).injector,a=o.get(qm,[],{optional:!0,self:!0}).flat()),{routes:a.map(zm),injector:o}}))}function zE(i){return i&&typeof i=="object"&&"default"in i}function Tb(i){return zE(i)?i.default:i}var Hm=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:()=>H(jE),providedIn:"root"})}}return i})(),jE=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),VE=new ne("");var qE=(()=>{class i{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ye,this.transitionAbortSubject=new ye,this.configLoader=H(BE),this.environmentInjector=H(jr),this.urlSerializer=H(Fm),this.rootContexts=H(Cl),this.location=H(Zr),this.inputBindingEnabled=H(Um,{optional:!0})!==null,this.titleStrategy=H(kb),this.options=H(Vm,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=H(Hm),this.createViewTransition=H(VE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let e=r=>this.events.next(new _m(r)),n=r=>this.events.next(new vm(r));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let n=++this.navigationId;this.transitions?.next(_e(O(O({},this.transitions.value),e),{id:n}))}setupNavigations(e,n,r){return this.transitions=new De({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Oa,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(kt(o=>o.id!==0),J(o=>_e(O({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),bt(o=>{let a=!1,s=!1;return G(o).pipe(bt(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",$t.SupersededByNewNavigation),dn;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?_e(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),m=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!u&&m!=="reload"){let p="";return this.events.next(new er(l.id,this.urlSerializer.serialize(l.rawUrl),p,pm.IgnoredSameUrlNavigation)),l.resolve(null),dn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return G(l).pipe(bt(p=>{let y=this.transitions?.getValue();return this.events.next(new Ra(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),y!==this.transitions?.getValue()?dn:Promise.resolve(p)}),DE(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Fe(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=_e(O({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let y=new gl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(y)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:y,source:v,restoredState:P,extras:b}=l,x=new Ra(p,this.urlSerializer.serialize(y),v,P);this.events.next(x);let D=gb(this.rootComponentType).snapshot;return this.currentTransition=o=_e(O({},l),{targetSnapshot:D,urlAfterRedirects:y,extras:_e(O({},b),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=y,G(o)}else{let p="";return this.events.next(new er(l.id,this.urlSerializer.serialize(l.extractedUrl),p,pm.IgnoredByUrlHandlingStrategy)),l.resolve(null),dn}}),Fe(l=>{let u=new hm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),J(l=>(this.currentTransition=o=_e(O({},l),{guards:ZM(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),aE(this.environmentInjector,l=>this.events.next(l)),Fe(l=>{if(o.guardsResult=l.guardsResult,oo(l.guardsResult))throw yb(this.urlSerializer,l.guardsResult);let u=new fm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),kt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",$t.GuardRejected),!1)),sm(l=>{if(l.guards.canActivateChecks.length)return G(l).pipe(Fe(u=>{let m=new gm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(m)}),bt(u=>{let m=!1;return G(u).pipe(AE(this.paramsInheritanceStrategy,this.environmentInjector),Fe({next:()=>m=!0,complete:()=>{m||this.cancelNavigationTransition(u,"",$t.NoDataFromResolver)}}))}),Fe(u=>{let m=new bm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(m)}))}),sm(l=>{let u=m=>{let p=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(m.routeConfig).pipe(Fe(y=>{m.component=y}),J(()=>{})));for(let y of m.children)p.push(...u(y));return p};return ha(u(l.targetSnapshot.root)).pipe(Mu(null),Bt(1))}),sm(()=>this.afterPreactivation()),bt(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,m=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return m?dt(m).pipe(J(()=>o)):G(o)}),J(l=>{let u=VM(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=_e(O({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Fe(()=>{this.events.next(new Na)}),YM(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Bt(1),Fe({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Hi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),ut(this.transitionAbortSubject.pipe(Fe(l=>{throw l}))),mn(()=>{!a&&!s&&this.cancelNavigationTransition(o,"",$t.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),un(l=>{if(s=!0,wb(l))this.events.next(new yn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),$M(l)?this.events.next(new La(l.url)):o.resolve(!1);else{this.events.next(new Fa(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(e.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return dn}))}))}cancelNavigationTransition(e,n,r){let o=new yn(e.id,this.urlSerializer.serialize(e.extractedUrl),n,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function HE(i){return i!==Oa}var $E=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:()=>H(WE),providedIn:"root"})}}return i})(),Rm=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},WE=(()=>{class i extends Rm{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Tt(i)))(r||i)}})()}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Ib=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:()=>H(GE),providedIn:"root"})}}return i})(),GE=(()=>{class i extends Ib{constructor(){super(...arguments),this.location=H(Zr),this.urlSerializer=H(Fm),this.options=H(Vm,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=H(Hm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new vn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=gb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(n=>{n.type==="popstate"&&e(n.url,n.state)})}handleRouterEvent(e,n){if(e instanceof Ra)this.stateMemento=this.createStateMemento();else if(e instanceof er)this.rawUrlTree=n.initialUrl;else if(e instanceof gl){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(r,n)}}else e instanceof Na?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,n))):e instanceof yn&&(e.code===$t.GuardRejected||e.code===$t.NoDataFromResolver)?this.restoreHistory(n):e instanceof Fa?this.restoreHistory(n,!0):e instanceof Hi&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,n){let r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){let o=this.browserPageId,a=O(O({},n.extras.state),this.generateNgRouterState(n.id,o));this.location.replaceState(r,"",a)}else{let o=O(O({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(e,n=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Tt(i)))(r||i)}})()}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Ia=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(Ia||{});function XE(i,t){i.events.pipe(kt(e=>e instanceof Hi||e instanceof yn||e instanceof Fa||e instanceof er),J(e=>e instanceof Hi||e instanceof er?Ia.COMPLETE:(e instanceof yn?e.code===$t.Redirect||e.code===$t.SupersededByNewNavigation:!1)?Ia.REDIRECTING:Ia.FAILED),kt(e=>e!==Ia.REDIRECTING),Bt(1)).subscribe(()=>{t()})}function YE(i){throw i}var ZE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},mt=(()=>{class i{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=H(Gs),this.stateManager=H(Ib),this.options=H(Vm,{optional:!0})||{},this.pendingTasks=H(Ws),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=H(qE),this.urlSerializer=H(Fm),this.location=H(Zr),this.urlHandlingStrategy=H(Hm),this._events=new ye,this.errorHandler=this.options.errorHandler||YE,this.navigated=!1,this.routeReuseStrategy=H($E),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=H(qm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!H(Um,{optional:!0}),this.eventsSubscription=new Zt,this.isNgZoneEnabled=H(he)instanceof he&&he.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(n=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(n,o),n instanceof yn&&n.code!==$t.Redirect&&n.code!==$t.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof Hi)this.navigated=!0;else if(n instanceof La){let a=this.urlHandlingStrategy.merge(n.url,r.currentRawUrl),s={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||HE(r.source)};this.scheduleNavigation(a,Oa,null,s,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}JE(n)&&this._events.next(n)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Oa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",n)},0)})}navigateToSyncWithBrowser(e,n,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let l=O({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let s=this.parseUrl(e);this.scheduleNavigation(s,n,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(zm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:l}=n,u=l?this.currentUrlTree.fragment:a,m=null;switch(s){case"merge":m=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=o||null}m!==null&&(m=this.removeEmptyProps(m));let p;try{let y=r?r.snapshot:this.routerState.snapshot.root;p=mb(y)}catch{(typeof e[0]!="string"||!e[0].startsWith("/"))&&(e=[]),p=this.currentUrlTree.root}return pb(p,e,m,u??null)}navigateByUrl(e,n={skipLocationChange:!1}){let r=oo(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Oa,null,n)}navigate(e,n={skipLocationChange:!1}){return QE(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,n){let r;if(n===!0?r=O({},ZE):n===!1?r=O({},KE):r=n,oo(e))return K0(this.currentUrlTree,e,r);let o=this.parseUrl(e);return K0(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((n,[r,o])=>(o!=null&&(n[r]=o),n),{})}scheduleNavigation(e,n,r,o,a){if(this.disposed)return Promise.resolve(!1);let s,l,u;a?(s=a.resolve,l=a.reject,u=a.promise):u=new Promise((p,y)=>{s=p,l=y});let m=this.pendingTasks.add();return XE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:s,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function QE(i){for(let t=0;t<i.length;t++)if(i[t]==null)throw new Ce(4008,!1)}function JE(i){return!(i instanceof Na)&&!(i instanceof La)}var wl=(()=>{class i{constructor(e,n,r,o,a,s){this.router=e,this.route=n,this.tabIndexAttribute=r,this.renderer=o,this.el=a,this.locationStrategy=s,this.href=null,this.commands=null,this.onChanges=new ye,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(u=>{u instanceof Hi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){e!=null?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,n,r,o,a){let s=this.urlTree;if(s===null||this.isAnchorElement&&(e!==0||n||r||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(s,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let n=this.href===null?null:y0(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(e,n){let r=this.renderer,o=this.el.nativeElement;n!==null?r.setAttribute(o,e,n):r.removeAttribute(o,e)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(n){return new(n||i)(M(mt),M(tr),Vr("tabindex"),M(fn),M(ge),M(Nu))}}static{this.\u0275dir=K({type:i,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,r){n&1&&I("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),n&2&&Ke("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[te.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Qe],skipLocationChange:[te.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Qe],replaceUrl:[te.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Qe],routerLink:"routerLink"},standalone:!0,features:[vt,$e]})}}return i})(),Pb=(()=>{class i{get isActive(){return this._isActive}constructor(e,n,r,o,a){this.router=e,this.element=n,this.renderer=r,this.cdr=o,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new pe,this.routerEventsSubscription=e.events.subscribe(s=>{s instanceof Hi&&this.update()})}ngAfterContentInit(){G(this.links.changes,G(null)).pipe(wu()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let e=[...this.links.toArray(),this.link].filter(n=>!!n).map(n=>n.onChanges);this.linkInputChangesSubscription=dt(e).pipe(wu()).subscribe(n=>{this._isActive!==this.isLinkActive(this.router)(n)&&this.update()})}set routerLinkActive(e){let n=Array.isArray(e)?e:e.split(" ");this.classes=n.filter(r=>!!r)}ngOnChanges(e){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let e=this.hasActiveLinks();this.classes.forEach(n=>{e?this.renderer.addClass(this.element.nativeElement,n):this.renderer.removeClass(this.element.nativeElement,n)}),e&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==e&&(this._isActive=e,this.cdr.markForCheck(),this.isActiveChange.emit(e))})}isLinkActive(e){let n=e2(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>{let o=r.urlTree;return o?e.isActive(o,n):!1}}hasActiveLinks(){let e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.links.some(e)}static{this.\u0275fac=function(n){return new(n||i)(M(mt),M(ge),M(fn),M(yt),M(wl,8))}}static{this.\u0275dir=K({type:i,selectors:[["","routerLinkActive",""]],contentQueries:function(n,r,o){if(n&1&&Vt(o,wl,5),n&2){let a;ot(a=at())&&(r.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[$e]})}}return i})();function e2(i){return!!i.paths}var t2=new ne("");function Ob(i,...t){return Hn([{provide:qm,multi:!0,useValue:i},[],{provide:tr,useFactory:i2,deps:[mt]},{provide:Au,multi:!0,useFactory:n2},t.map(e=>e.\u0275providers)])}function i2(i){return i.routerState.root}function n2(){let i=H($n);return t=>{let e=i.get(Xr);if(t!==e.components[0])return;let n=i.get(mt),r=i.get(r2);i.get(o2)===1&&n.initialNavigation(),i.get(a2,null,ku.Optional)?.setUpPreloading(),i.get(t2,null,ku.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var r2=new ne("",{factory:()=>new ye}),o2=new ne("",{providedIn:"root",factory:()=>1});var a2=new ne("");var jb=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(n){return new(n||i)(M(fn),M(ge))}}static{this.\u0275dir=K({type:i})}}return i})(),Al=(()=>{class i extends jb{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Tt(i)))(r||i)}})()}static{this.\u0275dir=K({type:i,features:[Ne]})}}return i})(),uo=new ne("");var s2={provide:uo,useExisting:_t(()=>Dt),multi:!0};function l2(){let i=Yr()?Yr().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var c2=new ne(""),Dt=(()=>{class i extends jb{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!l2())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(n){return new(n||i)(M(fn),M(ge),M(c2,8))}}static{this.\u0275dir=K({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&I("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[Ue([s2]),Ne]})}}return i})();function wn(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function Vb(i){return i!=null&&typeof i.length=="number"}var mo=new ne(""),Ym=new ne(""),d2=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Te=class{static min(t){return qb(t)}static max(t){return Hb(t)}static required(t){return $b(t)}static requiredTrue(t){return u2(t)}static email(t){return m2(t)}static minLength(t){return p2(t)}static maxLength(t){return h2(t)}static pattern(t){return f2(t)}static nullValidator(t){return El(t)}static compose(t){return Kb(t)}static composeAsync(t){return Jb(t)}};function qb(i){return t=>{if(wn(t.value)||wn(i))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}function Hb(i){return t=>{if(wn(t.value)||wn(i))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}function $b(i){return wn(i.value)?{required:!0}:null}function u2(i){return i.value===!0?null:{required:!0}}function m2(i){return wn(i.value)||d2.test(i.value)?null:{email:!0}}function p2(i){return t=>wn(t.value)||!Vb(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}function h2(i){return t=>Vb(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}function f2(i){if(!i)return El;let t,e;return typeof i=="string"?(e="",i.charAt(0)!=="^"&&(e+="^"),e+=i,i.charAt(i.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),n=>{if(wn(n.value))return null;let r=n.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function El(i){return null}function Wb(i){return i!=null}function Gb(i){return Xs(i)?dt(i):i}function Xb(i){let t={};return i.forEach(e=>{t=e!=null?O(O({},t),e):t}),Object.keys(t).length===0?null:t}function Yb(i,t){return t.map(e=>e(i))}function g2(i){return!i.validate}function Zb(i){return i.map(t=>g2(t)?t:e=>t.validate(e))}function Kb(i){if(!i)return null;let t=i.filter(Wb);return t.length==0?null:function(e){return Xb(Yb(e,t))}}function Qb(i){return i!=null?Kb(Zb(i)):null}function Jb(i){if(!i)return null;let t=i.filter(Wb);return t.length==0?null:function(e){let n=Yb(e,t).map(Gb);return Bs(n).pipe(J(Xb))}}function e_(i){return i!=null?Jb(Zb(i)):null}function Db(i,t){return i===null?[t]:Array.isArray(i)?[...i,t]:[i,t]}function t_(i){return i._rawValidators}function i_(i){return i._rawAsyncValidators}function $m(i){return i?Array.isArray(i)?i:[i]:[]}function kl(i,t){return Array.isArray(i)?i.includes(t):i===t}function Ab(i,t){let e=$m(t);return $m(i).forEach(r=>{kl(e,r)||e.push(r)}),e}function Rb(i,t){return $m(t).filter(e=>!kl(i,e))}var Tl=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Qb(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=e_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},ir=class extends Tl{get formDirective(){return null}get path(){return null}},nr=class extends Tl{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Il=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},b2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},H6=_e(O({},b2),{"[class.ng-submitted]":"isSubmitted"}),At=(()=>{class i extends Il{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(M(nr,2))}}static{this.\u0275dir=K({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&$("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Ne]})}}return i})(),po=(()=>{class i extends Il{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(M(ir,10))}}static{this.\u0275dir=K({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){n&2&&$("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Ne]})}}return i})();var $a="VALID",Ml="INVALID",lo="PENDING",Wa="DISABLED";function Zm(i){return(Rl(i)?i.validators:i)||null}function _2(i){return Array.isArray(i)?Qb(i):i||null}function Km(i,t){return(Rl(t)?t.asyncValidators:i)||null}function v2(i){return Array.isArray(i)?e_(i):i||null}function Rl(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function n_(i,t,e){let n=i.controls;if(!(t?Object.keys(n):n).length)throw new Ce(1e3,"");if(!n[e])throw new Ce(1001,"")}function r_(i,t,e){i._forEachChild((n,r)=>{if(e[r]===void 0)throw new Ce(1002,"")})}var co=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===$a}get invalid(){return this.status===Ml}get pending(){return this.status==lo}get disabled(){return this.status===Wa}get enabled(){return this.status!==Wa}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Ab(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Ab(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Rb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Rb(t,this._rawAsyncValidators))}hasValidator(t){return kl(this._rawValidators,t)}hasAsyncValidator(t){return kl(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=lo,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Wa,this.errors=null,this._forEachChild(n=>{n.disable(_e(O({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(_e(O({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=$a,this._forEachChild(n=>{n.enable(_e(O({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(_e(O({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$a||this.status===lo)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wa:$a}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=lo,this._hasOwnPendingAsyncValidator=!0;let e=Gb(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new pe,this.statusChanges=new pe}_calculateStatus(){return this._allControlsDisabled()?Wa:this.errors?Ml:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(lo)?lo:this._anyControlsHaveStatus(Ml)?Ml:$a}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Rl(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=_2(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=v2(this._rawAsyncValidators)}},Pl=class extends co{constructor(t,e,n){super(Zm(e),Km(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){r_(this,!0,t),Object.keys(t).forEach(n=>{n_(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(n=>{let r=this.controls[n];r&&r.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>n._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((r,o)=>{n=e(n,r,o)}),n}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Wm=class extends Pl{};var Fl=new ne("CallSetDisabledState",{providedIn:"root",factory:()=>Nl}),Nl="always";function o_(i,t){return[...t.path,i]}function Gm(i,t,e=Nl){Qm(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(i.disabled),x2(i,t),C2(i,t),w2(i,t),y2(i,t)}function Fb(i,t,e=!0){let n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),Dl(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function Ol(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function y2(i,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function Qm(i,t){let e=t_(i);t.validator!==null?i.setValidators(Db(e,t.validator)):typeof e=="function"&&i.setValidators([e]);let n=i_(i);t.asyncValidator!==null?i.setAsyncValidators(Db(n,t.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();Ol(t._rawValidators,r),Ol(t._rawAsyncValidators,r)}function Dl(i,t){let e=!1;if(i!==null){if(t.validator!==null){let r=t_(i);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==t.validator);o.length!==r.length&&(e=!0,i.setValidators(o))}}if(t.asyncValidator!==null){let r=i_(i);if(Array.isArray(r)&&r.length>0){let o=r.filter(a=>a!==t.asyncValidator);o.length!==r.length&&(e=!0,i.setAsyncValidators(o))}}}let n=()=>{};return Ol(t._rawValidators,n),Ol(t._rawAsyncValidators,n),e}function x2(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&a_(i,t)})}function w2(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&a_(i,t),i.updateOn!=="submit"&&i.markAsTouched()})}function a_(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function C2(i,t){let e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function S2(i,t){i==null,Qm(i,t)}function M2(i,t){return Dl(i,t)}function s_(i,t){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function E2(i){return Object.getPrototypeOf(i.constructor)===Al}function k2(i,t){i._syncPendingControls(),t.forEach(e=>{let n=e.control;n.updateOn==="submit"&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function l_(i,t){if(!t)return null;Array.isArray(t);let e,n,r;return t.forEach(o=>{o.constructor===Dt?e=o:E2(o)?n=o:r=o}),r||n||e||null}function T2(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function Nb(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function Lb(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Ga=class extends co{constructor(t=null,e,n){super(Zm(e),Km(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rl(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Lb(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Nb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Nb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Lb(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var I2=i=>i instanceof Ga;var P2={provide:nr,useExisting:_t(()=>di)},Bb=Promise.resolve(),di=(()=>{class i extends nr{constructor(e,n,r,o,a,s){super(),this._changeDetectorRef=a,this.callSetDisabledState=s,this.control=new Ga,this._registered=!1,this.name="",this.update=new pe,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=l_(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),s_(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Gm(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Bb.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let n=e.isDisabled.currentValue,r=n!==0&&Qe(n);Bb.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?o_(e,this._parent):[e]}static{this.\u0275fac=function(n){return new(n||i)(M(ir,9),M(mo,10),M(Ym,10),M(uo,10),M(yt,8),M(Fl,8))}}static{this.\u0275dir=K({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[te.None,"disabled","isDisabled"],model:[te.None,"ngModel","model"],options:[te.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ue([P2]),Ne,$e]})}}return i})(),ho=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=K({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return i})(),O2={provide:uo,useExisting:_t(()=>Xa),multi:!0},Xa=(()=>{class i extends Al{writeValue(e){let n=e??"";this.setProperty("value",n)}registerOnChange(e){this.onChange=n=>{e(n==""?null:parseFloat(n))}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Tt(i)))(r||i)}})()}static{this.\u0275dir=K({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,r){n&1&&I("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[Ue([O2]),Ne]})}}return i})();var c_=new ne("");var D2={provide:ir,useExisting:_t(()=>rr)},rr=(()=>{class i extends ir{constructor(e,n,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new pe,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Dl(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let n=this.form.get(e.path);return Gm(n,e,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){Fb(e.control||null,e,!1),T2(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,k2(this.form,this.directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{let n=e.control,r=this.form.get(e.path);n!==r&&(Fb(n||null,e),I2(r)&&(Gm(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let n=this.form.get(e.path);S2(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let n=this.form.get(e.path);n&&M2(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Qm(this.form,this),this._oldForm&&Dl(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(n){return new(n||i)(M(mo,10),M(Ym,10),M(Fl,8))}}static{this.\u0275dir=K({type:i,selectors:[["","formGroup",""]],hostBindings:function(n,r){n&1&&I("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[te.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ue([D2]),Ne,$e]})}}return i})();var A2={provide:nr,useExisting:_t(()=>or)},or=(()=>{class i extends nr{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,n,r,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new pe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=l_(this,o)}ngOnChanges(e){this._added||this._setUpControl(),s_(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return o_(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(n){return new(n||i)(M(ir,13),M(mo,10),M(Ym,10),M(uo,10),M(c_,8))}}static{this.\u0275dir=K({type:i,selectors:[["","formControlName",""]],inputs:{name:[te.None,"formControlName","name"],isDisabled:[te.None,"disabled","isDisabled"],model:[te.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Ue([A2]),Ne,$e]})}}return i})(),R2={provide:uo,useExisting:_t(()=>fo),multi:!0};function d_(i,t){return i==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function F2(i){return i.split(":")[0]}var fo=(()=>{class i extends Al{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let n=this._getOptionId(e),r=d_(n,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){let n=F2(e);return this._optionMap.has(n)?this._optionMap.get(n):e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Tt(i)))(r||i)}})()}static{this.\u0275dir=K({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){n&1&&I("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ue([R2]),Ne]})}}return i})(),Ll=(()=>{class i{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(d_(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(M(ge),M(fn),M(fo,9))}}static{this.\u0275dir=K({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})(),N2={provide:uo,useExisting:_t(()=>u_),multi:!0};function Ub(i,t){return i==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function L2(i){return i.split(":")[0]}var u_=(()=>{class i extends Al{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let n;if(Array.isArray(e)){let r=e.map(o=>this._getOptionId(o));n=(o,a)=>{o._setSelected(r.indexOf(a.toString())>-1)}}else n=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{let r=[],o=n.selectedOptions;if(o!==void 0){let a=o;for(let s=0;s<a.length;s++){let l=a[s],u=this._getOptionValue(l.value);r.push(u)}}else{let a=n.options;for(let s=0;s<a.length;s++){let l=a[s];if(l.selected){let u=this._getOptionValue(l.value);r.push(u)}}}this.value=r,e(r)}}_registerOption(e){let n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){let n=L2(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Tt(i)))(r||i)}})()}static{this.\u0275dir=K({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){n&1&&I("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ue([N2]),Ne]})}}return i})(),Bl=(()=>{class i{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(Ub(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Ub(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(M(ge),M(fn),M(u_,9))}}static{this.\u0275dir=K({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})();function m_(i){return typeof i=="number"?i:parseFloat(i)}var Jm=(()=>{class i{constructor(){this._validator=El}ngOnChanges(e){if(this.inputName in e){let n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):El,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=K({type:i,features:[$e]})}}return i})(),B2={provide:mo,useExisting:_t(()=>ep),multi:!0},ep=(()=>{class i extends Jm{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=e=>m_(e),this.createValidator=e=>Hb(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Tt(i)))(r||i)}})()}static{this.\u0275dir=K({type:i,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&Ke("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[Ue([B2]),Ne]})}}return i})(),U2={provide:mo,useExisting:_t(()=>tp),multi:!0},tp=(()=>{class i extends Jm{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>m_(e),this.createValidator=e=>qb(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Tt(i)))(r||i)}})()}static{this.\u0275dir=K({type:i,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&Ke("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Ue([U2]),Ne]})}}return i})(),z2={provide:mo,useExisting:_t(()=>ip),multi:!0};var ip=(()=>{class i extends Jm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Qe,this.createValidator=e=>$b}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Tt(i)))(r||i)}})()}static{this.\u0275dir=K({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,r){n&2&&Ke("required",r._enabled?"":null)},inputs:{required:"required"},features:[Ue([z2]),Ne]})}}return i})();var p_=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({})}}return i})(),Xm=class extends co{constructor(t,e,n){super(Zm(e),Km(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){let n=this._adjustIndex(t);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){r_(this,!1,t),t.forEach((n,r)=>{n_(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,n)=>n._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function zb(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var Cn=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){let e=new i;return e.useNonNullable=!0,e}group(e,n=null){let r=this._reduceControls(e),o={};return zb(n)?o=n:n!==null&&(o.validators=n.validator,o.asyncValidators=n.asyncValidator),new Pl(r,o)}record(e,n=null){let r=this._reduceControls(e);return new Wm(r,n)}control(e,n,r){let o={};return this.useNonNullable?(zb(n)?o=n:(o.validators=n,o.asyncValidators=r),new Ga(e,_e(O({},o),{nonNullable:!0}))):new Ga(e,n,r)}array(e,n,r){let o=e.map(a=>this._createControl(a));return new Xm(o,n,r)}_reduceControls(e){let n={};return Object.keys(e).forEach(r=>{n[r]=this._createControl(e[r])}),n}_createControl(e){if(e instanceof Ga)return e;if(e instanceof co)return e;if(Array.isArray(e)){let n=e[0],r=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(n,r,o)}else return this.control(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Rt=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:Fl,useValue:e.callSetDisabledState??Nl}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({imports:[p_]})}}return i})(),Sn=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:c_,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Fl,useValue:e.callSetDisabledState??Nl}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({imports:[p_]})}}return i})();function j2(i,t){i&1&&(c(0,"div",24),_(1,"div",25),d())}function V2(i,t){i&1&&(E(),c(0,"svg",26),_(1,"path",27),d())}function q2(i,t){i&1&&(E(),c(0,"svg",4),_(1,"polygon",28),d())}function H2(i,t){i&1&&(E(),c(0,"svg",4),_(1,"rect",29)(2,"rect",30),d())}function $2(i,t){if(i&1){let e=ve();c(0,"div",1)(1,"div",2)(2,"button",3),I("click",function(){z(e);let r=w();return j(r.closePlayer())}),E(),c(3,"svg",4),_(4,"line",5)(5,"line",6),d()(),F(),c(6,"div",7)(7,"div",8),_(8,"img",9),L(9,j2,2,0,"div",10),d(),c(10,"div",11)(11,"h4",12),f(12),d(),c(13,"p",13),f(14),d(),c(15,"p",14),f(16),d()()(),c(17,"div",15)(18,"button",16),I("click",function(){z(e);let r=w();return j(r.togglePlayPause())}),L(19,V2,2,0,"svg",17)(20,q2,2,0,"svg",18)(21,H2,3,0,"svg",18),d()(),c(22,"div",19)(23,"span",20),f(24),d(),c(25,"div",21)(26,"input",22),I("input",function(r){z(e);let o=w();return j(o.seekTo(r))}),d(),_(27,"div",23),d(),c(28,"span",20),f(29),d()()()()}if(i&2){let e=w();h(8),R("src",e.currentSong.imageFilePath,ci)("alt",e.currentSong.name),h(),R("ngIf",e.isLoading),h(3),N(e.currentSong.name),h(2),N(e.currentSong.artist),h(2),N(e.currentSong.album),h(2),R("disabled",e.isLoading),h(),R("ngIf",e.isLoading),h(),R("ngIf",!e.isLoading&&!e.isPlaying),h(),R("ngIf",!e.isLoading&&e.isPlaying),h(3),N(e.formatTime(e.currentTime)),h(2),R("value",e.getProgressPercentage())("disabled",e.isLoading),h(),Wr("width",e.getProgressPercentage(),"%"),h(2),N(e.formatTime(e.duration))}}var go=(()=>{class i{constructor(){this.currentSong=null,this.isVisible=!1,this.onClose=new pe,this.onSongEnd=new pe,this.audioElement=null,this.currentTime=0,this.duration=0,this.volume=1,this.isPlaying=!1,this.isLoading=!1}ngOnInit(){}ngOnDestroy(){this.cleanup()}ngOnChanges(e){e.currentSong&&this.currentSong&&this.loadAndPlaySong()}cleanup(){this.audioElement&&(this.audioElement.pause(),this.audioElement.src="",this.audioElement=null),this.isPlaying=!1,this.currentTime=0,this.duration=0}loadAndPlaySong(){this.currentSong&&(this.cleanup(),this.audioElement=new Audio,this.setupAudioEvents(),this.isLoading=!0,this.audioElement.src=this.currentSong.audioFilePath,this.audioElement.load(),this.audioElement.addEventListener("canplay",()=>{this.isLoading=!1,this.play()},{once:!0}))}setupAudioEvents(){this.audioElement&&(this.audioElement.ontimeupdate=()=>{this.currentTime=this.audioElement?.currentTime||0,this.duration=this.audioElement?.duration||0},this.audioElement.onended=()=>{this.isPlaying=!1,this.currentTime=0,this.onSongEnd.emit()},this.audioElement.onerror=()=>{console.error("Error playing audio"),this.isLoading=!1,this.isPlaying=!1},this.audioElement.onloadedmetadata=()=>{this.duration=this.audioElement?.duration||0},this.audioElement.onplay=()=>{this.isPlaying=!0},this.audioElement.onpause=()=>{this.isPlaying=!1},this.audioElement.onloadstart=()=>{this.isLoading=!0},this.audioElement.oncanplay=()=>{this.isLoading=!1})}togglePlayPause(){this.audioElement&&(this.audioElement.paused?this.play():this.pause())}play(){this.audioElement&&this.audioElement.play().catch(e=>{console.error("Error playing audio:",e),this.isPlaying=!1})}pause(){this.audioElement&&this.audioElement.pause()}seekTo(e){if(!this.audioElement)return;let n=e.target,r=Number.parseFloat(n.value)/100*this.duration;this.audioElement.currentTime=r}setVolume(e){if(!this.audioElement)return;let n=e.target;this.volume=Number.parseFloat(n.value)/100,this.audioElement.volume=this.volume}closePlayer(){this.cleanup(),this.onClose.emit()}formatTime(e){if(isNaN(e))return"0:00";let n=Math.floor(e/60),r=Math.floor(e%60);return`${n}:${r.toString().padStart(2,"0")}`}getProgressPercentage(){return this.duration?this.currentTime/this.duration*100:0}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=ae({type:i,selectors:[["app-player"]],inputs:{currentSong:"currentSong",isVisible:"isVisible"},outputs:{onClose:"onClose",onSongEnd:"onSongEnd"},standalone:!0,features:[$e,se],decls:1,vars:1,consts:[["class","music-player-overlay",4,"ngIf"],[1,"music-player-overlay"],[1,"music-player"],[1,"player-close-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"player-song-info"],[1,"player-song-image"],[3,"src","alt"],["class","loading-overlay",4,"ngIf"],[1,"player-song-details"],[1,"player-song-name"],[1,"player-song-artist"],[1,"player-song-album"],[1,"player-controls"],[1,"player-control-btn",3,"click","disabled"],["class","spinner-icon","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],[1,"player-progress-section"],[1,"player-time"],[1,"player-progress-container"],["type","range","min","0","max","100",1,"player-progress-bar",3,"input","value","disabled"],[1,"player-progress-fill"],[1,"loading-overlay"],[1,"spinner"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"spinner-icon"],["d","M21 12a9 9 0 11-6.219-8.56"],["points","5 3 19 12 5 21 5 3"],["x","6","y","4","width","4","height","16"],["x","14","y","4","width","4","height","16"]],template:function(n,r){n&1&&L(0,$2,30,16,"div",0),n&2&&R("ngIf",r.isVisible&&r.currentSong)},dependencies:[xe,_n],styles:['.music-player-overlay[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;z-index:2000;background:#000000f2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-top:1px solid var(--border-color);animation:_ngcontent-%COMP%_slideUp .3s ease-out}.music-player[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;padding:.2rem 1rem;max-width:1200px;margin:0 auto;position:relative}.player-close-btn[_ngcontent-%COMP%]{position:absolute;top:.3rem;right:.1rem;width:28px;height:28px;border-radius:50%;border:none;background:var(--bg-tertiary);color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;z-index:10}.player-close-btn[_ngcontent-%COMP%]:hover{background:var(--error-color);color:var(--text-primary);transform:scale(1.1)}.player-close-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.player-song-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:0 0 250px;min-width:0}.player-song-image[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:8px;overflow:hidden;flex-shrink:0;box-shadow:0 4px 12px #0000004d}.player-song-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.player-song-details[_ngcontent-%COMP%]{flex:1;min-width:0}.player-song-name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--text-primary);margin:0 0 .25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.player-song-artist[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.player-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.player-control-btn[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;border:none;background:#24242480;color:var(--text-primary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;box-shadow:0 4px 12px #0000004d}.player-control-btn[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 16px #0006}.player-control-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.player-control-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;background-color:transparent}.player-progress-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1;min-width:0}.player-time[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);font-weight:500;min-width:40px;text-align:center}.player-progress-container[_ngcontent-%COMP%]{position:relative;flex:1;height:6px;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:3px;overflow:hidden}.player-progress-bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer;z-index:2}.player-progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));border-radius:3px;transition:width .1s ease;position:relative}.player-progress-fill[_ngcontent-%COMP%]:after{content:"";position:absolute;right:-6px;top:50%;transform:translateY(-50%);width:12px;height:12px;background:var(--text-primary);border-radius:50%;box-shadow:0 2px 6px #0000004d;opacity:0;transition:opacity .3s ease}.player-progress-container[_ngcontent-%COMP%]:hover   .player-progress-fill[_ngcontent-%COMP%]:after{opacity:1}.player-volume-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex:0 0 120px}.player-volume-section[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{border:1px solid var(--border-color)}.volume-icon[_ngcontent-%COMP%]{width:18px;height:18px;color:var(--text-secondary);flex-shrink:0}.player-volume-bar[_ngcontent-%COMP%]{flex:1;height:4px;background:var(--bg-tertiary);border-radius:2px;outline:none;cursor:pointer;-webkit-appearance:none;appearance:none;background:linear-gradient(to right,var(--gradient-middle) 0%,var(--gradient-middle) calc(var(--value) * 1%),var(--bg-tertiary) calc(var(--value) * 1%),var(--bg-tertiary) 100%)}.player-volume-bar[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:12px;height:12px;background:var(--gradient-middle);border-radius:50%;cursor:pointer;box-shadow:0 2px 6px #0000004d;transition:transform .3s ease}.player-volume-bar[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.2)}.player-volume-bar[_ngcontent-%COMP%]::-moz-range-thumb{width:12px;height:12px;background:var(--gradient-middle);border-radius:50%;cursor:pointer;border:none;box-shadow:0 2px 6px #0000004d}@media (max-width: 768px){.music-player[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;padding:1rem}.player-song-info[_ngcontent-%COMP%]{flex:none;width:100%;justify-content:center}.player-progress-section[_ngcontent-%COMP%]{order:3;width:100%}.player-volume-section[_ngcontent-%COMP%]{order:4;justify-content:center;flex:none}.player-controls[_ngcontent-%COMP%]{order:2}.player-close-btn[_ngcontent-%COMP%]{top:1rem;right:.5rem}}@media (max-width: 480px){.music-player[_ngcontent-%COMP%]{padding:.75rem}.player-song-info[_ngcontent-%COMP%]{gap:.75rem}.player-song-image[_ngcontent-%COMP%]{width:40px;height:40px}.player-control-btn[_ngcontent-%COMP%]{width:44px;height:44px}.player-control-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.player-volume-section[_ngcontent-%COMP%]{flex:0 0 100px}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}']})}}return i})();var Ya=class{constructor(t,e,n,r,o,a,s,l){this.id=t,this.userName=e,this.email=n,this.password=r,this.createdAt=o,this.ownedPlaylists=a,this.sharedPlaylists=s,this.requests=l}};var Ul=class{constructor(t,e,n){this.userName=t,this.email=e,this.password=n}},zl=class{constructor(t,e){this.email=t,this.password=e}};var sr=class extends Error{};sr.prototype.name="InvalidTokenError";function W2(i){return decodeURIComponent(atob(i).replace(/(.)/g,(t,e)=>{let n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function G2(i){let t=i.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return W2(t)}catch{return atob(t)}}function h_(i,t){if(typeof i!="string")throw new sr("Invalid token specified: must be a string");t||(t={});let e=t.header===!0?0:1,n=i.split(".")[e];if(typeof n!="string")throw new sr(`Invalid token specified: missing part #${e+1}`);let r;try{r=G2(n)}catch(o){throw new sr(`Invalid token specified: invalid base64 for part #${e+1} (${o.message})`)}try{return JSON.parse(r)}catch(o){throw new sr(`Invalid token specified: invalid json for part #${e+1} (${o.message})`)}}var Ci="https://music-server-im05.onrender.com/api";var Jt=(()=>{class i{constructor(e){this.http=e,this.baseUrl=`${Ci}/User`,this.user=new De(new Ya(0,"","","","",[],[],[]))}getAll(){return this.http.get(this.baseUrl)}getFull(){return this.http.get(`${this.baseUrl}/full`)}getById(e){return this.http.get(`${this.baseUrl}/${e}`)}getFullById(e){this.http.get(`${this.baseUrl}/full/${e}`).subscribe(n=>{this.user.next(n)},n=>{console.error("\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05E7\u05D1\u05DC\u05EA \u05DE\u05E9\u05EA\u05DE\u05E9 \u05DE\u05DC\u05D0:",n)})}addUser(e){return this.http.post(this.baseUrl,e)}updateUser(e,n){return this.http.put(`${this.baseUrl}/${e}`,n)}deleteUser(e){return this.http.delete(`${this.baseUrl}/${e}`)}clearUser(){this.user=new De(new Ya(0,"","","","",[],[],[]))}getUserFromToken(){let e=sessionStorage.getItem("authToken");if(e)try{let r=h_(e).id;this.getFullById(r)}catch(n){console.error("\u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05E4\u05E2\u05E0\u05D5\u05D7 \u05D4-Token:",n)}}ngOnInit(){this.getUserFromToken()}static{this.\u0275fac=function(n){return new(n||i)(k(qt))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ei=(()=>{class i{constructor(e){this.http=e,this.baseUrl=`${Ci}/Song`,this.songs=new De([])}getAllSongs(){return this.http.get(this.baseUrl)}getPublicSongs(){return this.http.get(`${this.baseUrl}/public`)}addPublicSong(e){return this.http.post(this.baseUrl+"/public",e)}updateSong(e,n){return console.log(`Updating song with ID: ${e}`,n),this.http.put(`${this.baseUrl}/public/${e}`,n)}deleteSong(e){return this.http.delete(`${this.baseUrl}/${e}`)}getUploadUrl(e,n){let r=new yi().set("fileName",e).set("contentType",n);return this.http.get(`${this.baseUrl}/upload-url`,{params:r})}reloadPublicSongs(){this.getPublicSongs().subscribe({next:e=>this.songs.next(e),error:e=>alert("loading songs failed")})}static{this.\u0275fac=function(n){return new(n||i)(k(qt))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var vo=(()=>{class i{constructor(e){this.http=e,this.baseUrl=`${Ci}/request`,this.requests=new De([])}getFullRequests(){return this.http.get(`${this.baseUrl}/full`)}getNotAnsweredRequests(){return this.http.get(`${this.baseUrl}/not-answered`)}updateRequestStatus(e,n){return console.log(`Updating request with ID: ${e}, isApproved: ${n}`),this.http.put(`${this.baseUrl}/${e}`,{isApproved:n})}reloadRequests(){this.getFullRequests().subscribe({next:e=>this.requests.next(e),error:e=>alert("\u05D8\u05E2\u05D9\u05E0\u05EA \u05D4\u05D1\u05E7\u05E9\u05D5\u05EA \u05E0\u05DB\u05E9\u05DC\u05D4")})}static{this.\u0275fac=function(n){return new(n||i)(k(qt))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var X2=(i,t)=>t.label,Y2=(i,t)=>t.title,rp=(i,t)=>t.id;function Z2(i,t){i&1&&(c(0,"div",1),_(1,"div",38),d())}function K2(i,t){i&1&&(E(),c(0,"svg",17),_(1,"path",48)(2,"circle",49)(3,"path",50)(4,"path",51),d())}function Q2(i,t){i&1&&(E(),c(0,"svg",17),_(1,"path",52)(2,"circle",53)(3,"circle",54),d())}function J2(i,t){i&1&&(E(),c(0,"svg",17),_(1,"polyline",28),d())}function ek(i,t){i&1&&(E(),c(0,"svg",17),_(1,"circle",55)(2,"polyline",56),d())}function tk(i,t){if(i&1&&(c(0,"div",39)(1,"div",40),L(2,K2,5,0,"svg",41)(3,Q2,4,0,"svg",41)(4,J2,2,0,"svg",41)(5,ek,3,0,"svg",41),d(),c(6,"div",42)(7,"span",43),f(8),d(),c(9,"span",44),f(10),d(),c(11,"div",45),E(),c(12,"svg",17),_(13,"polyline",46)(14,"polyline",47),d(),f(15),d()()()),i&2){let e=t.$implicit;qi("stat-"+e.color),h(2),R("ngIf",e.icon==="users"),h(),R("ngIf",e.icon==="music"),h(),R("ngIf",e.icon==="activity"),h(),R("ngIf",e.icon==="clock"),h(3),N(e.value.toLocaleString()),h(2),N(e.label),h(),$("positive",e.change>0)("negative",e.change<0),h(4),M0(" ",e.change>0?"+":"","",e.change,"% ")}}function ik(i,t){i&1&&(E(),c(0,"svg",17),_(1,"path",60)(2,"polyline",61)(3,"line",62),d())}function nk(i,t){i&1&&(E(),c(0,"svg",17),_(1,"path",48)(2,"circle",49)(3,"path",50)(4,"path",51),d())}function rk(i,t){i&1&&(E(),c(0,"svg",17),_(1,"path",63)(2,"polyline",64)(3,"line",65)(4,"line",66),d())}function ok(i,t){i&1&&(E(),c(0,"svg",17),_(1,"path",52)(2,"circle",53)(3,"circle",54),d())}function ak(i,t){i&1&&(E(),c(0,"svg",17),_(1,"path",67)(2,"path",68)(3,"path",69)(4,"path",70),d())}function sk(i,t){i&1&&(E(),c(0,"svg",17),_(1,"path",71)(2,"path",72),d())}function lk(i,t){if(i&1){let e=ve();c(0,"div",57),I("click",function(){let r=z(e).$implicit;return j(r.action())}),c(1,"div",58),L(2,ik,4,0,"svg",41)(3,nk,5,0,"svg",41)(4,rk,5,0,"svg",41)(5,ok,4,0,"svg",41)(6,ak,5,0,"svg",41)(7,sk,3,0,"svg",41),d(),c(8,"div",59)(9,"h3"),f(10),d(),c(11,"p"),f(12),d()()()}if(i&2){let e=t.$implicit;qi(e.color),h(2),R("ngIf",e.icon==="upload"),h(),R("ngIf",e.icon==="users"),h(),R("ngIf",e.icon==="requests"),h(),R("ngIf",e.icon==="songs"),h(),R("ngIf",e.icon==="dashboard"),h(),R("ngIf",e.icon==="analytics"),h(3),N(e.title),h(2),N(e.description)}}function ck(i,t){if(i&1){let e=ve();c(0,"div",73)(1,"div",74),_(2,"img",75),c(3,"div",76),I("click",function(){let r=z(e).$implicit,o=w();return j(o.playSong(r))}),E(),c(4,"svg",17),_(5,"polygon",77),d()()(),F(),c(6,"div",78)(7,"h3",79),f(8),d(),c(9,"p",80),f(10),d(),c(11,"div",81)(12,"span",82),E(),c(13,"svg",17),_(14,"polygon",77),d(),f(15),d(),F(),c(16,"span",83),f(17),d()()()()}if(i&2){let e=t.$implicit,n=w();$("playing",(n.currentlyPlaying==null?null:n.currentlyPlaying.id)===e.id),h(2),R("src",e.imageFilePath,ci)("alt",e.name),h(6),N(e.name),h(2),N(e.artist),h(5),X(" ",e.countOfPlays.toLocaleString()," "),h(2),N(e.genre)}}function dk(i,t){i&1&&(E(),c(0,"svg",17),_(1,"path",90)(2,"circle",91)(3,"line",92)(4,"line",93),d())}function uk(i,t){i&1&&(E(),c(0,"svg",17),_(1,"path",52)(2,"circle",53)(3,"circle",54),d())}function mk(i,t){i&1&&(E(),c(0,"svg",17),_(1,"path",63)(2,"polyline",64)(3,"line",65)(4,"line",66),d())}function pk(i,t){i&1&&(E(),c(0,"svg",17),_(1,"path",94)(2,"polyline",95),d())}function hk(i,t){i&1&&(E(),c(0,"svg",17),_(1,"circle",55)(2,"line",96)(3,"line",97),d())}function fk(i,t){if(i&1&&(c(0,"div",84)(1,"div",85),L(2,dk,5,0,"svg",41)(3,uk,4,0,"svg",41)(4,mk,5,0,"svg",41)(5,pk,3,0,"svg",41)(6,hk,4,0,"svg",41),d(),c(7,"div",86)(8,"h4",87),f(9),d(),c(10,"p",88),f(11),d(),c(12,"span",89),f(13),d()()()),i&2){let e=t.$implicit,n=w();qi("activity-"+n.getActivityColor(e.type)),h(2),R("ngIf",n.getActivityIcon(e.type)==="user-plus"),h(),R("ngIf",n.getActivityIcon(e.type)==="music"),h(),R("ngIf",n.getActivityIcon(e.type)==="file-text"),h(),R("ngIf",n.getActivityIcon(e.type)==="check-circle"),h(),R("ngIf",n.getActivityIcon(e.type)==="x-circle"),h(3),N(e.title),h(2),N(e.description),h(2),N(n.formatDate(e.timestamp))}}function gk(i,t){if(i&1&&(c(0,"div",36)(1,"div",98),_(2,"img",75),c(3,"div",99),E(),c(4,"svg",17),_(5,"polygon",77),d()()(),F(),c(6,"div",100)(7,"h3",101),f(8),d(),c(9,"p",102),f(10),d(),c(11,"span",103),f(12),d()()()),i&2){let e=t.$implicit;h(2),R("src",e.image,ci)("alt",e.name),h(6),N(e.name),h(2),X("by ",e.owner,""),h(2),X("",e.songCount," songs")}}var f_=(()=>{class i{constructor(e,n,r,o){this.userService=e,this.songService=n,this.requestService=r,this.router=o,this.isLoading=!1,this.currentUser=null,this.popularSongs=[],this.recentActivities=[],this.quickStats=[],this.featuredPlaylists=[],this.currentlyPlaying=null,this.showMusicPlayer=!1,this.quickActions=[{title:"Upload Song",description:"Add a new song to the platform.",icon:"upload",color:"gradient-red",action:()=>this.router.navigate(["/upload"])},{title:"Manage Users",description:"View and manage user accounts.",icon:"users",color:"gradient-teal",action:()=>this.router.navigate(["/users"])},{title:"View Requests",description:"Review pending song requests.",icon:"requests",color:"gradient-blue",action:()=>this.router.navigate(["/upload-requests"])},{title:"Manage Public Songs",description:"Organize songs in the public library.",icon:"songs",color:"gradient-teal",action:()=>this.router.navigate(["/songs"])},{title:"Usage Dashboard",description:"Track user and song activity across the platform.",icon:"dashboard",color:"gradient-blue",action:()=>this.router.navigate(["/home"])},{title:"Analytics",description:"View platform analytics.",icon:"analytics",color:"gradient-red",action:()=>this.router.navigate(["/analytics"])}]}ngOnInit(){this.loadHomeData()}loadHomeData(){this.isLoading=!0,Promise.all([this.userService.getFull().toPromise(),this.songService.getAllSongs().toPromise(),this.requestService.getFullRequests().toPromise()]).then(([e,n,r])=>{this.processHomeData(e||[],n||[],r||[]),this.isLoading=!1}).catch(e=>{console.error("Error loading home data:",e),this.isLoading=!1})}processHomeData(e,n,r){this.popularSongs=n.sort((o,a)=>a.countOfPlays-o.countOfPlays).slice(0,6),this.recentActivities=this.generateRecentActivities(e,n,r),this.quickStats=[{label:"Total Users",value:e.length,change:12.5,icon:"users",color:"teal"},{label:"Total Songs",value:n.length,change:24.8,icon:"music",color:"teal"},{label:"Active Users",value:e.filter(o=>o.ownedPlaylists.length>0||o.sharedPlaylists.length>0).length,change:8.3,icon:"activity",color:"teal"},{label:"Pending Requests",value:r.filter(o=>!o.isAnswered).length,change:-5.2,icon:"clock",color:"teal"}],this.featuredPlaylists=e.filter(o=>o.ownedPlaylists.length>0).slice(0,4).map(o=>({id:o.id,name:o.ownedPlaylists[0]?.name||"My Playlist",owner:o.userName,songCount:o.ownedPlaylists[0]?.songs?.length||0,image:"/placeholder.svg?height=120&width=120"}))}generateRecentActivities(e,n,r){let o=[];return e.sort((a,s)=>new Date(s.createdAt).getTime()-new Date(a.createdAt).getTime()).slice(0,3).forEach(a=>{o.push({id:`user-${a.id}`,type:"user_joined",title:"New User Joined",description:`${a.userName} joined the platform`,timestamp:a.createdAt,user:a.userName,icon:"user-plus"})}),n.sort((a,s)=>new Date(s.create_at).getTime()-new Date(a.create_at).getTime()).slice(0,3).forEach(a=>{o.push({id:`song-${a.id}`,type:"song_uploaded",title:"New Song Uploaded",description:`"${a.name}" by ${a.artist}`,timestamp:a.create_at,icon:"music"})}),r.slice(0,2).forEach(a=>{a.isAnswered?o.push({id:`request-${a.id}`,type:a.isApproved?"request_approved":"request_rejected",title:a.isApproved?"Request Approved":"Request Rejected",description:`"${a.song.name}" by ${a.user.userName}`,timestamp:a.requestedAt.toString(),user:a.user.userName,icon:a.isApproved?"check-circle":"x-circle"}):o.push({id:`request-${a.id}`,type:"request_submitted",title:"New Request Submitted",description:`"${a.song.name}" by ${a.user.userName}`,timestamp:a.requestedAt.toString(),user:a.user.userName,icon:"file-text"})}),o.sort((a,s)=>new Date(s.timestamp).getTime()-new Date(a.timestamp).getTime()).slice(0,8)}playSong(e){this.currentlyPlaying=e,this.showMusicPlayer=!0}onPlayerClose(){this.showMusicPlayer=!1,this.currentlyPlaying=null}onSongEnd(){this.showMusicPlayer=!1,this.currentlyPlaying=null}formatDate(e){let n=new Date,r=new Date(e),o=Math.floor((n.getTime()-r.getTime())/(1e3*60));return o<1?"Just now":o<60?`${o}m ago`:o<1440?`${Math.floor(o/60)}h ago`:o<10080?`${Math.floor(o/1440)}d ago`:r.toLocaleDateString("en-US",{month:"short",day:"numeric"})}getActivityIcon(e){return{user_joined:"user-plus",song_uploaded:"music",request_submitted:"file-text",request_approved:"check-circle",request_rejected:"x-circle"}[e]||"activity"}getActivityColor(e){return{user_joined:"teal",song_uploaded:"red",request_submitted:"blue",request_approved:"green",request_rejected:"orange"}[e]||"gray"}getCurrentTime(){return new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}getCurrentDate(){return new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}static{this.\u0275fac=function(n){return new(n||i)(M(Jt),M(ei),M(vo),M(mt))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-home"]],standalone:!0,features:[se],decls:61,vars:5,consts:[[1,"home-container"],[1,"loading-overlay"],[1,"hero-section"],[1,"hero-content"],[1,"welcome-text"],[1,"hero-title"],[1,"gradient-text"],[1,"hero-subtitle"],[1,"hero-meta"],[1,"current-time"],[1,"separator"],[1,"current-date"],[1,"hero-stats"],[1,"hero-stat",3,"class"],[1,"main-content"],[1,"quick-actions-section"],[1,"section-title"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","13 2 3 14 12 14 11 22 21 10 12 10 13 2"],[1,"quick-actions-grid"],[1,"quick-action-card",3,"class"],[1,"content-grid"],[1,"popular-songs-section"],[1,"section-header"],["points","12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"],[1,"songs-grid"],[1,"song-card",3,"playing"],[1,"activities-section"],["points","22 12 18 12 15 21 9 3 6 12 2 12"],[1,"activities-list"],[1,"activity-item",3,"class"],[1,"playlists-section"],["d","M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"],["points","9 9 9 15"],["points","15 9 15 15"],[1,"playlists-grid"],[1,"playlist-card"],[3,"onClose","onSongEnd","currentSong","isVisible"],[1,"spinner"],[1,"hero-stat"],[1,"stat-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"stat-change"],["points","22 7 13.5 15.5 8.5 10.5 2 17"],["points","16 7 22 7 22 13"],["d","M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M23 21v-2a4 4 0 0 0-3-3.87"],["d","M16 3.13a4 4 0 0 1 0 7.75"],["d","M9 18V5l12-2v13"],["cx","6","cy","18","r","3"],["cx","18","cy","16","r","3"],["cx","12","cy","12","r","10"],["points","12 6 12 12 16 14"],[1,"quick-action-card",3,"click"],[1,"action-icon"],[1,"action-content"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","17 8 12 3 7 8"],["x1","12","y1","3","x2","12","y2","15"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["d","M3 13h8V3H3z"],["d","M13 21h8V11h-8z"],["d","M13 3h8"],["d","M3 21h8"],["d","M3 3v18h18"],["d","M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"],[1,"song-card"],[1,"song-image"],[3,"src","alt"],[1,"play-overlay",3,"click"],["points","5 3 19 12 5 21 5 3"],[1,"song-info"],[1,"song-name"],[1,"song-artist"],[1,"song-stats"],[1,"play-count"],[1,"song-genre"],[1,"activity-item"],[1,"activity-icon"],[1,"activity-content"],[1,"activity-title"],[1,"activity-description"],[1,"activity-time"],["d","M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"],["cx","8.5","cy","7","r","4"],["x1","20","y1","8","x2","20","y2","14"],["x1","23","y1","11","x2","17","y2","11"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],[1,"playlist-image"],[1,"playlist-overlay"],[1,"playlist-info"],[1,"playlist-name"],[1,"playlist-owner"],[1,"playlist-count"]],template:function(n,r){n&1&&(c(0,"div",0),L(1,Z2,2,0,"div",1),c(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),f(6," Welcome to "),c(7,"div",6),f(8,"MusiX"),d()(),c(9,"p",7),f(10,"Music management platform"),d(),c(11,"div",8)(12,"span",9),f(13),d(),c(14,"span",10),f(15,"\u2022"),d(),c(16,"span",11),f(17),d()()(),c(18,"div",12),We(19,tk,16,14,"div",13,X2),d()()(),c(21,"div",14)(22,"div",15)(23,"h2",16),E(),c(24,"svg",17),_(25,"polygon",18),d(),f(26," Quick Actions "),d(),F(),c(27,"div",19),We(28,lk,13,10,"div",20,Y2),d()(),c(30,"div",21)(31,"div",22)(32,"div",23)(33,"h2",16),E(),c(34,"svg",17),_(35,"polygon",24),d(),f(36," Popular Songs "),d()(),F(),c(37,"div",25),We(38,ck,18,8,"div",26,rp),d()(),c(40,"div",27)(41,"div",23)(42,"h2",16),E(),c(43,"svg",17),_(44,"polyline",28),d(),f(45," Recent Activities "),d()(),F(),c(46,"div",29),We(47,fk,14,10,"div",30,rp),d()(),c(49,"div",31)(50,"div",23)(51,"h2",16),E(),c(52,"svg",17),_(53,"path",32)(54,"polyline",33)(55,"polyline",34),d(),f(56," Featured Playlists "),d()(),F(),c(57,"div",35),We(58,gk,13,5,"div",36,rp),d()()()(),c(60,"app-player",37),I("onClose",function(){return r.onPlayerClose()})("onSongEnd",function(){return r.onSongEnd()}),d()()),n&2&&(h(),V(1,r.isLoading?1:-1),h(12),N(r.getCurrentTime()),h(4),N(r.getCurrentDate()),h(2),Ge(r.quickStats),h(9),Ge(r.quickActions),h(10),Ge(r.popularSongs),h(9),Ge(r.recentActivities),h(11),Ge(r.featuredPlaylists),h(2),R("currentSong",r.currentlyPlaying)("isVisible",r.showMusicPlayer))},dependencies:[xe,_n,Rt,go],styles:[`[_ngcontent-%COMP%]:root{--color-black: #000000;--color-white: #ffffff;--bg-primary: rgba(15, 15, 15, .95);--bg-secondary: rgba(30, 30, 30, .5);--bg-tertiary: rgba(40, 40, 40, .3);--border-color: rgba(255, 255, 255, .1);--text-primary: #ffffff;--text-secondary: #a0a0a0;--text-muted: #666666;--hover-bg: rgba(255, 255, 255, .05);--success-color: #52c41a;--error-color: #ff4d4f;--warning-color: #faad14;--play-color: #1db954;--gradient-start: #f05371;--gradient-middle: #bd4ed5;--gradient-end: #7940d4;--shadow-sm: 0 4px 6px rgba(0, 0, 0, .3);--shadow-md: 0 8px 16px rgba(0, 0, 0, .4);--shadow-lg: 0 12px 24px rgba(0, 0, 0, .5);--transition: all .3s ease}.home-container[_ngcontent-%COMP%]{min-height:100vh;background:var(--color-black);color:var(--text-primary);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:3px solid rgba(78,205,196,.3);border-radius:50%;border-top-color:var(--gradient-middle);animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.hero-section[_ngcontent-%COMP%]{padding:3rem 2rem;background:linear-gradient(135deg,#ff6b6b1a,#4ecdc41a,#45b7d11a);border-bottom:1px solid var(--border-color);position:relative;overflow:hidden}.hero-section[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.02'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;pointer-events:none}.hero-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;gap:2rem;position:relative;z-index:1}.welcome-text[_ngcontent-%COMP%]{flex:1}.hero-title[_ngcontent-%COMP%]{font-size:3rem;font-weight:800;margin:0 0 1rem;line-height:1.1;letter-spacing:-.02em}.gradient-text[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));-webkit-background-clip:text;background-clip:text;color:transparent;width:130px!important;animation:_ngcontent-%COMP%_gradientShift 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_gradientShift{0%,to{background-position:0% 50%}50%{background-position:100% 50%}}.hero-subtitle[_ngcontent-%COMP%]{font-size:1.25rem;color:var(--text-secondary);margin:0 0 1.5rem;font-weight:400}.hero-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;font-size:.9rem;color:var(--text-muted)}.separator[_ngcontent-%COMP%]{opacity:.5}.current-time[_ngcontent-%COMP%]{font-weight:600;color:var(--gradient-middle)}.hero-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1.5rem;min-width:400px}.hero-stat[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.5rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:16px;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);transition:var(--transition)}.hero-stat[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md);border-color:#ffffff26}.hero-stat.stat-red[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#ff6b6b1a;color:var(--gradient-start)}.hero-stat.stat-teal[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#4ecdc41a;color:var(--gradient-middle)}.hero-stat.stat-blue[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#45b7d11a;color:var(--gradient-end)}.hero-stat.stat-purple[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#96ceb41a;color:#96ceb4}.stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.stat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.stat-content[_ngcontent-%COMP%]{flex:1}.stat-value[_ngcontent-%COMP%]{display:block;font-size:1.75rem;font-weight:700;color:var(--text-primary);line-height:1;margin-bottom:.25rem}.stat-label[_ngcontent-%COMP%]{display:block;font-size:.875rem;color:var(--text-secondary);font-weight:500;margin-bottom:.5rem}.stat-change[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;font-size:.75rem;font-weight:600}.stat-change.positive[_ngcontent-%COMP%]{color:var(--success-color)}.stat-change.negative[_ngcontent-%COMP%]{color:var(--error-color)}.stat-change[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:12px;height:12px}.main-content[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}.quick-actions-section[_ngcontent-%COMP%]{margin-bottom:3rem}.section-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:1.5rem;font-weight:700;margin:0 0 1.5rem;color:var(--text-primary)}.section-title[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;stroke:var(--gradient-middle)}.quick-actions-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem}.quick-action-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.5rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:16px;cursor:pointer;transition:var(--transition);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);position:relative;overflow:hidden}.quick-action-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;opacity:0;transition:opacity .3s ease}.quick-action-card.gradient-red[_ngcontent-%COMP%]:before{background:var(--gradient-start)}.quick-action-card.gradient-teal[_ngcontent-%COMP%]:before{background:var(--gradient-middle)}.quick-action-card.gradient-blue[_ngcontent-%COMP%]:before{background:var(--gradient-end)}.quick-action-card.gradient-purple[_ngcontent-%COMP%]:before{background:#96ceb4}.quick-action-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-md);border-color:#ffffff26}.quick-action-card[_ngcontent-%COMP%]:hover:before{opacity:1}.action-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.gradient-red[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{background:#ff6b6b1a;color:var(--gradient-start)}.gradient-teal[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{background:#4ecdc41a;color:var(--gradient-middle)}.gradient-blue[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{background:#45b7d11a;color:var(--gradient-end)}.gradient-purple[_ngcontent-%COMP%]   .action-icon[_ngcontent-%COMP%]{background:#96ceb41a;color:#96ceb4}.action-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.action-content[_ngcontent-%COMP%]{flex:1}.action-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;color:var(--text-primary);margin:0 0 .25rem}.action-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary);margin:0}.action-arrow[_ngcontent-%COMP%]{color:var(--text-muted);transition:var(--transition)}.quick-action-card[_ngcontent-%COMP%]:hover   .action-arrow[_ngcontent-%COMP%]{color:var(--text-primary);transform:translate(4px)}.action-arrow[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.content-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:2rem}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.view-all-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;background:none;border:none;color:var(--gradient-middle);font-size:.875rem;font-weight:500;cursor:pointer;transition:var(--transition)}.view-all-btn[_ngcontent-%COMP%]:hover{color:var(--text-primary)}.view-all-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.popular-songs-section[_ngcontent-%COMP%]{grid-column:1}.songs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:1.5rem}.song-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:16px;padding:1rem;transition:var(--transition);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);position:relative;overflow:hidden}.song-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));opacity:0;transition:opacity .3s ease}.song-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-md);border-color:#ffffff26}.song-card[_ngcontent-%COMP%]:hover:before{opacity:1}.song-card.playing[_ngcontent-%COMP%]{border-color:var(--play-color);background:#1db9540d}.song-card.playing[_ngcontent-%COMP%]:before{background:var(--play-color);opacity:1}.song-image[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:1;border-radius:12px;overflow:hidden;margin-bottom:1rem;box-shadow:0 6px 20px #0000004d}.song-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.play-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease;cursor:pointer}.song-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.song-image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.play-overlay[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px;color:var(--text-primary);filter:drop-shadow(0 2px 4px rgba(0,0,0,.5))}.song-info[_ngcontent-%COMP%]{text-align:center}.song-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary);margin:0 0 .25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.song-artist[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary);margin:0 0 .75rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.song-stats[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.75rem}.play-count[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.25rem;color:var(--text-secondary)}.play-count[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:12px;height:12px}.song-genre[_ngcontent-%COMP%]{color:var(--text-muted);background:var(--bg-tertiary);padding:.25rem .5rem;border-radius:12px;font-size:.7rem;text-transform:uppercase;letter-spacing:.5px}.activities-section[_ngcontent-%COMP%]{grid-column:2;grid-row:1 / 3}.activities-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;max-height:600px;overflow-y:auto;padding-right:.5rem}.activity-item[_ngcontent-%COMP%]{display:flex;gap:1rem;padding:1rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;transition:var(--transition);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}.activity-item[_ngcontent-%COMP%]:hover{transform:translate(4px);box-shadow:var(--shadow-sm);border-color:#ffffff26}.activity-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.activity-teal[_ngcontent-%COMP%]   .activity-icon[_ngcontent-%COMP%]{background:#4ecdc41a;color:var(--gradient-middle)}.activity-red[_ngcontent-%COMP%]   .activity-icon[_ngcontent-%COMP%]{background:#ff6b6b1a;color:var(--gradient-start)}.activity-blue[_ngcontent-%COMP%]   .activity-icon[_ngcontent-%COMP%]{background:#45b7d11a;color:var(--gradient-end)}.activity-green[_ngcontent-%COMP%]   .activity-icon[_ngcontent-%COMP%]{background:#52c41a1a;color:var(--success-color)}.activity-orange[_ngcontent-%COMP%]   .activity-icon[_ngcontent-%COMP%]{background:#ffad141a;color:var(--warning-color)}.activity-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.activity-content[_ngcontent-%COMP%]{flex:1;min-width:0}.activity-title[_ngcontent-%COMP%]{font-size:.875rem;font-weight:600;color:var(--text-primary);margin:0 0 .25rem}.activity-description[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);margin:0 0 .5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.activity-time[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);font-weight:500}.playlists-section[_ngcontent-%COMP%]{grid-column:1}.playlists-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:1.5rem}.playlist-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:16px;padding:1rem;transition:var(--transition);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);cursor:pointer}.playlist-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:var(--shadow-md);border-color:#ffffff26}.playlist-image[_ngcontent-%COMP%]{position:relative;width:100%;aspect-ratio:1;border-radius:12px;overflow:hidden;margin-bottom:1rem;background:var(--bg-tertiary)}.playlist-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.playlist-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.playlist-image[_ngcontent-%COMP%]:hover   .playlist-overlay[_ngcontent-%COMP%]{opacity:1}.playlist-image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.playlist-overlay[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px;color:var(--text-primary)}.playlist-info[_ngcontent-%COMP%]{text-align:center}.playlist-name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--text-primary);margin:0 0 .25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.playlist-owner[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);margin:0 0 .5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.playlist-count[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);background:var(--bg-tertiary);padding:.25rem .5rem;border-radius:12px;display:inline-block}.music-player-overlay[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;z-index:2000;background:#000000f2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-top:1px solid var(--border-color);animation:_ngcontent-%COMP%_slideUp .3s ease-out}.music-player[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;padding:1rem 2rem;max-width:1200px;margin:0 auto;position:relative}.player-close-btn[_ngcontent-%COMP%]{position:absolute;top:-.5rem;right:1rem;width:28px;height:28px;border-radius:50%;border:none;background:var(--bg-tertiary);color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;z-index:10}.player-close-btn[_ngcontent-%COMP%]:hover{background:var(--error-color);color:var(--text-primary);transform:scale(1.1)}.player-close-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.player-song-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:0 0 250px;min-width:0}.player-song-image[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:8px;overflow:hidden;flex-shrink:0;box-shadow:0 4px 12px #0000004d}.player-song-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.player-song-details[_ngcontent-%COMP%]{flex:1;min-width:0}.player-song-name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--text-primary);margin:0 0 .25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.player-song-artist[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.player-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.player-control-btn[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:none;background:linear-gradient(135deg,var(--gradient-start),var(--gradient-middle));color:var(--text-primary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;box-shadow:0 4px 12px #0000004d}.player-control-btn[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 16px #0006}.player-control-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.player-control-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.player-progress-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1;min-width:0}.player-time[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);font-weight:500;min-width:40px;text-align:center}.player-progress-container[_ngcontent-%COMP%]{position:relative;flex:1;height:6px;background:var(--bg-tertiary);border-radius:3px;overflow:hidden}.player-progress-bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer;z-index:2}.player-progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));border-radius:3px;transition:width .1s ease;position:relative}.player-progress-fill[_ngcontent-%COMP%]:after{content:"";position:absolute;right:-6px;top:50%;transform:translateY(-50%);width:12px;height:12px;background:var(--text-primary);border-radius:50%;box-shadow:0 2px 6px #0000004d;opacity:0;transition:opacity .3s ease}.player-progress-container[_ngcontent-%COMP%]:hover   .player-progress-fill[_ngcontent-%COMP%]:after{opacity:1}.player-volume-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex:0 0 120px}.volume-icon[_ngcontent-%COMP%]{width:18px;height:18px;color:var(--text-secondary);flex-shrink:0}.player-volume-bar[_ngcontent-%COMP%]{flex:1;height:4px;background:var(--bg-tertiary);border-radius:2px;outline:none;cursor:pointer;-webkit-appearance:none;appearance:none}.player-volume-bar[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:12px;height:12px;background:var(--gradient-middle);border-radius:50%;cursor:pointer;box-shadow:0 2px 6px #0000004d;transition:transform .3s ease}.player-volume-bar[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.2)}.player-volume-bar[_ngcontent-%COMP%]::-moz-range-thumb{width:12px;height:12px;background:var(--gradient-middle);border-radius:50%;cursor:pointer;border:none;box-shadow:0 2px 6px #0000004d}.activities-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.activities-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-tertiary)}.activities-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.activities-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#fff3}@media (max-width: 1200px){.content-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.activities-section[_ngcontent-%COMP%]{grid-column:1;grid-row:auto}.activities-list[_ngcontent-%COMP%]{max-height:400px}.hero-stats[_ngcontent-%COMP%]{min-width:auto;grid-template-columns:1fr}}@media (max-width: 992px){.hero-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.hero-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);width:100%}.quick-actions-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.songs-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}}@media (max-width: 768px){.home-container[_ngcontent-%COMP%]{padding:0}.hero-section[_ngcontent-%COMP%]{padding:2rem 1rem}.main-content[_ngcontent-%COMP%]{padding:1rem}.hero-title[_ngcontent-%COMP%]{font-size:2rem}.hero-subtitle[_ngcontent-%COMP%]{font-size:1rem}.hero-stats[_ngcontent-%COMP%], .quick-actions-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.songs-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}.playlists-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}.music-player[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;padding:1rem}.player-song-info[_ngcontent-%COMP%]{flex:none;width:100%;justify-content:center}.player-progress-section[_ngcontent-%COMP%]{order:3;width:100%}.player-volume-section[_ngcontent-%COMP%]{order:4;justify-content:center;flex:none}.player-controls[_ngcontent-%COMP%]{order:2}.player-close-btn[_ngcontent-%COMP%]{top:.5rem;right:.5rem}}@media (max-width: 480px){.hero-section[_ngcontent-%COMP%]{padding:1.5rem .5rem}.main-content[_ngcontent-%COMP%]{padding:1rem .5rem}.hero-title[_ngcontent-%COMP%]{font-size:1.75rem}.quick-action-card[_ngcontent-%COMP%]{padding:1rem}.song-card[_ngcontent-%COMP%], .playlist-card[_ngcontent-%COMP%], .activity-item[_ngcontent-%COMP%]{padding:.75rem}.songs-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}.playlists-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(130px,1fr))}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.quick-action-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out forwards}.quick-action-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.quick-action-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.quick-action-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.quick-action-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.song-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease-out forwards}.song-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.song-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.song-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.song-card[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.song-card[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}.song-card[_ngcontent-%COMP%]:nth-child(6){animation-delay:.6s}.activity-item[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s ease-out forwards}.activity-item[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.activity-item[_ngcontent-%COMP%]:nth-child(2){animation-delay:.15s}.activity-item[_ngcontent-%COMP%]:nth-child(3){animation-delay:.2s}.activity-item[_ngcontent-%COMP%]:nth-child(4){animation-delay:.25s}.activity-item[_ngcontent-%COMP%]:nth-child(5){animation-delay:.3s}.activity-item[_ngcontent-%COMP%]:nth-child(6){animation-delay:.35s}.activity-item[_ngcontent-%COMP%]:nth-child(7){animation-delay:.4s}.activity-item[_ngcontent-%COMP%]:nth-child(8){animation-delay:.45s}.quick-action-card[_ngcontent-%COMP%]:focus, .song-card[_ngcontent-%COMP%]:focus, .playlist-card[_ngcontent-%COMP%]:focus, .player-control-btn[_ngcontent-%COMP%]:focus, .player-close-btn[_ngcontent-%COMP%]:focus, .player-progress-bar[_ngcontent-%COMP%]:focus, .player-volume-bar[_ngcontent-%COMP%]:focus, .view-all-btn[_ngcontent-%COMP%]:focus{outline:2px solid var(--gradient-middle);outline-offset:2px}input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;background:transparent;cursor:pointer}input[type=range][_ngcontent-%COMP%]::-webkit-slider-track{background:var(--bg-tertiary);height:4px;border-radius:2px}input[type=range][_ngcontent-%COMP%]::-moz-range-track{background:var(--bg-tertiary);height:4px;border-radius:2px;border:none}`]})}}return i})();var ap;try{ap=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ap=!1}var Je=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?D0(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||ap)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(n){return new(n||i)(k(Vi))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Za;function bk(){if(Za==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Za=!0}))}finally{Za=Za||!1}return Za}function yo(i){return bk()?i:!!i.capture}var lr;function g_(){if(lr==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return lr=!1,lr;if("scrollBehavior"in document.documentElement.style)lr=!0;else{let i=Element.prototype.scrollTo;i?lr=!/\{\s*\[native code\]\s*\}/.test(i.toString()):lr=!1}}return lr}var op;function _k(){if(op==null){let i=typeof document<"u"?document.head:null;op=!!(i&&(i.createShadowRoot||i.attachShadow))}return op}function b_(i){if(_k()){let t=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function sp(){let i=typeof document<"u"&&document?document.activeElement:null;for(;i&&i.shadowRoot;){let t=i.shadowRoot.activeElement;if(t===i)break;i=t}return i}function ui(i){return i.composedPath?i.composedPath()[0]:i.target}function Ka(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function jl(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function xo(i){return Array.isArray(i)?i:[i]}function ze(i){return i==null?"":typeof i=="string"?i:`${i}px`}function $i(i){return i instanceof ge?i.nativeElement:i}var vk=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var __=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({providers:[vk]})}}return i})();var v_=new Set,cr,yk=(()=>{class i{constructor(e,n){this._platform=e,this._nonce=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):wk}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&xk(e,this._nonce),this._matchMedia(e)}static{this.\u0275fac=function(n){return new(n||i)(k(Je),k(_a,8))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function xk(i,t){if(!v_.has(i))try{cr||(cr=document.createElement("style"),t&&cr.setAttribute("nonce",t),cr.setAttribute("type","text/css"),document.head.appendChild(cr)),cr.sheet&&(cr.sheet.insertRule(`@media ${i} {body{ }}`,0),v_.add(i))}catch(e){console.error(e)}}function wk(i){return{matches:i==="all"||i==="",media:i,addListener:()=>{},removeListener:()=>{}}}var x_=(()=>{class i{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new ye}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return y_(xo(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=y_(xo(e)).map(a=>this._registerQuery(a).observable),o=ha(r);return o=Ls(o.pipe(Bt(1)),o.pipe(zs(1),Us(0))),o.pipe(J(a=>{let s={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:u})=>{s.matches=s.matches||l,s.breakpoints[u]=l}),s}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let n=this._mediaMatcher.matchMedia(e),o={observable:new zr(a=>{let s=l=>this._zone.run(()=>a.next(l));return n.addListener(s),()=>{n.removeListener(s)}}).pipe(li(n),J(({matches:a})=>({query:e,matches:a})),ut(this._destroySubject)),mql:n};return this._queries.set(e,o),o}static{this.\u0275fac=function(n){return new(n||i)(k(yk),k(he))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function y_(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var cp=class{constructor(t,e){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ye,this._typeaheadSubscription=Zt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=n=>n.disabled,this._pressedLetters=[],this.tabOut=new ye,this.change=new ye,t instanceof hn?this._itemChangesSubscription=t.changes.subscribe(n=>this._itemsChanged(n.toArray())):Iu(t)&&(this._effectRef=T0(()=>this._itemsChanged(t()),{injector:e}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Fe(e=>this._pressedLetters.push(e)),Us(t),kt(()=>this._pressedLetters.length>0),J(()=>this._pressedLetters.join(""))).subscribe(e=>{let n=this._getItemsArray();for(let r=1;r<n.length+1;r++){let o=(this._activeItemIndex+r)%n.length,a=n[o];if(!this._skipPredicateFn(a)&&a.getLabel().toUpperCase().trim().indexOf(e)===0){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){let e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){let e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,a=this._getItemsArray().length;this._setActiveItemByIndex(o<a?o:a-1,-1);break}else return;default:(r||jl(t,"shiftKey"))&&(t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e)));return}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let e=this._getItemsArray(),n=typeof t=="number"?t:e.indexOf(t),r=e[n];this._activeItem=r??null,this._activeItemIndex=n}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let e=this._getItemsArray();for(let n=1;n<=e.length;n++){let r=(this._activeItemIndex+t*n+e.length)%e.length,o=e[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){let n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(t+=e,!n[t])return;this.setActiveItem(t)}}_getItemsArray(){return Iu(this._items)?this._items():this._items instanceof hn?this._items.toArray():this._items}_itemsChanged(t){if(this._activeItem){let e=t.indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}}};var Hl=class extends cp{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}};function dp(i){return i.buttons===0||i.detail===0}function up(i){let t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var jk=new ne("cdk-input-modality-detector-options"),Vk={ignoreKeys:[18,17,224,91,16]},S_=650,wo=yo({passive:!0,capture:!0}),qk=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(e,n,r,o){this._platform=e,this._mostRecentTarget=null,this._modality=new De(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(s=>s===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ui(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<S_||(this._modality.next(dp(a)?"keyboard":"mouse"),this._mostRecentTarget=ui(a))},this._onTouchstart=a=>{if(up(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ui(a)},this._options=O(O({},Vk),o),this.modalityDetected=this._modality.pipe(zs(1)),this.modalityChanged=this.modalityDetected.pipe(fa()),e.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,wo),r.addEventListener("mousedown",this._onMousedown,wo),r.addEventListener("touchstart",this._onTouchstart,wo)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,wo),document.removeEventListener("mousedown",this._onMousedown,wo),document.removeEventListener("touchstart",this._onTouchstart,wo))}static{this.\u0275fac=function(n){return new(n||i)(k(Je),k(he),k(le),k(jk,8))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ql=function(i){return i[i.IMMEDIATE=0]="IMMEDIATE",i[i.EVENTUAL=1]="EVENTUAL",i}(ql||{}),Hk=new ne("cdk-focus-monitor-default-options"),Vl=yo({passive:!0,capture:!0}),M_=(()=>{class i{constructor(e,n,r,o,a){this._ngZone=e,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ye,this._rootNodeFocusAndBlurListener=s=>{let l=ui(s);for(let u=l;u;u=u.parentElement)s.type==="focus"?this._onFocus(s,u):this._onBlur(s,u)},this._document=o,this._detectionMode=a?.detectionMode||ql.IMMEDIATE}monitor(e,n=!1){let r=$i(e);if(!this._platform.isBrowser||r.nodeType!==1)return G();let o=b_(r)||this._getDocument(),a=this._elementInfo.get(r);if(a)return n&&(a.checkChildren=!0),a.subject;let s={checkChildren:n,subject:new ye,rootNode:o};return this._elementInfo.set(r,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(e){let n=$i(e),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(e,n,r){let o=$i(e),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([s,l])=>this._originChanged(s,n,l)):(this._setOrigin(n),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===ql.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused",n==="touch"),e.classList.toggle("cdk-keyboard-focused",n==="keyboard"),e.classList.toggle("cdk-mouse-focused",n==="mouse"),e.classList.toggle("cdk-program-focused",n==="program")}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&n,this._detectionMode===ql.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?S_:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(e,n){let r=this._elementInfo.get(n),o=ui(e);!r||!r.checkChildren&&n!==o||this._originChanged(n,this._getFocusOrigin(o),r)}_onBlur(e,n){let r=this._elementInfo.get(n);!r||r.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(e,n){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,Vl),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,Vl)}),this._rootNodeFocusListenerCount.set(n,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ut(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){let n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){let r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Vl),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Vl),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,r){this._setClasses(e,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){let n=[];return this._elementInfo.forEach((r,o)=>{(o===e||r.checkChildren&&o.contains(e))&&n.push([o,r])}),n}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!n||n===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let o=e.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(n))return!0}return!1}static{this.\u0275fac=function(n){return new(n||i)(k(he),k(Je),k(qk),k(le,8),k(Hk,8))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var dr=function(i){return i[i.NONE=0]="NONE",i[i.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",i[i.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",i}(dr||{}),w_="cdk-high-contrast-black-on-white",C_="cdk-high-contrast-white-on-black",lp="cdk-high-contrast-active",E_=(()=>{class i{constructor(e,n){this._platform=e,this._document=n,this._breakpointSubscription=H(x_).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return dr.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return dr.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return dr.BLACK_ON_WHITE}return dr.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(lp,w_,C_),this._hasCheckedHighContrastMode=!0;let n=this.getHighContrastMode();n===dr.BLACK_ON_WHITE?e.add(lp,w_):n===dr.WHITE_ON_BLACK&&e.add(lp,C_)}}static{this.\u0275fac=function(n){return new(n||i)(k(Je),k(le))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var $k=new ne("cdk-dir-doc",{providedIn:"root",factory:Wk});function Wk(){return H(le)}var Gk=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Xk(i){let t=i?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?Gk.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Co=(()=>{class i{constructor(e){if(this.value="ltr",this.change=new pe,e){let n=e.body?e.body.dir:null,r=e.documentElement?e.documentElement.dir:null;this.value=Xk(n||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(n){return new(n||i)(k($k,8))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Si=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({})}}return i})();function Zk(){return!0}var Kk=new ne("mat-sanity-checks",{providedIn:"root",factory:Zk}),Ie=(()=>{class i{constructor(e,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return Ka()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[e]}static{this.\u0275fac=function(n){return new(n||i)(k(E_),k(Kk,8),k(le))}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({imports:[Si,Si]})}}return i})();var Ja=(()=>{class i{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ti=function(i){return i[i.FADING_IN=0]="FADING_IN",i[i.VISIBLE=1]="VISIBLE",i[i.FADING_OUT=2]="FADING_OUT",i[i.HIDDEN=3]="HIDDEN",i}(ti||{}),pp=class{constructor(t,e,n,r=!1){this._renderer=t,this.element=e,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=ti.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},T_=yo({passive:!0,capture:!0}),hp=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=ui(t);e&&this._events.get(t.type)?.forEach((n,r)=>{(r===e||r.contains(e))&&n.forEach(o=>o.handleEvent(t))})}}addHandler(t,e,n,r){let o=this._events.get(e);if(o){let a=o.get(n);a?a.add(r):o.set(n,new Set([r]))}else this._events.set(e,new Map([[n,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,T_)})}removeHandler(t,e,n){let r=this._events.get(t);if(!r)return;let o=r.get(e);o&&(o.delete(n),o.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,T_)))}},I_={enterDuration:225,exitDuration:150},Qk=800,P_=yo({passive:!0,capture:!0}),O_=["mousedown","touchstart"],D_=["mouseup","mouseleave","touchend","touchcancel"],fp=class i{static{this._eventManager=new hp}constructor(t,e,n,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=$i(n))}fadeInRipple(t,e,n={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=O(O({},I_),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let a=n.radius||Jk(t,e,r),s=t-r.left,l=e-r.top,u=o.enterDuration,m=document.createElement("div");m.classList.add("mat-ripple-element"),m.style.left=`${s-a}px`,m.style.top=`${l-a}px`,m.style.height=`${a*2}px`,m.style.width=`${a*2}px`,n.color!=null&&(m.style.backgroundColor=n.color),m.style.transitionDuration=`${u}ms`,this._containerElement.appendChild(m);let p=window.getComputedStyle(m),y=p.transitionProperty,v=p.transitionDuration,P=y==="none"||v==="0s"||v==="0s, 0s"||r.width===0&&r.height===0,b=new pp(this,m,n,P);m.style.transform="scale3d(1, 1, 1)",b.state=ti.FADING_IN,n.persistent||(this._mostRecentTransientRipple=b);let x=null;return!P&&(u||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let D=()=>this._finishRippleTransition(b),W=()=>this._destroyRipple(b);m.addEventListener("transitionend",D),m.addEventListener("transitioncancel",W),x={onTransitionEnd:D,onTransitionCancel:W}}),this._activeRipples.set(b,x),(P||!u)&&this._finishRippleTransition(b),b}fadeOutRipple(t){if(t.state===ti.FADING_OUT||t.state===ti.HIDDEN)return;let e=t.element,n=O(O({},I_),t.config.animation);e.style.transitionDuration=`${n.exitDuration}ms`,e.style.opacity="0",t.state=ti.FADING_OUT,(t._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=$i(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,O_.forEach(n=>{i._eventManager.addHandler(this._ngZone,n,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{D_.forEach(e=>{this._triggerElement.addEventListener(e,this,P_)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===ti.FADING_IN?this._startFadeOutTransition(t):t.state===ti.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:n}=t.config;t.state=ti.VISIBLE,!n&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=ti.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){let e=dp(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Qk;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!up(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===ti.VISIBLE||t.config.terminateOnPointerUp&&t.state===ti.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(O_.forEach(e=>i._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(D_.forEach(e=>t.removeEventListener(e,this,P_)),this._pointerUpEventsRegistered=!1))}};function Jk(i,t,e){let n=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+r*r)}var eT=new ne("mat-ripple-global-options"),A_=(()=>{class i{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,n,r,o,a){this._elementRef=e,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new fp(this,n,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:O(O(O({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,n,O(O({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,O(O({},this.rippleConfig),e))}static{this.\u0275fac=function(n){return new(n||i)(M(ge),M(he),M(Je),M(eT,8),M(qr,8))}}static{this.\u0275dir=K({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,r){n&2&&$("mat-ripple-unbounded",r.unbounded)},inputs:{color:[te.None,"matRippleColor","color"],unbounded:[te.None,"matRippleUnbounded","unbounded"],centered:[te.None,"matRippleCentered","centered"],radius:[te.None,"matRippleRadius","radius"],animation:[te.None,"matRippleAnimation","animation"],disabled:[te.None,"matRippleDisabled","disabled"],trigger:[te.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return i})(),es=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({imports:[Ie,Ie]})}}return i})();var tT=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({imports:[Ie]})}}return i})();var gp=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({imports:[es,Ie,tT]})}}return i})();var nT=["*"],Wl;function rT(){if(Wl===void 0&&(Wl=null,typeof window<"u")){let i=window;i.trustedTypes!==void 0&&(Wl=i.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Wl}function ts(i){return rT()?.createHTML(i)||i}function R_(i){return Error(`Unable to find icon with the name "${i}"`)}function oT(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function F_(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function N_(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}var Wi=class{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}},aT=(()=>{class i{constructor(e,n,r,o){this._httpClient=e,this._sanitizer=n,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,n,r){return this.addSvgIconInNamespace("",e,n,r)}addSvgIconLiteral(e,n,r){return this.addSvgIconLiteralInNamespace("",e,n,r)}addSvgIconInNamespace(e,n,r,o){return this._addSvgIconConfig(e,n,new Wi(r,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,r,o){let a=this._sanitizer.sanitize(Ut.HTML,r);if(!a)throw N_(r);let s=ts(a);return this._addSvgIconConfig(e,n,new Wi("",s,o))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,r){return this._addSvgIconSetConfig(e,new Wi(n,null,r))}addSvgIconSetLiteralInNamespace(e,n,r){let o=this._sanitizer.sanitize(Ut.HTML,n);if(!o)throw N_(n);let a=ts(o);return this._addSvgIconSetConfig(e,new Wi("",a,r))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let n=this._sanitizer.sanitize(Ut.RESOURCE_URL,e);if(!n)throw F_(e);let r=this._cachedIconsByUrl.get(n);return r?G(Gl(r)):this._loadSvgIconFromConfig(new Wi(e,null)).pipe(Fe(o=>this._cachedIconsByUrl.set(n,o)),J(o=>Gl(o)))}getNamedSvgIcon(e,n=""){let r=L_(n,e),o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(n,e),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);let a=this._iconSetConfigs.get(n);return a?this._getSvgFromIconSetConfigs(e,a):Vn(R_(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?G(Gl(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(J(n=>Gl(n)))}_getSvgFromIconSetConfigs(e,n){let r=this._extractIconWithNameFromAnySet(e,n);if(r)return G(r);let o=n.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(un(s=>{let u=`Loading icon set URL: ${this._sanitizer.sanitize(Ut.RESOURCE_URL,a.url)} failed: ${s.message}`;return this._errorHandler.handleError(new Error(u)),G(null)})));return Bs(o).pipe(J(()=>{let a=this._extractIconWithNameFromAnySet(e,n);if(!a)throw R_(e);return a}))}_extractIconWithNameFromAnySet(e,n){for(let r=n.length-1;r>=0;r--){let o=n[r];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let a=this._svgElementFromConfig(o),s=this._extractSvgIconFromSet(a,e,o.options);if(s)return s}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Fe(n=>e.svgText=n),J(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?G(null):this._fetchIcon(e).pipe(Fe(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,r){let o=e.querySelector(`[id="${n}"]`);if(!o)return null;let a=o.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,r);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),r);let s=this._svgElementFromString(ts("<svg></svg>"));return s.appendChild(a),this._setSvgAttributes(s,r)}_svgElementFromString(e){let n=this._document.createElement("DIV");n.innerHTML=e;let r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){let n=this._svgElementFromString(ts("<svg></svg>")),r=e.attributes;for(let o=0;o<r.length;o++){let{name:a,value:s}=r[o];a!=="id"&&n.setAttribute(a,s)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[o].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){let{url:n,options:r}=e,o=r?.withCredentials??!1;if(!this._httpClient)throw oT();if(n==null)throw Error(`Cannot fetch icon from URL "${n}".`);let a=this._sanitizer.sanitize(Ut.RESOURCE_URL,n);if(!a)throw F_(n);let s=this._inProgressUrlFetches.get(a);if(s)return s;let l=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(J(u=>ts(u)),mn(()=>this._inProgressUrlFetches.delete(a)),l0());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(e,n,r){return this._svgIconConfigs.set(L_(e,n),r),this}_addSvgIconSetConfig(e,n){let r=this._iconSetConfigs.get(e);return r?r.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){let n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let r=0;r<this._resolvers.length;r++){let o=this._resolvers[r](n,e);if(o)return sT(o)?new Wi(o.url,null,o.options):new Wi(o,null)}}static{this.\u0275fac=function(n){return new(n||i)(k(qt,8),k(nm),k(le,8),k(Wn))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Gl(i){return i.cloneNode(!0)}function L_(i,t){return i+":"+t}function sT(i){return!!(i.url&&i.options)}var lT=new ne("MAT_ICON_DEFAULT_OPTIONS"),cT=new ne("mat-icon-location",{providedIn:"root",factory:dT});function dT(){let i=H(le),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var B_=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],uT=B_.map(i=>`[${i}]`).join(", "),mT=/^url\(['"]?#(.*?)['"]?\)$/,U_=(()=>{class i{get color(){return this._color||this._defaultColor}set color(e){this._color=e}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){let n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){let n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}constructor(e,n,r,o,a,s){this._elementRef=e,this._iconRegistry=n,this._location=o,this._errorHandler=a,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Zt.EMPTY,s&&(s.color&&(this.color=this._defaultColor=s.color),s.fontSet&&(this.fontSet=s.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){let r=e.childNodes[n];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),n.forEach(r=>e.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let n=this._elementsWithExternalReferences;n&&n.forEach((r,o)=>{r.forEach(a=>{o.setAttribute(a.name,`url('${e}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(e){let n=e.querySelectorAll(uT),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<n.length;o++)B_.forEach(a=>{let s=n[o],l=s.getAttribute(a),u=l?l.match(mT):null;if(u){let m=r.get(s);m||(m=[],r.set(s,m)),m.push({name:a,value:u[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[n,r]=this._splitIconName(e);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(Bt(1)).subscribe(o=>this._setSvgElement(o),o=>{let a=`Error retrieving icon ${n}:${r}! ${o.message}`;this._errorHandler.handleError(new Error(a))})}}static{this.\u0275fac=function(n){return new(n||i)(M(ge),M(aT),Vr("aria-hidden"),M(cT),M(Wn),M(lT,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(n,r){n&2&&(Ke("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),qi(r.color?"mat-"+r.color:""),$("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[te.HasDecoratorInputTransform,"inline","inline",Qe],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[vt,se],ngContentSelectors:nT,decls:1,vars:0,template:function(n,r){n&1&&(zt(),jt(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return i})(),Xl=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({imports:[Ie,Ie]})}}return i})();var z_=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({imports:[Ie,xe,Ie]})}}return i})();var j_=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({imports:[Ie,es,Ie]})}}return i})();var ur=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({imports:[Ie,xe,__,Ie]})}}return i})();var pT=20,V_=(()=>{class i{constructor(e,n,r){this._ngZone=e,this._platform=n,this._scrolled=new ye,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=pT){return this._platform.isBrowser?new zr(n=>{this._globalSubscription||this._addGlobalListener();let r=e>0?this._scrolled.pipe(Su(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):G()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){let r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(kt(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){let n=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&n.push(o)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let r=$i(n),o=e.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return n0(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(n){return new(n||i)(k(he),k(Je),k(le,8))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var hT=20,bp=(()=>{class i{constructor(e,n,r){this._platform=e,this._change=new ye,this._changeListener=o=>{this._change.next(o)},this._document=r,n.runOutsideAngular(()=>{if(e.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,n=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect(),a=-o.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,s=-o.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0;return{top:a,left:s}}change(e=hT){return e>0?this._change.pipe(Su(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(n){return new(n||i)(k(Je),k(he),k(le,8))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Yl=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({})}}return i})(),_p=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({imports:[Si,Yl,Si,Yl]})}}return i})();var is=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},vp=class extends is{constructor(t,e,n,r,o){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=o}},So=class extends is{constructor(t,e,n,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},yp=class extends is{constructor(t){super(),this.element=t instanceof ge?t.nativeElement:t}},Zl=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof vp)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof So)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof yp)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Kl=class extends Zl{constructor(t,e,n,r,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=a=>{this._document;let s=a.element;s.parentNode;let l=this._document.createComment("dom-portal");s.parentNode.insertBefore(l,s),this.outletElement.appendChild(s),this._attachedPortal=a,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(s,l)})},this._document=o}attachComponentPortal(t){let n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||$n.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);r!==-1&&e.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var q_=(()=>{class i extends Zl{constructor(e,n,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new pe,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let s=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(s,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{s.parentNode&&s.parentNode.replaceChild(a,s)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let n=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,o=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),a=n.createComponent(o,n.length,e.injector||n.injector,e.projectableNodes||void 0);return n!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=e,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(e){e.setAttachedHost(this);let n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static{this.\u0275fac=function(n){return new(n||i)(M(Hs),M(gn),M(le))}}static{this.\u0275dir=K({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[te.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Ne]})}}return i})();var Ql=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({})}}return i})();var H_=g_(),xp=class{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=ze(-this._previousScrollPosition.left),t.style.top=ze(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,n=t.style,r=e.style,o=n.scrollBehavior||"",a=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),H_&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),H_&&(n.scrollBehavior=o,r.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}};var wp=class{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(kt(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Jl=class{enable(){}disable(){}attach(){}};function Cp(i,t){return t.some(e=>{let n=i.bottom<e.top,r=i.top>e.bottom,o=i.right<e.left,a=i.left>e.right;return n||r||o||a})}function $_(i,t){return t.some(e=>{let n=i.top<e.top,r=i.bottom>e.bottom,o=i.left<e.left,a=i.right>e.right;return n||r||o||a})}var Sp=class{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();Cp(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},gT=(()=>{class i{constructor(e,n,r,o){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new Jl,this.close=a=>new wp(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new xp(this._viewportRuler,this._document),this.reposition=a=>new Sp(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}static{this.\u0275fac=function(n){return new(n||i)(k(V_),k(bp),k(he),k(le))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Mp=class{constructor(t){if(this.scrollStrategy=new Jl,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let e=Object.keys(t);for(let n of e)t[n]!==void 0&&(this[n]=t[n])}}};var Ep=class{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var Z_=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(n){return new(n||i)(k(le))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),bT=(()=>{class i extends Z_{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=r=>{let o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){let s=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>s.next(r)):s.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(n){return new(n||i)(k(le),k(he,8))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),_T=(()=>{class i extends Z_{constructor(e,n,r){super(e),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=ui(o)},this._clickListener=o=>{let a=ui(o),s=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let u=l.length-1;u>-1;u--){let m=l[u];if(m._outsidePointerEvents.observers.length<1||!m.hasAttached())continue;if(m.overlayElement.contains(a)||m.overlayElement.contains(s))break;let p=m._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>p.next(o)):p.next(o)}}}add(e){if(super.add(e),!this._isAttached){let n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(n){return new(n||i)(k(le),k(Je),k(he,8))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),K_=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||Ka()){let r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let n=this._document.createElement("div");n.classList.add(e),Ka()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}static{this.\u0275fac=function(n){return new(n||i)(k(le),k(Je))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),kp=class{constructor(t,e,n,r,o,a,s,l,u,m=!1){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=o,this._keyboardDispatcher=a,this._document=s,this._location=l,this._outsideClickDispatcher=u,this._animationsDisabled=m,this._backdropElement=null,this._backdropClick=new ye,this._attachments=new ye,this._detachments=new ye,this._locationChanges=Zt.EMPTY,this._backdropClickHandler=p=>this._backdropClick.next(p),this._backdropTransitionendHandler=p=>{this._disposeBackdrop(p.target)},this._keydownEvents=new ye,this._outsidePointerEvents=new ye,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Bt(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=O(O({},this._config),t),this._updateElementSize()}setDirection(t){this._config=_e(O({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=ze(this._config.width),t.height=ze(this._config.height),t.minWidth=ze(this._config.minWidth),t.minHeight=ze(this._config.minHeight),t.maxWidth=ze(this._config.maxWidth),t.maxHeight=ze(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,n){let r=xo(e||[]).filter(o=>!!o);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let t=this._ngZone.onStable.pipe(ut(r0(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},W_="cdk-overlay-connected-position-bounding-box",vT=/([A-Za-z%]+)$/,Tp=class{get positions(){return this._preferredPositions}constructor(t,e,n,r,o){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ye,this._resizeSubscription=Zt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(W_),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,o=[],a;for(let s of this._preferredPositions){let l=this._getOriginPoint(t,r,s),u=this._getOverlayPoint(l,e,s),m=this._getOverlayFit(u,e,n,s);if(m.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(s,l);return}if(this._canFitWithFlexibleDimensions(m,u,n)){o.push({position:s,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,s)});continue}(!a||a.overlayFit.visibleArea<m.visibleArea)&&(a={overlayFit:m,overlayPoint:u,originPoint:l,position:s,overlayRect:e})}if(o.length){let s=null,l=-1;for(let u of o){let m=u.boundingBoxRect.width*u.boundingBoxRect.height*(u.position.weight||1);m>l&&(l=m,s=u)}this._isPushed=!1,this._applyPosition(s.position,s.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(a.position,a.originPoint);return}this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&mr(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(W_),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let r;if(n.originX=="center")r=t.left+t.width/2;else{let a=this._isRtl()?t.right:t.left,s=this._isRtl()?t.left:t.right;r=n.originX=="start"?a:s}e.left<0&&(r-=e.left);let o;return n.originY=="center"?o=t.top+t.height/2:o=n.originY=="top"?t.top:t.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(t,e,n){let r;n.overlayX=="center"?r=-e.width/2:n.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let o;return n.overlayY=="center"?o=-e.height/2:o=n.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,e,n,r){let o=X_(e),{x:a,y:s}=t,l=this._getOffset(r,"x"),u=this._getOffset(r,"y");l&&(a+=l),u&&(s+=u);let m=0-a,p=a+o.width-n.width,y=0-s,v=s+o.height-n.height,P=this._subtractOverflows(o.width,m,p),b=this._subtractOverflows(o.height,y,v),x=P*b;return{visibleArea:x,isCompletelyWithinViewport:o.width*o.height===x,fitsInViewportVertically:b===o.height,fitsInViewportHorizontally:P==o.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){let r=n.bottom-e.y,o=n.right-e.x,a=G_(this._overlayRef.getConfig().minHeight),s=G_(this._overlayRef.getConfig().minWidth),l=t.fitsInViewportVertically||a!=null&&a<=r,u=t.fitsInViewportHorizontally||s!=null&&s<=o;return l&&u}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=X_(e),o=this._viewportRect,a=Math.max(t.x+r.width-o.width,0),s=Math.max(t.y+r.height-o.height,0),l=Math.max(o.top-n.top-t.y,0),u=Math.max(o.left-n.left-t.x,0),m=0,p=0;return r.width<=o.width?m=u||-a:m=t.x<this._viewportMargin?o.left-n.left-t.x:0,r.height<=o.height?p=l||-s:p=t.y<this._viewportMargin?o.top-n.top-t.y:0,this._previousPushAmount={x:m,y:p},{x:t.x+m,y:t.y+p}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!yT(this._lastScrollVisibility,n)){let r=new Ep(t,n);this._positionChanges.next(r)}this._lastScrollVisibility=n}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,r=t.overlayY;t.overlayX==="center"?n="center":this._isRtl()?n=t.overlayX==="start"?"right":"left":n=t.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){let n=this._viewportRect,r=this._isRtl(),o,a,s;if(e.overlayY==="top")a=t.y,o=n.height-a+this._viewportMargin;else if(e.overlayY==="bottom")s=n.height-t.y+this._viewportMargin*2,o=n.height-s+this._viewportMargin;else{let v=Math.min(n.bottom-t.y+n.top,t.y),P=this._lastBoundingBoxSize.height;o=v*2,a=t.y-v,o>P&&!this._isInitialRender&&!this._growAfterOpen&&(a=t.y-P/2)}let l=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,u=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,m,p,y;if(u)y=n.width-t.x+this._viewportMargin*2,m=t.x-this._viewportMargin;else if(l)p=t.x,m=n.right-t.x;else{let v=Math.min(n.right-t.x+n.left,t.x),P=this._lastBoundingBoxSize.width;m=v*2,p=t.x-v,m>P&&!this._isInitialRender&&!this._growAfterOpen&&(p=t.x-P/2)}return{top:a,left:p,bottom:s,right:y,width:m,height:o}}_setBoundingBoxStyles(t,e){let n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=ze(n.height),r.top=ze(n.top),r.bottom=ze(n.bottom),r.width=ze(n.width),r.left=ze(n.left),r.right=ze(n.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=ze(o)),a&&(r.maxWidth=ze(a))}this._lastBoundingBoxSize=n,mr(this._boundingBox.style,r)}_resetBoundingBoxStyles(){mr(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){mr(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let n={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(r){let m=this._viewportRuler.getViewportScrollPosition();mr(n,this._getExactOverlayY(e,t,m)),mr(n,this._getExactOverlayX(e,t,m))}else n.position="static";let s="",l=this._getOffset(e,"x"),u=this._getOffset(e,"y");l&&(s+=`translateX(${l}px) `),u&&(s+=`translateY(${u}px)`),n.transform=s.trim(),a.maxHeight&&(r?n.maxHeight=ze(a.maxHeight):o&&(n.maxHeight="")),a.maxWidth&&(r?n.maxWidth=ze(a.maxWidth):o&&(n.maxWidth="")),mr(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),t.overlayY==="bottom"){let a=this._document.documentElement.clientHeight;r.bottom=`${a-(o.y+this._overlayRect.height)}px`}else r.top=ze(o.y);return r}_getExactOverlayX(t,e,n){let r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n));let a;if(this._isRtl()?a=t.overlayX==="end"?"left":"right":a=t.overlayX==="end"?"right":"left",a==="right"){let s=this._document.documentElement.clientWidth;r.right=`${s-(o.x+this._overlayRect.width)}px`}else r.left=ze(o.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:$_(t,n),isOriginOutsideView:Cp(t,n),isOverlayClipped:$_(e,n),isOverlayOutsideView:Cp(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&xo(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof ge)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}};function mr(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function G_(i){if(typeof i!="number"&&i!=null){let[t,e]=i.split(vT);return!e||e==="px"?parseFloat(t):null}return i||null}function X_(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}function yT(i,t){return i===t?!0:i.isOriginClipped===t.isOriginClipped&&i.isOriginOutsideView===t.isOriginOutsideView&&i.isOverlayClipped===t.isOverlayClipped&&i.isOverlayOutsideView===t.isOverlayOutsideView}var Y_="cdk-global-overlay-wrapper",Ip=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Y_),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:a,maxHeight:s}=n,l=(r==="100%"||r==="100vw")&&(!a||a==="100%"||a==="100vw"),u=(o==="100%"||o==="100vh")&&(!s||s==="100%"||s==="100vh"),m=this._xPosition,p=this._xOffset,y=this._overlayRef.getConfig().direction==="rtl",v="",P="",b="";l?b="flex-start":m==="center"?(b="center",y?P=p:v=p):y?m==="left"||m==="end"?(b="flex-end",v=p):(m==="right"||m==="start")&&(b="flex-start",P=p):m==="left"||m==="start"?(b="flex-start",v=p):(m==="right"||m==="end")&&(b="flex-end",P=p),t.position=this._cssPosition,t.marginLeft=l?"0":v,t.marginTop=u?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":P,e.justifyContent=b,e.alignItems=u?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(Y_),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},xT=(()=>{class i{constructor(e,n,r,o){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=o}global(){return new Ip}flexibleConnectedTo(e){return new Tp(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(n){return new(n||i)(k(bp),k(le),k(Je),k(K_))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),wT=0,Mo=(()=>{class i{constructor(e,n,r,o,a,s,l,u,m,p,y,v){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=s,this._ngZone=l,this._document=u,this._directionality=m,this._location=p,this._outsideClickDispatcher=y,this._animationsModuleType=v}create(e){let n=this._createHostElement(),r=this._createPaneElement(n),o=this._createPortalOutlet(r),a=new Mp(e);return a.direction=a.direction||this._directionality.value,new kp(o,n,r,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(e){let n=this._document.createElement("div");return n.id=`cdk-overlay-${wT++}`,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Xr)),new Kl(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(n){return new(n||i)(k(gT),k(K_),k(Hs),k(xT),k(bT),k($n),k(he),k(le),k(Co),k(Zr),k(_T),k(qr,8))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var CT=new ne("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let i=H(Mo);return()=>i.scrollStrategies.reposition()}});function ST(i){return()=>i.scrollStrategies.reposition()}var MT={provide:CT,deps:[Mo],useFactory:ST},Q_=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({providers:[Mo,MT],imports:[Si,Ql,_p,_p]})}}return i})();var IT=new ne("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let i=H(Mo);return()=>i.scrollStrategies.reposition()}});function PT(i){return()=>i.scrollStrategies.reposition()}var OT={provide:IT,deps:[Mo],useFactory:PT};var J_=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({providers:[OT],imports:[xe,Q_,gp,Ie,Yl,ur,gp,Ie]})}}return i})();var ev=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({})}}return i})();var tv=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({imports:[Ie,ur,ur,ev,Ie]})}}return i})();var RT=["*"];function FT(i,t){i&1&&jt(0)}var Pp=(()=>{class i{constructor(e){this._elementRef=e}focus(){this._elementRef.nativeElement.focus()}static{this.\u0275fac=function(n){return new(n||i)(M(ge))}}static{this.\u0275dir=K({type:i,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"],standalone:!0})}}return i})(),Op=(()=>{class i{constructor(e){this.template=e}static{this.\u0275fac=function(n){return new(n||i)(M(vi))}}static{this.\u0275dir=K({type:i,selectors:[["","cdkStepLabel",""]],standalone:!0})}}return i})(),NT=0;var Gi={NUMBER:"number",EDIT:"edit",DONE:"done",ERROR:"error"},Dp=new ne("STEPPER_GLOBAL_OPTIONS"),ec=(()=>{class i{get completed(){return this._completedOverride==null?this._getDefaultCompleted():this._completedOverride}set completed(e){this._completedOverride=e}_getDefaultCompleted(){return this.stepControl?this.stepControl.valid&&this.interacted:this.interacted}get hasError(){return this._customError==null?this._getDefaultError():this._customError}set hasError(e){this._customError=e}_getDefaultError(){return this.stepControl&&this.stepControl.invalid&&this.interacted}constructor(e,n){this._stepper=e,this.interacted=!1,this.interactedStream=new pe,this.editable=!0,this.optional=!1,this._completedOverride=null,this._customError=null,this._stepperOptions=n||{},this._displayDefaultIndicatorType=this._stepperOptions.displayDefaultIndicatorType!==!1}select(){this._stepper.selected=this}reset(){this.interacted=!1,this._completedOverride!=null&&(this._completedOverride=!1),this._customError!=null&&(this._customError=!1),this.stepControl&&this.stepControl.reset()}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this.interacted||(this.interacted=!0,this.interactedStream.emit(this))}_showError(){return this._stepperOptions.showError??this._customError!=null}static{this.\u0275fac=function(n){return new(n||i)(M(_t(()=>tc)),M(Dp,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["cdk-step"]],contentQueries:function(n,r,o){if(n&1&&Vt(o,Op,5),n&2){let a;ot(a=at())&&(r.stepLabel=a.first)}},viewQuery:function(n,r){if(n&1&&bn(vi,7),n&2){let o;ot(o=at())&&(r.content=o.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:[te.None,"aria-label","ariaLabel"],ariaLabelledby:[te.None,"aria-labelledby","ariaLabelledby"],state:"state",editable:[te.HasDecoratorInputTransform,"editable","editable",Qe],optional:[te.HasDecoratorInputTransform,"optional","optional",Qe],completed:[te.HasDecoratorInputTransform,"completed","completed",Qe],hasError:[te.HasDecoratorInputTransform,"hasError","hasError",Qe]},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],standalone:!0,features:[vt,$e,se],ngContentSelectors:RT,decls:1,vars:0,template:function(n,r){n&1&&(zt(),L(0,FT,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}}return i})(),tc=(()=>{class i{get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this.steps&&this._steps?(this._isValidIndex(e),this.selected?._markAsInteracted(),this._selectedIndex!==e&&!this._anyControlsInvalidOrPending(e)&&(e>=this._selectedIndex||this.steps.toArray()[e].editable)&&this._updateSelectedItemIndex(e)):this._selectedIndex=e}get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(e){this.selectedIndex=e&&this.steps?this.steps.toArray().indexOf(e):-1}get orientation(){return this._orientation}set orientation(e){this._orientation=e,this._keyManager&&this._keyManager.withVerticalOrientation(e==="vertical")}constructor(e,n,r){this._dir=e,this._changeDetectorRef=n,this._elementRef=r,this._destroyed=new ye,this.steps=new hn,this._sortedHeaders=new hn,this.linear=!1,this._selectedIndex=0,this.selectionChange=new pe,this.selectedIndexChange=new pe,this._orientation="horizontal",this._groupId=NT++}ngAfterContentInit(){this._steps.changes.pipe(li(this._steps),ut(this._destroyed)).subscribe(e=>{this.steps.reset(e.filter(n=>n._stepper===this)),this.steps.notifyOnChanges()})}ngAfterViewInit(){this._stepHeader.changes.pipe(li(this._stepHeader),ut(this._destroyed)).subscribe(e=>{this._sortedHeaders.reset(e.toArray().sort((n,r)=>n._elementRef.nativeElement.compareDocumentPosition(r._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new Hl(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation(this._orientation==="vertical"),(this._dir?this._dir.change:G()).pipe(li(this._layoutDirection()),ut(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e)),this._keyManager.updateActiveItem(this._selectedIndex),this.steps.changes.subscribe(()=>{this.selected||(this._selectedIndex=Math.max(this._selectedIndex-1,0))}),this._isValidIndex(this._selectedIndex)||(this._selectedIndex=0)}ngOnDestroy(){this._keyManager?.destroy(),this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(e=>e.reset()),this._stateChanged()}_getStepLabelId(e){return`cdk-step-label-${this._groupId}-${e}`}_getStepContentId(e){return`cdk-step-content-${this._groupId}-${e}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(e){let n=e-this._selectedIndex;return n<0?this._layoutDirection()==="rtl"?"next":"previous":n>0?this._layoutDirection()==="rtl"?"previous":"next":"current"}_getIndicatorType(e,n=Gi.NUMBER){let r=this.steps.toArray()[e],o=this._isCurrentStep(e);return r._displayDefaultIndicatorType?this._getDefaultIndicatorLogic(r,o):this._getGuidelineLogic(r,o,n)}_getDefaultIndicatorLogic(e,n){return e._showError()&&e.hasError&&!n?Gi.ERROR:!e.completed||n?Gi.NUMBER:e.editable?Gi.EDIT:Gi.DONE}_getGuidelineLogic(e,n,r=Gi.NUMBER){return e._showError()&&e.hasError&&!n?Gi.ERROR:e.completed&&!n?Gi.DONE:e.completed&&n?r:e.editable&&n?Gi.EDIT:r}_isCurrentStep(e){return this._selectedIndex===e}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex}_updateSelectedItemIndex(e){let n=this.steps.toArray();this.selectionChange.emit({selectedIndex:e,previouslySelectedIndex:this._selectedIndex,selectedStep:n[e],previouslySelectedStep:n[this._selectedIndex]}),this._containsFocus()?this._keyManager.setActiveItem(e):this._keyManager.updateActiveItem(e),this._selectedIndex=e,this.selectedIndexChange.emit(this._selectedIndex),this._stateChanged()}_onKeydown(e){let n=jl(e),r=e.keyCode,o=this._keyManager;o.activeItemIndex!=null&&!n&&(r===32||r===13)?(this.selectedIndex=o.activeItemIndex,e.preventDefault()):o.setFocusOrigin("keyboard").onKeydown(e)}_anyControlsInvalidOrPending(e){return this.linear&&e>=0?this.steps.toArray().slice(0,e).some(n=>{let r=n.stepControl;return(r?r.invalid||r.pending||!n.interacted:!n.completed)&&!n.optional&&!n._completedOverride}):!1}_layoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_containsFocus(){let e=this._elementRef.nativeElement,n=sp();return e===n||e.contains(n)}_isValidIndex(e){return e>-1&&(!this.steps||e<this.steps.length)}static{this.\u0275fac=function(n){return new(n||i)(M(Co,8),M(yt),M(ge))}}static{this.\u0275dir=K({type:i,selectors:[["","cdkStepper",""]],contentQueries:function(n,r,o){if(n&1&&(Vt(o,ec,5),Vt(o,Pp,5)),n&2){let a;ot(a=at())&&(r._steps=a),ot(a=at())&&(r._stepHeader=a)}},inputs:{linear:[te.HasDecoratorInputTransform,"linear","linear",Qe],selectedIndex:[te.HasDecoratorInputTransform,"selectedIndex","selectedIndex",Fu],selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange",selectedIndexChange:"selectedIndexChange"},exportAs:["cdkStepper"],standalone:!0,features:[vt]})}}return i})();var iv=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({imports:[Si]})}}return i})();function LT(i,t){if(i&1&&Gn(0,2),i&2){let e=w();R("ngTemplateOutlet",e.iconOverrides[e.state])("ngTemplateOutletContext",e._getIconContext())}}function BT(i,t){if(i&1&&(c(0,"span",7),f(1),d()),i&2){let e=w(2);h(),N(e._getDefaultTextForState(e.state))}}function UT(i,t){if(i&1&&(c(0,"span",8),f(1),d()),i&2){let e=w(3);h(),N(e._intl.completedLabel)}}function zT(i,t){if(i&1&&(c(0,"span",8),f(1),d()),i&2){let e=w(3);h(),N(e._intl.editableLabel)}}function jT(i,t){if(i&1&&(L(0,UT,2,1,"span",8)(1,zT,2,1),c(2,"mat-icon",7),f(3),d()),i&2){let e=w(2);V(0,e.state==="done"?0:e.state==="edit"?1:-1),h(3),N(e._getDefaultTextForState(e.state))}}function VT(i,t){if(i&1&&L(0,BT,2,1)(1,jT,4,2),i&2){let e,n=w();V(0,(e=n.state)==="number"?0:1)}}function qT(i,t){i&1&&(c(0,"div",4),Gn(1,9),d()),i&2&&(h(),R("ngTemplateOutlet",t.template))}function HT(i,t){if(i&1&&(c(0,"div",4),f(1),d()),i&2){let e=w();h(),N(e.label)}}function $T(i,t){if(i&1&&(c(0,"div",5),f(1),d()),i&2){let e=w();h(),N(e._intl.optionalLabel)}}function WT(i,t){if(i&1&&(c(0,"div",6),f(1),d()),i&2){let e=w();h(),N(e.errorMessage)}}var rv=["*"];function GT(i,t){}function XT(i,t){if(i&1&&(jt(0),L(1,GT,0,0,"ng-template",0)),i&2){let e=w();h(),R("cdkPortalOutlet",e._portal)}}var ov=(i,t)=>({step:i,i:t}),av=i=>({animationDuration:i}),sv=(i,t)=>({value:i,params:t});function YT(i,t){i&1&&jt(0)}function ZT(i,t){i&1&&_(0,"div",6)}function KT(i,t){if(i&1&&(Gn(0,5),L(1,ZT,1,0,"div",6)),i&2){let e=t.$implicit,n=t.$index,r=t.$index,o=t.$count;w(2);let a=Xn(4);R("ngTemplateOutlet",a)("ngTemplateOutletContext",ya(3,ov,e,n)),h(),V(1,r!==o-1?1:-1)}}function QT(i,t){if(i&1){let e=ve();c(0,"div",7),I("@horizontalStepTransition.done",function(r){z(e);let o=w(2);return j(o._animationDone.next(r))}),Gn(1,8),d()}if(i&2){let e=t.$implicit,n=t.$index,r=w(2);$("mat-horizontal-stepper-content-inactive",r.selectedIndex!==n),R("@horizontalStepTransition",ya(8,sv,r._getAnimationDirection(n),Ou(6,av,r._getAnimationDuration())))("id",r._getStepContentId(n)),Ke("aria-labelledby",r._getStepLabelId(n)),h(),R("ngTemplateOutlet",e.content)}}function JT(i,t){if(i&1&&(c(0,"div",1)(1,"div",2),We(2,KT,2,6,null,null,Gr),d(),c(4,"div",3),We(5,QT,2,11,"div",4,Gr),d()()),i&2){let e=w();h(2),Ge(e.steps),h(3),Ge(e.steps)}}function eI(i,t){if(i&1){let e=ve();c(0,"div",9),Gn(1,5),c(2,"div",10)(3,"div",11),I("@verticalStepTransition.done",function(r){z(e);let o=w(2);return j(o._animationDone.next(r))}),c(4,"div",12),Gn(5,8),d()()()()}if(i&2){let e=t.$implicit,n=t.$index,r=t.$index,o=t.$count,a=w(2),s=Xn(4);h(),R("ngTemplateOutlet",s)("ngTemplateOutletContext",ya(10,ov,e,n)),h(),$("mat-stepper-vertical-line",r!==o-1),h(),$("mat-vertical-stepper-content-inactive",a.selectedIndex!==n),R("@verticalStepTransition",ya(15,sv,a._getAnimationDirection(n),Ou(13,av,a._getAnimationDuration())))("id",a._getStepContentId(n)),Ke("aria-labelledby",a._getStepLabelId(n)),h(2),R("ngTemplateOutlet",e.content)}}function tI(i,t){if(i&1&&We(0,eI,6,18,"div",9,Gr),i&2){let e=w();Ge(e.steps)}}function iI(i,t){if(i&1){let e=ve();c(0,"mat-step-header",13),I("click",function(){let r=z(e).step;return j(r.select())})("keydown",function(r){z(e);let o=w();return j(o._onKeydown(r))}),d()}if(i&2){let e=t.step,n=t.i,r=w();$("mat-horizontal-stepper-header",r.orientation==="horizontal")("mat-vertical-stepper-header",r.orientation==="vertical"),R("tabIndex",r._getFocusIndex()===n?0:-1)("id",r._getStepLabelId(n))("index",n)("state",r._getIndicatorType(n,e.state))("label",e.stepLabel||e.label)("selected",r.selectedIndex===n)("active",r._stepIsNavigable(n,e))("optional",e.optional)("errorMessage",e.errorMessage)("iconOverrides",r._iconOverrides)("disableRipple",r.disableRipple||!r._stepIsNavigable(n,e))("color",e.color||r.color),Ke("aria-posinset",n+1)("aria-setsize",r.steps.length)("aria-controls",r._getStepContentId(n))("aria-selected",r.selectedIndex==n)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null)("aria-disabled",r._stepIsNavigable(n,e)?null:!0)}}var Ap=(()=>{class i extends Op{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Tt(i)))(r||i)}})()}static{this.\u0275dir=K({type:i,selectors:[["","matStepLabel",""]],standalone:!0,features:[Ne]})}}return i})(),ic=(()=>{class i{constructor(){this.changes=new ye,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function nI(i){return i||new ic}var rI={provide:ic,deps:[[new ga,new js,ic]],useFactory:nI},Rp=(()=>{class i extends Pp{constructor(e,n,r,o){super(r),this._intl=e,this._focusMonitor=n,this._intlSubscription=e.changes.subscribe(()=>o.markForCheck())}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,n){e?this._focusMonitor.focusVia(this._elementRef,e,n):this._elementRef.nativeElement.focus(n)}_stringLabel(){return this.label instanceof Ap?null:this.label}_templateLabel(){return this.label instanceof Ap?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getIconContext(){return{index:this.index,active:this.active,optional:this.optional}}_getDefaultTextForState(e){return e=="number"?`${this.index+1}`:e=="edit"?"create":e=="error"?"warning":e}static{this.\u0275fac=function(n){return new(n||i)(M(ic),M(M_),M(ge),M(yt))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header"],hostVars:2,hostBindings:function(n,r){n&2&&qi("mat-"+(r.color||"primary"))},inputs:{state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple",color:"color"},standalone:!0,features:[Ne,se],decls:10,vars:17,consts:[["matRipple","",1,"mat-step-header-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-step-label"],[1,"mat-step-text-label"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"],["aria-hidden","true"],[1,"cdk-visually-hidden"],[3,"ngTemplateOutlet"]],template:function(n,r){if(n&1&&(_(0,"div",0),c(1,"div")(2,"div",1),L(3,LT,1,2,"ng-container",2)(4,VT,2,1),d()(),c(5,"div",3),L(6,qT,2,1,"div",4)(7,HT,2,1)(8,$T,2,1,"div",5)(9,WT,2,1,"div",6),d()),n&2){let o;R("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disableRipple),h(),Pu("mat-step-icon-state-",r.state," mat-step-icon"),$("mat-step-icon-selected",r.selected),h(2),V(3,r.iconOverrides&&r.iconOverrides[r.state]?3:4),h(2),$("mat-step-label-active",r.active)("mat-step-label-selected",r.selected)("mat-step-label-error",r.state=="error"),h(),V(6,(o=r._templateLabel())?6:r._stringLabel()?7:-1,o),h(2),V(8,r.optional&&r.state!="error"?8:-1),h(),V(9,r.state==="error"?9:-1)}},dependencies:[A_,Zs,U_],styles:['.mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-step-header:focus .mat-focus-indicator::before{content:""}.mat-step-header:hover[aria-disabled=true]{cursor:default}.mat-step-header:hover:not([aria-disabled]),.mat-step-header:hover[aria-disabled=false]{background-color:var(--mat-stepper-header-hover-state-layer-color);border-radius:var(--mat-stepper-header-hover-state-layer-shape)}.mat-step-header.cdk-keyboard-focused,.mat-step-header.cdk-program-focused{background-color:var(--mat-stepper-header-focus-state-layer-color);border-radius:var(--mat-stepper-header-focus-state-layer-shape)}@media(hover: none){.mat-step-header:hover{background:none}}.cdk-high-contrast-active .mat-step-header{outline:solid 1px}.cdk-high-contrast-active .mat-step-header[aria-selected=true] .mat-step-label{text-decoration:underline}.cdk-high-contrast-active .mat-step-header[aria-disabled=true]{outline-color:GrayText}.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-label,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-icon,.cdk-high-contrast-active .mat-step-header[aria-disabled=true] .mat-step-optional{color:GrayText}.mat-step-optional{font-size:12px;color:var(--mat-stepper-header-optional-label-text-color)}.mat-step-sub-label-error{font-size:12px;font-weight:normal}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative;color:var(--mat-stepper-header-icon-foreground-color);background-color:var(--mat-stepper-header-icon-background-color)}.mat-step-icon-content{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error{background-color:var(--mat-stepper-header-error-state-icon-background-color);color:var(--mat-stepper-header-error-state-icon-foreground-color)}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle;font-family:var(--mat-stepper-header-label-text-font);font-size:var(--mat-stepper-header-label-text-size);font-weight:var(--mat-stepper-header-label-text-weight);color:var(--mat-stepper-header-label-text-color)}.mat-step-label.mat-step-label-active{color:var(--mat-stepper-header-selected-state-label-text-color)}.mat-step-label.mat-step-label-error{color:var(--mat-stepper-header-error-state-label-text-color);font-size:var(--mat-stepper-header-error-state-label-text-size)}.mat-step-label.mat-step-label-selected{font-size:var(--mat-stepper-header-selected-state-label-text-size);font-weight:var(--mat-stepper-header-selected-state-label-text-weight)}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-step-icon-selected{background-color:var(--mat-stepper-header-selected-state-icon-background-color);color:var(--mat-stepper-header-selected-state-icon-foreground-color)}.mat-step-icon-state-done{background-color:var(--mat-stepper-header-done-state-icon-background-color);color:var(--mat-stepper-header-done-state-icon-foreground-color)}.mat-step-icon-state-edit{background-color:var(--mat-stepper-header-edit-state-icon-background-color);color:var(--mat-stepper-header-edit-state-icon-foreground-color)}'],encapsulation:2,changeDetection:0})}}return i})(),lv="500ms",cv="225ms",nv={horizontalStepTransition:Lu("horizontalStepTransition",[Zn("previous",Yn({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"})),Zn("current",Yn({transform:"none",visibility:"inherit"})),Zn("next",Yn({transform:"translate3d(100%, 0, 0)",visibility:"hidden"})),zu("* => *",Uu([Bu("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)"),Vu("@*",ju(),{optional:!0})]),{params:{animationDuration:lv}})]),verticalStepTransition:Lu("verticalStepTransition",[Zn("previous",Yn({height:"0px",visibility:"hidden"})),Zn("next",Yn({height:"0px",visibility:"hidden"})),Zn("current",Yn({height:"*",visibility:"inherit"})),zu("* <=> current",Uu([Bu("{{animationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)"),Vu("@*",ju(),{optional:!0})]),{params:{animationDuration:cv}})])},oI=(()=>{class i{constructor(e){this.templateRef=e}static{this.\u0275fac=function(n){return new(n||i)(M(vi))}}static{this.\u0275dir=K({type:i,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:[te.None,"matStepperIcon","name"]},standalone:!0})}}return i})(),aI=(()=>{class i{constructor(e){this._template=e}static{this.\u0275fac=function(n){return new(n||i)(M(vi))}}static{this.\u0275dir=K({type:i,selectors:[["ng-template","matStepContent",""]],standalone:!0})}}return i})(),sI=(()=>{class i extends ec{constructor(e,n,r,o){super(e,o),this._errorStateMatcher=n,this._viewContainerRef=r,this._isSelected=Zt.EMPTY,this.stepLabel=void 0}ngAfterContentInit(){this._isSelected=this._stepper.steps.changes.pipe(bt(()=>this._stepper.selectionChange.pipe(J(e=>e.selectedStep===this),li(this._stepper.selected===this)))).subscribe(e=>{e&&this._lazyContent&&!this._portal&&(this._portal=new So(this._lazyContent._template,this._viewContainerRef))})}ngOnDestroy(){this._isSelected.unsubscribe()}isErrorState(e,n){let r=this._errorStateMatcher.isErrorState(e,n),o=!!(e&&e.invalid&&this.interacted);return r||o}static{this.\u0275fac=function(n){return new(n||i)(M(_t(()=>dv)),M(Ja,4),M(gn),M(Dp,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-step"]],contentQueries:function(n,r,o){if(n&1&&(Vt(o,Ap,5),Vt(o,aI,5)),n&2){let a;ot(a=at())&&(r.stepLabel=a.first),ot(a=at())&&(r._lazyContent=a.first)}},hostAttrs:["hidden",""],inputs:{color:"color"},exportAs:["matStep"],standalone:!0,features:[Ue([{provide:Ja,useExisting:i},{provide:ec,useExisting:i}]),Ne,se],ngContentSelectors:rv,decls:1,vars:0,consts:[[3,"cdkPortalOutlet"]],template:function(n,r){n&1&&(zt(),L(0,XT,2,1,"ng-template"))},dependencies:[q_],encapsulation:2,changeDetection:0})}}return i})(),dv=(()=>{class i extends tc{get animationDuration(){return this._animationDuration}set animationDuration(e){this._animationDuration=/^\d+$/.test(e)?e+"ms":e}constructor(e,n,r){super(e,n,r),this._stepHeader=void 0,this._steps=void 0,this.steps=new hn,this.animationDone=new pe,this.labelPosition="end",this.headerPosition="top",this._iconOverrides={},this._animationDone=new ye,this._animationDuration="",this._isServer=!H(Je).isBrowser;let o=r.nativeElement.nodeName.toLowerCase();this.orientation=o==="mat-vertical-stepper"?"vertical":"horizontal"}ngAfterContentInit(){super.ngAfterContentInit(),this._icons.forEach(({name:e,templateRef:n})=>this._iconOverrides[e]=n),this.steps.changes.pipe(ut(this._destroyed)).subscribe(()=>{this._stateChanged()}),this._animationDone.pipe(fa((e,n)=>e.fromState===n.fromState&&e.toState===n.toState),ut(this._destroyed)).subscribe(e=>{e.toState==="current"&&this.animationDone.emit()})}_stepIsNavigable(e,n){return n.completed||this.selectedIndex===e||!this.linear}_getAnimationDuration(){return this.animationDuration?this.animationDuration:this.orientation==="horizontal"?lv:cv}static{this.\u0275fac=function(n){return new(n||i)(M(Co,8),M(yt),M(ge))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-stepper"],["mat-vertical-stepper"],["mat-horizontal-stepper"],["","matStepper",""]],contentQueries:function(n,r,o){if(n&1&&(Vt(o,sI,5),Vt(o,oI,5)),n&2){let a;ot(a=at())&&(r._steps=a),ot(a=at())&&(r._icons=a)}},viewQuery:function(n,r){if(n&1&&bn(Rp,5),n&2){let o;ot(o=at())&&(r._stepHeader=o)}},hostAttrs:["role","tablist"],hostVars:11,hostBindings:function(n,r){n&2&&(Ke("aria-orientation",r.orientation),$("mat-stepper-horizontal",r.orientation==="horizontal")("mat-stepper-vertical",r.orientation==="vertical")("mat-stepper-label-position-end",r.orientation==="horizontal"&&r.labelPosition=="end")("mat-stepper-label-position-bottom",r.orientation==="horizontal"&&r.labelPosition=="bottom")("mat-stepper-header-position-bottom",r.headerPosition==="bottom"))},inputs:{disableRipple:"disableRipple",color:"color",labelPosition:"labelPosition",headerPosition:"headerPosition",animationDuration:"animationDuration"},outputs:{animationDone:"animationDone"},exportAs:["matStepper","matVerticalStepper","matHorizontalStepper"],standalone:!0,features:[Ue([{provide:tc,useExisting:i}]),Ne,se],ngContentSelectors:rv,decls:5,vars:2,consts:[["stepTemplate",""],[1,"mat-horizontal-stepper-wrapper"],[1,"mat-horizontal-stepper-header-container"],[1,"mat-horizontal-content-container"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id","mat-horizontal-stepper-content-inactive"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"],[1,"mat-step"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],[3,"click","keydown","tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","color"]],template:function(n,r){if(n&1&&(zt(),L(0,YT,1,0)(1,JT,7,0)(2,tI,2,0)(3,iI,1,23,"ng-template",null,0,Du)),n&2){let o;V(0,r._isServer?0:-1),h(),V(1,(o=r.orientation)==="horizontal"?1:o==="vertical"?2:-1)}},dependencies:[Zs,Rp],styles:['.mat-stepper-vertical,.mat-stepper-horizontal{display:block;font-family:var(--mat-stepper-container-text-font);background:var(--mat-stepper-container-color)}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-header-position-bottom .mat-horizontal-stepper-header-container{order:1}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px;border-top-color:var(--mat-stepper-line-color)}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative;top:calc(calc((var(--mat-stepper-header-height) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;height:72px;overflow:hidden;align-items:center;padding:0 24px;height:var(--mat-stepper-header-height)}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-horizontal-stepper-header::before,.mat-horizontal-stepper-header::after{border-top-color:var(--mat-stepper-line-color)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{padding:calc((var(--mat-stepper-header-height) - 24px) / 2) 24px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::after{top:calc(calc((var(--mat-stepper-header-height) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;height:24px;padding:calc((var(--mat-stepper-header-height) - 24px) / 2) 24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-wrapper{display:flex;flex-direction:column}.mat-horizontal-stepper-content{outline:0}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-inactive{height:0;overflow:hidden}.mat-horizontal-stepper-content:not(.mat-horizontal-stepper-content-inactive){visibility:inherit !important}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}.cdk-high-contrast-active .mat-horizontal-content-container{outline:solid 1px}.mat-stepper-header-position-bottom .mat-horizontal-content-container{padding:24px 24px 0 24px}.mat-vertical-content-container{margin-left:36px;border:0;position:relative}.cdk-high-contrast-active .mat-vertical-content-container{outline:solid 1px}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}.mat-stepper-vertical-line::before{content:"";position:absolute;left:0;border-left-width:1px;border-left-style:solid;border-left-color:var(--mat-stepper-line-color);top:calc(8px - calc((var(--mat-stepper-header-height) - 24px) / 2));bottom:calc(8px - calc((var(--mat-stepper-header-height) - 24px) / 2))}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0}.mat-vertical-stepper-content:not(.mat-vertical-stepper-content-inactive){visibility:inherit !important}.mat-vertical-content{padding:0 24px 24px 24px}.mat-step:last-child .mat-vertical-content-container{border:none}'],encapsulation:2,data:{animation:[nv.horizontalStepTransition,nv.verticalStepTransition]},changeDetection:0})}}return i})();var uv=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=ie({type:i})}static{this.\u0275inj=ee({providers:[rI,Ja],imports:[Ie,xe,Ql,iv,Xl,es,dv,Rp,Ie]})}}return i})();var nc=(()=>{class i{constructor(e,n,r){this.http=e,this.userService=n,this.router=r,this.baseUrl=Ci+"/Auth"}logout(){sessionStorage.removeItem("authToken"),this.userService.clearUser(),this.router.navigate(["/"])}signIn(e,n){console.log("Signing in user:",e),this.http.post(this.baseUrl+"/login",e).subscribe(r=>{console.log(r),r&&r.user.roles.length>0?r.user.roles.some(a=>(console.log(a),a.name.toLowerCase()==="admin"))?(sessionStorage.setItem("authToken",r.token),this.userService.user.next(r.user),n(!0,"Login successful! Redirecting to dashboard...")):n(!1,"Access denied: You do not have administrator privileges."):n(!1,"Access denied: No roles assigned to this user.")},r=>{console.error("Login failed",r),r.status===404?n(!1,"user does not exist"):n(!1,"Login failed. Please try again later.")})}static{this.\u0275fac=function(n){return new(n||i)(k(qt),k(Jt),k(mt))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function lI(i,t){if(i&1&&(c(0,"div",9),E(),c(1,"svg",26),_(2,"path",27)(3,"polyline",28),d(),f(4),d()),i&2){let e=w();h(4),X(" ",e.loginSuccess," ")}}function cI(i,t){if(i&1&&(c(0,"div",17),f(1),d()),i&2){let e=w();h(),X(" ",e.getEmailErrorMessage()," ")}}function dI(i,t){i&1&&(E(),c(0,"svg",26),_(1,"path",29)(2,"circle",30),d())}function uI(i,t){i&1&&(E(),c(0,"svg",26),_(1,"path",31)(2,"line",32),d())}function mI(i,t){if(i&1&&(c(0,"div",17),f(1),d()),i&2){let e=w();h(),X(" ",e.getPasswordErrorMessage()," ")}}function pI(i,t){if(i&1&&(c(0,"div",23),E(),c(1,"svg",26),_(2,"circle",33)(3,"line",34)(4,"line",35),d(),f(5),d()),i&2){let e=w();h(5),X(" ",e.loginError," ")}}function hI(i,t){i&1&&(_(0,"div",36),f(1," Signing in... "))}function fI(i,t){i&1&&f(0," Sign In ")}var pv=(()=>{class i{constructor(e,n,r){this.fb=e,this.authService=n,this.router=r,this.loginSuccess=null,this.hide=!0,this.isLoading=!1,this.loginError=null,this.isLogin=!0,this.userForm=this.fb.group({email:["",[Te.required,Te.pattern(/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/)]],password:["",[Te.required]]})}togglePasswordVisibility(){this.hide=!this.hide}toggleAuthMode(){this.isLogin=!this.isLogin}onSubmit(){if(this.userForm.invalid){this.userForm.markAllAsTouched();return}this.isLoading=!0,this.loginError=null;let e=new zl(this.userForm.get("email")?.value,this.userForm.get("password")?.value);this.authService.signIn(e,(n,r)=>{this.isLoading=!1,n?this.router.navigate(["/home"]):this.loginError=r})}getEmailErrorMessage(){let e=this.userForm.get("email");return e?.hasError("required")?"Email is required":e?.hasError("pattern")?"Please enter a valid email address":""}getPasswordErrorMessage(){let e=this.userForm.get("password");return e?.hasError("required")?"Password is required":e?.hasError("pattern")?"Password must be at least 6 characters with at least one letter and one number":""}static{this.\u0275fac=function(n){return new(n||i)(M(Cn),M(nc),M(mt))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-login"]],standalone:!0,features:[se],decls:39,vars:16,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"auth-title"],[1,"gradient-text"],[1,"auth-subtitle"],[1,"auth-switch-container"],["type","button",1,"auth-switch-option",3,"click"],[1,"auth-form-container"],[1,"success-message"],[1,"auth-form",3,"ngSubmit","formGroup"],[1,"form-group"],[1,"input-container"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"input-icon"],["d","M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"],["points","22,6 12,13 2,6"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"auth-input"],[1,"error-message"],["x","3","y","11","width","18","height","11","rx","2","ry","2"],["d","M7 11V7a5 5 0 0 1 10 0v4"],["id","password","formControlName","password","placeholder","Enter your password",1,"auth-input",3,"type"],["type","button",1,"visibility-toggle",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],[1,"general-error"],[1,"form-footer"],["type","submit",1,"auth-button",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],["d","M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"],["cx","12","cy","12","r","3"],["d","M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"],["x1","1","y1","1","x2","23","y2","23"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"spinner"]],template:function(n,r){if(n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),f(4," Welcome to "),c(5,"span",4),f(6,"MusiX"),d()(),c(7,"p",5),f(8,"Sign in to continue as admin"),d()(),c(9,"div",6)(10,"button",7),I("click",function(){return r.toggleAuthMode()}),f(11," Login "),d()(),c(12,"div",8),L(13,lI,5,1,"div",9),c(14,"form",10),I("ngSubmit",function(){return r.onSubmit()}),c(15,"div",11)(16,"div",12),E(),c(17,"svg",13),_(18,"path",14)(19,"polyline",15),d(),F(),_(20,"input",16),d(),L(21,cI,2,1,"div",17),d(),c(22,"div",11)(23,"div",12),E(),c(24,"svg",13),_(25,"rect",18)(26,"path",19),d(),F(),_(27,"input",20),c(28,"button",21),I("click",function(){return r.togglePasswordVisibility()}),L(29,dI,3,0,"svg",22)(30,uI,3,0,"svg",22),d()(),L(31,mI,2,1,"div",17),d(),L(32,pI,6,1,"div",23),c(33,"div",24)(34,"button",25),L(35,hI,2,0)(36,fI,1,0),d(),_(37,"div")(38,"div"),d()()()()()),n&2){let o,a,s,l;h(10),$("active",r.isLogin),h(3),V(13,r.loginSuccess?13:-1),h(),R("formGroup",r.userForm),h(6),$("error",((o=r.userForm.get("email"))==null?null:o.invalid)&&((o=r.userForm.get("email"))==null?null:o.touched)),h(),V(21,(a=r.userForm.get("email"))!=null&&a.invalid&&((a=r.userForm.get("email"))!=null&&a.touched)?21:-1),h(6),$("error",((s=r.userForm.get("password"))==null?null:s.invalid)&&((s=r.userForm.get("password"))==null?null:s.touched)),R("type",r.hide?"password":"text"),h(2),R("ngIf",r.hide),h(),R("ngIf",!r.hide),h(),V(31,(l=r.userForm.get("password"))!=null&&l.invalid&&((l=r.userForm.get("password"))!=null&&l.touched)?31:-1),h(),V(32,r.loginError?32:-1),h(2),R("disabled",r.isLoading),h(),V(35,r.isLoading?35:36)}},dependencies:[xe,_n,Sn,ho,Dt,At,po,rr,or,j_,ur,J_,tv,Xl,z_,uv],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:1rem;background-color:var(--color-black);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.auth-card[_ngcontent-%COMP%]{width:100%;max-width:480px;background-color:#1e1e1e4d;border-radius:12px;border:1px solid rgba(255,255,255,.05);overflow:hidden;box-shadow:0 8px 32px #0000004d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.auth-header[_ngcontent-%COMP%]{padding:2rem 2rem 1rem;text-align:center}.auth-title[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:700;color:var(--color-white);margin-bottom:.5rem;margin-top:0}.gradient-text[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));-webkit-background-clip:text;background-clip:text;color:transparent}.auth-subtitle[_ngcontent-%COMP%]{color:#a0a0a0;font-size:.875rem;margin:0}.auth-switch-container[_ngcontent-%COMP%]{display:flex;position:relative;margin:0 2rem 1.5rem;padding:.25rem;overflow:hidden;border-bottom:1px solid rgba(255,255,255,.1)}.auth-switch-option[_ngcontent-%COMP%]{flex:1;padding:.75rem 0;text-align:center;color:#a0a0a0;background:none;border:none;cursor:pointer;font-size:.9rem;font-weight:500;position:relative;z-index:2;transition:color .3s ease}.auth-switch-option.active[_ngcontent-%COMP%]{color:var(--color-white)}.auth-switch-underline[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:50%;height:2px;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));transition:left .3s ease;z-index:1}.auth-form-container[_ngcontent-%COMP%]{padding:0 2rem 2rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;animation:_ngcontent-%COMP%_fadeIn .3s ease-out forwards}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.input-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;color:#a0a0a0;width:18px;height:18px;z-index:1}.auth-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 2.5rem .75rem 2.75rem;background-color:#1e1e1e80;border:1px solid rgba(255,255,255,.1);border-radius:8px;color:var(--color-white);font-size:.9rem;transition:border-color .3s,box-shadow .3s;box-sizing:border-box}.auth-input[_ngcontent-%COMP%]::placeholder{color:#666}.auth-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#ffffff4d;box-shadow:0 0 0 2px #ffffff0d}.auth-input.error[_ngcontent-%COMP%]{border-color:#ff4d4f}.visibility-toggle[_ngcontent-%COMP%]{position:absolute;right:.75rem;background:none;border:none;color:#a0a0a0;cursor:pointer;padding:.25rem;display:flex;align-items:center;justify-content:center;z-index:1}.visibility-toggle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.visibility-toggle[_ngcontent-%COMP%]:hover{color:var(--color-white)}.error-message[_ngcontent-%COMP%]{color:#ff4d4f;font-size:.75rem;margin-top:.25rem;padding-left:.5rem}.general-error[_ngcontent-%COMP%]{color:#ff4d4f;font-size:.875rem;padding:.75rem;background-color:#ff4d4f1a;border-radius:6px;margin-bottom:.5rem;text-align:center;display:flex;align-items:center;justify-content:center;gap:.5rem}.general-error[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.success-message[_ngcontent-%COMP%]{color:#52c41a;font-size:.875rem;padding:.75rem;background-color:#52c41a1a;border-radius:6px;margin-bottom:1rem;text-align:center;display:flex;align-items:center;justify-content:center;gap:.5rem}.success-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.form-footer[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin-top:.5rem}.auth-button[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));color:var(--color-white);border:none;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;transition:opacity .3s,transform .2s;display:flex;justify-content:center;align-items:center;gap:.5rem}.auth-button[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9}.auth-button[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(1px)}.auth-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top:2px solid var(--color-white);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.forgot-password[_ngcontent-%COMP%]{text-align:center;font-size:.875rem}.forgot-link[_ngcontent-%COMP%]{color:#a0a0a0;text-decoration:none;transition:color .3s}.forgot-link[_ngcontent-%COMP%]:hover{color:var(--color-white)}.terms-text[_ngcontent-%COMP%]{text-align:center;font-size:.75rem;color:#a0a0a0;line-height:1.4}.terms-link[_ngcontent-%COMP%]{color:var(--color-white);text-decoration:none;transition:color .3s}.terms-link[_ngcontent-%COMP%]:hover{color:var(--gradient-middle)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 640px){.auth-container[_ngcontent-%COMP%]{padding:.5rem}.auth-header[_ngcontent-%COMP%]{padding:1.5rem 1.5rem 1rem}.auth-form-container[_ngcontent-%COMP%]{padding:0 1.5rem 1.5rem}.auth-switch-container[_ngcontent-%COMP%]{margin:0 1.5rem 1.5rem}.auth-title[_ngcontent-%COMP%]{font-size:1.5rem}}"]})}}return i})();var gI=(i,t)=>t.id;function bI(i,t){i&1&&(c(0,"div",22),_(1,"div",24),c(2,"p"),f(3,"Loading users..."),d()())}function _I(i,t){if(i&1&&(c(0,"div",25),E(),c(1,"svg",7),_(2,"path",26)(3,"circle",27),d(),F(),c(4,"h3"),f(5,"No users found"),d(),c(6,"p"),f(7),d()()),i&2){let e=w();h(7),N(e.searchTerm?"Try adjusting your search criteria":"No users in the system yet")}}function vI(i,t){if(i&1){let e=ve();c(0,"div",29)(1,"div",30)(2,"div",31),E(),c(3,"svg",7),_(4,"path",26)(5,"circle",27),d()(),F(),c(6,"div",32)(7,"h3",33),f(8),d(),c(9,"p",34),f(10),d()()(),c(11,"div",35)(12,"div",36)(13,"div",37),E(),c(14,"svg",7),_(15,"path",38)(16,"polyline",39)(17,"polyline",40),d()(),F(),c(18,"div",41)(19,"span",42),f(20),d(),c(21,"span",43),f(22,"Playlists"),d()()(),c(23,"div",36)(24,"div",37),E(),c(25,"svg",7),_(26,"rect",44)(27,"line",45)(28,"line",46)(29,"line",47),d()(),F(),c(30,"div",41)(31,"span",42),f(32),d(),c(33,"span",43),f(34,"Joined"),d()()()(),c(35,"div",48)(36,"button",49),I("click",function(){let r=z(e).$implicit,o=w(2);return j(o.openDeleteModal(r))}),E(),c(37,"svg",7),_(38,"polyline",50)(39,"path",51),d()()()()}if(i&2){let e=t.$implicit,n=w(2);h(8),N(e.userName),h(2),N(e.email),h(10),N(e.ownedPlaylists.length+e.sharedPlaylists.length),h(12),N(n.formatDate(e.createdAt))}}function yI(i,t){if(i&1&&(c(0,"div",28),We(1,vI,40,4,"div",29,gI),d()),i&2){let e=w();h(),Ge(e.filteredUsers)}}function xI(i,t){if(i&1&&(c(0,"div",59),E(),c(1,"svg",7),_(2,"circle",71)(3,"line",72)(4,"line",73),d(),f(5),d()),i&2){let e=w(2);h(5),X(" ",e.addUserError," ")}}function wI(i,t){if(i&1&&(c(0,"div",63),f(1),d()),i&2){let e=w(2);h(),X(" ",e.getFormErrorMessage("userName")," ")}}function CI(i,t){if(i&1&&(c(0,"div",63),f(1),d()),i&2){let e=w(2);h(),X(" ",e.getFormErrorMessage("email")," ")}}function SI(i,t){if(i&1&&(c(0,"div",63),f(1),d()),i&2){let e=w(2);h(),X(" ",e.getFormErrorMessage("password")," ")}}function MI(i,t){i&1&&(_(0,"div",24),f(1," Adding... "))}function EI(i,t){i&1&&f(0," Add User ")}function kI(i,t){if(i&1){let e=ve();c(0,"div",52),I("click",function(){z(e);let r=w();return j(r.closeAddUserModal())}),c(1,"div",53),I("click",function(r){return z(e),j(r.stopPropagation())}),c(2,"div",54)(3,"h2"),f(4,"Add New User"),d(),c(5,"button",55),I("click",function(){z(e);let r=w();return j(r.closeAddUserModal())}),E(),c(6,"svg",7),_(7,"line",56)(8,"line",57),d()()(),F(),c(9,"form",58),I("ngSubmit",function(){z(e);let r=w();return j(r.onAddUser())}),L(10,xI,6,1,"div",59),c(11,"div",60)(12,"label",61),f(13,"Username"),d(),_(14,"input",62),L(15,wI,2,1,"div",63),d(),c(16,"div",60)(17,"label",64),f(18,"Email"),d(),_(19,"input",65),L(20,CI,2,1,"div",63),d(),c(21,"div",60)(22,"label",66),f(23,"Password"),d(),_(24,"input",67),L(25,SI,2,1,"div",63),d(),c(26,"div",68)(27,"button",69),I("click",function(){z(e);let r=w();return j(r.closeAddUserModal())}),f(28,"Cancel"),d(),c(29,"button",70),L(30,MI,2,0)(31,EI,1,0),d()()()()()}if(i&2){let e,n,r,o,a,s,l=w();h(9),R("formGroup",l.addUserForm),h(),V(10,l.addUserError?10:-1),h(4),$("error",((e=l.addUserForm.get("userName"))==null?null:e.invalid)&&((e=l.addUserForm.get("userName"))==null?null:e.touched)),h(),V(15,(n=l.addUserForm.get("userName"))!=null&&n.invalid&&((n=l.addUserForm.get("userName"))!=null&&n.touched)?15:-1),h(4),$("error",((r=l.addUserForm.get("email"))==null?null:r.invalid)&&((r=l.addUserForm.get("email"))==null?null:r.touched)),h(),V(20,(o=l.addUserForm.get("email"))!=null&&o.invalid&&((o=l.addUserForm.get("email"))!=null&&o.touched)?20:-1),h(4),$("error",((a=l.addUserForm.get("password"))==null?null:a.invalid)&&((a=l.addUserForm.get("password"))==null?null:a.touched)),h(),V(25,(s=l.addUserForm.get("password"))!=null&&s.invalid&&((s=l.addUserForm.get("password"))!=null&&s.touched)?25:-1),h(4),R("disabled",l.isAddingUser||l.addUserForm.invalid),h(),V(30,l.isAddingUser?30:31)}}function TI(i,t){if(i&1){let e=ve();c(0,"div",52),I("click",function(){z(e);let r=w();return j(r.closeDeleteModal())}),c(1,"div",74),I("click",function(r){return z(e),j(r.stopPropagation())}),c(2,"div",54)(3,"h2"),f(4,"Delete User"),d(),c(5,"button",55),I("click",function(){z(e);let r=w();return j(r.closeDeleteModal())}),E(),c(6,"svg",7),_(7,"line",56)(8,"line",57),d()()(),F(),c(9,"div",75)(10,"div",76),E(),c(11,"svg",7),_(12,"path",77)(13,"line",78)(14,"line",79),d()(),F(),c(15,"p"),f(16,"Are you sure you want to delete "),c(17,"strong"),f(18),d(),f(19,"?"),d(),c(20,"p",80),f(21,"This action cannot be undone. All user data will be permanently deleted."),d()(),c(22,"div",68)(23,"button",69),I("click",function(){z(e);let r=w();return j(r.closeDeleteModal())}),f(24,"Cancel"),d(),c(25,"button",81),I("click",function(){z(e);let r=w();return j(r.confirmDelete())}),f(26,"Delete User"),d()()()()}if(i&2){let e=w();h(18),N(e.userToDelete.userName)}}var hv=(()=>{class i{constructor(e,n){this.userService=e,this.fb=n,this.users=[],this.filteredUsers=[],this.searchTerm="",this.sortBy="name",this.sortDirection="asc",this.isLoading=!1,this.showAddUserModal=!1,this.showDeleteModal=!1,this.userToDelete=null,this.isAddingUser=!1,this.addUserError=null,this.log=r=>{console.log(r.createAt)},this.addUserForm=this.fb.group({userName:["",[Te.required,Te.minLength(2)]],email:["",[Te.required,Te.email]],password:["",[Te.required,Te.minLength(6)]]})}ngOnInit(){this.loadUsers()}loadUsers(){this.isLoading=!0,this.userService.getFull().subscribe({next:e=>{this.users=e,this.filteredUsers=[...e],this.applyFiltersAndSort(),this.isLoading=!1,console.log("Users loaded:",this.users)},error:e=>{console.error("Error loading users:",e),this.isLoading=!1}})}onSearch(){this.applyFiltersAndSort()}onSort(e){this.sortBy===e?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortBy=e,this.sortDirection="asc"),this.applyFiltersAndSort()}applyFiltersAndSort(){this.filteredUsers=this.users.filter(e=>e.userName.toLowerCase().includes(this.searchTerm.toLowerCase())||e.email.toLowerCase().includes(this.searchTerm.toLowerCase())),this.filteredUsers.sort((e,n)=>{let r=0;return this.sortBy==="name"?r=e.userName.localeCompare(n.userName):this.sortBy==="date"&&(r=new Date(e.createdAt).getTime()-new Date(n.createdAt).getTime()),this.sortDirection==="asc"?r:-r})}openAddUserModal(){this.showAddUserModal=!0,this.addUserForm.reset(),this.addUserError=null}closeAddUserModal(){this.showAddUserModal=!1,this.addUserForm.reset(),this.addUserError=null}onAddUser(){if(this.addUserForm.invalid){this.addUserForm.markAllAsTouched();return}this.isAddingUser=!0,this.addUserError=null;let e=new Ul(this.addUserForm.get("userName")?.value,this.addUserForm.get("email")?.value,this.addUserForm.get("password")?.value);this.userService.addUser(e).subscribe({next:()=>{this.isAddingUser=!1,this.closeAddUserModal(),this.loadUsers()},error:n=>{this.isAddingUser=!1,this.addUserError=n.error?.message||"Failed to add user"}})}openDeleteModal(e){this.userToDelete=e,this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.userToDelete=null}confirmDelete(){this.userToDelete&&(this.userService.deleteUser(this.userToDelete.id).subscribe({next:()=>{this.loadUsers(),this.closeDeleteModal()},error:e=>{console.error("Error deleting user:",e)}}),this.users=this.users.filter(e=>e.id!==this.userToDelete.id),this.applyFiltersAndSort(),this.closeDeleteModal())}getTotalSongs(e){return e.ownedPlaylists.reduce((n,r)=>n+(r.songs?.length||0),0)}formatDate(e){return console.log("Formatting date:",e),new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}getFormErrorMessage(e){let n=this.addUserForm.get(e);if(n?.hasError("required"))return`${e.charAt(0).toUpperCase()+e.slice(1)} is required`;if(n?.hasError("email"))return"Please enter a valid email address";if(n?.hasError("minlength")){let r=n.errors?.minlength?.requiredLength;return`${e.charAt(0).toUpperCase()+e.slice(1)} must be at least ${r} characters`}return""}static{this.\u0275fac=function(n){return new(n||i)(M(Jt),M(Cn))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-users"]],standalone:!0,features:[se],decls:34,vars:8,consts:[[1,"users-container"],[1,"users-header"],[1,"header-content"],[1,"page-title"],[1,"gradient-text"],[1,"page-subtitle"],[1,"add-user-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"],["cx","8.5","cy","7","r","4"],["x1","20","y1","8","x2","20","y2","14"],["x1","23","y1","11","x2","17","y2","11"],[1,"controls-section"],[1,"search-container"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"search-icon"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["type","text","placeholder","Search users by name or email...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"sort-controls"],[1,"sort-label"],[1,"sort-btn",3,"click"],[1,"users-list-container"],[1,"loading-state"],[1,"modal-overlay"],[1,"spinner"],[1,"empty-state"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"users-list"],[1,"user-row"],[1,"user-main-info"],[1,"user-avatar"],[1,"user-details"],[1,"user-name"],[1,"user-email"],[1,"user-stats"],[1,"stat-item"],[1,"stat-icon"],["d","M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"],["points","9 9 9 15"],["points","15 9 15 15"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"user-actions"],["title","Delete User",1,"action-btn","delete-btn",3,"click"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"modal-form",3,"ngSubmit","formGroup"],[1,"error-message"],[1,"form-group"],["for","userName"],["type","text","id","userName","formControlName","userName","placeholder","Enter username",1,"form-input"],[1,"field-error"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter email address",1,"form-input"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter password",1,"form-input"],[1,"modal-actions"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"submit-btn",3,"disabled"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"modal-content","delete-modal",3,"click"],[1,"delete-content"],[1,"warning-icon"],["d","M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],[1,"warning-text"],["type","button",1,"delete-confirm-btn",3,"click"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"span",4),f(5,"Users Management"),d()(),c(6,"p",5),f(7,"Manage all users in your system"),d()(),c(8,"button",6),I("click",function(){return r.openAddUserModal()}),E(),c(9,"svg",7),_(10,"path",8)(11,"circle",9)(12,"line",10)(13,"line",11),d(),f(14," Add User "),d()(),F(),c(15,"div",12)(16,"div",13),E(),c(17,"svg",14),_(18,"circle",15)(19,"path",16),d(),F(),c(20,"input",17),Ot("ngModelChange",function(a){return Pt(r.searchTerm,a)||(r.searchTerm=a),a}),I("input",function(){return r.onSearch()}),d()(),c(21,"div",18)(22,"span",19),f(23,"Sort by:"),d(),c(24,"button",20),I("click",function(){return r.onSort("name")}),f(25," Name "),d(),c(26,"button",20),I("click",function(){return r.onSort("date")}),f(27," Join Date "),d()()(),c(28,"div",21),L(29,bI,4,0,"div",22)(30,_I,8,1)(31,yI,3,0),d()(),L(32,kI,32,13,"div",23)(33,TI,27,1,"div",23)),n&2&&(h(20),It("ngModel",r.searchTerm),h(4),$("active",r.sortBy==="name"),h(2),$("active",r.sortBy==="date"),h(3),V(29,r.isLoading?29:r.filteredUsers.length===0?30:31),h(3),V(32,r.showAddUserModal?32:-1),h(),V(33,r.showDeleteModal&&r.userToDelete?33:-1))},dependencies:[xe,Rt,ho,Dt,At,po,di,Sn,rr,or],styles:['[_ngcontent-%COMP%]:root{--color-black: #000000;--color-white: #ffffff;--gradient-start: #ff6b6b;--gradient-middle: #4ecdc4;--gradient-end: #45b7d1;--bg-primary: rgba(15, 15, 15, .95);--bg-secondary: rgba(30, 30, 30, .5);--bg-tertiary: rgba(40, 40, 40, .3);--border-color: rgba(255, 255, 255, .1);--text-primary: #ffffff;--text-secondary: #a0a0a0;--text-muted: #666666;--hover-bg: rgba(255, 255, 255, .05);--success-color: #52c41a;--error-color: #ff4d4f;--warning-color: #faad14}.users-container[_ngcontent-%COMP%]{padding:2rem;min-height:100vh;background:var(--color-black);color:var(--text-primary);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.users-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:1px solid var(--border-color)}.header-content[_ngcontent-%COMP%]{flex:1}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:2rem;font-weight:700;margin:0 0 .5rem;color:var(--text-primary)}.title-icon[_ngcontent-%COMP%]{width:32px;height:32px;stroke:var(--gradient-middle)}.gradient-text[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));-webkit-background-clip:text;background-clip:text;color:transparent}.page-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1rem;margin:0}.add-user-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:10px;padding:.75rem 1.5rem;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));color:var(--text-primary);border:none;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease}.add-user-btn[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-1px);box-shadow:0 4px 12px #0000004d}.add-user-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.controls-section[_ngcontent-%COMP%]{display:flex;gap:1.5rem;margin-bottom:2rem;align-items:center;flex-wrap:wrap}.search-container[_ngcontent-%COMP%]{position:relative;flex:1;min-width:300px}.search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);width:18px;height:18px;color:var(--text-secondary)}.search-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.5rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;color:var(--text-primary);font-size:.9rem;transition:all .3s ease;box-sizing:border-box}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--gradient-middle);box-shadow:0 0 0 2px #4ecdc41a}.sort-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.sort-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;font-weight:500}.sort-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:6px;color:var(--text-secondary);cursor:pointer;transition:all .3s ease;font-size:.875rem}.sort-btn[_ngcontent-%COMP%]:hover{background:var(--hover-bg);color:var(--text-primary)}.sort-btn.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));color:var(--text-primary);border-color:transparent}.sort-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px;transition:transform .3s ease}.sort-btn[_ngcontent-%COMP%]   svg.rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}.users-list-container[_ngcontent-%COMP%]{background:transparent}.users-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.user-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;padding:.8rem .5rem;background:#9191911a;border:1px solid var(--border-color);border-radius:12px;transition:all .3s ease;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);position:relative;overflow:hidden;width:100%;box-sizing:border-box}.user-row[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;bottom:0;width:4px;background:linear-gradient(180deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));opacity:0;transition:opacity .3s ease}.user-row[_ngcontent-%COMP%]:hover{transform:translate(8px);box-shadow:-8px 8px 32px #0000004d;border-color:#ffffff26}.user-row[_ngcontent-%COMP%]:hover:before{opacity:1}.user-main-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.1rem;flex:0 0 300px;min-width:0}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0;box-shadow:0 4px 12px #0003}.user-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:22px;height:22px;color:var(--text-primary)}.user-details[_ngcontent-%COMP%]{flex:1;min-width:0}.user-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary);margin:0 0 .25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-email[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-stats[_ngcontent-%COMP%]{display:flex;gap:1rem;flex:1;justify-content:center;align-items:center}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.5rem .75rem;background:var(--bg-tertiary);border-radius:8px;transition:all .3s ease;min-width:120px}.stat-item[_ngcontent-%COMP%]:hover{background:var(--hover-bg);border-color:#ffffff26;transform:translateY(-2px)}.stat-icon[_ngcontent-%COMP%]{width:32px;height:32px;background:#ffffff0d;border-radius:6px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.stat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;color:var(--text-secondary)}.stat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0}.stat-value[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary);line-height:1.2;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.stat-label[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-secondary);font-weight:500;text-transform:uppercase;letter-spacing:.5px;line-height:1}.user-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-shrink:0}.action-btn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;position:relative;overflow:hidden}.action-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;opacity:0;transition:opacity .3s ease}.edit-btn[_ngcontent-%COMP%]{background:#4ecdc41a;color:var(--gradient-middle)}.edit-btn[_ngcontent-%COMP%]:hover{background:#4ecdc433;transform:scale(1.05)}.edit-btn[_ngcontent-%COMP%]:hover:before{background:#4ecdc41a;opacity:1}.delete-btn[_ngcontent-%COMP%]{background:#ff4d4f1a;color:var(--error-color)}.delete-btn[_ngcontent-%COMP%]:hover{background:#ff4d4f33;transform:scale(1.05)}.delete-btn[_ngcontent-%COMP%]:hover:before{background:#ff4d4f1a;opacity:1}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;position:relative;z-index:1}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid rgba(255,255,255,.1);border-top:3px solid var(--gradient-middle);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px;color:var(--text-secondary);margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin:0 0 .5rem;font-size:1.25rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}@media (max-width: 1200px){.user-stats[_ngcontent-%COMP%]{gap:1.5rem}.stat-item[_ngcontent-%COMP%]{min-width:100px}}@media (max-width: 1024px){.user-row[_ngcontent-%COMP%]{gap:1rem}.user-main-info[_ngcontent-%COMP%]{flex:0 0 250px}.user-stats[_ngcontent-%COMP%]{gap:1rem}.stat-item[_ngcontent-%COMP%]{min-width:90px;padding:.5rem}.stat-content[_ngcontent-%COMP%]{align-items:center;text-align:center}}@media (max-width: 768px){.user-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem;padding:1rem}.user-row[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.user-main-info[_ngcontent-%COMP%]{flex:none;justify-content:space-between}.user-stats[_ngcontent-%COMP%]{justify-content:space-between;gap:.5rem}.stat-item[_ngcontent-%COMP%]{flex:1;min-width:0;flex-direction:column;text-align:center;gap:.5rem;padding:.75rem .5rem}.stat-icon[_ngcontent-%COMP%]{width:28px;height:28px}.stat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.user-actions[_ngcontent-%COMP%]{justify-content:center}}@media (max-width: 480px){.users-container[_ngcontent-%COMP%]{padding:1rem .5rem}.user-row[_ngcontent-%COMP%]{padding:.75rem}.user-main-info[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center;gap:.75rem}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px}.user-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.user-stats[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.stat-item[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;text-align:left}.action-btn[_ngcontent-%COMP%]{width:36px;height:36px}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background:var(--bg-primary);border-radius:12px;border:1px solid var(--border-color);width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #00000080}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid var(--border-color)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.25rem}.close-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:6px;border:none;background:var(--hover-bg);color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:var(--border-color);color:var(--text-primary)}.close-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.modal-form[_ngcontent-%COMP%]{padding:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:var(--text-primary);font-weight:500;font-size:.875rem}.form-input[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;color:var(--text-primary);font-size:.9rem;transition:all .3s ease;box-sizing:border-box}.form-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--gradient-middle);box-shadow:0 0 0 2px #4ecdc41a}.form-input.error[_ngcontent-%COMP%]{border-color:var(--error-color)}.field-error[_ngcontent-%COMP%]{color:var(--error-color);font-size:.75rem;margin-top:.25rem}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--error-color);background:#ff4d4f1a;padding:.75rem;border-radius:6px;margin-bottom:1rem;font-size:.875rem}.error-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:flex-end;margin-top:2rem}.cancel-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:6px;color:var(--text-secondary);cursor:pointer;transition:all .3s ease}.cancel-btn[_ngcontent-%COMP%]:hover{background:var(--hover-bg);color:var(--text-primary)}.submit-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));border:none;border-radius:6px;color:var(--text-primary);cursor:pointer;transition:all .3s ease;font-weight:500}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9;transform:translateY(-1px)}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.submit-btn[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top:2px solid var(--text-primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.delete-confirm-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--error-color);border:none;border-radius:6px;color:var(--text-primary);cursor:pointer;transition:all .3s ease;font-weight:500}.delete-confirm-btn[_ngcontent-%COMP%]:hover{background:#d73027;transform:translateY(-1px)}.delete-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{max-width:400px}.delete-content[_ngcontent-%COMP%]{padding:1.5rem;text-align:center}.warning-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#ffad141a;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1rem}.warning-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:var(--warning-color)}.delete-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-primary);margin:0 0 .5rem;line-height:1.5}.warning-text[_ngcontent-%COMP%]{color:var(--text-secondary)!important;font-size:.875rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 1024px){.table-header[_ngcontent-%COMP%], .user-row[_ngcontent-%COMP%]{grid-template-columns:2fr .8fr .8fr 1fr .8fr}}@media (max-width: 768px){.users-container[_ngcontent-%COMP%]{padding:1rem}.users-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:stretch}.controls-section[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.search-container[_ngcontent-%COMP%]{min-width:auto}.table-header[_ngcontent-%COMP%]{display:none}.user-row[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:.75rem;padding:1rem;background:var(--bg-tertiary);margin-bottom:.5rem;border-radius:8px;border:none}.user-info-cell[_ngcontent-%COMP%]{grid-column:1}.stat-cell[_ngcontent-%COMP%], .date-cell[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.stat-cell[_ngcontent-%COMP%]:before{content:"Playlists: ";color:var(--text-secondary);font-size:.875rem}.stat-cell[_ngcontent-%COMP%]:nth-of-type(3):before{content:"Songs: "}.date-cell[_ngcontent-%COMP%]:before{content:"Joined: ";color:var(--text-secondary);font-size:.875rem}.actions-cell[_ngcontent-%COMP%]{justify-content:flex-start}.modal-content[_ngcontent-%COMP%]{margin:1rem;width:calc(100% - 2rem)}}.table-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.table-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-tertiary)}.table-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.table-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#fff3}']})}}return i})();var Eo=(i,t)=>{let e=H(mt);return sessionStorage.getItem("authToken")||e.navigate(["/"]),!0};function II(i,t){if(i&1&&(c(0,"div",9),E(),c(1,"svg",5),_(2,"circle",32)(3,"line",33)(4,"line",34),d(),f(5),d()),i&2){let e=w(2);h(5),X(" ",e.editSongError," ")}}function PI(i,t){if(i&1&&(c(0,"div",14),f(1),d()),i&2){let e=w(2);h(),X(" ",e.getFormErrorMessage("name")," ")}}function OI(i,t){if(i&1&&(c(0,"div",14),f(1),d()),i&2){let e=w(2);h(),X(" ",e.getFormErrorMessage("artist")," ")}}function DI(i,t){if(i&1&&(c(0,"div",14),f(1),d()),i&2){let e=w(2);h(),X(" ",e.getFormErrorMessage("album")," ")}}function AI(i,t){if(i&1&&(c(0,"div",14),f(1),d()),i&2){let e=w(2);h(),X(" ",e.getFormErrorMessage("genre")," ")}}function RI(i,t){if(i&1&&(c(0,"div",14),f(1),d()),i&2){let e=w(2);h(),X(" ",e.getFormErrorMessage("year")," ")}}function FI(i,t){if(i&1&&(c(0,"div",14),f(1),d()),i&2){let e=w(2);h(),X(" ",e.getFormErrorMessage("audioFilePath")," ")}}function NI(i,t){if(i&1&&(c(0,"div",14),f(1),d()),i&2){let e=w(2);h(),X(" ",e.getFormErrorMessage("imageFilePath")," ")}}function LI(i,t){i&1&&(_(0,"div",35),f(1," Updating... "))}function BI(i,t){i&1&&f(0," Update Song ")}function UI(i,t){if(i&1){let e=ve();c(0,"div",1),I("click",function(){z(e);let r=w();return j(r.closeModal())}),c(1,"div",2),I("click",function(r){return z(e),j(r.stopPropagation())}),c(2,"div",3)(3,"h2"),f(4),d(),c(5,"button",4),I("click",function(){z(e);let r=w();return j(r.closeModal())}),E(),c(6,"svg",5),_(7,"line",6)(8,"line",7),d()()(),F(),c(9,"form",8),I("ngSubmit",function(){z(e);let r=w();return j(r.onEditSong())}),L(10,II,6,1,"div",9),c(11,"div",10)(12,"div",11)(13,"label",12),f(14,"Song Name"),d(),_(15,"input",13),L(16,PI,2,1,"div",14),d(),c(17,"div",11)(18,"label",15),f(19,"Artist"),d(),_(20,"input",16),L(21,OI,2,1,"div",14),d()(),c(22,"div",10)(23,"div",11)(24,"label",17),f(25,"Album"),d(),_(26,"input",18),L(27,DI,2,1,"div",14),d(),c(28,"div",11)(29,"label",19),f(30,"Genre"),d(),_(31,"input",20),L(32,AI,2,1,"div",14),d(),c(33,"div",11)(34,"label",21),f(35,"Year"),d(),_(36,"input",22),L(37,RI,2,1,"div",14),d()(),c(38,"div",10)(39,"div",11)(40,"label",23),f(41,"Audio File URL"),d(),_(42,"input",24),L(43,FI,2,1,"div",14),d(),c(44,"div",11)(45,"label",25),f(46,"Image File URL"),d(),_(47,"input",26),L(48,NI,2,1,"div",14),d()(),c(49,"div",11)(50,"label",27),f(51,"Lyrics (Optional)"),d(),c(52,"textarea",28),f(53,"          "),d()(),c(54,"div",29)(55,"button",30),I("click",function(){z(e);let r=w();return j(r.closeModal())}),f(56,"Cancel"),d(),c(57,"button",31),L(58,LI,2,0)(59,BI,1,0),d()()()()()}if(i&2){let e,n,r,o,a,s,l,u,m,p,y,v,P,b,x=w();h(4),X("Edit Song: ",x.songToEdit.name,""),h(5),R("formGroup",x.editSongForm),h(),V(10,x.editSongError?10:-1),h(5),$("error",((e=x.editSongForm.get("name"))==null?null:e.invalid)&&((e=x.editSongForm.get("name"))==null?null:e.touched)),h(),V(16,(n=x.editSongForm.get("name"))!=null&&n.invalid&&((n=x.editSongForm.get("name"))!=null&&n.touched)?16:-1),h(4),$("error",((r=x.editSongForm.get("artist"))==null?null:r.invalid)&&((r=x.editSongForm.get("artist"))==null?null:r.touched)),h(),V(21,(o=x.editSongForm.get("artist"))!=null&&o.invalid&&((o=x.editSongForm.get("artist"))!=null&&o.touched)?21:-1),h(5),$("error",((a=x.editSongForm.get("album"))==null?null:a.invalid)&&((a=x.editSongForm.get("album"))==null?null:a.touched)),h(),V(27,(s=x.editSongForm.get("album"))!=null&&s.invalid&&((s=x.editSongForm.get("album"))!=null&&s.touched)?27:-1),h(4),$("error",((l=x.editSongForm.get("genre"))==null?null:l.invalid)&&((l=x.editSongForm.get("genre"))==null?null:l.touched)),h(),V(32,(u=x.editSongForm.get("genre"))!=null&&u.invalid&&((u=x.editSongForm.get("genre"))!=null&&u.touched)?32:-1),h(4),$("error",((m=x.editSongForm.get("year"))==null?null:m.invalid)&&((m=x.editSongForm.get("year"))==null?null:m.touched)),h(),V(37,(p=x.editSongForm.get("year"))!=null&&p.invalid&&((p=x.editSongForm.get("year"))!=null&&p.touched)?37:-1),h(5),$("error",((y=x.editSongForm.get("audioFilePath"))==null?null:y.invalid)&&((y=x.editSongForm.get("audioFilePath"))==null?null:y.touched)),h(),V(43,(v=x.editSongForm.get("audioFilePath"))!=null&&v.invalid&&((v=x.editSongForm.get("audioFilePath"))!=null&&v.touched)?43:-1),h(4),$("error",((P=x.editSongForm.get("imageFilePath"))==null?null:P.invalid)&&((P=x.editSongForm.get("imageFilePath"))==null?null:P.touched)),h(),V(48,(b=x.editSongForm.get("imageFilePath"))!=null&&b.invalid&&((b=x.editSongForm.get("imageFilePath"))!=null&&b.touched)?48:-1),h(9),R("disabled",x.isEditingSong||x.editSongForm.invalid),h(),V(58,x.isEditingSong?58:59)}}var fv=(()=>{class i{constructor(e,n){this.fb=e,this.songService=n,this.isVisible=!1,this.songToEdit=null,this.onClose=new pe,this.onSongUpdated=new pe,this.isEditingSong=!1,this.editSongError=null,this.editSongForm=this.fb.group({name:["",[Te.required,Te.minLength(2)]],artist:["",[Te.required,Te.minLength(2)]],genre:["",[Te.required]],year:["",[Te.required,Te.min(1900),Te.max(new Date().getFullYear())]],album:["",[Te.required]],lyrics:[""],audioFilePath:["",[Te.required]],imageFilePath:["",[Te.required]]})}ngOnChanges(e){e.songToEdit&&this.songToEdit&&this.populateForm(),e.isVisible&&this.isVisible&&(this.editSongError=null)}populateForm(){this.songToEdit&&this.editSongForm.patchValue({name:this.songToEdit.name,artist:this.songToEdit.artist,genre:this.songToEdit.genre,year:this.songToEdit.year,album:this.songToEdit.album,lyrics:this.songToEdit.lyrics,audioFilePath:this.songToEdit.audioFilePath,imageFilePath:this.songToEdit.imageFilePath})}closeModal(){this.editSongForm.reset(),this.editSongError=null,this.onClose.emit()}onEditSong(){if(this.editSongForm.invalid||!this.songToEdit){this.editSongForm.markAllAsTouched();return}this.isEditingSong=!0,this.editSongError=null;let e=this.editSongForm.value;this.songService.updateSong(this.songToEdit.id,e).subscribe({next:()=>{this.isEditingSong=!1,this.closeModal(),this.onSongUpdated.emit()},error:n=>{this.isEditingSong=!1,this.editSongError="Failed to update song. Please try again.",console.error("Error updating song:",n)}})}getFormErrorMessage(e){let n=this.editSongForm.get(e);if(n?.hasError("required"))return`${e.charAt(0).toUpperCase()+e.slice(1)} is required`;if(n?.hasError("minlength")){let r=n.errors?.minlength?.requiredLength;return`${e.charAt(0).toUpperCase()+e.slice(1)} must be at least ${r} characters`}return n?.hasError("min")?`Year must be at least ${n.errors?.min?.min}`:n?.hasError("max")?`Year cannot be greater than ${n.errors?.max?.max}`:""}static{this.\u0275fac=function(n){return new(n||i)(M(Cn),M(ei))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-edit-song"]],inputs:{isVisible:"isVisible",songToEdit:"songToEdit"},outputs:{onClose:"onClose",onSongUpdated:"onSongUpdated"},standalone:!0,features:[$e,se],decls:1,vars:1,consts:[[1,"modal-overlay"],[1,"modal-overlay",3,"click"],[1,"modal-content","large-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"modal-form",3,"ngSubmit","formGroup"],[1,"error-message"],[1,"form-row"],[1,"form-group"],["for","editName"],["type","text","id","editName","formControlName","name","placeholder","Enter song name",1,"form-input"],[1,"field-error"],["for","editArtist"],["type","text","id","editArtist","formControlName","artist","placeholder","Enter artist name",1,"form-input"],["for","editAlbum"],["type","text","id","editAlbum","formControlName","album","placeholder","Enter album name",1,"form-input"],["for","editGenre"],["type","text","id","editGenre","formControlName","genre","placeholder","Enter genre",1,"form-input"],["for","editYear"],["type","number","id","editYear","formControlName","year","placeholder","Enter year",1,"form-input"],["for","editAudioFilePath"],["type","url","id","editAudioFilePath","formControlName","audioFilePath","placeholder","Enter audio file URL","readonly","",1,"form-input"],["for","editImageFilePath"],["type","url","id","editImageFilePath","formControlName","imageFilePath","placeholder","Enter image file URL","readonly","",1,"form-input"],["for","editLyrics"],["id","editLyrics","formControlName","lyrics","placeholder","Enter song lyrics...","rows","4",1,"form-textarea"],[1,"modal-actions"],["type","button",1,"cancel-btn",3,"click"],["type","submit",1,"submit-btn",3,"disabled"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"spinner"]],template:function(n,r){n&1&&L(0,UI,60,26,"div",0),n&2&&V(0,r.isVisible&&r.songToEdit?0:-1)},dependencies:[xe,Rt,ho,Dt,Xa,At,po,Sn,rr,or],styles:["[_ngcontent-%COMP%]:root{--color-black: #000000;--color-white: #ffffff;--gradient-start: #ff6b6b;--gradient-middle: #4ecdc4;--gradient-end: #45b7d1;--bg-primary: rgba(15, 15, 15, .95);--bg-secondary: rgba(30, 30, 30, .5);--bg-tertiary: rgba(40, 40, 40, .3);--border-color: rgba(255, 255, 255, .1);--text-primary: #ffffff;--text-secondary: #a0a0a0;--text-muted: #666666;--hover-bg: rgba(255, 255, 255, .05);--success-color: #52c41a;--error-color: #ff4d4f;--warning-color: #faad14}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background:var(--bg-primary);border-radius:12px;border:1px solid var(--border-color);width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #00000080}.large-modal[_ngcontent-%COMP%]{max-width:700px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid var(--border-color)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.25rem}.close-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:6px;border:none;background:var(--hover-bg);color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:var(--border-color);color:var(--text-primary)}.close-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.modal-form[_ngcontent-%COMP%]{padding:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.5rem}.form-row[_ngcontent-%COMP%]:has(.form-group:nth-child(3)){grid-template-columns:1fr 1fr 1fr}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;color:var(--text-primary);font-weight:500;font-size:.875rem}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{padding:.75rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;color:var(--text-primary);font-size:.9rem;transition:all .3s ease;box-sizing:border-box;font-family:inherit}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-input[_ngcontent-%COMP%]::placeholder, .form-textarea[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--gradient-middle);box-shadow:0 0 0 2px #4ecdc41a}.form-input.error[_ngcontent-%COMP%], .form-textarea.error[_ngcontent-%COMP%]{border-color:var(--error-color)}.field-error[_ngcontent-%COMP%]{color:var(--error-color);font-size:.75rem;margin-top:.25rem}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--error-color);background:#ff4d4f1a;padding:.75rem;border-radius:6px;margin-bottom:1rem;font-size:.875rem}.error-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:flex-end;margin-top:2rem}.cancel-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:6px;color:var(--text-secondary);cursor:pointer;transition:all .3s ease}.cancel-btn[_ngcontent-%COMP%]:hover{background:var(--hover-bg);color:var(--text-primary)}.submit-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));border:none;border-radius:6px;color:var(--text-primary);cursor:pointer;transition:all .3s ease;font-weight:500}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9;transform:translateY(-1px)}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.submit-btn[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top:2px solid var(--text-primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 1024px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-row[_ngcontent-%COMP%]:has(.form-group:nth-child(3)){grid-template-columns:1fr}}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{margin:1rem;width:calc(100% - 2rem)}}"]})}}return i})();function zI(i,t){i&1&&(_(0,"div",17),f(1," Deleting... "))}function jI(i,t){i&1&&f(0," Delete Song ")}function VI(i,t){if(i&1){let e=ve();c(0,"div",1),I("click",function(){z(e);let r=w();return j(r.closeModal())}),c(1,"div",2),I("click",function(r){return z(e),j(r.stopPropagation())}),c(2,"div",3)(3,"h2"),f(4,"Delete Song"),d(),c(5,"button",4),I("click",function(){z(e);let r=w();return j(r.closeModal())}),E(),c(6,"svg",5),_(7,"line",6)(8,"line",7),d()()(),F(),c(9,"div",8)(10,"div",9),E(),c(11,"svg",5),_(12,"path",10)(13,"line",11)(14,"line",12),d()(),F(),c(15,"p"),f(16,"Are you sure you want to delete "),c(17,"strong"),f(18),d(),f(19," by "),c(20,"strong"),f(21),d(),f(22,"?"),d(),c(23,"p",13),f(24,"This action cannot be undone. The song will be permanently deleted from the system."),d()(),c(25,"div",14)(26,"button",15),I("click",function(){z(e);let r=w();return j(r.closeModal())}),f(27,"Cancel"),d(),c(28,"button",16),I("click",function(){z(e);let r=w();return j(r.confirmDelete())}),L(29,zI,2,0)(30,jI,1,0),d()()()()}if(i&2){let e=w();h(18),X('"',e.songToDelete.name,'"'),h(3),N(e.songToDelete.artist),h(7),R("disabled",e.isDeleting),h(),V(29,e.isDeleting?29:30)}}var gv=(()=>{class i{constructor(e){this.songService=e,this.isVisible=!1,this.songToDelete=null,this.onClose=new pe,this.onSongDeleted=new pe,this.isDeleting=!1}closeModal(){this.onClose.emit()}confirmDelete(){!this.songToDelete||this.isDeleting||(this.isDeleting=!0,this.songService.deleteSong(this.songToDelete.id).subscribe({next:()=>{this.isDeleting=!1,this.closeModal(),this.onSongDeleted.emit()},error:e=>{console.error("Error deleting song:",e),this.isDeleting=!1}}))}static{this.\u0275fac=function(n){return new(n||i)(M(ei))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-delete-song"]],inputs:{isVisible:"isVisible",songToDelete:"songToDelete"},outputs:{onClose:"onClose",onSongDeleted:"onSongDeleted"},standalone:!0,features:[se],decls:1,vars:1,consts:[[1,"modal-overlay"],[1,"modal-overlay",3,"click"],[1,"modal-content","delete-modal",3,"click"],[1,"modal-header"],[1,"close-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"delete-content"],[1,"warning-icon"],["d","M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],[1,"warning-text"],[1,"modal-actions"],["type","button",1,"cancel-btn",3,"click"],["type","button",1,"delete-confirm-btn",3,"click","disabled"],[1,"spinner"]],template:function(n,r){n&1&&L(0,VI,31,4,"div",0),n&2&&V(0,r.isVisible&&r.songToDelete?0:-1)},dependencies:[xe],styles:["[_ngcontent-%COMP%]:root{--color-black: #000000;--color-white: #ffffff;--gradient-start: #ff6b6b;--gradient-middle: #4ecdc4;--gradient-end: #45b7d1;--bg-primary: rgba(15, 15, 15, .95);--bg-secondary: rgba(30, 30, 30, .5);--bg-tertiary: rgba(40, 40, 40, .3);--border-color: rgba(255, 255, 255, .1);--text-primary: #ffffff;--text-secondary: #a0a0a0;--text-muted: #666666;--hover-bg: rgba(255, 255, 255, .05);--success-color: #52c41a;--error-color: #ff4d4f;--warning-color: #faad14}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background:var(--bg-primary);border-radius:12px;border:1px solid var(--border-color);width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #00000080}.delete-modal[_ngcontent-%COMP%]{max-width:400px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid var(--border-color)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.25rem}.close-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:6px;border:none;background:var(--hover-bg);color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:var(--border-color);color:var(--text-primary)}.close-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.delete-content[_ngcontent-%COMP%]{padding:1.5rem;text-align:center}.warning-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#ffad141a;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1rem}.warning-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:var(--warning-color)}.delete-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-primary);margin:0 0 .5rem;line-height:1.5}.warning-text[_ngcontent-%COMP%]{color:var(--text-secondary)!important;font-size:.875rem}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:flex-end;margin-top:2rem;padding:0 1.5rem 1.5rem}.cancel-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:6px;color:var(--text-secondary);cursor:pointer;transition:all .3s ease}.cancel-btn[_ngcontent-%COMP%]:hover{background:var(--hover-bg);color:var(--text-primary)}.delete-confirm-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:var(--error-color);border:none;border-radius:6px;color:var(--text-primary);cursor:pointer;transition:all .3s ease;font-weight:500}.delete-confirm-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#d73027;transform:translateY(-1px)}.delete-confirm-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.delete-confirm-btn[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top:2px solid var(--text-primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.modal-content[_ngcontent-%COMP%]{margin:1rem;width:calc(100% - 2rem)}}"]})}}return i})();var qI=(i,t)=>t.id;function HI(i,t){i&1&&(c(0,"div",23),_(1,"div",27),c(2,"p"),f(3,"Loading songs..."),d()())}function $I(i,t){if(i&1&&(c(0,"div",28),E(),c(1,"svg",7),_(2,"path",8)(3,"circle",9)(4,"circle",10),d(),F(),c(5,"h3"),f(6,"No songs found"),d(),c(7,"p"),f(8),d()()),i&2){let e=w();h(8),N(e.searchTerm?"Try adjusting your search criteria":"No public songs in the system yet")}}function WI(i,t){if(i&1){let e=ve();c(0,"div",31)(1,"div",32)(2,"div",33),_(3,"img",34),c(4,"div",35),I("click",function(){let r=z(e).$implicit,o=w(2);return j(o.playSong(r))}),E(),c(5,"svg",7),_(6,"polygon",36),d()()(),F(),c(7,"div",37)(8,"h3",38),f(9),d(),c(10,"p",39),f(11),d(),c(12,"p",40),f(13),d()()(),c(14,"div",41)(15,"div",42)(16,"div",43),E(),c(17,"svg",7),_(18,"rect",44)(19,"line",45)(20,"line",46)(21,"line",47),d()(),F(),c(22,"div",48)(23,"span",49),f(24),d(),c(25,"span",50),f(26,"Year"),d()()(),c(27,"div",42)(28,"div",43),E(),c(29,"svg",7),_(30,"polygon",36),d()(),F(),c(31,"div",48)(32,"span",49),f(33),d(),c(34,"span",50),f(35,"Plays"),d()()()(),c(36,"div",51)(37,"button",52),I("click",function(){let r=z(e).$implicit,o=w(2);return j(o.playSong(r))}),E(),c(38,"svg",7),_(39,"polygon",36),d()(),F(),c(40,"button",53),I("click",function(){let r=z(e).$implicit,o=w(2);return j(o.openEditSongModal(r))}),E(),c(41,"svg",7),_(42,"path",54)(43,"path",55),d()(),F(),c(44,"button",56),I("click",function(){let r=z(e).$implicit,o=w(2);return j(o.openDeleteModal(r))}),E(),c(45,"svg",7),_(46,"polyline",57)(47,"path",58),d()()()()}if(i&2){let e=t.$implicit,n=w(2);$("playing",(n.currentlyPlaying==null?null:n.currentlyPlaying.id)===e.id),h(3),R("src",e.imageFilePath,ci)("alt",e.name),h(6),N(e.name),h(2),N(e.artist),h(2),N(e.album),h(11),N(e.year),h(9),N(e.countOfPlays)}}function GI(i,t){if(i&1&&(c(0,"div",29),We(1,WI,48,9,"div",30,qI),d()),i&2){let e=w();h(),Ge(e.filteredSongs)}}var bv=(()=>{class i{constructor(e,n){this.songService=e,this.fb=n,this.songs=[],this.filteredSongs=[],this.searchTerm="",this.sortBy="name",this.sortDirection="asc",this.isLoading=!1,this.showEditSongModal=!1,this.showDeleteModal=!1,this.songToDelete=null,this.songToEdit=null,this.currentlyPlaying=null,this.showMusicPlayer=!1}ngOnInit(){this.loadSongs()}loadSongs(){this.isLoading=!0,this.songService.getPublicSongs().subscribe({next:e=>{this.songs=e,this.filteredSongs=[...e],this.applyFiltersAndSort(),this.isLoading=!1,console.log(this.songs)},error:e=>{console.error("Error loading songs:",e),this.isLoading=!1}})}onSearch(){this.applyFiltersAndSort()}onSort(e){this.sortBy===e?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortBy=e,this.sortDirection="asc"),this.applyFiltersAndSort()}applyFiltersAndSort(){this.filteredSongs=this.songs.filter(e=>e.name.toLowerCase().includes(this.searchTerm.toLowerCase())||e.artist.toLowerCase().includes(this.searchTerm.toLowerCase())||e.album.toLowerCase().includes(this.searchTerm.toLowerCase())||e.genre.toLowerCase().includes(this.searchTerm.toLowerCase())),this.filteredSongs.sort((e,n)=>{let r=0;switch(this.sortBy){case"name":r=e.name.localeCompare(n.name);break;case"artist":r=e.artist.localeCompare(n.artist);break;case"year":r=e.year-n.year;break;case"plays":r=e.countOfPlays-n.countOfPlays;break}return this.sortDirection==="asc"?r:-r})}openEditSongModal(e){this.songToEdit=e,this.showEditSongModal=!0}closeEditSongModal(){this.showEditSongModal=!1,this.songToEdit=null}onSongUpdated(){this.loadSongs()}openDeleteModal(e){this.songToDelete=e,this.showDeleteModal=!0}closeDeleteModal(){this.showDeleteModal=!1,this.songToDelete=null}onSongDeleted(){this.loadSongs()}routToUpload(){window.location.href="/upload"}playSong(e){this.currentlyPlaying=e,this.showMusicPlayer=!0}onPlayerClose(){this.showMusicPlayer=!1,this.currentlyPlaying=null}onSongEnd(){this.showMusicPlayer=!1,this.currentlyPlaying=null}formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}getFormErrorMessage(e,n){let r=n.get(e);if(r?.hasError("required"))return`${e.charAt(0).toUpperCase()+e.slice(1)} is required`;if(r?.hasError("minlength")){let o=r.errors?.minlength?.requiredLength;return`${e.charAt(0).toUpperCase()+e.slice(1)} must be at least ${o} characters`}return r?.hasError("min")?`Year must be at least ${r.errors?.min?.min}`:r?.hasError("max")?`Year cannot be greater than ${r.errors?.max?.max}`:""}static{this.\u0275fac=function(n){return new(n||i)(M(ei),M(Cn))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-songs"]],standalone:!0,features:[se],decls:40,vars:16,consts:[[1,"songs-container"],[1,"songs-header"],[1,"header-content"],[1,"page-title"],[1,"gradient-text"],[1,"page-subtitle"],[1,"add-song-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M9 18V5l12-2v13"],["cx","6","cy","18","r","3"],["cx","18","cy","16","r","3"],["x1","12","y1","8","x2","12","y2","14"],["x1","9","y1","11","x2","15","y2","11"],[1,"controls-section"],[1,"search-container"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"search-icon"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["type","text","placeholder","Search songs by name, artist, album or genre...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"sort-controls"],[1,"sort-label"],[1,"sort-btn",3,"click"],[1,"songs-list-container"],[1,"loading-state"],[3,"onClose","onSongEnd","currentSong","isVisible"],[3,"onClose","onSongUpdated","isVisible","songToEdit"],[3,"onClose","onSongDeleted","isVisible","songToDelete"],[1,"spinner"],[1,"empty-state"],[1,"songs-list"],[1,"song-row",3,"playing"],[1,"song-row"],[1,"song-main-info"],[1,"song-image"],[3,"src","alt"],[1,"play-overlay",3,"click"],["points","5 3 19 12 5 21 5 3"],[1,"song-details"],[1,"song-name"],[1,"song-artist"],[1,"song-album"],[1,"song-stats"],[1,"stat-item"],[1,"stat-icon"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"song-actions"],["title","Play",1,"action-btn","play-btn",3,"click"],["title","Edit Song",1,"action-btn","edit-btn",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z"],["title","Delete Song",1,"action-btn","delete-btn",3,"click"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"span",4),f(5,"Discover Songs"),d()(),c(6,"p",5),f(7,"Manage all public songs in the system"),d()(),c(8,"button",6),I("click",function(){return r.routToUpload()}),E(),c(9,"svg",7),_(10,"path",8)(11,"circle",9)(12,"circle",10)(13,"line",11)(14,"line",12),d(),f(15," Add Song "),d()(),F(),c(16,"div",13)(17,"div",14),E(),c(18,"svg",15),_(19,"circle",16)(20,"path",17),d(),F(),c(21,"input",18),Ot("ngModelChange",function(a){return Pt(r.searchTerm,a)||(r.searchTerm=a),a}),I("input",function(){return r.onSearch()}),d()(),c(22,"div",19)(23,"span",20),f(24,"Sort by:"),d(),c(25,"button",21),I("click",function(){return r.onSort("name")}),f(26," Name "),d(),c(27,"button",21),I("click",function(){return r.onSort("artist")}),f(28," Artist "),d(),c(29,"button",21),I("click",function(){return r.onSort("year")}),f(30," Year "),d(),c(31,"button",21),I("click",function(){return r.onSort("plays")}),f(32," Plays "),d()()(),c(33,"div",22),L(34,HI,4,0,"div",23)(35,$I,9,1)(36,GI,3,0),d()(),c(37,"app-player",24),I("onClose",function(){return r.onPlayerClose()})("onSongEnd",function(){return r.onSongEnd()}),d(),c(38,"app-edit-song",25),I("onClose",function(){return r.closeEditSongModal()})("onSongUpdated",function(){return r.onSongUpdated()}),d(),c(39,"app-delete-song",26),I("onClose",function(){return r.closeDeleteModal()})("onSongDeleted",function(){return r.onSongDeleted()}),d()),n&2&&(h(21),It("ngModel",r.searchTerm),h(4),$("active",r.sortBy==="name"),h(2),$("active",r.sortBy==="artist"),h(2),$("active",r.sortBy==="year"),h(2),$("active",r.sortBy==="plays"),h(3),V(34,r.isLoading?34:r.filteredSongs.length===0?35:36),h(3),R("currentSong",r.currentlyPlaying)("isVisible",r.showMusicPlayer),h(),R("isVisible",r.showEditSongModal)("songToEdit",r.songToEdit),h(),R("isVisible",r.showDeleteModal)("songToDelete",r.songToDelete))},dependencies:[xe,Rt,Dt,At,di,Sn,go,fv,gv],styles:['[_ngcontent-%COMP%]:root{--color-black: #000000;--color-white: #ffffff;--gradient-start: #ff6b6b;--gradient-middle: #4ecdc4;--gradient-end: #45b7d1;--bg-primary: rgba(15, 15, 15, .95);--bg-secondary: rgba(30, 30, 30, .5);--bg-tertiary: rgba(40, 40, 40, .3);--border-color: rgba(255, 255, 255, .1);--text-primary: #ffffff;--text-secondary: #a0a0a0;--text-muted: #666666;--hover-bg: rgba(255, 255, 255, .05);--success-color: #52c41a;--error-color: #ff4d4f;--warning-color: #faad14;--play-color: #1db954}.songs-container[_ngcontent-%COMP%]{padding:2rem;min-height:100vh;background:var(--color-black);color:var(--text-primary);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.songs-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:1px solid var(--border-color)}.header-content[_ngcontent-%COMP%]{flex:1}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:2rem;font-weight:700;margin:0 0 .5rem;color:var(--text-primary)}.title-icon[_ngcontent-%COMP%]{width:32px;height:32px;stroke:var(--gradient-middle)}.gradient-text[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));-webkit-background-clip:text;background-clip:text;color:transparent}.page-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1rem;margin:0}.add-song-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;margin-top:10px;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));color:var(--text-primary);border:none;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease}.add-song-btn[_ngcontent-%COMP%]:hover{opacity:.9;transform:translateY(-1px);box-shadow:0 4px 12px #0000004d}.add-song-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.controls-section[_ngcontent-%COMP%]{display:flex;gap:1.5rem;margin-bottom:2rem;align-items:center;flex-wrap:wrap}.search-container[_ngcontent-%COMP%]{position:relative;flex:1;min-width:300px}.search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);width:18px;height:18px;color:var(--text-secondary)}.search-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem .75rem 2.5rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;color:var(--text-primary);font-size:.9rem;transition:all .3s ease;box-sizing:border-box}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--gradient-middle);box-shadow:0 0 0 2px #4ecdc41a}.sort-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap}.sort-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;font-weight:500}.sort-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:6px;color:var(--text-secondary);cursor:pointer;transition:all .3s ease;font-size:.875rem}.sort-btn[_ngcontent-%COMP%]:hover{background:var(--hover-bg);color:var(--text-primary)}.sort-btn.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));color:var(--text-primary);border-color:transparent}.sort-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px;transition:transform .3s ease}.sort-btn[_ngcontent-%COMP%]   svg.rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}.songs-list-container[_ngcontent-%COMP%]{background:transparent}.songs-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.song-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;padding:.8rem 1.5rem .8rem 2rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;transition:all .3s ease;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);position:relative;overflow:hidden;width:100%;box-sizing:border-box}.song-row[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;bottom:0;width:4px;background:linear-gradient(180deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));opacity:0;transition:opacity .3s ease}.song-row[_ngcontent-%COMP%]:hover{transform:translate(8px);box-shadow:-8px 8px 32px #0000004d;border-color:#ffffff26}.song-row[_ngcontent-%COMP%]:hover:before{opacity:1}.song-row.playing[_ngcontent-%COMP%]{border-color:var(--play-color);background:#1db9540d}.song-row.playing[_ngcontent-%COMP%]:before{background:var(--play-color);opacity:1}.song-main-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:0 0 350px;min-width:0}.song-image[_ngcontent-%COMP%]{position:relative;width:60px;height:60px;border-radius:8px;overflow:hidden;flex-shrink:0;box-shadow:0 4px 12px #0000004d}.song-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.play-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease;cursor:pointer}.song-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.song-image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.play-overlay[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:var(--text-primary);filter:drop-shadow(0 2px 4px rgba(0,0,0,.5))}.song-details[_ngcontent-%COMP%]{flex:1;min-width:0}.song-name[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:var(--text-primary);margin:0 0 .25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.song-artist[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;margin:0 0 .125rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.song-album[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.8rem;margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.song-stats[_ngcontent-%COMP%]{display:flex;gap:1rem;flex:1;justify-content:center;align-items:center}.stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.5rem .75rem;background:var(--bg-tertiary);border-radius:8px;transition:all .3s ease;min-width:100px}.stat-item[_ngcontent-%COMP%]:hover{background:var(--hover-bg);border-color:#ffffff26;transform:translateY(-2px)}.stat-icon[_ngcontent-%COMP%]{width:28px;height:28px;background:#ffffff0d;border-radius:6px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.stat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px;color:var(--text-secondary)}.stat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0}.stat-value[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--text-primary);line-height:1.2;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.stat-label[_ngcontent-%COMP%]{font-size:.7rem;color:var(--text-secondary);font-weight:500;text-transform:uppercase;letter-spacing:.5px;line-height:1}.song-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-shrink:0}.action-btn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:8px;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;position:relative;overflow:hidden}.action-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;opacity:0;transition:opacity .3s ease}.play-btn[_ngcontent-%COMP%]{background:#1db9541a;color:var(--play-color)}.play-btn[_ngcontent-%COMP%]:hover{background:#1db95433;transform:scale(1.05)}.edit-btn[_ngcontent-%COMP%]{background:#4ecdc41a;color:var(--gradient-middle)}.edit-btn[_ngcontent-%COMP%]:hover{background:#4ecdc433;transform:scale(1.05)}.delete-btn[_ngcontent-%COMP%]{background:#ff4d4f1a;color:var(--error-color)}.delete-btn[_ngcontent-%COMP%]:hover{background:#ff4d4f33;transform:scale(1.05)}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;position:relative;z-index:1}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid rgba(255,255,255,.1);border-top:3px solid var(--gradient-middle);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px;color:var(--text-secondary);margin-bottom:1rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin:0 0 .5rem;font-size:1.25rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.modal-content[_ngcontent-%COMP%]{background:var(--bg-primary);border-radius:12px;border:1px solid var(--border-color);width:90%;max-width:500px;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #00000080}.large-modal[_ngcontent-%COMP%]{max-width:700px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid var(--border-color)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--text-primary);font-size:1.25rem}.close-btn[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:6px;border:none;background:var(--hover-bg);color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.close-btn[_ngcontent-%COMP%]:hover{background:var(--border-color);color:var(--text-primary)}.close-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.modal-form[_ngcontent-%COMP%]{padding:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.5rem}.form-row[_ngcontent-%COMP%]:has(.form-group:nth-child(3)){grid-template-columns:1fr 1fr 1fr}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:.5rem;color:var(--text-primary);font-weight:500;font-size:.875rem}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{padding:.75rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;color:var(--text-primary);font-size:.9rem;transition:all .3s ease;box-sizing:border-box;font-family:inherit}.form-textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-input[_ngcontent-%COMP%]::placeholder, .form-textarea[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--gradient-middle);box-shadow:0 0 0 2px #4ecdc41a}.form-input.error[_ngcontent-%COMP%], .form-textarea.error[_ngcontent-%COMP%]{border-color:var(--error-color)}.field-error[_ngcontent-%COMP%]{color:var(--error-color);font-size:.75rem;margin-top:.25rem}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--error-color);background:#ff4d4f1a;padding:.75rem;border-radius:6px;margin-bottom:1rem;font-size:.875rem}.error-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.modal-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem;justify-content:flex-end;margin-top:2rem}.cancel-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:6px;color:var(--text-secondary);cursor:pointer;transition:all .3s ease}.cancel-btn[_ngcontent-%COMP%]:hover{background:var(--hover-bg);color:var(--text-primary)}.submit-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));border:none;border-radius:6px;color:var(--text-primary);cursor:pointer;transition:all .3s ease;font-weight:500}.submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9;transform:translateY(-1px)}.submit-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.submit-btn[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top:2px solid var(--text-primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.delete-confirm-btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:var(--error-color);border:none;border-radius:6px;color:var(--text-primary);cursor:pointer;transition:all .3s ease;font-weight:500}.delete-confirm-btn[_ngcontent-%COMP%]:hover{background:#d73027;transform:translateY(-1px)}.delete-modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{max-width:400px}.delete-content[_ngcontent-%COMP%]{padding:1.5rem;text-align:center}.warning-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#ffad141a;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1rem}.warning-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:var(--warning-color)}.delete-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-primary);margin:0 0 .5rem;line-height:1.5}.warning-text[_ngcontent-%COMP%]{color:var(--text-secondary)!important;font-size:.875rem}@media (max-width: 1200px){.song-stats[_ngcontent-%COMP%]{gap:1rem}.stat-item[_ngcontent-%COMP%]{min-width:80px}}@media (max-width: 1024px){.song-row[_ngcontent-%COMP%]{gap:1rem}.song-main-info[_ngcontent-%COMP%]{flex:0 0 280px}.song-stats[_ngcontent-%COMP%]{gap:.75rem}.stat-item[_ngcontent-%COMP%]{min-width:70px;padding:.5rem}.stat-content[_ngcontent-%COMP%]{align-items:center;text-align:center}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-row[_ngcontent-%COMP%]:has(.form-group:nth-child(3)){grid-template-columns:1fr}}@media (max-width: 768px){.songs-container[_ngcontent-%COMP%]{padding:1rem}.songs-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:stretch}.controls-section[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.search-container[_ngcontent-%COMP%]{min-width:auto}.sort-controls[_ngcontent-%COMP%]{justify-content:center}.song-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:1rem;padding:1rem}.song-row[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.song-main-info[_ngcontent-%COMP%]{flex:none;justify-content:flex-start}.song-stats[_ngcontent-%COMP%]{justify-content:space-between;gap:.5rem}.stat-item[_ngcontent-%COMP%]{flex:1;min-width:0;flex-direction:column;text-align:center;gap:.5rem;padding:.75rem .5rem}.stat-icon[_ngcontent-%COMP%]{width:24px;height:24px}.stat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:12px;height:12px}.song-actions[_ngcontent-%COMP%]{justify-content:center}.modal-content[_ngcontent-%COMP%]{margin:1rem;width:calc(100% - 2rem)}}@media (max-width: 480px){.songs-container[_ngcontent-%COMP%]{padding:1rem .5rem}.song-row[_ngcontent-%COMP%]{padding:.75rem}.song-main-info[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center;gap:.75rem}.song-image[_ngcontent-%COMP%]{width:50px;height:50px}.song-stats[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.stat-item[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;text-align:left}.action-btn[_ngcontent-%COMP%]{width:36px;height:36px}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.songs-list-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.songs-list-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--bg-tertiary)}.songs-list-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.songs-list-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#fff3}input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;background:transparent;cursor:pointer}input[type=range][_ngcontent-%COMP%]::-webkit-slider-track{background:var(--bg-tertiary);height:4px;border-radius:2px}input[type=range][_ngcontent-%COMP%]::-moz-range-track{background:var(--bg-tertiary);height:4px;border-radius:2px;border:none}.player-control-btn[_ngcontent-%COMP%]:focus, .player-close-btn[_ngcontent-%COMP%]:focus, .player-progress-bar[_ngcontent-%COMP%]:focus, .player-volume-bar[_ngcontent-%COMP%]:focus{outline:2px solid var(--gradient-middle);outline-offset:2px}']})}}return i})();var XI=(i,t)=>t.id;function YI(i,t){i&1&&(c(0,"div",5),_(1,"div",6),c(2,"p"),f(3,"Loading requests..."),d()())}function ZI(i,t){if(i&1){let e=ve();c(0,"div",34)(1,"span",37),f(2,"Filter by status:"),d(),c(3,"div",38)(4,"button",39),I("click",function(){z(e);let r=w(2);return j(r.setStatusFilter("all"))}),f(5," All "),d(),c(6,"button",40),I("click",function(){z(e);let r=w(2);return j(r.setStatusFilter("approved"))}),E(),c(7,"svg",11),_(8,"polyline",18),d(),f(9," Approved "),d(),F(),c(10,"button",41),I("click",function(){z(e);let r=w(2);return j(r.setStatusFilter("rejected"))}),E(),c(11,"svg",11),_(12,"line",20)(13,"line",21),d(),f(14," Rejected "),d()()()}if(i&2){let e=w(2);h(4),$("active",e.statusFilter==="all"),h(2),$("active",e.statusFilter==="approved"),h(4),$("active",e.statusFilter==="rejected")}}function KI(i,t){i&1&&(c(0,"div",5),_(1,"div",6),c(2,"p"),f(3,"Loading requests..."),d()())}function QI(i,t){if(i&1&&(c(0,"div",42),E(),c(1,"svg",11),_(2,"path",43)(3,"polyline",44)(4,"line",45)(5,"line",46),d(),F(),c(6,"h3"),f(7,"No requests found"),d(),c(8,"p"),f(9),d()()),i&2){let e=w(2);h(9),N(e.searchTerm?"Try adjusting your search criteria":e.activeTab==="pending"?"No pending requests at the moment":"No answered requests found")}}function JI(i,t){i&1&&(E(),c(0,"svg",11),_(1,"polyline",18),d())}function eP(i,t){i&1&&(E(),c(0,"svg",11),_(1,"line",20)(2,"line",21),d())}function tP(i,t){if(i&1&&(c(0,"div",77),L(1,JI,2,0,"svg",78)(2,eP,3,0,"svg",78),f(3),d()),i&2){let e=w().$implicit;$("approved",e.isApproved)("rejected",!e.isApproved),h(),R("ngIf",e.isApproved),h(),R("ngIf",!e.isApproved),h(),X(" ",e.isApproved?"Approved":"Rejected"," ")}}function iP(i,t){i&1&&(c(0,"div",79),E(),c(1,"svg",11),_(2,"circle",12)(3,"polyline",13),d(),f(4," Pending "),d())}function nP(i,t){i&1&&_(0,"div",81)}function rP(i,t){i&1&&(E(),c(0,"svg",11),_(1,"polyline",18),d())}function oP(i,t){i&1&&_(0,"div",81)}function aP(i,t){i&1&&(E(),c(0,"svg",11),_(1,"line",20)(2,"line",21),d())}function sP(i,t){if(i&1){let e=ve();c(0,"div",76)(1,"button",80),I("click",function(){z(e);let r=w().$implicit,o=w(3);return j(o.approveRequest(r))}),L(2,nP,1,0,"div",81)(3,rP,2,0),f(4," Approve "),d(),c(5,"button",82),I("click",function(){z(e);let r=w().$implicit,o=w(3);return j(o.rejectRequest(r))}),L(6,oP,1,0,"div",81)(7,aP,3,0),f(8," Reject "),d()()}if(i&2){let e=w().$implicit,n=w(3);h(),R("disabled",n.isProcessing(e.id)),h(),V(2,n.isProcessing(e.id)?2:3),h(3),R("disabled",n.isProcessing(e.id)),h(),V(6,n.isProcessing(e.id)?6:7)}}function lP(i,t){if(i&1){let e=ve();c(0,"div",49)(1,"div",50)(2,"div",51)(3,"div",52),E(),c(4,"svg",11),_(5,"path",53)(6,"circle",54),d()(),F(),c(7,"div",55)(8,"span",56),f(9),d(),c(10,"span",57),f(11),d()()(),L(12,tP,4,7,"div",58)(13,iP,5,0),d(),c(14,"div",59)(15,"div",60),_(16,"img",61),c(17,"div",62),I("click",function(){let r=z(e).$implicit,o=w(3);return j(o.playSong(r))}),E(),c(18,"svg",11),_(19,"polygon",63),d()()(),F(),c(20,"div",64)(21,"h3",65),f(22),d(),c(23,"p",66),f(24),d(),c(25,"p",67),f(26),d(),c(27,"div",68)(28,"span",69),E(),c(29,"svg",11),_(30,"path",70)(31,"circle",71),d(),f(32),d(),F(),c(33,"span",69),E(),c(34,"svg",11),_(35,"rect",72)(36,"line",73)(37,"line",74)(38,"line",75),d(),f(39),d()()()(),L(40,sP,9,4,"div",76),d()}if(i&2){let e=t.$implicit,n=w(3);$("playing",(n.currentlyPlaying==null?null:n.currentlyPlaying.id)===e.id),h(9),N(e.user.userName),h(2),N(e.user.email),h(),V(12,e.isAnswered?12:13),h(4),R("src",e.song.imageFilePath,ci)("alt",e.song.name),h(6),N(e.song.name),h(2),N(e.song.artist),h(2),N(e.song.album),h(6),X(" ",e.song.genre?e.song.genre:"Unknown Genre"," "),h(7),X(" ",e.song.year," "),h(),V(40,e.isAnswered?-1:40)}}function cP(i,t){if(i&1&&(c(0,"div",47),We(1,lP,41,13,"div",48,XI),d()),i&2){let e=w(2);h(),Ge(e.filteredRequests)}}function dP(i,t){if(i&1){let e=ve();c(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10),E(),c(4,"svg",11),_(5,"circle",12)(6,"polyline",13),d()(),F(),c(7,"div",14)(8,"span",15),f(9),d(),c(10,"span",16),f(11,"Pending"),d()()(),c(12,"div",17)(13,"div",10),E(),c(14,"svg",11),_(15,"polyline",18),d()(),F(),c(16,"div",14)(17,"span",15),f(18),d(),c(19,"span",16),f(20,"Approved"),d()()(),c(21,"div",19)(22,"div",10),E(),c(23,"svg",11),_(24,"line",20)(25,"line",21),d()(),F(),c(26,"div",14)(27,"span",15),f(28),d(),c(29,"span",16),f(30,"Rejected"),d()()()()(),c(31,"div",22)(32,"div",23)(33,"button",24),I("click",function(){z(e);let r=w();return j(r.setActiveTab("pending"))}),E(),c(34,"svg",11),_(35,"circle",12)(36,"polyline",13),d(),f(37," Pending Requests "),F(),c(38,"span",25),f(39),d()(),c(40,"button",24),I("click",function(){z(e);let r=w();return j(r.setActiveTab("answered"))}),E(),c(41,"svg",11),_(42,"path",26)(43,"polyline",27),d(),f(44," Answered Requests "),F(),c(45,"span",25),f(46),d()()()(),c(47,"div",28)(48,"div",29),E(),c(49,"svg",30),_(50,"circle",31)(51,"path",32),d(),F(),c(52,"input",33),Ot("ngModelChange",function(r){z(e);let o=w();return Pt(o.searchTerm,r)||(o.searchTerm=r),j(r)}),I("input",function(){z(e);let r=w();return j(r.onSearch())}),d()(),L(53,ZI,15,6,"div",34),d(),c(54,"div",35),L(55,KI,4,0,"div",5)(56,QI,10,1)(57,cP,3,0),d(),c(58,"app-player",36),I("onClose",function(){z(e);let r=w();return j(r.onPlayerClose())})("onSongEnd",function(){z(e);let r=w();return j(r.onSongEnd())}),d()}if(i&2){let e=w();h(9),N(e.getPendingCount()),h(9),N(e.getApprovedCount()),h(10),N(e.getRejectedCount()),h(5),$("active",e.activeTab==="pending"),h(6),N(e.getPendingCount()),h(),$("active",e.activeTab==="answered"),h(6),N(e.getAnsweredCount()),h(6),It("ngModel",e.searchTerm),h(),V(53,e.activeTab==="answered"?53:-1),h(2),V(55,e.isLoading?55:e.filteredRequests.length===0?56:57),h(3),R("currentSong",e.currentlyPlaying==null?null:e.currentlyPlaying.song)("isVisible",e.showMusicPlayer)}}var _v=(()=>{class i{constructor(e){this.requestService=e,this.requests=[],this.filteredRequests=[],this.activeTab="pending",this.statusFilter="all",this.searchTerm="",this.isLoading=!1,this.currentlyPlaying=null,this.showMusicPlayer=!1,this.processingRequests=new Set}ngOnInit(){this.loadRequests()}loadRequests(){this.isLoading=!0,this.requestService.getFullRequests().subscribe({next:e=>{this.requests=e,this.applyFilters(),this.isLoading=!1,console.log("Requests loaded:",this.requests)},error:e=>{console.error("Error loading requests:",e),this.isLoading=!1}})}setActiveTab(e){this.activeTab=e,this.statusFilter="all",this.applyFilters()}setStatusFilter(e){this.statusFilter=e,this.applyFilters()}onSearch(){this.applyFilters()}applyFilters(){let e=[...this.requests];this.activeTab==="pending"?e=e.filter(n=>!n.isAnswered):(e=e.filter(n=>n.isAnswered),this.statusFilter==="approved"?e=e.filter(n=>n.isApproved):this.statusFilter==="rejected"&&(e=e.filter(n=>!n.isApproved))),this.searchTerm&&(e=e.filter(n=>n.song.name.toLowerCase().includes(this.searchTerm.toLowerCase())||n.song.artist.toLowerCase().includes(this.searchTerm.toLowerCase())||n.user.userName.toLowerCase().includes(this.searchTerm.toLowerCase()))),this.filteredRequests=e}approveRequest(e){this.processingRequests.has(e.id)||(this.processingRequests.add(e.id),this.requestService.updateRequestStatus(e.id,!0).subscribe({next:()=>{e.isAnswered=!0,e.isApproved=!0,this.processingRequests.delete(e.id),this.applyFilters()},error:n=>{console.error("Error approving request:",n),this.processingRequests.delete(e.id)}}))}rejectRequest(e){this.processingRequests.has(e.id)||(this.processingRequests.add(e.id),this.requestService.updateRequestStatus(e.id,!1).subscribe({next:()=>{e.isAnswered=!0,e.isApproved=!1,this.processingRequests.delete(e.id),this.applyFilters()},error:n=>{console.error("Error rejecting request:",n),this.processingRequests.delete(e.id)}}))}playSong(e){this.currentlyPlaying=e,this.showMusicPlayer=!0}onPlayerClose(){this.showMusicPlayer=!1,this.currentlyPlaying=null}onSongEnd(){this.showMusicPlayer=!1,this.currentlyPlaying=null}formatDate(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}getPendingCount(){console.log("Calculating pending count from requests:",this.requests);let e=this.requests.filter(n=>!n.isAnswered);return console.log("Pending requests:",e),e.length}getAnsweredCount(){return this.requests.filter(e=>e.isAnswered).length}getApprovedCount(){return this.requests.filter(e=>e.isAnswered&&e.isApproved).length}getRejectedCount(){return this.requests.filter(e=>e.isAnswered&&!e.isApproved).length}isProcessing(e){return this.processingRequests.has(e)}static{this.\u0275fac=function(n){return new(n||i)(M(vo))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-upload-requests"]],standalone:!0,features:[se],decls:9,vars:1,consts:[[1,"requests-container"],[1,"header-content"],[1,"page-title"],[1,"gradient-text"],[1,"page-subtitle"],[1,"loading-state"],[1,"spinner"],[1,"requests-header"],[1,"stats-cards"],[1,"stat-card","pending"],[1,"stat-icon"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10"],["points","12 6 12 12 16 14"],[1,"stat-content"],[1,"stat-number"],[1,"stat-label"],[1,"stat-card","approved"],["points","20 6 9 17 4 12"],[1,"stat-card","rejected"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"tabs-container"],[1,"tabs"],[1,"tab-btn",3,"click"],[1,"tab-badge"],["d","M22 11.08V12a10 10 0 1 1-5.93-9.14"],["points","22 4 12 14.01 9 11.01"],[1,"controls-section"],[1,"search-container"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"search-icon"],["cx","11","cy","11","r","8"],["d","m21 21-4.35-4.35"],["type","text","placeholder","Search by song, artist, or user...",1,"search-input",3,"ngModelChange","input","ngModel"],[1,"filter-controls"],[1,"requests-list-container"],[3,"onClose","onSongEnd","currentSong","isVisible"],[1,"filter-label"],[1,"filter-buttons"],[1,"filter-btn",3,"click"],[1,"filter-btn","approved",3,"click"],[1,"filter-btn","rejected",3,"click"],[1,"empty-state"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],[1,"requests-grid"],[1,"request-card",3,"playing"],[1,"request-card"],[1,"request-header"],[1,"request-user"],[1,"user-avatar"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"user-info"],[1,"user-name"],[1,"user-email"],[1,"status-badge",3,"approved","rejected"],[1,"song-info"],[1,"song-image"],[3,"src","alt"],[1,"play-overlay",3,"click"],["points","5 3 19 12 5 21 5 3"],[1,"song-details"],[1,"song-name"],[1,"song-artist"],[1,"song-album"],[1,"song-meta"],[1,"meta-item"],["d","M9 18V5l12-2v13"],["cx","6","cy","18","r","3"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"request-actions"],[1,"status-badge"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],[1,"status-badge","pending"],["title","Approve Request",1,"action-btn","approve-btn",3,"click","disabled"],[1,"mini-spinner"],["title","Reject Request",1,"action-btn","reject-btn",3,"click","disabled"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"div",1)(2,"h1",2)(3,"span",3),f(4,"Song Requests"),d()(),c(5,"p",4),f(6,"Manage user song upload requests"),d()(),L(7,YI,4,0,"div",5)(8,dP,59,14),d()),n&2&&(h(7),V(7,r.isLoading?7:8))},dependencies:[xe,_n,Rt,Dt,At,di,go],styles:['[_ngcontent-%COMP%]:root{--color-black: #000000;--color-white: #ffffff;--gradient-start: #ff6b6b;--gradient-middle: #4ecdc4;--gradient-end: #45b7d1;--bg-primary: rgba(15, 15, 15, .95);--bg-secondary: rgba(30, 30, 30, .5);--bg-tertiary: rgba(40, 40, 40, .3);--border-color: rgba(255, 255, 255, .1);--text-primary: #ffffff;--text-secondary: #a0a0a0;--text-muted: #666666;--hover-bg: rgba(255, 255, 255, .05);--success-color: #52c41a;--error-color: #ff4d4f;--warning-color: #faad14;--play-color: #1db954;--pending-color: #faad14}.requests-container[_ngcontent-%COMP%]{padding:2rem;min-height:100vh;background:var(--color-black);color:var(--text-primary);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.requests-header[_ngcontent-%COMP%]{margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:1px solid var(--border-color)}.header-content[_ngcontent-%COMP%]{margin-bottom:2rem}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:2rem;font-weight:700;margin:0 0 .5rem;color:var(--text-primary)}.title-icon[_ngcontent-%COMP%]{width:32px;height:32px;stroke:var(--gradient-middle)}.gradient-text[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));-webkit-background-clip:text;background-clip:text;color:transparent}.page-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1rem;margin:0}.stats-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem}.stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:1.5rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;transition:all .3s ease;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);position:relative;overflow:hidden}.stat-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;transition:opacity .3s ease}.stat-card.pending[_ngcontent-%COMP%]:before{background:var(--pending-color)}.stat-card.approved[_ngcontent-%COMP%]:before{background:var(--success-color)}.stat-card.rejected[_ngcontent-%COMP%]:before{background:var(--error-color)}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #0000004d;border-color:#ffffff26}.stat-card[_ngcontent-%COMP%]:hover:before{opacity:1}.stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.stat-card.pending[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#faad141a;color:var(--pending-color)}.stat-card.approved[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#52c41a1a;color:var(--success-color)}.stat-card.rejected[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background:#ff4d4f1a;color:var(--error-color)}.stat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.stat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--text-primary);line-height:1}.stat-label[_ngcontent-%COMP%]{font-size:.875rem;color:var(--text-secondary);font-weight:500;text-transform:uppercase;letter-spacing:.5px}.tabs-container[_ngcontent-%COMP%]{margin-bottom:2rem;width:380px}.tabs[_ngcontent-%COMP%]{display:flex;gap:.5rem;background:var(--bg-tertiary);padding:.5rem;border-radius:12px;border:1px solid var(--border-color)}.tab-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:0rem;padding:.3rem 1.5rem;background:transparent;border:none;border-radius:8px;color:var(--text-secondary);cursor:pointer;transition:all .3s ease;font-weight:500;flex:1;justify-content:center;position:relative}.tab-btn[_ngcontent-%COMP%]:hover{color:var(--text-primary);background:var(--hover-bg)}.tab-btn.active[_ngcontent-%COMP%]{border:1px solid var(--gradient-middle);color:var(--text-primary);box-shadow:0 4px 12px #0000004d}.tab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px}.tab-badge[_ngcontent-%COMP%]{background:#fff3;color:var(--text-primary);padding:.25rem .5rem;border-radius:12px;font-size:.75rem;font-weight:600;min-width:20px;text-align:center}.tab-btn.active[_ngcontent-%COMP%]   .tab-badge[_ngcontent-%COMP%]{background:#ffffff4d}.controls-section[_ngcontent-%COMP%]{display:flex;gap:2rem;margin-bottom:2rem;align-items:center;flex-wrap:wrap}.search-container[_ngcontent-%COMP%]{position:relative;flex:1;min-width:300px}.search-icon[_ngcontent-%COMP%]{position:absolute;left:1rem;top:50%;transform:translateY(-50%);width:18px;height:18px;color:var(--text-secondary)}.search-input[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem .875rem 2.5rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;color:var(--text-primary);font-size:.9rem;transition:all .3s ease;box-sizing:border-box}.search-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--gradient-middle);box-shadow:0 0 0 3px #4ecdc41a}.filter-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.filter-label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;font-weight:500;white-space:nowrap}.filter-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.filter-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:8px;color:var(--text-secondary);cursor:pointer;transition:all .3s ease;font-size:.875rem;font-weight:500}.filter-btn[_ngcontent-%COMP%]:hover{background:var(--hover-bg);color:var(--text-primary)}.filter-btn.active[_ngcontent-%COMP%]{color:var(--text-primary);border-color:var(--gradient-middle);background:#4ecdc41a}.filter-btn.approved.active[_ngcontent-%COMP%]{border-color:var(--success-color);background:#52c41a1a;color:var(--success-color)}.filter-btn.rejected.active[_ngcontent-%COMP%]{border-color:var(--error-color);background:#ff4d4f1a;color:var(--error-color)}.filter-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.requests-list-container[_ngcontent-%COMP%]{background:transparent}.requests-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(400px,1fr));gap:1.5rem}.request-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:16px;padding:1.5rem;transition:all .3s ease;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);position:relative;overflow:hidden}.request-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));opacity:0;transition:opacity .3s ease}.request-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 40px #0000004d;border-color:#ffffff26}.request-card[_ngcontent-%COMP%]:hover:before{opacity:1}.request-card.playing[_ngcontent-%COMP%]{border-color:var(--play-color);background:#1db9540d}.request-card.playing[_ngcontent-%COMP%]:before{background:var(--play-color);opacity:1}.request-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem}.request-user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem}.user-avatar[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;border:1px solid var(--border-color);display:flex;align-items:center;justify-content:center;flex-shrink:0}.user-avatar[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;color:var(--text-primary)}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.user-name[_ngcontent-%COMP%]{font-weight:600;color:var(--text-primary);font-size:.9rem}.user-email[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.8rem}.status-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem .75rem;border-radius:20px;font-size:.8rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px}.status-badge.pending[_ngcontent-%COMP%]{background:#faad141a;color:var(--pending-color);border:1px solid rgba(250,173,20,.3)}.status-badge.approved[_ngcontent-%COMP%]{background:#52c41a1a;color:var(--success-color);border:1px solid rgba(82,196,26,.3)}.status-badge.rejected[_ngcontent-%COMP%]{background:#ff4d4f1a;color:var(--error-color);border:1px solid rgba(255,77,79,.3)}.status-badge[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.song-info[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1.5rem}.song-image[_ngcontent-%COMP%]{position:relative;width:80px;height:80px;border-radius:12px;overflow:hidden;flex-shrink:0;box-shadow:0 6px 20px #0000004d}.song-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.play-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#000000b3;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease;cursor:pointer}.song-image[_ngcontent-%COMP%]:hover   .play-overlay[_ngcontent-%COMP%]{opacity:1}.song-image[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.play-overlay[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:28px;height:28px;color:var(--text-primary);filter:drop-shadow(0 2px 4px rgba(0,0,0,.5))}.song-details[_ngcontent-%COMP%]{flex:1;min-width:0}.song-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:var(--text-primary);margin:0 0 .25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.song-artist[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.9rem;margin:0 0 .25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:500}.song-album[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.8rem;margin:0 0 .75rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.song-meta[_ngcontent-%COMP%]{display:flex;gap:1rem}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--text-secondary);font-size:.8rem;font-weight:500}.meta-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.request-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.25rem;border:none;border-radius:10px;cursor:pointer;transition:all .3s ease;font-weight:600;font-size:.875rem;flex:1;justify-content:center;position:relative;overflow:hidden}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.approve-btn[_ngcontent-%COMP%]{background:#52c41a1a;color:var(--success-color);border:1px solid rgba(82,196,26,.3)}.approve-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#52c41a33;transform:translateY(-1px);box-shadow:0 4px 12px #52c41a4d}.reject-btn[_ngcontent-%COMP%]{background:#ff4d4f1a;color:var(--error-color);border:1px solid rgba(255,77,79,.3)}.reject-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#ff4d4f33;transform:translateY(-1px);box-shadow:0 4px 12px #ff4d4f4d}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.mini-spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top:2px solid currentColor;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-state[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center;grid-column:1 / -1}.loading-state[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid rgba(255,255,255,.1);border-top:4px solid var(--gradient-middle);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px;color:var(--text-secondary);margin-bottom:1.5rem}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin:0 0 .75rem;font-size:1.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0;font-size:1rem}.music-player-overlay[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;z-index:2000;background:#000000f2;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-top:1px solid var(--border-color);animation:_ngcontent-%COMP%_slideUp .3s ease-out}.music-player[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;padding:1rem 2rem;max-width:1200px;margin:0 auto;position:relative}.player-close-btn[_ngcontent-%COMP%]{position:absolute;top:-.5rem;right:1rem;width:28px;height:28px;border-radius:50%;border:none;background:var(--bg-tertiary);color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;z-index:10}.player-close-btn[_ngcontent-%COMP%]:hover{background:var(--error-color);color:var(--text-primary);transform:scale(1.1)}.player-close-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;height:14px}.player-song-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:0 0 280px;min-width:0}.player-song-image[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:8px;overflow:hidden;flex-shrink:0;box-shadow:0 4px 12px #0000004d}.player-song-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.player-song-details[_ngcontent-%COMP%]{flex:1;min-width:0}.player-song-name[_ngcontent-%COMP%]{font-size:.9rem;font-weight:600;color:var(--text-primary);margin:0 0 .25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.player-song-artist[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);margin:0 0 .125rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.player-request-info[_ngcontent-%COMP%]{font-size:.75rem;color:var(--text-muted);margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.player-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.player-control-btn[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:none;background:linear-gradient(135deg,var(--gradient-start),var(--gradient-middle));color:var(--text-primary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;box-shadow:0 4px 12px #0000004d}.player-control-btn[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 6px 16px #0006}.player-control-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.player-control-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.player-progress-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1;min-width:0}.player-time[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);font-weight:500;min-width:40px;text-align:center}.player-progress-container[_ngcontent-%COMP%]{position:relative;flex:1;height:6px;background:var(--bg-tertiary);border-radius:3px;overflow:hidden}.player-progress-bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer;z-index:2}.player-progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));border-radius:3px;transition:width .1s ease;position:relative}.player-progress-fill[_ngcontent-%COMP%]:after{content:"";position:absolute;right:-6px;top:50%;transform:translateY(-50%);width:12px;height:12px;background:var(--text-primary);border-radius:50%;box-shadow:0 2px 6px #0000004d;opacity:0;transition:opacity .3s ease}.player-progress-container[_ngcontent-%COMP%]:hover   .player-progress-fill[_ngcontent-%COMP%]:after{opacity:1}.player-volume-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex:0 0 120px}.volume-icon[_ngcontent-%COMP%]{width:18px;height:18px;color:var(--text-secondary);flex-shrink:0}.player-volume-bar[_ngcontent-%COMP%]{flex:1;height:4px;background:var(--bg-tertiary);border-radius:2px;outline:none;cursor:pointer;-webkit-appearance:none;appearance:none}.player-volume-bar[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:12px;height:12px;background:var(--gradient-middle);border-radius:50%;cursor:pointer;box-shadow:0 2px 6px #0000004d;transition:transform .3s ease}.player-volume-bar[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.2)}.player-volume-bar[_ngcontent-%COMP%]::-moz-range-thumb{width:12px;height:12px;background:var(--gradient-middle);border-radius:50%;cursor:pointer;border:none;box-shadow:0 2px 6px #0000004d}@media (max-width: 1024px){.requests-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(350px,1fr))}.stats-cards[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}}@media (max-width: 768px){.requests-container[_ngcontent-%COMP%]{padding:1rem}.requests-grid[_ngcontent-%COMP%], .stats-cards[_ngcontent-%COMP%]{grid-template-columns:1fr}.tabs[_ngcontent-%COMP%]{flex-direction:column}.controls-section[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.search-container[_ngcontent-%COMP%]{min-width:auto}.filter-controls[_ngcontent-%COMP%]{width:100%;justify-content:center}.filter-buttons[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center}.request-actions[_ngcontent-%COMP%]{flex-direction:column}.music-player[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;padding:1rem}.player-song-info[_ngcontent-%COMP%]{flex:none;width:100%;justify-content:center}.player-progress-section[_ngcontent-%COMP%]{order:3;width:100%}.player-volume-section[_ngcontent-%COMP%]{order:4;justify-content:center;flex:none}.player-controls[_ngcontent-%COMP%]{order:2}.player-close-btn[_ngcontent-%COMP%]{top:.5rem;right:.5rem}}@media (max-width: 480px){.requests-container[_ngcontent-%COMP%]{padding:1rem .5rem}.request-card[_ngcontent-%COMP%]{padding:1rem}.song-info[_ngcontent-%COMP%]{flex-direction:column;align-items:center;text-align:center}.song-image[_ngcontent-%COMP%]{width:100px;height:100px}.song-meta[_ngcontent-%COMP%]{justify-content:center}.tab-btn[_ngcontent-%COMP%]{padding:.75rem 1rem;font-size:.875rem}.tab-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;background:transparent;cursor:pointer}input[type=range][_ngcontent-%COMP%]::-webkit-slider-track{background:var(--bg-tertiary);height:4px;border-radius:2px}input[type=range][_ngcontent-%COMP%]::-moz-range-track{background:var(--bg-tertiary);height:4px;border-radius:2px;border:none}.player-control-btn[_ngcontent-%COMP%]:focus, .player-close-btn[_ngcontent-%COMP%]:focus, .player-progress-bar[_ngcontent-%COMP%]:focus, .player-volume-bar[_ngcontent-%COMP%]:focus, .action-btn[_ngcontent-%COMP%]:focus, .tab-btn[_ngcontent-%COMP%]:focus, .filter-btn[_ngcontent-%COMP%]:focus{outline:2px solid var(--gradient-middle);outline-offset:2px}']})}}return i})();var vv=(()=>{class i{constructor(e){this.http=e,this.baseUrl=`${Ci}/Playlist`,this.playlists=new De([]),this.sharedPlaylists=new De([])}getAllPlaylistsFull(){return this.http.get(`${this.baseUrl}/full`)}getUserPlaylists(e){return this.http.get(`${this.baseUrl}/user/${e}`)}getUserSharedPlaylists(e){return this.http.get(`${this.baseUrl}/shared/${e}`)}getPlaylistFull(e){return this.http.get(`${this.baseUrl}/full/${e}`)}createPlaylist(e){return this.http.post(this.baseUrl,e)}updatePlaylist(e,n){return this.http.put(`${this.baseUrl}/${e}`,n)}deletePlaylist(e){return this.http.delete(`${this.baseUrl}/${e}`)}removeSongFromPlaylist(e,n){return this.http.delete(`${this.baseUrl}/${e}/song/${n}`)}removeUserFromPlaylist(e,n){return this.http.delete(`${this.baseUrl}/${e}/user/${n}`)}reloadUserPlaylists(e){this.getUserPlaylists(e).subscribe({next:n=>this.playlists.next(n),error:n=>alert("Loading playlists failed")})}reloadSharedPlaylists(e){this.getUserSharedPlaylists(e).subscribe({next:n=>this.sharedPlaylists.next(n),error:n=>alert("Loading shared playlists failed")})}static{this.\u0275fac=function(n){return new(n||i)(k(qt))}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var mP=(i,t)=>t.month,pP=()=>({month:"long",year:"numeric"});function hP(i,t){i&1&&(c(0,"div",22),_(1,"div",23),c(2,"p"),f(3,"Loading analytics data..."),d()())}function fP(i,t){if(i&1&&(c(0,"tr")(1,"td",85),f(2),d(),c(3,"td",86)(4,"span",87),f(5),d()(),c(6,"td",86)(7,"span",87),f(8),d()(),c(9,"td",86)(10,"span",87),f(11),d()(),c(12,"td",88)(13,"span",87),f(14),d()()()),i&2){let e,n=t.$implicit,r=w(2);h(2),X(`
`,(e=r.parseMonthYearToDate(n.month))==null?null:e.toLocaleDateString("en-US",E0(5,pP))," "),h(3),N(n.users),h(3),N(n.songs),h(3),N(n.playlists),h(3),N(n.users+n.songs+n.playlists)}}function gP(i,t){if(i&1&&(c(0,"div",24)(1,"div",25)(2,"div",26),E(),c(3,"svg",14),_(4,"path",27)(5,"circle",28)(6,"path",29)(7,"path",30),d()(),F(),c(8,"div",31)(9,"h3"),f(10,"Total Users"),d(),c(11,"div",32),f(12),d(),c(13,"div",33)(14,"span",34),f(15),d()()()(),c(16,"div",35)(17,"div",26),E(),c(18,"svg",14),_(19,"path",36)(20,"circle",37)(21,"circle",38),d()(),F(),c(22,"div",31)(23,"h3"),f(24,"Total Songs"),d(),c(25,"div",32),f(26),d(),c(27,"div",33)(28,"span",39),f(29),d()()()(),c(30,"div",40)(31,"div",26),E(),c(32,"svg",14),_(33,"path",41)(34,"polyline",42)(35,"polyline",43),d()(),F(),c(36,"div",31)(37,"h3"),f(38,"Total Playlists"),d(),c(39,"div",32),f(40),d(),c(41,"div",33)(42,"span",44),f(43),d()()()(),c(44,"div",45)(45,"div",26),E(),c(46,"svg",14),_(47,"path",46)(48,"polyline",47)(49,"line",48)(50,"line",49),d()(),F(),c(51,"div",31)(52,"h3"),f(53,"Total Requests"),d(),c(54,"div",32),f(55),d(),c(56,"div",33)(57,"span",50),f(58),d()()()()(),c(59,"div",51)(60,"div",52)(61,"div",53)(62,"h3"),f(63,"User Growth Over Time"),d(),c(64,"div",54),E(),c(65,"svg",14),_(66,"circle",55)(67,"line",56)(68,"line",57),d()()(),F(),c(69,"div",58),_(70,"canvas",59),d()(),c(71,"div",60)(72,"div",53)(73,"h3"),f(74,"Songs by Genre"),d(),c(75,"div",54)(76,"span",61),f(77),d()()(),c(78,"div",58),_(79,"canvas",62),d()(),c(80,"div",60)(81,"div",53)(82,"h3"),f(83,"Request Status"),d(),c(84,"div",54)(85,"span",63),f(86),d()()(),c(87,"div",58),_(88,"canvas",64),d()(),c(89,"div",52)(90,"div",53)(91,"h3"),f(92,"Most Popular Songs"),d(),c(93,"div",54)(94,"span",39),f(95,"Top 10 by plays"),d()()(),c(96,"div",58),_(97,"canvas",65),d()(),c(98,"div",60)(99,"div",53)(100,"h3"),f(101,"Playlist Sizes"),d(),c(102,"div",54)(103,"span",66),f(104,"Distribution by song count"),d()()(),c(105,"div",58),_(106,"canvas",67),d()()(),c(107,"div",68)(108,"div",69)(109,"h2"),f(110,"Monthly Activity Summary"),d(),c(111,"p"),f(112,"Breakdown of platform activity over the last 6 months"),d()(),c(113,"div",70)(114,"table",71)(115,"thead")(116,"tr")(117,"th"),f(118,"Month"),d(),c(119,"th"),f(120,"New Users"),d(),c(121,"th"),f(122,"New Songs"),d(),c(123,"th"),f(124,"New Playlists"),d(),c(125,"th"),f(126,"Total Activity"),d()()(),c(127,"tbody"),We(128,fP,15,6,"tr",null,mP),d()()()(),c(130,"div",72)(131,"div",69)(132,"h2"),f(133,"Key Insights"),d(),c(134,"p"),f(135,"Automated insights based on your data"),d()(),c(136,"div",73)(137,"div",74)(138,"div",75),E(),c(139,"svg",14),_(140,"polyline",76)(141,"polyline",77),d()(),F(),c(142,"div",78)(143,"h4"),f(144,"Growing User Base"),d(),c(145,"p"),f(146),d()()(),c(147,"div",79)(148,"div",75),E(),c(149,"svg",14),_(150,"path",36)(151,"circle",37)(152,"circle",38),d()(),F(),c(153,"div",78)(154,"h4"),f(155,"Popular Genre"),d(),c(156,"p"),f(157),d()()(),c(158,"div",80)(159,"div",75),E(),c(160,"svg",14),_(161,"circle",55)(162,"line",81)(163,"line",82),d()(),F(),c(164,"div",78)(165,"h4"),f(166,"Pending Requests"),d(),c(167,"p"),f(168),d()()(),c(169,"div",83)(170,"div",75),E(),c(171,"svg",14),_(172,"polyline",84),d()(),F(),c(173,"div",78)(174,"h4"),f(175,"High Engagement"),d(),c(176,"p"),f(177),d()()()()()),i&2){let e=w();h(12),N(e.formatNumber(e.stats.totalUsers)),h(3),X("Most Active: ",e.stats.mostActiveUser,""),h(11),N(e.formatNumber(e.stats.totalSongs)),h(3),X("",e.formatNumber(e.stats.totalPlays)," total plays"),h(11),N(e.formatNumber(e.stats.totalPlaylists)),h(3),X("",e.stats.averageSongsPerPlaylist," avg songs"),h(12),N(e.formatNumber(e.stats.totalRequests)),h(3),X("",e.stats.pendingRequests," pending"),h(19),X("Most Popular: ",e.stats.mostPopularGenre,""),h(9),X("",e.stats.totalRequests>0?2:0,"% approved"),h(42),Ge(e.monthlyData),h(18),X("Your platform has ",e.stats.totalUsers," registered users with consistent growth patterns."),h(11),X("",e.stats.mostPopularGenre," is the most popular genre on your platform."),h(11),X("You have ",e.stats.pendingRequests," pending upload requests that need attention."),h(9),X("Your songs have been played ",e.formatNumber(e.stats.totalPlays)," times total!")}}var yv=(()=>{class i{constructor(e,n,r,o){this.userService=e,this.songService=n,this.requestService=r,this.playlistService=o,this.users=[],this.songs=[],this.requests=[],this.playlists=[],this.stats={totalUsers:0,totalSongs:0,totalPlaylists:0,totalRequests:0,pendingRequests:0,approvedRequests:0,rejectedRequests:0,averageSongsPerPlaylist:0,mostActiveUser:"",mostPopularGenre:"",totalPlays:0},this.monthlyData=[],this.genreData={labels:[],datasets:[]},this.userGrowthData={labels:[],datasets:[]},this.popularSongsData={labels:[],datasets:[]},this.requestStatusData={labels:[],datasets:[]},this.playlistSizeData={labels:[],datasets:[]},this.isLoading=!1,this.selectedTimeRange="6months",this.selectedChart="overview",this.charts={}}ngOnInit(){this.loadAllData()}ngAfterViewInit(){}ngOnDestroy(){Object.values(this.charts).forEach(e=>{e&&e.destroy&&e.destroy()})}loadAllData(){return g(this,null,function*(){this.isLoading=!0;try{let[e,n,r,o]=yield Promise.all([this.userService.getFull().toPromise(),this.songService.getPublicSongs().toPromise(),this.requestService.getFullRequests().toPromise(),this.playlistService.getAllPlaylistsFull().toPromise()]);this.users=e||[],this.songs=n||[],this.requests=r||[],this.playlists=o||[],this.calculateStats(),this.processChartData(),this.initializeCharts()}catch(e){console.error("Error loading analytics data:",e)}finally{this.isLoading=!1}})}calculateStats(){this.stats.totalUsers=this.users.length,this.stats.totalSongs=this.songs.length,this.stats.totalPlaylists=this.playlists.length,this.stats.totalRequests=this.requests.length,this.stats.pendingRequests=this.requests.filter(s=>!s.isAnswered).length,this.stats.approvedRequests=this.requests.filter(s=>s.isAnswered&&s.isApproved).length,this.stats.rejectedRequests=this.requests.filter(s=>s.isAnswered&&!s.isApproved).length;let e=this.playlists.reduce((s,l)=>s+(l.songs?.length||0),0);this.stats.averageSongsPerPlaylist=this.playlists.length>0?Math.round(e/this.playlists.length*10)/10:0;let r=this.users.map(s=>({name:s.userName,count:s.ownedPlaylists?.length||0})).reduce((s,l)=>l.count>s.count?l:s,{name:"",count:0});this.stats.mostActiveUser=r.name||"N/A";let o={};this.songs.forEach(s=>{o[s.genre]=(o[s.genre]||0)+1});let a=Object.entries(o).reduce((s,[l,u])=>u>s.count?{genre:l,count:u}:s,{genre:"",count:0});this.stats.mostPopularGenre=a.genre||"N/A",this.stats.totalPlays=this.songs.reduce((s,l)=>s+l.countOfPlays,0)}processChartData(){this.processUserGrowthData(),this.processGenreData(),this.processPopularSongsData(),this.processRequestStatusData(),this.processPlaylistSizeData(),this.processMonthlyData()}processUserGrowthData(){let e={};this.users.forEach(r=>{let o=new Date(r.createdAt),a=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;e[a]=(e[a]||0)+1});let n=Object.entries(e).sort(([r],[o])=>r.localeCompare(o)).slice(-12);this.userGrowthData={labels:n.map(([r])=>{let[o,a]=r.split("-");return new Date(Number.parseInt(o),Number.parseInt(a)-1).toLocaleDateString("en-US",{month:"short",year:"numeric"})}),datasets:[{label:"New Users",data:n.map(([,r])=>r),borderColor:"#4ecdc4",backgroundColor:"rgba(78, 205, 196, 0.1)",tension:.4,fill:!0}]}}processGenreData(){let e={};this.songs.forEach(o=>{e[o.genre]=(e[o.genre]||0)+1});let n=Object.entries(e).sort(([,o],[,a])=>a-o).slice(0,8),r=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#feca57","#ff9ff3","#54a0ff","#5f27cd"];this.genreData={labels:n.map(([o])=>o),datasets:[{data:n.map(([,o])=>o),backgroundColor:r.slice(0,n.length),borderWidth:2,borderColor:"#ffffff"}]}}processPopularSongsData(){let e=this.songs.sort((n,r)=>r.countOfPlays-n.countOfPlays).slice(0,10).map(n=>({name:`${n.name} - ${n.artist}`,plays:n.countOfPlays}));this.popularSongsData={labels:e.map(n=>n.name),datasets:[{label:"Plays",data:e.map(n=>n.plays),backgroundColor:"rgba(255, 107, 107, 0.8)",borderColor:"#ff6b6b",borderWidth:1}]}}processRequestStatusData(){this.requestStatusData={labels:["Pending","Approved","Rejected"],datasets:[{data:[this.stats.pendingRequests,this.stats.approvedRequests,this.stats.rejectedRequests],backgroundColor:["#feca57","#2ed573","#ff4757"],borderWidth:2,borderColor:"#ffffff"}]}}processPlaylistSizeData(){let e={"1-5":0,"6-10":0,"11-20":0,"21-50":0,"50+":0};this.playlists.forEach(n=>{let r=n.songs?.length||0;r<=5?e["1-5"]++:r<=10?e["6-10"]++:r<=20?e["11-20"]++:r<=50?e["21-50"]++:e["50+"]++}),this.playlistSizeData={labels:Object.keys(e),datasets:[{label:"Playlists",data:Object.values(e),backgroundColor:["rgba(78, 205, 196, 0.8)","rgba(69, 183, 209, 0.8)","rgba(255, 107, 107, 0.8)","rgba(254, 202, 87, 0.8)","rgba(150, 206, 180, 0.8)"],borderColor:["#4ecdc4","#45b7d1","#ff6b6b","#feca57","#96ceb4"],borderWidth:1}]}}processMonthlyData(){let e={};this.users.forEach(n=>{let r=new Date(n.createdAt),o=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;e[o]||(e[o]={month:o,users:0,songs:0,playlists:0}),e[o].users++}),this.songs.forEach(n=>{let r=new Date(n.create_at),o=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;e[o]||(e[o]={month:o,users:0,songs:0,playlists:0}),e[o].songs++}),this.playlists.forEach(n=>{let r=new Date(n.createdAt),o=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;e[o]||(e[o]={month:o,users:0,songs:0,playlists:0}),e[o].playlists++}),this.monthlyData=Object.values(e).sort((n,r)=>n.month.localeCompare(r.month)).slice(-6)}initializeCharts(){setTimeout(()=>{this.createUserGrowthChart(),this.createGenreChart(),this.createPopularSongsChart(),this.createRequestStatusChart(),this.createPlaylistSizeChart()},100)}createUserGrowthChart(){let e=document.getElementById("userGrowthChart");if(!e)return;let n=e.getContext("2d");n&&(this.destroyChart("userGrowth"),this.drawLineChart(n,this.userGrowthData,"User Growth Over Time"))}createGenreChart(){let e=document.getElementById("genreChart");if(!e)return;let n=e.getContext("2d");n&&(this.destroyChart("genre"),this.drawPieChart(n,this.genreData,"Songs by Genre"))}createPopularSongsChart(){let e=document.getElementById("popularSongsChart");if(!e)return;let n=e.getContext("2d");n&&(this.destroyChart("popularSongs"),this.drawBarChart(n,this.popularSongsData,"Most Popular Songs"))}createRequestStatusChart(){let e=document.getElementById("requestStatusChart");if(!e)return;let n=e.getContext("2d");n&&(this.destroyChart("requestStatus"),this.drawDoughnutChart(n,this.requestStatusData,"Request Status"))}createPlaylistSizeChart(){let e=document.getElementById("playlistSizeChart");if(!e)return;let n=e.getContext("2d");n&&(this.destroyChart("playlistSize"),this.drawBarChart(n,this.playlistSizeData,"Playlist Size Distribution"))}destroyChart(e){if(this.charts[e]){let n=document.getElementById(`${e}Chart`);if(n){let r=n.getContext("2d");r&&r.clearRect(0,0,n.width,n.height)}delete this.charts[e]}}drawLineChart(e,n,r){let o=e.canvas,a=o.width,s=o.height,l=60;e.clearRect(0,0,a,s);let u=a-2*l,m=s-2*l,p=n.datasets[0].data,y=Math.max(...p),v=Math.min(...p),P=y-v||1;e.fillStyle="rgba(255, 255, 255, 0.02)",e.fillRect(l,l,u,m),e.strokeStyle="rgba(255, 255, 255, 0.1)",e.lineWidth=1;for(let b=0;b<=5;b++){let x=l+m/5*b;e.beginPath(),e.moveTo(l,x),e.lineTo(l+u,x),e.stroke()}for(let b=0;b<=n.labels.length-1;b++){let x=l+u/(n.labels.length-1)*b;e.beginPath(),e.moveTo(x,l),e.lineTo(x,l+m),e.stroke()}e.strokeStyle=n.datasets[0].borderColor,e.lineWidth=3,e.beginPath(),p.forEach((b,x)=>{let D=l+u/(p.length-1)*x,W=l+m-(b-v)/P*m;x===0?e.moveTo(D,W):e.lineTo(D,W)}),e.stroke(),e.fillStyle=n.datasets[0].backgroundColor,e.beginPath(),p.forEach((b,x)=>{let D=l+u/(p.length-1)*x,W=l+m-(b-v)/P*m;x===0?e.moveTo(D,W):e.lineTo(D,W)}),e.lineTo(l+u,l+m),e.lineTo(l,l+m),e.closePath(),e.fill(),e.fillStyle=n.datasets[0].borderColor,p.forEach((b,x)=>{let D=l+u/(p.length-1)*x,W=l+m-(b-v)/P*m;e.beginPath(),e.arc(D,W,4,0,2*Math.PI),e.fill()}),e.fillStyle="#ffffff",e.font="12px Arial",e.textAlign="center",n.labels.forEach((b,x)=>{let D=l+u/(n.labels.length-1)*x;e.fillText(b,D,s-20)}),e.textAlign="right";for(let b=0;b<=5;b++){let x=v+P/5*(5-b),D=l+m/5*b;e.fillText(Math.round(x).toString(),l-10,D+4)}e.fillStyle="#ffffff",e.font="16px Arial",e.textAlign="center",e.fillText(r,a/2,30)}drawPieChart(e,n,r){let o=e.canvas,a=o.width,s=o.height,l=a/2,u=s/2+20,m=Math.min(a,s)/3;e.clearRect(0,0,a,s);let p=n.datasets[0].data,y=n.datasets[0].backgroundColor,v=p.reduce((D,W)=>D+W,0),P=-Math.PI/2;p.forEach((D,W)=>{let Y=D/v*2*Math.PI;e.beginPath(),e.moveTo(l,u),e.arc(l,u,m,P,P+Y),e.closePath(),e.fillStyle=y[W],e.fill(),e.strokeStyle="#ffffff",e.lineWidth=2,e.stroke(),P+=Y});let b=a-150,x=50;n.labels.forEach((D,W)=>{e.fillStyle=y[W],e.fillRect(b,x,15,15),e.fillStyle="#ffffff",e.font="12px Arial",e.textAlign="left",e.fillText(`${D} (${p[W]})`,b+20,x+12),x+=25}),e.fillStyle="#ffffff",e.font="16px Arial",e.textAlign="center",e.fillText(r,a/2,30)}drawBarChart(e,n,r){let o=e.canvas,a=o.width,s=o.height,l=60;e.clearRect(0,0,a,s);let u=a-2*l,m=s-2*l,p=n.datasets[0].data,y=Math.max(...p),v=u/p.length-10;e.fillStyle="rgba(255, 255, 255, 0.02)",e.fillRect(l,l,u,m),p.forEach((P,b)=>{let x=P/y*m,D=l+b*(u/p.length)+5,W=l+m-x;e.fillStyle=n.datasets[0].backgroundColor,e.fillRect(D,W,v,x),e.fillStyle="#ffffff",e.font="12px Arial",e.textAlign="center",e.fillText(P.toString(),D+v/2,W-5)}),e.fillStyle="#ffffff",e.font="10px Arial",e.textAlign="center",n.labels.forEach((P,b)=>{let x=l+b*(u/p.length)+v/2+5,D=P.length>15?P.substring(0,15)+"...":P;e.fillText(D,x,s-20)}),e.fillStyle="#ffffff",e.font="16px Arial",e.textAlign="center",e.fillText(r,a/2,30)}drawDoughnutChart(e,n,r){let o=e.canvas,a=o.width,s=o.height,l=a/2,u=s/2+20,m=Math.min(a,s)/3,p=m*.6;e.clearRect(0,0,a,s);let y=n.datasets[0].data,v=n.datasets[0].backgroundColor,P=y.reduce((W,Y)=>W+Y,0),b=-Math.PI/2;y.forEach((W,Y)=>{let Z=W/P*2*Math.PI;e.beginPath(),e.arc(l,u,m,b,b+Z),e.arc(l,u,p,b+Z,b,!0),e.closePath(),e.fillStyle=v[Y],e.fill(),e.strokeStyle="#ffffff",e.lineWidth=2,e.stroke(),b+=Z}),e.fillStyle="#ffffff",e.font="20px Arial",e.textAlign="center",e.fillText(P.toString(),l,u-5),e.font="12px Arial",e.fillText("Total",l,u+15);let x=a-120,D=50;n.labels.forEach((W,Y)=>{e.fillStyle=v[Y],e.fillRect(x,D,15,15),e.fillStyle="#ffffff",e.font="12px Arial",e.textAlign="left",e.fillText(`${W} (${y[Y]})`,x+20,D+12),D+=25}),e.fillStyle="#ffffff",e.font="16px Arial",e.textAlign="center",e.fillText(r,a/2,30)}onTimeRangeChange(){this.processChartData(),this.initializeCharts()}log(){console.log(this.monthlyData)}parseMonthYearToDate(e){let[n,r]=e.split("-");if(!n||!r)return null;let o=parseInt(r,10),a=o<50?2e3+o:1900+o,s=parseInt(n,10)-1;return isNaN(s)||isNaN(a)?null:new Date(a,s,1)}refreshData(){this.loadAllData()}exportData(){let e={stats:this.stats,monthlyData:this.monthlyData,timestamp:new Date().toISOString()},n=JSON.stringify(e,null,2),r=new Blob([n],{type:"application/json"}),o=URL.createObjectURL(r),a=document.createElement("a");a.href=o,a.download=`analytics-${new Date().toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(o)}formatNumber(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()}getGrowthPercentage(e,n){return n===0?0:Math.round((e-n)/n*100)}static{this.\u0275fac=function(n){return new(n||i)(M(Jt),M(ei),M(vo),M(vv))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-analytics"]],standalone:!0,features:[se],decls:33,vars:3,consts:[[1,"analytics-container"],[1,"analytics-header"],[1,"header-content"],[1,"page-title"],[1,"gradient-text"],[1,"page-subtitle"],[1,"header-actions"],[1,"time-range-selector"],[1,"time-select",3,"ngModelChange","change","ngModel"],["value","1month"],["value","3months"],["value","6months"],["value","1year"],[1,"action-btn","refresh-btn",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","23 4 23 10 17 10"],["points","1 20 1 14 7 14"],["d","M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"],[1,"action-btn","export-btn",3,"click"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"loading-overlay"],[1,"spinner"],[1,"stats-overview"],[1,"stat-card","users"],[1,"stat-icon"],["d","M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M23 21v-2a4 4 0 0 0-3-3.87"],["d","M16 3.13a4 4 0 0 1 0 7.75"],[1,"stat-content"],[1,"stat-number"],[1,"stat-meta"],[1,"most-active"],[1,"stat-card","songs"],["d","M9 18V5l12-2v13"],["cx","6","cy","18","r","3"],["cx","18","cy","16","r","3"],[1,"total-plays"],[1,"stat-card","playlists"],["d","M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2z"],["points","9 9 9 15"],["points","15 9 15 15"],[1,"avg-songs"],[1,"stat-card","requests"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],[1,"pending"],[1,"charts-grid"],[1,"chart-card","large"],[1,"chart-header"],[1,"chart-info"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],[1,"chart-container"],["id","userGrowthChart","width","600","height","300"],[1,"chart-card"],[1,"popular-genre"],["id","genreChart","width","400","height","300"],[1,"approval-rate"],["id","requestStatusChart","width","400","height","300"],["id","popularSongsChart","width","600","height","300"],[1,"size-info"],["id","playlistSizeChart","width","400","height","300"],[1,"activity-table-section"],[1,"section-header"],[1,"table-container"],[1,"activity-table"],[1,"insights-section"],[1,"insights-grid"],[1,"insight-card","positive"],[1,"insight-icon"],["points","22 7 13.5 15.5 8.5 10.5 2 17"],["points","16 7 22 7 22 13"],[1,"insight-content"],[1,"insight-card","info"],[1,"insight-card","warning"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"insight-card","success"],["points","20 6 9 17 4 12"],[1,"month-cell"],[1,"number-cell"],[1,"number"],[1,"number-cell","total"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"span",4),f(5,"Analytics Dashboard"),d()(),c(6,"p",5),f(7,"Comprehensive insights into your music platform"),d()(),c(8,"div",6)(9,"div",7)(10,"select",8),Ot("ngModelChange",function(a){return Pt(r.selectedTimeRange,a)||(r.selectedTimeRange=a),a}),I("change",function(){return r.onTimeRangeChange()}),c(11,"option",9),f(12,"Last Month"),d(),c(13,"option",10),f(14,"Last 3 Months"),d(),c(15,"option",11),f(16,"Last 6 Months"),d(),c(17,"option",12),f(18,"Last Year"),d()()(),c(19,"button",13),I("click",function(){return r.refreshData()}),E(),c(20,"svg",14),_(21,"polyline",15)(22,"polyline",16)(23,"path",17),d(),f(24," Refresh "),d(),F(),c(25,"button",18),I("click",function(){return r.exportData()}),E(),c(26,"svg",14),_(27,"path",19)(28,"polyline",20)(29,"line",21),d(),f(30," Export "),d()()(),L(31,hP,4,0,"div",22)(32,gP,178,14),d()),n&2&&(h(10),It("ngModel",r.selectedTimeRange),h(9),R("disabled",r.isLoading),h(12),V(31,r.isLoading?31:32))},dependencies:[xe,Rt,Ll,Bl,fo,At,di],styles:['[_ngcontent-%COMP%]:root{--color-black: #000000;--color-white: #ffffff;--gradient-start: #ff6b6b;--gradient-middle: #4ecdc4;--gradient-end: #45b7d1;--bg-primary: rgba(15, 15, 15, .95);--bg-secondary: rgba(30, 30, 30, .5);--bg-tertiary: rgba(40, 40, 40, .3);--border-color: rgba(255, 255, 255, .1);--text-primary: #ffffff;--text-secondary: #a0a0a0;--text-muted: #666666;--hover-bg: rgba(255, 255, 255, .05);--success-color: #2ed573;--error-color: #ff4757;--warning-color: #ffa502;--info-color: #3742fa}.analytics-container[_ngcontent-%COMP%]{padding:2rem;min-height:100vh;background:var(--color-black);color:var(--text-primary);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.analytics-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2rem;padding-bottom:1.5rem;border-bottom:1px solid var(--border-color)}.header-content[_ngcontent-%COMP%]{flex:1}.page-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:2rem;font-weight:700;margin:0 0 .5rem;color:var(--text-primary)}.title-icon[_ngcontent-%COMP%]{width:32px;height:32px;stroke:var(--gradient-middle)}.gradient-text[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));-webkit-background-clip:text;background-clip:text;color:transparent}.page-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1rem;margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.time-range-selector[_ngcontent-%COMP%]{position:relative}.time-select[_ngcontent-%COMP%]{padding:.5rem 1rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:6px;color:var(--text-primary);font-size:.875rem;cursor:pointer;transition:all .3s ease}.time-select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--gradient-middle);box-shadow:0 0 0 2px #4ecdc41a}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:6px;color:var(--text-secondary);cursor:pointer;transition:all .3s ease;font-size:.875rem;text-decoration:none}.action-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--hover-bg);color:var(--text-primary);transform:translateY(-1px)}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.action-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.refresh-btn[_ngcontent-%COMP%]:hover{border-color:var(--gradient-middle)}.export-btn[_ngcontent-%COMP%]:hover{border-color:var(--gradient-start)}.loading-overlay[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;text-align:center}.spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid rgba(255,255,255,.1);border-top:3px solid var(--gradient-middle);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.stats-overview[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:.5rem;margin-bottom:3rem}.stat-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;padding:1.5rem;transition:all .3s ease;position:relative;overflow:hidden}.stat-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end))}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 8px 32px #0000004d;border-color:#ffffff26}.stat-card.users[_ngcontent-%COMP%]:before{background:var(--gradient-middle)}.stat-card.songs[_ngcontent-%COMP%]:before{background:var(--gradient-start)}.stat-card.playlists[_ngcontent-%COMP%]:before{background:var(--gradient-end)}.stat-card.requests[_ngcontent-%COMP%]:before{background:var(--gradient-middle)}.stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:#ffffff0d;border-radius:12px;display:flex;align-items:center;justify-content:center;margin-bottom:1rem}.stat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:var(--text-secondary)}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;font-weight:500;margin:0 0 .5rem;text-transform:uppercase;letter-spacing:.5px}.stat-number[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--text-primary);margin-bottom:.5rem}.stat-meta[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-muted)}.charts-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:2rem;margin-bottom:3rem}.chart-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;padding:1.5rem;transition:all .3s ease}.chart-card.large[_ngcontent-%COMP%]{grid-column:span 2}.chart-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 32px #0003}.chart-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:1rem;border-bottom:1px solid var(--border-color)}.chart-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.1rem;font-weight:600;margin:0}.chart-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:var(--text-secondary);font-size:.875rem}.chart-info[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.chart-container[_ngcontent-%COMP%]{position:relative;height:300px;display:flex;align-items:center;justify-content:center}.chart-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.activity-table-section[_ngcontent-%COMP%]{margin-bottom:3rem}.section-header[_ngcontent-%COMP%]{margin-bottom:1.5rem}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.5rem;font-weight:600;margin:0 0 .5rem}.section-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.table-container[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;overflow:hidden}.activity-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.activity-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:var(--bg-tertiary);color:var(--text-primary);font-weight:600;padding:1rem;text-align:left;border-bottom:1px solid var(--border-color);font-size:.875rem;text-transform:uppercase;letter-spacing:.5px}.activity-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid var(--border-color);color:var(--text-secondary)}.activity-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.activity-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:var(--hover-bg)}.month-cell[_ngcontent-%COMP%]{color:var(--text-primary)!important;font-weight:500}.number-cell[_ngcontent-%COMP%]{text-align:center}.number-cell[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .5rem;background:var(--bg-tertiary);border-radius:4px;font-weight:500;color:var(--text-primary)}.number-cell.total[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));color:var(--text-primary);font-weight:600}.insights-section[_ngcontent-%COMP%]{margin-bottom:2rem}.insights-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}.insight-card[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;padding:1.5rem;display:flex;gap:1rem;transition:all .3s ease;position:relative;overflow:hidden}.insight-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;bottom:0;width:4px}.insight-card.positive[_ngcontent-%COMP%]:before{background:var(--success-color)}.insight-card.info[_ngcontent-%COMP%]:before{background:var(--info-color)}.insight-card.warning[_ngcontent-%COMP%]:before{background:var(--warning-color)}.insight-card.success[_ngcontent-%COMP%]:before{background:var(--gradient-middle)}.insight-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 32px #0003}.insight-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.insight-card.positive[_ngcontent-%COMP%]   .insight-icon[_ngcontent-%COMP%]{background:#2ed5731a;color:var(--success-color)}.insight-card.info[_ngcontent-%COMP%]   .insight-icon[_ngcontent-%COMP%]{background:#3742fa1a;color:var(--info-color)}.insight-card.warning[_ngcontent-%COMP%]   .insight-icon[_ngcontent-%COMP%]{background:#ffa5021a;color:var(--warning-color)}.insight-card.success[_ngcontent-%COMP%]   .insight-icon[_ngcontent-%COMP%]{background:#4ecdc41a;color:var(--gradient-middle)}.insight-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px}.insight-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1rem;font-weight:600;margin:0 0 .5rem}.insight-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;line-height:1.5;margin:0}@media (max-width: 1200px){.chart-card.large[_ngcontent-%COMP%]{grid-column:span 1}}@media (max-width: 768px){.analytics-container[_ngcontent-%COMP%]{padding:1rem}.analytics-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:stretch}.header-actions[_ngcontent-%COMP%]{justify-content:space-between}.stats-overview[_ngcontent-%COMP%], .charts-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.chart-card.large[_ngcontent-%COMP%]{grid-column:span 1}.insights-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.activity-table[_ngcontent-%COMP%]{font-size:.875rem}.activity-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .activity-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}}@media (max-width: 480px){.page-title[_ngcontent-%COMP%], .stat-number[_ngcontent-%COMP%]{font-size:1.5rem}.chart-container[_ngcontent-%COMP%]{height:250px}.insight-card[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.insight-icon[_ngcontent-%COMP%]{align-self:center}}']})}}return i})();var rc=class{constructor(t,e,n,r,o,a,s,l){this.name=t,this.artist=e,this.genre=n,this.year=r,this.album=o,this.lyrics=a,this.audioFilePath=s,this.imageFilePath=l}};var _S=ES(bS());function lB(i,t){if(i&1&&(c(0,"div",12),E(),c(1,"svg",17),_(2,"circle",18)(3,"line",19)(4,"line",20),d(),f(5),d()),i&2){let e=w();h(5),X(" ",e.error," ")}}function cB(i,t){i&1&&(c(0,"div",13),E(),c(1,"svg",17),_(2,"polyline",21),d(),f(3," Your song has been uploaded successfully! "),d())}function dB(i,t){if(i&1){let e=ve();c(0,"div",34),I("drop",function(r){z(e);let o=w(2);return j(o.onAudioFileDrop(r))})("dragover",function(r){z(e);let o=w(2);return j(o.onDragOver(r))})("click",function(){z(e),w();let r=Xn(12);return j(r.click())}),E(),c(1,"svg",17),_(2,"path",35)(3,"polyline",36)(4,"line",37),d(),F(),c(5,"p"),f(6,"Drag and drop your audio file here"),d(),c(7,"p",38),f(8,"or click to browse"),d(),c(9,"p",39),f(10,"Supported: MP3, WAV, FLAC, AAC"),d()()}}function uB(i,t){if(i&1&&(c(0,"div",54)(1,"div",55)(2,"span"),f(3,"Uploading Cover Art"),d(),c(4,"span"),f(5),d()(),c(6,"div",56),_(7,"div",57),d()()),i&2){let e=w(4);h(5),X("",e.uploadProgress.image,"%"),h(2),Wr("width",e.uploadProgress.image,"%")}}function mB(i,t){if(i&1&&(c(0,"div",53)(1,"div",54)(2,"div",55)(3,"span"),f(4,"Uploading Audio File"),d(),c(5,"span"),f(6),d()(),c(7,"div",56),_(8,"div",57),d()(),L(9,uB,8,3,"div",54),d()),i&2){let e=w(3);h(6),X("",e.uploadProgress.audio,"%"),h(2),Wr("width",e.uploadProgress.audio,"%"),h(),V(9,e.extractedImage?9:-1)}}function pB(i,t){if(i&1){let e=ve();c(0,"div",40)(1,"div",41)(2,"div",42),E(),c(3,"svg",17),_(4,"path",43)(5,"polyline",44)(6,"circle",45)(7,"path",46),d()(),F(),c(8,"div",47)(9,"p",48),f(10),d(),c(11,"p",49),f(12),d()(),c(13,"button",50),I("click",function(){z(e);let r=w(2);return j(r.removeAudioFile())}),E(),c(14,"svg",17),_(15,"line",51)(16,"line",52),d()()(),L(17,mB,10,4,"div",53),d()}if(i&2){let e=w(2);h(10),N(e.audioFile.name),h(2),N(e.formatFileSize(e.audioFile.size)),h(5),V(17,e.isLoading?17:-1)}}function hB(i,t){if(i&1&&(c(0,"div",59)(1,"span",60),f(2,"Title:"),d(),c(3,"span",61),f(4),d()()),i&2){let e=w(3);h(4),N(e.metaData.title)}}function fB(i,t){if(i&1&&(c(0,"div",59)(1,"span",60),f(2,"Artist:"),d(),c(3,"span",61),f(4),d()()),i&2){let e=w(3);h(4),N(e.metaData.artist)}}function gB(i,t){i&1&&(c(0,"div",59)(1,"span",60),f(2,"Cover Art:"),d(),c(3,"span",62),f(4,"\u2713 Found"),d()())}function bB(i,t){if(i&1&&(c(0,"div",29)(1,"h4"),f(2,"Extracted Information"),d(),c(3,"div",58),L(4,hB,5,1,"div",59)(5,fB,5,1,"div",59)(6,gB,5,0,"div",59),d()()),i&2){let e=w(2);h(4),V(4,e.metaData.title?4:-1),h(),V(5,e.metaData.artist?5:-1),h(),V(6,e.extractedImage?6:-1)}}function _B(i,t){i&1&&(_(0,"div",63),f(1," Uploading... "))}function vB(i,t){i&1&&(f(0," Upload & Continue "),E(),c(1,"svg",17),_(2,"polyline",64),d())}function yB(i,t){if(i&1){let e=ve();c(0,"div",15)(1,"div",22),E(),c(2,"svg",17),_(3,"path",23)(4,"circle",24)(5,"circle",25),d()(),F(),c(6,"div",26)(7,"h3"),f(8,"Select Audio File"),d(),L(9,dB,11,0,"div",27)(10,pB,18,3),c(11,"input",28,0),I("change",function(r){z(e);let o=w();return j(o.onAudioFileSelected(r))}),d()(),L(13,bB,7,3,"div",29),c(14,"div",30)(15,"button",31),I("click",function(){z(e);let r=w();return j(r.goToSongs())}),E(),c(16,"svg",17),_(17,"polyline",32),d(),f(18," Cancel "),d(),F(),c(19,"button",33),I("click",function(){z(e);let r=w();return j(r.uploadFilesAndContinue())}),L(20,_B,2,0)(21,vB,3,0),d()()()}if(i&2){let e=w();h(9),V(9,e.audioFile?10:9),h(4),V(13,e.audioFile&&(e.metaData.title||e.metaData.artist)?13:-1),h(6),R("disabled",!e.audioFile||e.isLoading),h(),V(20,e.isLoading?20:21)}}function xB(i,t){if(i&1&&(c(0,"option",76),f(1),d()),i&2){let e=t.$implicit;R("value",e),h(),N(e)}}function wB(i,t){i&1&&(_(0,"div",63),f(1," Adding Song... "))}function CB(i,t){i&1&&(f(0," Add to Public Songs "),E(),c(1,"svg",17),_(2,"polyline",21),d())}function SB(i,t){if(i&1){let e=ve();c(0,"div",15)(1,"div",65)(2,"div",66)(3,"label",67),f(4,"Title *"),d(),c(5,"input",68),Ot("ngModelChange",function(r){z(e);let o=w();return Pt(o.metaData.title,r)||(o.metaData.title=r),j(r)}),d()(),c(6,"div",66)(7,"label",69),f(8,"Artist *"),d(),c(9,"input",70),Ot("ngModelChange",function(r){z(e);let o=w();return Pt(o.metaData.artist,r)||(o.metaData.artist=r),j(r)}),d()(),c(10,"div",66)(11,"label",71),f(12,"Album"),d(),c(13,"input",72),Ot("ngModelChange",function(r){z(e);let o=w();return Pt(o.metaData.album,r)||(o.metaData.album=r),j(r)}),d()(),c(14,"div",66)(15,"label",73),f(16,"Genre"),d(),c(17,"select",74),Ot("ngModelChange",function(r){z(e);let o=w();return Pt(o.metaData.genre,r)||(o.metaData.genre=r),j(r)}),c(18,"option",75),f(19,"Select genre"),d(),We(20,xB,2,2,"option",76,Gr),d()(),c(22,"div",66)(23,"label",77),f(24,"Year"),d(),c(25,"input",78),Ot("ngModelChange",function(r){z(e);let o=w();return Pt(o.metaData.year,r)||(o.metaData.year=r),j(r)}),d()()(),c(26,"div",30)(27,"button",79),I("click",function(){z(e);let r=w();return j(r.previousStep())}),E(),c(28,"svg",17),_(29,"polyline",32),d(),f(30," Back "),d(),F(),c(31,"button",33),I("click",function(){z(e);let r=w();return j(r.submitSong())}),L(32,wB,2,0)(33,CB,3,0),d()()()}if(i&2){let e=w();h(5),It("ngModel",e.metaData.title),h(4),It("ngModel",e.metaData.artist),h(4),It("ngModel",e.metaData.album),h(4),It("ngModel",e.metaData.genre),h(3),Ge(e.genres),h(5),It("ngModel",e.metaData.year),R("min",1900)("max",2024),h(2),R("disabled",e.isLoading),h(4),R("disabled",e.isLoading||!e.metaData.title||!e.metaData.artist),h(),V(32,e.isLoading?32:33)}}function MB(i,t){if(i&1){let e=ve();c(0,"div",16)(1,"div",80),E(),c(2,"svg",17),_(3,"polyline",21),d()(),F(),c(4,"h2",81),f(5,"Song Uploaded Successfully!"),d(),c(6,"p",13),f(7,"Your song has been added to the public songs library and is now available for everyone to enjoy."),d(),c(8,"div",30)(9,"button",31),I("click",function(){z(e);let r=w();return j(r.resetForm())}),f(10," Upload Another Song "),d(),c(11,"button",82),I("click",function(){z(e);let r=w();return j(r.goToSongs())}),f(12," View Public Songs "),E(),c(13,"svg",17),_(14,"polyline",64),d()()()()}}var vS=(()=>{class i{constructor(e,n){this.songService=e,this.router=n,this.audioFile=null,this.extractedImage=null,this.uploadProgress={audio:0,image:0},this.metaData={title:"",artist:"",genre:"",album:"",year:new Date().getFullYear().toString()},this.currentStep=1,this.isLoading=!1,this.error="",this.success=!1,this.imageFile=null,this.audioUploadUrl={url:""},this.imageUploadUrl={url:""},this.genres=["Pop","Rock","Hip Hop","Electronic","R&B","Jazz","Classical","Country","Folk","Alternative","Metal","Blues","Reggae","Other"]}ngOnInit(){}onAudioFileSelected(e){let r=e.target.files?.[0];if(r){if(!r.type.startsWith("audio/")){this.error="Please select an audio file (mp3, wav, etc.)";return}this.audioFile=r,console.log(this.audioFile),this.extractMetaDataAndImage(r),this.error=""}}onAudioFileDrop(e){e.preventDefault();let n=e.dataTransfer?.files[0];if(n){if(!n.type.startsWith("audio/")){this.error="Please select an audio file (mp3, wav, etc.)";return}this.audioFile=n,this.extractMetaDataAndImage(n),this.error=""}}onDragOver(e){e.preventDefault()}removeAudioFile(){this.audioFile=null,this.extractedImage=null,this.uploadProgress={audio:0,image:0},this.resetMetaData()}removeImageFile(){this.imageFile=null,this.uploadProgress.image=0}resetMetaData(){this.metaData={title:"",artist:"",genre:"",album:"",year:new Date().getFullYear().toString()}}extractMetaDataAndImage(e){return g(this,null,function*(){try{let n=yield(0,_S.parseBlob)(e);if(this.metaData.title=n.common.title||this.metaData.title||e.name.replace(/\.[^/.]+$/,""),this.metaData.artist=n.common.artist||"",this.metaData.genre=n.common.genre?.[0]||"",this.metaData.album=n.common.album||"",this.metaData.year=n.common.year?.toString()||new Date().getFullYear().toString(),n.common.picture&&n.common.picture.length>0){let r=n.common.picture[0],o=new Blob([r.data],{type:r.format}),a=URL.createObjectURL(o);this.extractedImage={data:r.data,format:r.format||"image/jpeg",name:`${this.metaData.title||"cover"}.${r.format?.split("/")[1]||"jpg"}`}}}catch(n){console.error("Metadata extraction error:",n);let r=e.name.replace(/\.[^/.]+$/,""),o=r.split(" - ");o.length>=2?(this.metaData.artist=o[0].trim(),this.metaData.title=o[1].trim()):this.metaData.title=r,this.metaData.year=new Date().getFullYear().toString()}})}nextStep(){this.currentStep<3&&this.currentStep++}previousStep(){this.currentStep>1&&this.currentStep--}goToStep(e){this.currentStep=e}uploadFiles(){return g(this,null,function*(){if(!this.audioFile){this.error="Please select an audio file";return}try{this.isLoading=!0,this.error="",this.uploadProgress={audio:0,image:0},yield this.getUploadUrls(),yield this.uploadAudioFile(),this.imageFile&&(yield this.uploadImageFile()),this.nextStep()}catch(e){console.error("Upload error:",e),this.error="Error uploading files. Please try again."}finally{this.isLoading=!1}})}uploadFilesAndContinue(){return g(this,null,function*(){if(!this.audioFile){this.error="Please select an audio file";return}try{this.isLoading=!0,this.error="",this.uploadProgress={audio:0,image:0},yield this.getUploadUrls(),yield this.uploadAudioFile(),this.extractedImage&&(yield this.uploadImageFile()),this.nextStep()}catch(e){console.error("Upload error:",e),this.error="Error uploading files. Please try again."}finally{this.isLoading=!1}})}getUploadUrls(){return g(this,null,function*(){this.audioFile&&(this.audioUploadUrl=yield this.songService.getUploadUrl(this.audioFile.name,this.audioFile.type).toPromise(),this.extractedImage&&(this.imageUploadUrl=yield this.songService.getUploadUrl(this.extractedImage.name,`image/${this.extractedImage.format}`).toPromise()))})}uploadAudioFile(){return new Promise((e,n)=>{if(!this.audioFile||!this.audioUploadUrl){n("No audio file or upload URL");return}let r=new XMLHttpRequest;r.upload.onprogress=o=>{o.lengthComputable&&(this.uploadProgress.audio=Math.round(o.loaded*100/o.total))},r.onload=()=>{r.status===200?e():n("Audio upload failed")},r.onerror=()=>n("Audio upload error"),r.open("PUT",this.audioUploadUrl.url),r.setRequestHeader("Content-Type",this.audioFile.type),r.send(this.audioFile)})}uploadImageFile(){return new Promise((e,n)=>{if(!this.extractedImage||!this.imageUploadUrl){n("No image data or upload URL");return}let r=new XMLHttpRequest;r.upload.onprogress=o=>{o.lengthComputable&&(this.uploadProgress.image=Math.round(o.loaded*100/o.total))},r.onload=()=>{r.status===200?e():n("Image upload failed")},r.onerror=()=>n("Image upload error"),r.open("PUT",this.imageUploadUrl.url),r.setRequestHeader("Content-Type",`image/${this.extractedImage.format}`),r.send(this.extractedImage.data)})}submitSong(){return g(this,null,function*(){if(!this.audioFile){this.error="No audio file selected";return}if(!this.metaData.title||!this.metaData.artist){this.error="Title and artist are required";return}try{this.isLoading=!0,this.error="";let e=this.audioUploadUrl?.url?.split("?")[0],n=this.imageUploadUrl?this.imageUploadUrl?.url.split("?")[0]:"https://yehuditmusic.s3.us-east-1.amazonaws.com/default-image.png",r=new rc(this.metaData.title,this.metaData.artist,this.metaData.genre||"Unknown Genre",Number.parseInt(this.metaData.year)||new Date().getFullYear(),this.metaData.album||"Unknown Album","",e||"https://yehuditmusic.s3.us-east-1.amazonaws.com/",n);yield this.songService.addPublicSong(r).toPromise(),this.success=!0,this.nextStep(),setTimeout(()=>{this.router.navigate(["/songs"])},3e3)}catch(e){console.error("Submit error:",e),this.error="Error adding song. Please try again."}finally{this.isLoading=!1}})}formatFileSize(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB"}resetForm(){this.audioFile=null,this.extractedImage=null,this.uploadProgress={audio:0,image:0},this.resetMetaData(),this.currentStep=1,this.error="",this.success=!1,this.audioUploadUrl={url:""},this.imageUploadUrl={url:""}}goToSongs(){this.router.navigate(["/songs"])}static{this.\u0275fac=function(n){return new(n||i)(M(ei),M(mt))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-upload-public-song"]],standalone:!0,features:[se],decls:32,vars:15,consts:[["audioFileInput",""],[1,"upload-container"],[1,"upload-card"],[1,"upload-header"],[1,"upload-title"],[1,"gradient-text"],[1,"upload-subtitle"],[1,"upload-steps"],[1,"upload-step"],[1,"step-number"],[1,"step-label"],[1,"step-connector"],[1,"error-message"],[1,"success-message"],[1,"upload-content"],[1,"step-content"],[1,"step-content","success-step"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],["points","20 6 9 17 4 12"],[1,"upload-icon-container"],["d","M9 18V5l12-2v13"],["cx","6","cy","18","r","3"],["cx","18","cy","16","r","3"],[1,"file-upload-section"],[1,"dropzone"],["type","file","accept","audio/*",2,"display","none",3,"change"],[1,"metadata-preview"],[1,"step-actions"],[1,"btn","btn-secondary",3,"click"],["points","15 18 9 12 15 6"],[1,"btn","btn-primary",3,"click","disabled"],[1,"dropzone",3,"drop","dragover","click"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","17 8 12 3 7 8"],["x1","12","y1","3","x2","12","y2","15"],[1,"dropzone-subtext"],[1,"dropzone-formats"],[1,"selected-file"],[1,"file-info"],[1,"file-icon"],["d","M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"],["points","14 2 14 8 20 8"],["cx","12","cy","15","r","3"],["d","M12 12v6"],[1,"file-details"],[1,"file-name"],[1,"file-size"],[1,"file-remove",3,"click"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"upload-progress-section"],[1,"progress-item"],[1,"progress-header"],[1,"progress-bar"],[1,"progress-fill"],[1,"metadata-grid"],[1,"metadata-item"],[1,"metadata-label"],[1,"metadata-value"],[1,"metadata-value","success"],[1,"spinner"],["points","9 18 15 12 9 6"],[1,"form-grid"],[1,"form-group"],["for","title"],["type","text","id","title","placeholder","Song title","required","",3,"ngModelChange","ngModel"],["for","artist"],["type","text","id","artist","placeholder","Artist name","required","",3,"ngModelChange","ngModel"],["for","album"],["type","text","id","album","placeholder","Album name (optional)",3,"ngModelChange","ngModel"],["for","genre"],["id","genre",3,"ngModelChange","ngModel"],["value",""],[3,"value"],["for","year"],["type","number","id","year",3,"ngModelChange","ngModel","min","max"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"success-icon"],[1,"success-title"],[1,"btn","btn-primary",3,"click"]],template:function(n,r){n&1&&(c(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4)(4,"span",5),f(5,"Upload Public Song"),d()(),c(6,"p",6),f(7,"Share your music with the world"),d()(),c(8,"div",7)(9,"div",8)(10,"div",9),f(11,"1"),d(),c(12,"div",10),f(13,"Upload Files"),d()(),_(14,"div",11),c(15,"div",8)(16,"div",9),f(17,"2"),d(),c(18,"div",10),f(19,"Song Details"),d()(),_(20,"div",11),c(21,"div",8)(22,"div",9),f(23,"3"),d(),c(24,"div",10),f(25,"Confirmation"),d()()(),L(26,lB,6,1,"div",12)(27,cB,4,0,"div",13),c(28,"div",14),L(29,yB,22,4,"div",15)(30,SB,34,10,"div",15)(31,MB,15,0,"div",16),d()()()),n&2&&(h(9),$("active",r.currentStep>=1)("completed",r.currentStep>1),h(6),$("active",r.currentStep>=2)("completed",r.currentStep>2),h(6),$("active",r.currentStep>=3),h(5),V(26,r.error?26:-1),h(),V(27,r.success?27:-1),h(2),V(29,r.currentStep===1?29:-1),h(),V(30,r.currentStep===2?30:-1),h(),V(31,r.currentStep===3?31:-1))},dependencies:[xe,Rt,Ll,Bl,Dt,Xa,fo,At,ip,tp,ep,di],styles:["[_ngcontent-%COMP%]:root{--color-black: #000000;--color-white: #ffffff;--gradient-start: #ff6b6b;--gradient-middle: #4ecdc4;--gradient-end: #45b7d1;--bg-primary: rgba(15, 15, 15, .95);--bg-secondary: rgba(30, 30, 30, .5);--bg-tertiary: rgba(40, 40, 40, .3);--border-color: rgba(255, 255, 255, .1);--text-primary: #ffffff;--text-secondary: #a0a0a0;--text-muted: #666666;--hover-bg: rgba(255, 255, 255, .05);--success-color: #52c41a;--error-color: #ff4d4f;--warning-color: #faad14}.upload-container[_ngcontent-%COMP%]{min-height:100vh;background:var(--color-black);padding:2rem;display:flex;justify-content:center;align-items:flex-start;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.upload-card[_ngcontent-%COMP%]{background:var(--bg-primary);border-radius:16px;padding:2rem;width:100%;max-width:800px;box-shadow:0 20px 60px #00000080;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px)}.upload-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.upload-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin:0 0 .5rem;color:var(--text-primary)}.gradient-text[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));-webkit-background-clip:text;background-clip:text;color:transparent}.upload-subtitle[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1.1rem;margin:0}.upload-steps[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-bottom:3rem;gap:1rem}.upload-step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;opacity:.5;transition:all .3s ease}.upload-step.active[_ngcontent-%COMP%], .upload-step.completed[_ngcontent-%COMP%]{opacity:1}.step-number[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:var(--bg-tertiary);border:2px solid var(--border-color);display:flex;align-items:center;justify-content:center;font-weight:600;color:var(--text-secondary);transition:all .3s ease}.upload-step.active[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));border-color:transparent;color:var(--text-primary)}.upload-step.completed[_ngcontent-%COMP%]   .step-number[_ngcontent-%COMP%]{background:var(--success-color);border-color:var(--success-color);color:var(--text-primary)}.step-label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:var(--text-secondary);text-align:center}.upload-step.active[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:var(--text-primary)}.step-connector[_ngcontent-%COMP%]{width:60px;height:2px;background:var(--border-color);margin:0 .5rem}.error-message[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:1rem;border-radius:8px;margin-bottom:2rem;font-size:.875rem}.error-message[_ngcontent-%COMP%]{background:#ff4d4f1a;border:1px solid rgba(255,77,79,.2);color:var(--error-color)}.success-message[_ngcontent-%COMP%]{background:#52c41a1a;border:1px solid rgba(82,196,26,.2);color:var(--success-color)}.error-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .success-message[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px;flex-shrink:0}.upload-content[_ngcontent-%COMP%]{min-height:400px}.step-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.upload-icon-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1rem}.upload-icon-container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:64px;height:64px;color:var(--gradient-middle)}.file-upload-section[_ngcontent-%COMP%]{margin-bottom:2rem}.file-upload-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin:0 0 1rem;font-size:1.1rem;font-weight:600}.dropzone[_ngcontent-%COMP%]{border:2px dashed var(--border-color);border-radius:12px;padding:3rem 2rem;text-align:center;cursor:pointer;transition:all .3s ease;background:var(--bg-secondary)}.dropzone[_ngcontent-%COMP%]:hover{border-color:var(--gradient-middle);background:#4ecdc40d}.dropzone[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:48px;height:48px;color:var(--text-secondary);margin-bottom:1rem}.dropzone[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.1rem;font-weight:500;margin:0 0 .5rem}.dropzone-subtext[_ngcontent-%COMP%]{color:var(--text-secondary)!important;font-size:.9rem!important;margin:0 0 1rem!important}.dropzone-formats[_ngcontent-%COMP%]{color:var(--text-muted)!important;font-size:.8rem!important;margin:0!important}.image-dropzone[_ngcontent-%COMP%]{padding:2rem}.image-dropzone[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:32px;height:32px}.selected-file[_ngcontent-%COMP%]{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:12px;padding:1rem}.file-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.file-icon[_ngcontent-%COMP%]{width:48px;height:48px;background:var(--bg-tertiary);border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.file-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;color:var(--text-secondary)}.file-details[_ngcontent-%COMP%]{flex:1}.file-name[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:500;margin:0 0 .25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.file-size[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.875rem;margin:0}.file-remove[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:6px;border:none;background:var(--hover-bg);color:var(--text-secondary);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease}.file-remove[_ngcontent-%COMP%]:hover{background:#ff4d4f1a;color:var(--error-color)}.file-remove[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.upload-progress-section[_ngcontent-%COMP%]{text-align:center}.upload-progress-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--text-primary);margin:0 0 2rem;font-size:1.5rem;font-weight:600}.progress-item[_ngcontent-%COMP%]{margin-bottom:1.5rem}.progress-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;color:var(--text-primary);font-weight:500}.progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:var(--bg-tertiary);border-radius:4px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));border-radius:4px;transition:width .3s ease}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:2rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text-primary);font-weight:500;margin-bottom:.5rem;font-size:.875rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.75rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;color:var(--text-primary);font-size:.9rem;transition:all .3s ease;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--gradient-middle);box-shadow:0 0 0 2px #4ecdc41a}.success-step[_ngcontent-%COMP%]{text-align:center;padding:2rem 0}.success-icon[_ngcontent-%COMP%]{width:80px;height:80px;background:#52c41a1a;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 2rem}.success-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px;color:var(--success-color)}.success-title[_ngcontent-%COMP%]{color:var(--text-primary);font-size:1.75rem;font-weight:600;margin:0 0 1rem}.success-message[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:1rem;line-height:1.5;margin:0 0 2rem;max-width:400px;margin-left:auto;margin-right:auto}.step-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:space-between;margin-top:2rem}.btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1.5rem;border-radius:8px;font-weight:500;cursor:pointer;transition:all .3s ease;border:none;font-size:.9rem;text-decoration:none}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:var(--bg-tertiary);color:var(--text-secondary);border:1px solid var(--border-color)}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--hover-bg);color:var(--text-primary)}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));color:var(--text-primary)}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9;transform:translateY(-1px)}.btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:16px;height:16px}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top:2px solid var(--text-primary);border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.upload-container[_ngcontent-%COMP%]{padding:1rem}.upload-card[_ngcontent-%COMP%]{padding:1.5rem}.upload-steps[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.5rem}.step-connector[_ngcontent-%COMP%]{width:30px}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.step-actions[_ngcontent-%COMP%]{flex-direction:column}.dropzone[_ngcontent-%COMP%]{padding:2rem 1rem}.upload-title[_ngcontent-%COMP%]{font-size:2rem}}@media (max-width: 480px){.upload-steps[_ngcontent-%COMP%]{display:none}.file-info[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:.5rem}.file-details[_ngcontent-%COMP%]{order:-1}}"]})}}return i})();var yS=[{path:"",component:pv},{path:"home",component:f_},{path:"users",component:hv,canActivate:[Eo]},{path:"upload-requests",component:_v,canActivate:[Eo]},{path:"analytics",component:yv,canActivate:[Eo]},{path:"songs",component:bv,canActivate:[Eo]},{path:"upload",component:vS,canActivate:[Eo]}];var EB="@",kB=(()=>{class i{constructor(e,n,r,o,a){this.doc=e,this.delegate=n,this.zone=r,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=H(w0,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-DJGTMOFV.js")).catch(n=>{throw new Ce(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:r})=>{this._engine=n(this.animationType,this.doc,this.scheduler);let o=new r(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(e,n){let r=this.delegate.createRenderer(e,n);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let o=new Jg(r);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let s=a.createRenderer(e,n);o.use(s)}).catch(a=>{o.use(r)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(n){qs()}}static{this.\u0275prov=U({token:i,factory:i.\u0275fac})}}return i})(),Jg=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,n,r){this.delegate.insertBefore(t,e,n,r)}removeChild(t,e,n){this.delegate.removeChild(t,e,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(t,e,n)),this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,n)),this.delegate.listen(t,e,n)}shouldReplay(t){return this.replay!==null&&t.startsWith(EB)}};function e0(i="animations"){return Tu("NgAsyncAnimations"),Hn([{provide:$s,useFactory:(t,e,n)=>new kB(t,e,n,i),deps:[le,al,he]},{provide:qr,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var xS=(i,t)=>{let e=sessionStorage.getItem("authToken");if(e){let n=i.clone({setHeaders:{Authorization:`Bearer ${e}`}});return t(n)}return t(i)};var wS={providers:[Ob(yS),e0(),Xu(),Xu(j0([xS])),e0()]};var CS=(()=>{class i{constructor(e,n,r){this.router=e,this.userService=n,this.authService=r,this.userMenuOpen=!1,this.activeRoute="",this.user$=this.userService.user}ngOnInit(){this.userService.getUserFromToken(),this.router.events.subscribe(()=>{this.activeRoute=this.router.url,console.log("Current route:",this.activeRoute)})}toggleUserMenu(){this.userMenuOpen=!this.userMenuOpen,console.log("User menu toggled:",this.userMenuOpen)}onDocumentClick(e){let n=document.querySelector(".user-container");n&&!n.contains(e.target)&&this.userMenuOpen&&(this.userMenuOpen=!1)}logout(){console.log("Logging out..."),this.authService.logout()}isActive(e){return this.activeRoute.startsWith(e)}static{this.\u0275fac=function(n){return new(n||i)(M(mt),M(Jt),M(nc))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-sidebar"]],hostBindings:function(n,r){n&1&&I("click",function(a){return r.onDocumentClick(a)},!1,x0)},standalone:!0,features:[se],decls:84,vars:7,consts:[[1,"sidebar"],[1,"logo-container"],[1,"logo"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"logo-icon"],["d","M9 18V5l12-2v13"],["cx","6","cy","18","r","3"],["cx","18","cy","16","r","3"],[1,"nav-menu"],["routerLink","/home","routerLinkActive","activebutton"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"],["points","9 22 9 12 15 12 15 22"],["routerLink","/users","routerLinkActive","activebutton"],["d","M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M23 21v-2a4 4 0 0 0-3-3.87"],["d","M16 3.13a4 4 0 0 1 0 7.75"],["routerLink","/songs","routerLinkActive","activebutton"],["routerLink","/upload","routerLinkActive","activebutton"],["d","M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"],["points","7 9 12 4 17 9"],["x1","12","y1","4","x2","12","y2","16"],["routerLink","/upload-requests","routerLinkActive","activebutton"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M4 4h16v10H4z"],["d","M4 14h16v4a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-4z"],["points","12 8 12 14"],["points","9 11 12 8 15 11"],["routerLink","/analytics","routerLinkActive","activebutton"],["x1","18","y1","20","x2","18","y2","10"],["x1","12","y1","20","x2","12","y2","4"],["x1","6","y1","20","x2","6","y2","14"],[1,"user-container"],[1,"user-profile-button",3,"click"],[1,"avatar"],["alt","User Avatar",3,"src"],[1,"user-info"],[1,"username"],[1,"role"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"dropdown-icon"],["points","6 9 12 15 18 9"],[1,"user-dropdown"],["routerLink","/settings",1,"dropdown-item"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"dropdown-item","logout",3,"click"],["d","M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"],["points","16 17 21 12 16 7"],["x1","21","y1","12","x2","9","y2","12"]],template:function(n,r){n&1&&(c(0,"div",0)(1,"div",1)(2,"h1",2),E(),c(3,"svg",3),_(4,"path",4)(5,"circle",5)(6,"circle",6),d(),f(7," MusiX "),d()(),F(),c(8,"nav",7)(9,"ul")(10,"li")(11,"a",8),E(),c(12,"svg",9),_(13,"path",10)(14,"polyline",11),d(),F(),c(15,"span"),f(16,"Home"),d()()(),c(17,"li")(18,"a",12),E(),c(19,"svg",9),_(20,"path",13)(21,"circle",14)(22,"path",15)(23,"path",16),d(),F(),c(24,"span"),f(25,"Users"),d()()(),c(26,"li")(27,"a",17),E(),c(28,"svg",9),_(29,"path",4)(30,"circle",5)(31,"circle",6),d(),F(),c(32,"span"),f(33,"Songs"),d()()(),c(34,"li")(35,"a",18),E(),c(36,"svg",9),_(37,"path",19)(38,"polyline",20)(39,"line",21),d(),F(),c(40,"span"),f(41,"Upload"),d()()(),c(42,"li")(43,"a",22),E(),c(44,"svg",23),_(45,"path",24)(46,"path",25)(47,"polyline",26)(48,"polyline",27),d(),F(),c(49,"span"),f(50,"Upload Requests"),d()()(),c(51,"li")(52,"a",28),E(),c(53,"svg",9),_(54,"line",29)(55,"line",30)(56,"line",31),d(),F(),c(57,"span"),f(58,"Analytics"),d()()()()(),c(59,"div",32)(60,"button",33),I("click",function(){return r.toggleUserMenu()}),c(61,"div",34),_(62,"img",35),d(),c(63,"div",36)(64,"p",37),f(65),d(),c(66,"p",38),f(67),d()(),E(),c(68,"svg",39),_(69,"polyline",40),d()(),F(),c(70,"div",41)(71,"a",42),E(),c(72,"svg",9),_(73,"path",43)(74,"circle",44),d(),F(),c(75,"span"),f(76,"Profile"),d()(),c(77,"button",45),I("click",function(){return r.logout()}),E(),c(78,"svg",9),_(79,"path",46)(80,"polyline",47)(81,"line",48),d(),F(),c(82,"span"),f(83,"Log Out"),d()()()()()),n&2&&(h(62),R("src","https://ui-avatars.com/api/?name=Admin&background=2a2a2a&color=fff",ci),h(3),N(r.user$.value.userName),h(2),N(r.user$.value.email),h(),$("open",r.userMenuOpen),h(2),$("show",r.userMenuOpen))},dependencies:[wl,Pb,xe],styles:['[_ngcontent-%COMP%]:root{--color-black: #000000;--color-white: #ffffff;--sidebar-bg: rgba(15, 15, 15, .95);--sidebar-border: rgba(255, 255, 255, .05);--text-primary: #ffffff;--text-secondary: #a0a0a0;--hover-bg: rgba(255, 255, 255, .05);--active-bg: rgba(255, 255, 255, .1)}.sidebar[_ngcontent-%COMP%]{width:220px;height:100vh;background:var(--color-black);border-right:1px solid rgb(106,106,106,.5)!important;display:flex;flex-direction:column;position:fixed;left:0;top:0;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);z-index:1000;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.logo-container[_ngcontent-%COMP%]{padding:2rem 1.5rem 1.5rem;border-bottom:1px solid rgb(106,106,106,.5)!important}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;font-size:1.5rem;font-weight:700;color:var(--text-primary);margin:0;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));-webkit-background-clip:text;background-clip:text;color:transparent}.logo-icon[_ngcontent-%COMP%]{width:28px;height:28px;stroke:var(--gradient-middle);stroke-width:2.5}.nav-menu[_ngcontent-%COMP%]{flex:1;padding:1.5rem 0;overflow-y:auto}.nav-menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.25rem}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0 1rem}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.875rem 1rem;color:var(--text-secondary);text-decoration:none;border-radius:8px;transition:all .3s ease;font-weight:500;font-size:.9rem;position:relative;overflow:hidden}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));opacity:0;transition:opacity .3s ease;z-index:-1}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--text-primary);background-color:var(--hover-bg);transform:translate(4px)}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:before{opacity:.1}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px;stroke-width:2;transition:all .3s ease}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{stroke:var(--gradient-middle);transform:scale(1.1)}.nav-menu[_ngcontent-%COMP%]   a.activebutton[_ngcontent-%COMP%]{color:var(--text-primary);background:linear-gradient(90deg,var(--gradient-start),var(--gradient-middle),var(--gradient-end));background-size:200% 200%;animation:_ngcontent-%COMP%_gradientShift 3s ease infinite;font-weight:600;box-shadow:0 4px 12px #0000004d}.nav-menu[_ngcontent-%COMP%]   a.activebutton[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:var(--color-white);transform:scale(1.05)}.nav-menu[_ngcontent-%COMP%]   a.activebutton[_ngcontent-%COMP%]:before{display:none}.user-container[_ngcontent-%COMP%]{border-top:1px solid rgb(106,106,106,.5)!important;position:relative;padding-bottom:10px}.user-profile-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:space-between;padding:.875rem 1rem;background:var(--hover-bg);border:1px solid var(--sidebar-border);border-radius:8px;color:var(--text-secondary);cursor:pointer;transition:all .3s ease;font-size:.9rem;font-weight:500}.user-profile-button[_ngcontent-%COMP%]:hover{background:var(--active-bg);border-color:#ffffff1a;color:var(--text-primary)}.avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;overflow:hidden;border:2px solid var(--sidebar-border)}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.user-info[_ngcontent-%COMP%]{flex:1;text-align:left;margin-left:.75rem}.username[_ngcontent-%COMP%]{font-weight:600;color:var(--color-white)!important;margin:0;font-size:.875rem}.role[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0;font-size:.75rem}.dropdown-icon[_ngcontent-%COMP%]{width:16px;height:16px;transition:transform .3s ease}.dropdown-icon.open[_ngcontent-%COMP%]{transform:rotate(180deg)}.user-dropdown[_ngcontent-%COMP%]{position:absolute;bottom:100%;left:1.5rem;right:1.5rem;background:#141414f2;border:1px solid var(--sidebar-border);border-radius:8px;-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);box-shadow:0 8px 32px #0000004d;opacity:0;visibility:hidden;transform:translateY(10px);transition:all .3s ease;z-index:1000;margin-bottom:.5rem}.user-dropdown.show[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.dropdown-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;padding:.875rem 1rem;color:var(--text-secondary);text-decoration:none;border:none;background:none;width:100%;text-align:left;cursor:pointer;transition:all .3s ease;font-size:.875rem;font-weight:500}.dropdown-item[_ngcontent-%COMP%]:first-child{border-radius:8px 8px 0 0}.dropdown-item[_ngcontent-%COMP%]:last-child{border-radius:0 0 8px 8px}.dropdown-item[_ngcontent-%COMP%]:hover{color:var(--text-primary);background:var(--hover-bg)}.dropdown-item.logout[_ngcontent-%COMP%]:hover{color:#ff4d4f;background:#ff4d4f1a}.dropdown-item[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:18px;height:18px;stroke-width:2}.dropdown-item.logout[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{stroke:#ff4d4f}@keyframes _ngcontent-%COMP%_gradientShift{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(-20px)}to{opacity:1;transform:translate(0)}}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease forwards}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(1){animation-delay:.1s}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){animation-delay:.2s}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){animation-delay:.3s}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4){animation-delay:.4s}.nav-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5){animation-delay:.5s}@media (max-width: 768px){.sidebar[_ngcontent-%COMP%]{width:100%;transform:translate(-100%);transition:transform .3s ease}.sidebar.open[_ngcontent-%COMP%]{transform:translate(0)}}.nav-menu[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}.nav-menu[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.nav-menu[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--sidebar-border);border-radius:2px}.nav-menu[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff1a}.nav-menu[_ngcontent-%COMP%]   a.loading[_ngcontent-%COMP%]{pointer-events:none;opacity:.6}.nav-menu[_ngcontent-%COMP%]   a.loading[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;right:1rem;width:12px;height:12px;border:2px solid transparent;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;transform:translateY(-50%)}@keyframes _ngcontent-%COMP%_spin{0%{transform:translateY(-50%) rotate(0)}to{transform:translateY(-50%) rotate(360deg)}}']})}}return i})();var SS=(()=>{class i{constructor(e){this.userService=e,this.user=this.userService.user,this.title="Music-Angular"}static{this.\u0275fac=function(n){return new(n||i)(M(Jt))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-root"]],standalone:!0,features:[se],decls:4,vars:0,consts:[[1,"app-container"],[1,"main-content"]],template:function(n,r){n&1&&(c(0,"div",0),_(1,"app-sidebar"),c(2,"div",1),_(3,"router-outlet"),d()())},dependencies:[Bm,CS],styles:[".app-container[_ngcontent-%COMP%]{display:flex;min-height:100vh;background-color:var(--dark-bg);color:var(--text-light)}.main-content[_ngcontent-%COMP%]{flex:1;margin-left:220px;transition:margin-left .3s ease;overflow-y:auto;min-height:100vh}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{margin-left:0}}"]})}}return i})();X0(SS,wS).catch(i=>console.error(i));
